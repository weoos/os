function Qs(){import.meta.url,import("_").catch(()=>1);async function*s(){}}function ai(s,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in s)){const a=Object.getOwnPropertyDescriptor(r,n);a&&Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var Xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cr(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ge={exports:{}};(function(s,e){(function(t,r){r(e)})(Xt,function(t){function r(f){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}function n(f,g){for(var p=0;p<g.length;p++){var d=g[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}function a(f){return function(g){if(Array.isArray(g))return o(g)}(f)||function(g){if(typeof Symbol<"u"&&g[Symbol.iterator]!=null||g["@@iterator"]!=null)return Array.from(g)}(f)||function(g,p){if(g){if(typeof g=="string")return o(g,p);var d=Object.prototype.toString.call(g).slice(8,-1);return(d=d==="Object"&&g.constructor?g.constructor.name:d)==="Map"||d==="Set"?Array.from(g):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?o(g,p):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(f,g){(g==null||g>f.length)&&(g=f.length);for(var p=0,d=new Array(g);p<g;p++)d[p]=f[p];return d}var i=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.usePrevEmit=!0,this._map={},this._prevData={}}var g,p,d;return g=f,d=[{key:"_",get:function(){return this.__||(this.__=new f),this.__}},{key:"usePrevEmit",get:function(){return this._.usePrevEmit},set:function(v){this._.usePrevEmit=v}},{key:"emit",value:function(v){for(var h,x=arguments.length,w=new Array(1<x?x-1:0),k=1;k<x;k++)w[k-1]=arguments[k];(h=this._).emit.apply(h,[v].concat(w))}},{key:"off",value:function(v,h){this._.off(v,h)}},{key:"clear",value:function(v){this._.clear(v)}},{key:"on",value:function(v,h){this._.on(v,h)}},{key:"once",value:function(v,h){this._.once(v,h)}},{key:"onWait",value:function(v){this._.onWait(v)}},{key:"head",value:function(v,h){this._.head(v,h)}},{key:"headOnce",value:function(v,h){this._.headOnce(v,h)}}],(p=[{key:"hasEvent",value:function(v){return!!this._map[v]}},{key:"on",value:function(v,h){var x=this;if(r(v)==="object"){var w,k=[];for(w in v)k.push(this.on(w,v[w]));return function(){k.forEach(function(A){return A()})}}if(!h)throw new Error("fn is required");var b=this._formatTarget(h);return this._checkPrev(v,b)&&b.once?function(){}:(this._getList(v).push(b),function(){x.off(v,b)})}},{key:"_formatTarget",value:function(v,h){return typeof v=="function"?{listener:v,once:h!=null&&h,prev:this.usePrevEmit}:(typeof h=="boolean"&&(v.once=h),v)}},{key:"emit",value:function(v){for(var h=arguments.length,x=new Array(1<h?h-1:0),w=1;w<h;w++)x[w-1]=arguments[w];this._prevData[v]=x;var k=this._map[v];if(!k)return!1;for(var b=0;b<k.length;b++){var A=k[b];A.listener.apply(A,x),A.once&&(k.splice(b,1),b--)}return!0}},{key:"off",value:function(v,h){if(v=this._map[v],!v)return!1;var x=v.findIndex(function(w){return w===h||w.listener===h});return x!==-1&&(v.splice(x,1),!0)}},{key:"clear",value:function(v){return!!this._map[v]&&(delete this._map[v],delete this._prevData[v],!0)}},{key:"onWait",value:function(v,h){var x=this;return new Promise(function(w){var k=function(){for(var b=arguments.length,A=new Array(b),F=0;F<b;F++)A[F]=arguments[F];return w(A)};h&&(k=Object.assign({listener:k},h)),x.once(v,k)})}},{key:"destroy",value:function(){this._map={},this._prevData={}}},{key:"_checkPrev",value:function(v,h){return h.prev?(v=this._prevData[v],v!==void 0&&(h.listener.apply(h,a(v)),!0)):!1}},{key:"once",value:function(v,h){return this.on(v,this._formatTarget(h,!0))}},{key:"head",value:function(v,h){var x=this,w=this._formatTarget(h);return this._checkPrev(v,w)&&w.once?function(){}:(this._getList(v).unshift(w),function(){x.off(v,h)})}},{key:"headOnce",value:function(v,h){return this.head(v,this._formatTarget(h,!0))}},{key:"_getList",value:function(v){var h=this._map[v];return h||(this._map[v]=h=[]),h}}])&&n(g.prototype,p),d&&n(g,d),Object.defineProperty(g,"prototype",{writable:!1}),f}();i.version="0.0.3",t.Eveit=i,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})})})(Ge,Ge.exports);var fr=Ge.exports;function Xe(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,r=Array(e);t<e;t++)r[t]=s[t];return r}function oi(s){if(Array.isArray(s))return Xe(s)}function ui(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function ci(s,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,pi(r.key),r)}}function fi(s,e,t){return ci(s.prototype,e),Object.defineProperty(s,"prototype",{writable:!1}),s}function li(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function hi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cr(s){return oi(s)||li(s)||mi(s)||hi()}function di(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var r=t.call(s,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}function pi(s){var e=di(s,"string");return typeof e=="symbol"?e:e+""}function mi(s,e){if(s){if(typeof s=="string")return Xe(s,e);var t={}.toString.call(s).slice(8,-1);return t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set"?Array.from(s):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Xe(s,e):void 0}}var Se=Symbol("E"),lr=function(s){return s[s.Fork=0]="Fork",s[s.Append=1]="Append",s}(lr||{}),Kr=function(){function s(){var e=this,t,r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.max,o=a===void 0?0:a,i=n.useStorage,f=i===void 0?!1:i,g=n.storageKey,p=g===void 0?"_def_history_stack":g,d=n.mode,v=d===void 0?0:d,h=n.storageProvider,x=n.onStepChange,w=n.onHistorySizeChange,k=n.onHistoryOut;if(ui(this,s),this.step=0,this.size=0,this.max=40,this.list=[],this.index=0,this.End=Se,this.isActive=!1,this.max=o,this.mode=v,f!==!1&&(h||p)&&(f=!0),f&&(this.storageProvider=h||{read:function(){var A=localStorage.getItem(p);return A?JSON.parse(A):[]},write:function(A){localStorage.setItem(p,JSON.stringify(A))}}),x&&(this.osc=function(){return x(e.step)}),w&&(this.ohsc=function(){return w(e.size)}),this.oho=k,(t=this.osc)===null||t===void 0||t.call(this),(r=this.ohsc)===null||r===void 0||r.call(this),f){var b=this.storageProvider.read();b instanceof Promise?b.then(function(A){e.useCache(A)}):this.useCache(b)}}return fi(s,[{key:"useCache",value:function(e){e.length!==0&&this.push.apply(this,Cr(e))}},{key:"setMax",value:function(e){this.max=e}},{key:"setStep",value:function(e){var t;this.step=e,(t=this.osc)===null||t===void 0||t.call(this)}},{key:"setHistoryIndex",value:function(e){var t;this.isActive||(this.isActive=!0),this.index=e,this.size=e,(t=this.ohsc)===null||t===void 0||t.call(this)}},{key:"back",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canBack(t))return t>1&&(this.setStep(this.step-this.index),this.setHistoryIndex(0)),this.End;this.setStep(this.step-t),this.setHistoryIndex(this.index-t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"canBack",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index-e>=0}},{key:"first",value:function(){return this.list.length===0?Se:(this.setStep(this.step-this.index),this.setHistoryIndex(0),this.list[0])}},{key:"last",value:function(){return this.list.length===0?Se:(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1),this.list[this.list.length-1])}},{key:"forward",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canForward(t))return t>1&&(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1)),this.End;this.setStep(this.step+t),this.setHistoryIndex(this.index+t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"isEnd",value:function(e){return e===Se}},{key:"canForward",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index+e<this.list.length}},{key:"pop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=this.list.length;if(t<=e){var r=Cr(this.list);return this.clear(),r}var n=t-e,a=this.list.splice(n),o=this.list.length;return o<this.index&&(this.setHistoryIndex(o),this.setStep(this.step-(this.index-o))),a}},{key:"push",value:function(){var e,t=this.list.length;this.index<t&&(this.step++,this.index++,this.mode===0&&this.list.splice(this.index));var r=arguments.length,n=0,a=r;this.max>0&&t+r>this.max&&(n=t+r-this.max,a=r-n),(e=this.list).push.apply(e,arguments),n&&this.list.splice(0,n),this._onListChange(),a&&(this.mode===1?this.setHistoryIndex(this.list.length):this.setHistoryIndex(this.index+a)),this.mode===1?this.setStep(this.list.length):this.setStep(this.step+a),this.isActive&&(this.isActive=!1)}},{key:"clear",value:function(){this.list=[],this._onListChange(),this.setHistoryIndex(0),this.setStep(0),this.isActive=!1}},{key:"replace",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.index;typeof this.list[t]>"u"||(this.list[t]=e,this._onListChange())}},{key:"isLatest",get:function(){return this.index===this.list.length-1}},{key:"_onListChange",value:function(){var e;(e=this.storageProvider)===null||e===void 0||e.write(this.list)}},{key:"current",value:function(){return this.list[this.index]}}])}();Kr.Mode=lr;function qe(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,r=Array(e);t<e;t++)r[t]=s[t];return r}function yi(s){if(Array.isArray(s))return qe(s)}function Pe(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function gi(s,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,ki(r.key),r)}}function Fe(s,e,t){return e&&gi(s.prototype,e),Object.defineProperty(s,"prototype",{writable:!1}),s}function vi(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function wi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _i(s){return yi(s)||vi(s)||xi(s)||wi()}function bi(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var r=t.call(s,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}function ki(s){var e=bi(s,"string");return typeof e=="symbol"?e:e+""}function ge(s){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(s)}function xi(s,e){if(s){if(typeof s=="string")return qe(s,e);var t={}.toString.call(s).slice(8,-1);return t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set"?Array.from(s):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?qe(s,e):void 0}}function hr(s){return!!(s!=null&&s.__isRef)}var Je=null;function Si(s){return Je=s,function(){Je=null}}function Vr(){return Je}var Ei=function(){function s(e,t){var r=this;Pe(this,s),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=e,this._set=t;var n=Si(function(a,o){var i=function(){if(r._dirty=!0,r._listeners.length>0){var g=r._value,p=r.value;r._listeners.forEach(function(d){d(p,g)})}},f=typeof o=="string"?a.$sub(o,i):a.sub(i);r._clearSub.push(f)});this._refreshValue(),n()}return Fe(s,[{key:"value",get:function(){var e;return this._dirty&&this._refreshValue(),qr(this),(e=Vr())===null||e===void 0||e(this),this._value},set:function(e){if(!this._set){console.warn("Computed not have set property");return}this._set(e)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(e){var t=this;return this._listeners.push(e),function(){return t.unsub(e)}}},{key:"unsub",value:function(e){var t=this._listeners.indexOf(e);return t!==-1?(this._listeners.splice(t,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(e){return e()}),this._clearSub=[]}}])}();function Ci(s,e){return ze(s)?s:new Ei(s,e)}function ze(s){return!!(s!=null&&s.__isComputed)}function Gr(s){return typeof s=="function"||ze(s)}function Xr(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={},r={},n={$sub:function(p,d){return t[p]||(t[p]=[]),t[p].push(d),function(){n.$unsub(p,d)}},$unsub:function(p,d){if(t[p]){if(typeof d>"u")return delete t[p],!0;var v=t[p].indexOf(d);return v===-1?!1:(t[p].splice(v,1),!0)}},$get:function(p){return r[p]}},a={},o=function(p){var d=s[p];r[p]=d,a[p]={get:function(){var v;qr(n,p),(v=Vr())===null||v===void 0||v(n,p);var h=r[p];return h},set:function(v){var h,x=r[p];r[p]=v,(h=t[p])===null||h===void 0||h.forEach(function(w){w(v,x)})}},n[p]=d};for(var i in s)o(i);Object.defineProperties(n,a);var f=function(p){n[p]=function(){for(var d=arguments.length,v=new Array(d),h=0;h<d;h++)v[h]=arguments[h];return e[p].apply(n,v)}};for(var g in e)f(g);return n}var ye={};function qr(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t;ze(s)||hr(s)?(e="value",t=function(r){return s.sub(r)}):t=function(r){return s.$sub(e,r)},Object.assign(ye,{set:function(r){s[e]=r},get:function(){return s[e]},sub:t})}function Ai(s,e){if(!ye)throw new Error("Bind 传入参数错误");(ze(e)||hr(e))&&(e=e.value);var t=ye.get,r=ye.set,n=ye.sub;if(t()!==e)throw new Error("Bind 传入参数错误");var a=s.el,o="string";if(a.tagName==="INPUT"){var i=s.attr("type");i==="number"||i==="range"?o="number":(i==="radio"||i==="checkbox")&&(o="boolean")}var f=function(){if(o==="boolean")return a.checked;var v=s.value();return o==="number"?parseFloat(v):v},g=function(v){if(o==="boolean"){a.checked=v;return}s.value(v)},p=!1,d=function(){p=!0,r(f()),p=!1};g(t()),s.on("input",function(){d()}),s.on("change",function(){d()}),n(function(v){p||g(v)})}function ne(s,e){if(hr(s))s.sub(function(){e(s.value,!1)}),e(s.value,!0);else if(Gr(s)){var t=Ci(s);t.sub(function(){e(t.value,!1)}),e(t.value,!0)}else return e(s,!0),!1;return!0}var Jr=function(){function s(e){Pe(this,s),this.__ld_type=Oe.Text,this.el=document.createTextNode(""),typeof e<"u"&&this.text(e)}return Fe(s,[{key:"text",value:function(e){var t=this;return ne(e,function(r){return t.el.textContent=r}),this}},{key:"mounted",value:function(e){return this.__mounted=e,this}}])}(),Ii=function(){function s(){Pe(this,s),this.__ld_type=Oe.Frag,this.children=[],this.el=document.createDocumentFragment()}return Fe(s,[{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return dr(r,function(a,o){e.children.push(o),e.el.appendChild(a)}),this}},{key:"mounted",value:function(e){return this.__mounted=function(t){t.children.forEach(function(r){var n;(n=r.__mounted)===null||n===void 0||n.call(r,r)}),e(t)},this}}])}(),Oe=function(s){return s[s.Dom=0]="Dom",s[s.Text=1]="Text",s[s.Frag=2]="Frag",s}(Oe||{});function dr(s,e){s.forEach(function(t){var r;if(Array.isArray(t)){dr(t,e);return}var n=t;Gr(n)?(n=new Jr(n),n=n.el):typeof n.__ld_type=="number"?n=n.el:t instanceof HTMLElement||(n=document.createTextNode("".concat(t))),e(n,t),(r=t.__mounted)===null||r===void 0||r.call(t,t)})}var Bi=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,Ar=/!important$/,Ti=/^[0-9]+$/;function Pi(s,e){s=Fi(s);var t="";return Ar.test(e)&&(t="important",e=e.replace(Ar,"")),Ti.test(e)&&Bi.test(s)&&(e="".concat(e,"px")),{cssKey:s,cssValue:e,important:t}}function Fi(s){for(var e=s.length,t="",r=0;r<e;r++){var n=s[r],a=n.charCodeAt(0);a>=65&&a<=90?t+="-".concat(n.toLowerCase()):t+=n}return t}var zi=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function Qr(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(e){var r=t.querySelector(s);if(r)return new ae(r);throw new Error("Element is not exist"+s)}for(var n=t.querySelectorAll(s),a=[],o=0;o<n.length;o++)a.push(new ae(n[o]));return a}var jt=function(){var s=function(t){return new ae(t)},e={frag:{get:function(){return new Ii}},text:{get:function(){var t=function(r){return new Jr(r)};return t.text=t,t}}};return zi.forEach(function(t){e[t]={get:function(){return s(t)}}}),Object.defineProperties(s,e),s}();function Oi(s,e){var t,r=e;r=Qr(e,!0),Array.isArray(s)?(t=r).append.apply(t,_i(s)):r.append(s)}var ae=function(){function s(e){Pe(this,s),this.__ld_type=Oe.Dom,this.__xr_funcs={},this.el=typeof e=="string"?document.createElement(e):e}return Fe(s,[{key:"_ur",value:function(e,t){var r=this;return typeof t>"u"?this.el[e]:(ne(t,function(n){return r.el[e]=n}),this)}},{key:"class",value:function(e){return this._ur("className",e)}},{key:"id",value:function(e){return this._ur("id",e)}},{key:"addClass",value:function(e){return this.el.classList.add(e),this}},{key:"removeClass",value:function(e){return this.el.classList.remove(e),this}},{key:"hasClass",value:function(e){var t;return(t=this.el)===null||t===void 0?void 0:t.classList.contains(e)}},{key:"toggleClass",value:function(e,t){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(e,t))}},{key:"remove",value:function(){var e;return(e=this.el)===null||e===void 0||e.remove(),this}},{key:"text",value:function(e){return typeof e>"u"?this.el.innerText:this._ur("innerText",e)}},{key:"mounted",value:function(e){return this.__mounted=e,this}},{key:"attr",value:function(e,t){var r=this;if(ge(e)==="object"){for(var n in e)this.attr(n,e[n]);return this}return typeof t>"u"?this.el.getAttribute(e)||"":(ne(t,function(a){return r.el.setAttribute(e,a)}),this)}},{key:"removeAttr",value:function(e){return this.el.removeAttribute(e),this}},{key:"func",value:function(e,t){return typeof t>"u"?this.__xr_funcs[e]:(this.__xr_funcs[e]=t,this)}},{key:"data",value:function(e,t){var r=this;if(ge(e)==="object"){for(var n in e)this.data(n,e[n]);return this}if(typeof t>"u"){var a;return((a=this.el.__xr_data)===null||a===void 0?void 0:a[e])||null}return this.el.__xr_data||(this.el.__xr_data={}),ne(t,function(o){return r.el.__xr_data[e]=o}),this}},{key:"style",value:function(e,t){var r=this.el.style;if(typeof t<"u")return ne(t,function(a){var o=Pi(e,a),i=o.important,f=o.cssValue,g=o.cssKey;r.setProperty(g,f,i)}),this;if(typeof e=="string")return r[e];for(var n in e)this.style(n,e[n]);return this}},{key:"value",value:function(e){return this._ur("value",e)}},{key:"html",value:function(e){return this._ur("innerHTML",e)}},{key:"outerHtml",value:function(e){var t=this;return typeof e>"u"?this.el.outerHTML:(ne(e,function(r){t.html(r),t.el=t.el.children[0]}),this)}},{key:"child",value:function(e){var t=this.el.children[e];return t?new s(t):null}},{key:"children",value:function(){for(var e=this.el.children.length,t=[],r=0;r<e;r++)t.push(this.child(r));return t}},{key:"click",value:function(e){return this.on("click",e)}},{key:"on",value:function(e,t){if(ge(e)==="object"){for(var r in e)this.on(r,e[r]);return this}var n=this.el;if(typeof t=="function")this.el.addEventListener(e,t);else{var a,o=function(i){var f;t.self&&i.target!==n||(t.stop&&i.stopPropagation(),t.prevent&&i.preventDefault(),t.once&&n.removeEventListener(e,o,t.capture),(f=t.listener)===null||f===void 0||f.call(t,i))};n.addEventListener(e,o,(a=t.capture)!==null&&a!==void 0?a:!1)}return this}},{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return dr(r,function(a){e.el.appendChild(a)}),this}},{key:"ref",value:function(e){return e(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",e)}},{key:"show",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return ne(e,function(n){t.display(n?r:"none")}),this}},{key:"query",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Qr(e,t,this.el)}},{key:"src",value:function(e){return this._ur("src",e)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(e){return this.attr("__xr_name",e)}},{key:"find",value:function(e){return this.query('[__xr_name="'.concat(e,'"]'),!0)}},{key:"type",value:function(e){return this.attr("type",e)}},{key:"bind",value:function(e){return Ai(this,e),this}}])}();function Ir(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,r=Array(e);t<e;t++)r[t]=s[t];return r}function Br(s,e){var t=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!t){if(Array.isArray(s)||(t=Di(s))||e){t&&(s=t);var r=0,n=function(){};return{s:n,n:function(){return r>=s.length?{done:!0}:{done:!1,value:s[r++]}},e:function(f){throw f},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){t=t.call(s)},n:function(){var f=t.next();return o=f.done,f},e:function(f){i=!0,a=f},f:function(){try{o||t.return==null||t.return()}finally{if(i)throw a}}}}function Di(s,e){if(s){if(typeof s=="string")return Ir(s,e);var t={}.toString.call(s).slice(8,-1);return t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set"?Array.from(s):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ir(s,e):void 0}}var tn="  ";function Ri(s){tn=s}function Li(s){Ni(this,s,tn)}function Ni(s,e,t){var r=t.length;if(e.code==="Tab"){e.preventDefault();var n=Tr(s),a=n.startLineIndex,o=n.start,i=n.end,f=n.lineText.split("\n");if(e.shiftKey){var g=!0,p=Br(f),d;try{for(p.s();!(d=p.n()).done;){var v=d.value;v.startsWith(t)?(s.selectionStart=a,s.selectionEnd=a+r,document.execCommand("delete",!1),g&&v.startsWith(t+t)&&(o-=r),i-=r,a+=v.length-r+1):a+=v.length+1,g=!1}}catch(N){p.e(N)}finally{p.f()}console.log(o,i),s.selectionStart=o,s.selectionEnd=i;return}if(f.length===1){$e(t);return}o+=r;var h=Br(f),x;try{for(h.s();!(x=h.n()).done;){var w=x.value;s.selectionStart=s.selectionEnd=a,$e(t),a+=r+w.length+1,i+=r}}catch(N){h.e(N)}finally{h.f()}s.selectionStart=o,s.selectionEnd=i}else if(e.code==="Enter"&&!e.ctrlKey){for(var k=Tr(s),b=k.lineText.split("\n")[0],A="\n",F=0;b.substring(F,F+r)===t;)A+=t,F+=r;F>0&&($e(A),e.preventDefault())}}function $e(s){s&&document.execCommand("insertText",!1,s)}function Tr(s){var e=s.selectionStart,t=s.selectionEnd,r="",n=s.value;r=n.substring(e,t);var a=n.substring(0,e),o=a.lastIndexOf("\n"),i=o+1;return{start:e,end:t,text:r,lineText:n.substring(i,t),line:r.split("\n").length,startLineIndex:i}}(function(){try{if(typeof document<"u"){var s=document.createElement("style");s.appendChild(document.createTextNode(".style-text{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.full-parent{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea::-webkit-scrollbar,.web-term-container::-webkit-scrollbar{width:5px;cursor:pointer;height:5px}.editor-textarea::-webkit-scrollbar-button,.web-term-container::-webkit-scrollbar-button{display:none}.editor-textarea::-webkit-scrollbar-track,.web-term-container::-webkit-scrollbar-track{display:none}.editor-textarea::-webkit-scrollbar-thumb,.web-term-container::-webkit-scrollbar-thumb{background-color:#777;cursor:pointer}.editor-textarea ::selection,.web-term-container ::selection{background-color:var(--selection-bg);color:var(--selection)}.web-term-container{position:relative;font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box;background-color:var(--background);color:var(--color);cursor:text}.web-term-container *{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.editor-cursor{position:absolute;z-index:2;height:var(--line-height);background-color:var(--background);color:var(--color)}.editor-cursor.cursor-focus{background-color:var(--selection-bg);color:var(--selection)}.editor-cursor .editor-cursor-border{position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid var(--selection-bg)}.editor-cursor .editor-cursor-text{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea{color:var(--color)}.term-editor-title{color:var(--color);opacity:.7}.term-display-box>div,.term-below-box>div{padding:2px 0;word-break:break-all;white-space:pre-wrap;color:var(--color)}.term-display-box>div a,.term-below-box>div a{opacity:.7}.term-below-box>div{opacity:.7}")),document.head.appendChild(s)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();function Qe(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,r=Array(e);t<e;t++)r[t]=s[t];return r}function Ui(s){if(Array.isArray(s))return Qe(s)}function ji(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function pr(s,e,t){return e=Ie(e),Zi(s,en()?Reflect.construct(e,[],Ie(s).constructor):e.apply(s,t))}function he(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function Mi(s,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,rn(r.key),r)}}function de(s,e,t){return e&&Mi(s.prototype,e),Object.defineProperty(s,"prototype",{writable:!1}),s}function Wi(s,e,t){return(e=rn(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function Ie(s){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ie(s)}function mr(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),e&&tr(s,e)}function en(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(en=function(){return!!s})()}function $i(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Hi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pr(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,r)}return t}function _e(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pr(Object(t),!0).forEach(function(r){Wi(s,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Pr(Object(t)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(t,r))})}return s}function Zi(s,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ji(s)}function tr(s,e){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},tr(s,e)}function Yi(s){return Ui(s)||$i(s)||Vi(s)||Hi()}function Ki(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var r=t.call(s,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}function rn(s){var e=Ki(s,"string");return typeof e=="symbol"?e:e+""}function Vi(s,e){if(s){if(typeof s=="string")return Qe(s,e);var t={}.toString.call(s).slice(8,-1);return t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set"?Array.from(s):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Qe(s,e):void 0}}var Gi=function(){function s(e,t){var r=this;he(this,s),this.pushedCurrent=!1,this.provider=t,this.history=new Kr({max:e,mode:lr.Append});var n=t.read();n instanceof Promise?n.then(function(a){r._initHistory(a)}):this._initHistory(n)}return de(s,[{key:"_initHistory",value:function(e){var t,r=JSON.parse(e);(t=this.history).push.apply(t,Yi(r))}},{key:"up",value:function(e){if(this.history.isActive||(this.push(e),this.history.back(),this.pushedCurrent=!0),this.history.canBack()){var t=this.history.back();return t}else return null}},{key:"down",value:function(){return this.history.canForward()?this.history.forward():null}},{key:"checkLatest",value:function(e){this.history.isLatest&&(this.history.replace(e),this.save())}},{key:"push",value:function(e){this.pushedCurrent&&(this.history.pop(),this.pushedCurrent=!1),this.history.push(e),this.save()}},{key:"save",value:function(){this.provider.write(JSON.stringify(this.history.list))}},{key:"clear",value:function(){this.pushedCurrent=!1,this.history.clear(),this.save()}}])}();function Fr(){var s=navigator.userAgent;return/macintosh|mac os x/i.test(s)}function er(s){return Fr()&&s.metaKey||!Fr()&&s.ctrlKey}function Xi(s){var e=!1;return s.on("compositionstart",function(){e=!0}),s.on("compositionend",function(){e=!1}),function(){return e}}function nn(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return s instanceof HTMLElement?new ae(s):s instanceof ae?s:typeof s=="string"?jt.div[e?"html":"text"](s+t):jt.div[e?"html":"text"](s.toString()+t)}var qi=function(){function s(){he(this,s),this.container=jt.div.class("term-display-box").on("click",function(e){e.stopPropagation()})}return de(s,[{key:"pushContent",value:function(e,t){this.container.append(nn(e,t,"\n"))}}])}(),zr="web-term-container",Ji=2,sn={FullParent:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},an={padding:5,fontSize:14,color:"#fff",background:"#000",selectionBackground:"#fff",selectionColor:"#000"};function Qi(s){if(!s)return!1;var e=s.charCodeAt(0);return e>=128}var on=function(s){function e(t){var r,n=t.header,a=n===void 0?"":n,o=t.paddingTop,i=o===void 0?5:o,f=t.paddingLeft,g=f===void 0?5:f,p=t.size,d=p===void 0?"full":p,v=t.mode,h=v===void 0?"inline":v,x=t.tab,w=x===void 0?"  ":x,k=t.fontSize,b=k===void 0?an.fontSize:k;he(this,e),r=pr(this,e),r.SingleCharWidth=9,r.MultiCharWidth=15,r.fontSize=0,r.lineHeight=0,r.wrapLine=!0,r.store=Xr({cx:0,cy:0}),r.header="",r._prevHeader="",r._prevHeaderWidth=0,r._pasteTimer=null,r._prevPos={x:-1,y:-1},r._isShowCursor=!1,r.setFontSize(b),r.size=d,r.mode=h,Ri(w),r.paddingTop=i,r.paddingLeft=g;var A=jt.canvas;return r.ctx=A.el.getContext("2d"),r.resize(!0),r.header=a,r.render(),r._monitorStart(),r}return mr(e,s),de(e,[{key:"setFontSize",value:function(t){this.fontSize=t,this.lineHeight=t+2}},{key:"value",get:function(){var t=this.fullValue,r=this.header.length;return r?t.substring(r):t}},{key:"fullValue",get:function(){return this.textarea.value()}},{key:"beforeValue",get:function(){var t=this.fullValue,r=this.header.length,n=this.textarea.el.selectionStart;return typeof n=="number"&&n>0?t.substring(r,n):t.substring(r)}},{key:"headerWidth",get:function(){var t=this.header;return(t!==this._prevHeader||this._prevHeaderWidth<0)&&(this._prevHeader=t,this._prevHeaderWidth=this.measureTextWidth(t)),this._prevHeaderWidth}},{key:"_monitorStart",value:function(){var t=this;setTimeout(function(){t.textarea.el.clientWidth?t.relocateCursorPosition():t._monitorStart()},100)}},{key:"render",value:function(){var t=this.size==="full";this.container=jt.div.style({position:"relative",height:t?"100%":"".concat(this.lineHeight+2*this.paddingTop,"px")}).append(this.cursor=jt.div.class("editor-cursor").append(jt.div.class("editor-cursor-border"),this.cursorText=jt.div.class("editor-cursor-text")),this.textarea=jt.textarea.class("editor-textarea").value(this.header).style(_e(_e({},sn.FullParent),{},{padding:"".concat(this.paddingTop,"px ").concat(this.paddingLeft,"px"),backgroundColor:"transparent",border:"none",outline:"none",resize:"none",zIndex:"1",caretColor:"transparent"}))),this.wrapLine&&this.textarea.style({wordBreak:"break-all",whiteSpace:"pre-wrap"}),this.initEvents()}},{key:"initEvents",value:function(){var t=this,r=!1,n=this.textarea.el,a=function(p){return p.code==="Backspace"||p.code==="Enter"},o=Xi(this.textarea),i=null,f=this.compatSelChange();this.textarea.on("keydown",function(p){if(!o()){if(t.mode==="inline"){if(p.code==="Enter")if(er(p))t.pushText("\n");else{p.preventDefault(),t.emit("key","Enter");return}else if(p.code==="ArrowUp"||p.code==="ArrowDown"||p.code==="Tab"){p.preventDefault(),t.emit("key",p.code);return}}if(p.code==="Tab"&&n.selectionStart!==n.selectionEnd&&t.showCursor(!1),Li.call(n,p),a(p)&&(r=!0),p.code==="Backspace"){var d=t.getCursorPosition(),v=d.x,h=d.y,x=d.isRange;h===0&&v<=t.headerWidth&&!x&&p.preventDefault()}er(p)&&p.code==="KeyZ"&&(clearTimeout(i),i=setTimeout(function(){t.relocateCursorPosition()},50))}}).on("keyup",function(p){o()||a(p)&&(r=!1)}).on("paste",function(){t._pasteTimer=setTimeout(function(){t.relocateCursorPosition()},50)}).on("input",function(p){if(p.preventDefault(),r&&t.relocateCursorPosition(),t.size==="auto"){var d=t._countContentHeight(t.fullValue,!0);d!=n.clientHeight&&t.textarea.style("height","".concat(d,"px"))}t.emit("input")}).on("selectionchange",function(){f&&(f(),f=null),t._onSelectionChange()}).on("scroll",function(){t.relocateCursorPosition()}).on("focus",function(){t.cursor.addClass("cursor-focus")}).on("blur",function(){t.cursor.removeClass("cursor-focus")}).on("cut",function(){var p=t.textarea.el;p.selectionStart!==p.selectionEnd&&t.relocateCursorPosition()});var g=n.clientWidth;globalThis.addEventListener("resize",function(){n.clientWidth!==g&&(g=n.clientWidth,t.relocateCursorPosition())})}},{key:"_countContentHeight",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._countContentSize(t,r).height}},{key:"_countContentSize",value:function(t){var r=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=t.split("\n"),o=0,i=a.map(function(f){var g=r.countSingleLineInfo(f);return o+=g.length*r.lineHeight,g});return{lines:i,height:o+(n?2*this.paddingTop:0)}}},{key:"countSingleLineInfo",value:function(t){var r=this,n=this._getLineBoxWidth();if(n<=0)return[{content:t,width:this.measureTextWidth(t)}];var a=Math.floor(n/this.MultiCharWidth);if(t.length<=a)return[{content:t,width:this.measureTextWidth(t)}];for(var o=[],i=t.length,f=0,g=f+a,p=function(){var k=t.substring(f,g);return{content:k,width:r.measureTextWidth(k)}};i>a;){var d=p(),v=d.content,h=d.width,x=void 0,w=void 0;do{if(x=v,w=h,g>=t.length){g++;break}v+=t[g],h=this.measureTextWidth(v),g++}while(h<=n);o.push({content:x,width:w}),f=g-1,g=f+a,i-=x.length}return f<t.length&&o.push(p()),o}},{key:"_onSelectionChange",value:function(){var t=this.textarea.el;if(t.selectionStart===t.selectionEnd)this.relocateCursorPosition();else{if(t.clientWidth===0)return;var r=this.header.length;t.selectionStart<r&&(t.selectionStart=r);var n=t.value.length;t.selectionEnd>n&&(t.selectionEnd=n)}}},{key:"compatSelChange",value:function(){var t=this,r=function(){var n=t.textarea.el;document.activeElement===n&&t._onSelectionChange()};return document.addEventListener("selectionchange",r),function(){return document.removeEventListener("selectionchange",r)}}},{key:"measureTextWidth",value:function(t){return t?this.ctx.measureText(t).width:0}},{key:"_getLineBoxWidth",value:function(){return this.textarea.el.clientWidth-2*this.paddingLeft}},{key:"getCursorPosition",value:function(){var t=this.textarea.el,r=t.selectionStart,n=t.selectionEnd,a=t.value.substring(0,r),o=this._getLineBoxWidth(),i=t.value[r]||"",f=0,g=0;if(this.wrapLine){var p,d=this._countContentSize(a);g=d.height-this.lineHeight,f=((p=d.lines.pop())===null||p===void 0||(p=p.pop())===null||p===void 0?void 0:p.width)||0}else f=this.measureTextWidth(a),g=(a.split("\n").length-1)*this.lineHeight;var v=Qi(i)?this.MultiCharWidth:this.SingleCharWidth;return f+v>o&&(f=0,g+=this.lineHeight),(this._prevPos.x!==f||this._prevPos.y!==g)&&(Object.assign(this._prevPos,{x:f,y:g}),this.emit("cursor-change",{x:f,y:g,word:i,wordWidth:v,beforeValue:this.beforeValue,value:this.value})),{x:f,y:g,isRange:r!=n,word:i,wordWidth:v}}},{key:"showCursor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._isShowCursor!==t&&(this.cursor.style("visibility",t?"visible":"hidden"),this._isShowCursor=t)}},{key:"relocateCursorPosition",value:function(){clearTimeout(this._pasteTimer);var t=this.textarea.el;this.showCursor();var r=this.getCursorPosition(),n=r.x,a=r.y,o=r.word,i=r.wordWidth,f=n;if(a===0&&n<this.headerWidth){var g=this.header.length;t.setSelectionRange(g,g),f=this.headerWidth}this.cursor.style({left:"".concat(f+this.paddingLeft,"px"),top:"".concat(a+this.paddingTop-t.scrollTop,"px"),width:"".concat(i,"px")}),this.cursorText.text(o)}},{key:"focus",value:function(){this.textarea.el.focus()}},{key:"pushText",value:function(t){var r=this.textarea.el;r.selectionStart=r.selectionEnd=r.value.length,this.insertText(t)}},{key:"insertText",value:function(t){t&&document.execCommand("insertText",!1,t)}},{key:"replaceText",value:function(t){this.clearContent(!1),this.pushText(t),this.relocateCursorPosition()}},{key:"clearContent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=this.textarea.el,n=r.value,a=!n.startsWith(this.header),o=this.header.length;r.selectionStart=a?0:o,r.selectionEnd=n.length+1,o!==n.length&&(document.execCommand("delete",!1),a&&this.insertText(this.header),t&&this.relocateCursorPosition())}},{key:"setCursorToHead",value:function(){var t=this.textarea.el;t.selectionStart=t.selectionEnd=this.header.length}},{key:"resize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.ctx.font="".concat(this.fontSize,'px Menlo, Monaco, "Courier New", monospace'),this.SingleCharWidth=this.measureTextWidth("a"),this.MultiCharWidth=this.measureTextWidth("一"),!t){this._prevHeaderWidth=-1;var r=this.size==="full";r||this.container.style("height","".concat(this.lineHeight+2*this.paddingTop,"px")),this.relocateCursorPosition()}}}])}(fr.Eveit),ts=function(s){function e(t,r){var n;return he(this,e),n=pr(this,e),n.editor=new on({mode:"full",paddingLeft:0,paddingTop:0,fontSize:r.fontSize}),n.container=jt.div.style(_e(_e({},sn.FullParent),{},{padding:r.padding,position:"relative",zIndex:100,flexDirection:"column"})).append(n.title=jt.div.class("term-editor-title").text(""),n.editor.container.style({flex:"1",height:"auto"})).show(function(){return t.showEditor},"flex"),n.container.on("click",function(a){a.stopPropagation()}),n.container.on("keydown",function(a){if(a.code==="KeyS"&&er(a)){var o=n.editor.value;n.editor.clearContent(),n.emit("edit-done",o),a.preventDefault()}a.code==="Escape"&&(n.editor.clearContent(),n.emit("edit-cancel"))}),n}return mr(e,s),de(e,[{key:"vi",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.editor.textarea.el.focus(),this.editor.replaceText(t),this.title.style({paddingBottom:r?"5px":0})[n?"html":"text"](r)}}])}(fr.Eveit),es=function(){function s(){he(this,s),this.container=jt.div.class("term-below-box").on("click",function(e){e.stopPropagation()})}return de(s,[{key:"write",value:function(e,t){var r=this.container.children();r.length>0&&r[r.length-1].remove(),this.push(e,t)}},{key:"push",value:function(e,t){this.container.append(nn(e,t,"\n"))}},{key:"clear",value:function(){this.container.empty()}}])}();function rs(){var s="_web_term_ui_history;";return{read:function(){return localStorage.getItem(s)||"[]"},write:function(e){return localStorage.setItem(s,e),!0}}}var ns=function(s){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.title,a=n===void 0?"":n,o=r.titleHtml,i=o===void 0?!0:o,f=r.historyMax,g=f===void 0?100:f,p=r.storageProvider,d=p===void 0?rs():p,v=r.container,h=r.header,x=r.theme,w=r.style,k=w===void 0?{}:w;if(he(this,e),t=pr(this,e),t.style=_e({},an),t.store=Xr({showEditor:!1}),t.theme="dark",t.title=a,t.history=new Gi(g,d),Object.assign(t.style,k),t.editor=new ts(t.store,t.style),t.input=new on({paddingTop:Ji,paddingLeft:0,header:h,size:"auto",mode:"inline",fontSize:t.style.fontSize}),t.display=new qi,t.below=new es,a&&t.display.pushContent(a,i),!v)t.container=jt.div.class(zr).style({position:"fixed",top:0,left:0,width:"100%",height:"100%"}),Oi(t.container,"body");else{if(typeof v=="string"){var b=document.querySelector(v);if(!b)throw new Error("Container not exists");t.container=new ae(b)}else t.container=new ae(v);t.container.addClass(zr)}return t.initEvents(),x?t.setTheme(x):t.setColor(k),t._setFontSize(t.style.fontSize),t.render(),t}return mr(e,s),de(e,[{key:"value",get:function(){return this.input.value}},{key:"beforeValue",get:function(){return this.input.beforeValue}},{key:"header",get:function(){return this.input.header}},{key:"initEvents",value:function(){var t=this;this.input.on("key",function(n){switch(n){case"Enter":{var a=t.input.value;a&&t.history.push(a),t.emit("enter",a)}break;case"ArrowDown":{var o=t.history.down();typeof o=="string"&&t.input.replaceText(o)}break;case"ArrowUp":{var i=t.history.up(t.input.value);typeof i=="string"?t.input.replaceText(i):t.input.setCursorToHead()}break;case"Tab":t.emit("tab",t.input.beforeValue);break}}),this.input.on("input",function(){t.history.checkLatest(t.input.value),t.emit("input",t.value,t.input.beforeValue)}),this.container.on("click",function(){t.input.focus()});var r=function(){t.store.showEditor=!1,t.input.focus()};this.editor.on("edit-done",function(n){r(),t.emit("edit-done",n)}),this.editor.on("edit-cancel",function(){r(),t.emit("edit-cancel")}),this.editor.editor.on("cursor-change",function(n){t.emit("edit-cursor-change",n)}),this.input.on("cursor-change",function(n){t.emit("cursor-change",n)})}},{key:"render",value:function(){var t=this;this.container.style({overflow:function(){return t.store.showEditor?"hidden":"auto"}}).append(this.mainContainer=jt.div.style("padding",this.style.padding).append(this.display.container,this.input.container,this.below.container).show(function(){return!t.store.showEditor}),this.editor.container)}},{key:"setTheme",value:function(t){var r="#fff",n="#000",a=t==="light";this.theme=t,this.setColor({background:a?r:n,color:a?n:r,selectionBackground:a?n:r,selectionColor:a?r:n})}},{key:"setColor",value:function(t){Object.assign(this.style,t),this.container.style({"--background":this.style.background,"--color":this.style.color,"--selection":this.style.selectionColor,"--selection-bg":this.style.selectionBackground})}},{key:"_setFontSize",value:function(t){this.style.fontSize=t;var r=t+2;this.container.style({"--font-size":t,"--line-height":r})}},{key:"fontSize",get:function(){return this.style.fontSize}},{key:"setFontSize",value:function(t){this._setFontSize(t),this.editor.editor.setFontSize(t),this.input.setFontSize(t),this.resize()}},{key:"clearInputHistory",value:function(){this.history.clear()}},{key:"write",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.display.pushContent(this.input.fullValue,r),t&&this.display.pushContent(t,r),this.input.clearContent(),this.scrollToBottom()}},{key:"insertEdit",value:function(t){this.editor.editor.insertText(t)}},{key:"replaceEdit",value:function(t){this.editor.editor.replaceText(t)}},{key:"pushEdit",value:function(t){this.editor.editor.pushText(t)}},{key:"vi",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.store.showEditor=!0,this.editor.vi(t,r,n)}},{key:"clearTerminal",value:function(){this.display.container.empty(),this.input.clearContent()}},{key:"newLine",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.write("",t)}},{key:"setHeader",value:function(t){this.input.header=t}},{key:"scrollToBottom",value:function(){this.container.el.scrollTop=this.container.el.scrollHeight}},{key:"focus",value:function(){this.input.focus()}},{key:"writeBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.write(t,r),this.scrollToBottom()}},{key:"pushBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.push(t,r),this.scrollToBottom()}},{key:"clearBelow",value:function(){this.below.clear()}},{key:"resize",value:function(){this.editor.editor.resize(),this.input.resize()}}])}(fr.Eveit);function is(s,e=0){if(s.length===0)return"";if(s.length===1)return s[0];let t=s[0].substring(0,e),r=e;for(;;){const n=s[0][r];if(!n)return t;for(let a=1;a<s.length;a++)if(s[a][r]!==n)return t;t+=n,r++}}function te(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var un={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(s,e){(function(t){s.exports=t()})(function(){return function t(r,n,a){function o(g,p){if(!n[g]){if(!r[g]){var d=typeof te=="function"&&te;if(!p&&d)return d(g,!0);if(i)return i(g,!0);var v=new Error("Cannot find module '"+g+"'");throw v.code="MODULE_NOT_FOUND",v}var h=n[g]={exports:{}};r[g][0].call(h.exports,function(x){var w=r[g][1][x];return o(w||x)},h,h.exports,t,r,n,a)}return n[g].exports}for(var i=typeof te=="function"&&te,f=0;f<a.length;f++)o(a[f]);return o}({1:[function(t,r,n){(function(a){var o=a.MutationObserver||a.WebKitMutationObserver,i;if(o){var f=0,g=new o(x),p=a.document.createTextNode("");g.observe(p,{characterData:!0}),i=function(){p.data=f=++f%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var d=new a.MessageChannel;d.port1.onmessage=x,i=function(){d.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?i=function(){var k=a.document.createElement("script");k.onreadystatechange=function(){x(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},a.document.documentElement.appendChild(k)}:i=function(){setTimeout(x,0)};var v,h=[];function x(){v=!0;for(var k,b,A=h.length;A;){for(b=h,h=[],k=-1;++k<A;)b[k]();A=h.length}v=!1}r.exports=w;function w(k){h.push(k)===1&&!v&&i()}}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,n){var a=t(1);function o(){}var i={},f=["REJECTED"],g=["FULFILLED"],p=["PENDING"];r.exports=d;function d(B){if(typeof B!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,B!==o&&w(this,B)}d.prototype.catch=function(B){return this.then(null,B)},d.prototype.then=function(B,Z){if(typeof B!="function"&&this.state===g||typeof Z!="function"&&this.state===f)return this;var W=new this.constructor(o);if(this.state!==p){var X=this.state===g?B:Z;h(W,X,this.outcome)}else this.queue.push(new v(W,B,Z));return W};function v(B,Z,W){this.promise=B,typeof Z=="function"&&(this.onFulfilled=Z,this.callFulfilled=this.otherCallFulfilled),typeof W=="function"&&(this.onRejected=W,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(B){i.resolve(this.promise,B)},v.prototype.otherCallFulfilled=function(B){h(this.promise,this.onFulfilled,B)},v.prototype.callRejected=function(B){i.reject(this.promise,B)},v.prototype.otherCallRejected=function(B){h(this.promise,this.onRejected,B)};function h(B,Z,W){a(function(){var X;try{X=Z(W)}catch(H){return i.reject(B,H)}X===B?i.reject(B,new TypeError("Cannot resolve promise with itself")):i.resolve(B,X)})}i.resolve=function(B,Z){var W=k(x,Z);if(W.status==="error")return i.reject(B,W.value);var X=W.value;if(X)w(B,X);else{B.state=g,B.outcome=Z;for(var H=-1,rt=B.queue.length;++H<rt;)B.queue[H].callFulfilled(Z)}return B},i.reject=function(B,Z){B.state=f,B.outcome=Z;for(var W=-1,X=B.queue.length;++W<X;)B.queue[W].callRejected(Z);return B};function x(B){var Z=B&&B.then;if(B&&(typeof B=="object"||typeof B=="function")&&typeof Z=="function")return function(){Z.apply(B,arguments)}}function w(B,Z){var W=!1;function X(T){W||(W=!0,i.reject(B,T))}function H(T){W||(W=!0,i.resolve(B,T))}function rt(){Z(H,X)}var dt=k(rt);dt.status==="error"&&X(dt.value)}function k(B,Z){var W={};try{W.value=B(Z),W.status="success"}catch(X){W.status="error",W.value=X}return W}d.resolve=b;function b(B){return B instanceof this?B:i.resolve(new this(o),B)}d.reject=A;function A(B){var Z=new this(o);return i.reject(Z,B)}d.all=F;function F(B){var Z=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var W=B.length,X=!1;if(!W)return this.resolve([]);for(var H=new Array(W),rt=0,dt=-1,T=new this(o);++dt<W;)V(B[dt],dt);return T;function V(m,q){Z.resolve(m).then(vt,function(et){X||(X=!0,i.reject(T,et))});function vt(et){H[q]=et,++rt===W&&!X&&(X=!0,i.resolve(T,H))}}}d.race=N;function N(B){var Z=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var W=B.length,X=!1;if(!W)return this.resolve([]);for(var H=-1,rt=new this(o);++H<W;)dt(B[H]);return rt;function dt(T){Z.resolve(T).then(function(V){X||(X=!0,i.resolve(rt,V))},function(V){X||(X=!0,i.reject(rt,V))})}}},{1:1}],3:[function(t,r,n){(function(a){typeof a.Promise!="function"&&(a.Promise=t(2))}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,n){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};function o(_,P){if(!(_ instanceof P))throw new TypeError("Cannot call a class as a function")}function i(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(_){return}}var f=i();function g(){try{if(!f||!f.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),P=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!_||P)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(E){return!1}}function p(_,P){_=_||[],P=P||{};try{return new Blob(_,P)}catch(O){if(O.name!=="TypeError")throw O;for(var E=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,D=new E,L=0;L<_.length;L+=1)D.append(_[L]);return D.getBlob(P.type)}}typeof Promise>"u"&&t(3);var d=Promise;function v(_,P){P&&_.then(function(E){P(null,E)},function(E){P(E)})}function h(_,P,E){typeof P=="function"&&_.then(P),typeof E=="function"&&_.catch(E)}function x(_){return typeof _!="string"&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function w(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",b=void 0,A={},F=Object.prototype.toString,N="readonly",B="readwrite";function Z(_){for(var P=_.length,E=new ArrayBuffer(P),D=new Uint8Array(E),L=0;L<P;L++)D[L]=_.charCodeAt(L);return E}function W(_){return new d(function(P){var E=_.transaction(k,B),D=p([""]);E.objectStore(k).put(D,"key"),E.onabort=function(L){L.preventDefault(),L.stopPropagation(),P(!1)},E.oncomplete=function(){var L=navigator.userAgent.match(/Chrome\/(\d+)/),O=navigator.userAgent.match(/Edge\//);P(O||!L||parseInt(L[1],10)>=43)}}).catch(function(){return!1})}function X(_){return typeof b=="boolean"?d.resolve(b):W(_).then(function(P){return b=P,b})}function H(_){var P=A[_.name],E={};E.promise=new d(function(D,L){E.resolve=D,E.reject=L}),P.deferredOperations.push(E),P.dbReady?P.dbReady=P.dbReady.then(function(){return E.promise}):P.dbReady=E.promise}function rt(_){var P=A[_.name],E=P.deferredOperations.pop();if(E)return E.resolve(),E.promise}function dt(_,P){var E=A[_.name],D=E.deferredOperations.pop();if(D)return D.reject(P),D.promise}function T(_,P){return new d(function(E,D){if(A[_.name]=A[_.name]||M(),_.db)if(P)H(_),_.db.close();else return E(_.db);var L=[_.name];P&&L.push(_.version);var O=f.open.apply(f,L);P&&(O.onupgradeneeded=function(J){var nt=O.result;try{nt.createObjectStore(_.storeName),J.oldVersion<=1&&nt.createObjectStore(k)}catch(ot){if(ot.name==="ConstraintError")console.warn('The database "'+_.name+'" has been upgraded from version '+J.oldVersion+" to version "+J.newVersion+', but the storage "'+_.storeName+'" already exists.');else throw ot}}),O.onerror=function(J){J.preventDefault(),D(O.error)},O.onsuccess=function(){var J=O.result;J.onversionchange=function(nt){nt.target.close()},E(J),rt(_)}})}function V(_){return T(_,!1)}function m(_){return T(_,!0)}function q(_,P){if(!_.db)return!0;var E=!_.db.objectStoreNames.contains(_.storeName),D=_.version<_.db.version,L=_.version>_.db.version;if(D&&(_.version!==P&&console.warn('The database "'+_.name+"\" can't be downgraded from version "+_.db.version+" to version "+_.version+"."),_.version=_.db.version),L||E){if(E){var O=_.db.version+1;O>_.version&&(_.version=O)}return!0}return!1}function vt(_){return new d(function(P,E){var D=new FileReader;D.onerror=E,D.onloadend=function(L){var O=btoa(L.target.result||"");P({__local_forage_encoded_blob:!0,data:O,type:_.type})},D.readAsBinaryString(_)})}function et(_){var P=Z(atob(_.data));return p([P],{type:_.type})}function _t(_){return _&&_.__local_forage_encoded_blob}function at(_){var P=this,E=P._initReady().then(function(){var D=A[P._dbInfo.name];if(D&&D.dbReady)return D.dbReady});return h(E,_,_),E}function gt(_){H(_);for(var P=A[_.name],E=P.forages,D=0;D<E.length;D++){var L=E[D];L._dbInfo.db&&(L._dbInfo.db.close(),L._dbInfo.db=null)}return _.db=null,V(_).then(function(O){return _.db=O,q(_)?m(_):O}).then(function(O){_.db=P.db=O;for(var J=0;J<E.length;J++)E[J]._dbInfo.db=O}).catch(function(O){throw dt(_,O),O})}function j(_,P,E,D){D===void 0&&(D=1);try{var L=_.db.transaction(_.storeName,P);E(null,L)}catch(O){if(D>0&&(!_.db||O.name==="InvalidStateError"||O.name==="NotFoundError"))return d.resolve().then(function(){if(!_.db||O.name==="NotFoundError"&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),m(_)}).then(function(){return gt(_).then(function(){j(_,P,E,D-1)})}).catch(E);E(O)}}function M(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function yt(_){var P=this,E={db:null};if(_)for(var D in _)E[D]=_[D];var L=A[E.name];L||(L=M(),A[E.name]=L),L.forages.push(P),P._initReady||(P._initReady=P.ready,P.ready=at);var O=[];function J(){return d.resolve()}for(var nt=0;nt<L.forages.length;nt++){var ot=L.forages[nt];ot!==P&&O.push(ot._initReady().catch(J))}var ut=L.forages.slice(0);return d.all(O).then(function(){return E.db=L.db,V(E)}).then(function(ct){return E.db=ct,q(E,P._defaultConfig.version)?m(E):ct}).then(function(ct){E.db=L.db=ct,P._dbInfo=E;for(var pt=0;pt<ut.length;pt++){var kt=ut[pt];kt!==P&&(kt._dbInfo.db=E.db,kt._dbInfo.version=E.version)}})}function lt(_,P){var E=this;_=x(_);var D=new d(function(L,O){E.ready().then(function(){j(E._dbInfo,N,function(J,nt){if(J)return O(J);try{var ot=nt.objectStore(E._dbInfo.storeName),ut=ot.get(_);ut.onsuccess=function(){var ct=ut.result;ct===void 0&&(ct=null),_t(ct)&&(ct=et(ct)),L(ct)},ut.onerror=function(){O(ut.error)}}catch(ct){O(ct)}})}).catch(O)});return v(D,P),D}function ft(_,P){var E=this,D=new d(function(L,O){E.ready().then(function(){j(E._dbInfo,N,function(J,nt){if(J)return O(J);try{var ot=nt.objectStore(E._dbInfo.storeName),ut=ot.openCursor(),ct=1;ut.onsuccess=function(){var pt=ut.result;if(pt){var kt=pt.value;_t(kt)&&(kt=et(kt));var Ct=_(kt,pt.key,ct++);Ct!==void 0?L(Ct):pt.continue()}else L()},ut.onerror=function(){O(ut.error)}}catch(pt){O(pt)}})}).catch(O)});return v(D,P),D}function Pt(_,P,E){var D=this;_=x(_);var L=new d(function(O,J){var nt;D.ready().then(function(){return nt=D._dbInfo,F.call(P)==="[object Blob]"?X(nt.db).then(function(ot){return ot?P:vt(P)}):P}).then(function(ot){j(D._dbInfo,B,function(ut,ct){if(ut)return J(ut);try{var pt=ct.objectStore(D._dbInfo.storeName);ot===null&&(ot=void 0);var kt=pt.put(ot,_);ct.oncomplete=function(){ot===void 0&&(ot=null),O(ot)},ct.onabort=ct.onerror=function(){var Ct=kt.error?kt.error:kt.transaction.error;J(Ct)}}catch(Ct){J(Ct)}})}).catch(J)});return v(L,E),L}function Ot(_,P){var E=this;_=x(_);var D=new d(function(L,O){E.ready().then(function(){j(E._dbInfo,B,function(J,nt){if(J)return O(J);try{var ot=nt.objectStore(E._dbInfo.storeName),ut=ot.delete(_);nt.oncomplete=function(){L()},nt.onerror=function(){O(ut.error)},nt.onabort=function(){var ct=ut.error?ut.error:ut.transaction.error;O(ct)}}catch(ct){O(ct)}})}).catch(O)});return v(D,P),D}function bt(_){var P=this,E=new d(function(D,L){P.ready().then(function(){j(P._dbInfo,B,function(O,J){if(O)return L(O);try{var nt=J.objectStore(P._dbInfo.storeName),ot=nt.clear();J.oncomplete=function(){D()},J.onabort=J.onerror=function(){var ut=ot.error?ot.error:ot.transaction.error;L(ut)}}catch(ut){L(ut)}})}).catch(L)});return v(E,_),E}function xt(_){var P=this,E=new d(function(D,L){P.ready().then(function(){j(P._dbInfo,N,function(O,J){if(O)return L(O);try{var nt=J.objectStore(P._dbInfo.storeName),ot=nt.count();ot.onsuccess=function(){D(ot.result)},ot.onerror=function(){L(ot.error)}}catch(ut){L(ut)}})}).catch(L)});return v(E,_),E}function zt(_,P){var E=this,D=new d(function(L,O){if(_<0){L(null);return}E.ready().then(function(){j(E._dbInfo,N,function(J,nt){if(J)return O(J);try{var ot=nt.objectStore(E._dbInfo.storeName),ut=!1,ct=ot.openKeyCursor();ct.onsuccess=function(){var pt=ct.result;if(!pt){L(null);return}_===0||ut?L(pt.key):(ut=!0,pt.advance(_))},ct.onerror=function(){O(ct.error)}}catch(pt){O(pt)}})}).catch(O)});return v(D,P),D}function Ft(_){var P=this,E=new d(function(D,L){P.ready().then(function(){j(P._dbInfo,N,function(O,J){if(O)return L(O);try{var nt=J.objectStore(P._dbInfo.storeName),ot=nt.openKeyCursor(),ut=[];ot.onsuccess=function(){var ct=ot.result;if(!ct){D(ut);return}ut.push(ct.key),ct.continue()},ot.onerror=function(){L(ot.error)}}catch(ct){L(ct)}})}).catch(L)});return v(E,_),E}function Nt(_,P){P=w.apply(this,arguments);var E=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||E.name,_.storeName=_.storeName||E.storeName);var D=this,L;if(!_.name)L=d.reject("Invalid arguments");else{var O=_.name===E.name&&D._dbInfo.db,J=O?d.resolve(D._dbInfo.db):V(_).then(function(nt){var ot=A[_.name],ut=ot.forages;ot.db=nt;for(var ct=0;ct<ut.length;ct++)ut[ct]._dbInfo.db=nt;return nt});_.storeName?L=J.then(function(nt){if(nt.objectStoreNames.contains(_.storeName)){var ot=nt.version+1;H(_);var ut=A[_.name],ct=ut.forages;nt.close();for(var pt=0;pt<ct.length;pt++){var kt=ct[pt];kt._dbInfo.db=null,kt._dbInfo.version=ot}var Ct=new d(function(It,Lt){var Dt=f.open(_.name,ot);Dt.onerror=function(Ht){var me=Dt.result;me.close(),Lt(Ht)},Dt.onupgradeneeded=function(){var Ht=Dt.result;Ht.deleteObjectStore(_.storeName)},Dt.onsuccess=function(){var Ht=Dt.result;Ht.close(),It(Ht)}});return Ct.then(function(It){ut.db=It;for(var Lt=0;Lt<ct.length;Lt++){var Dt=ct[Lt];Dt._dbInfo.db=It,rt(Dt._dbInfo)}}).catch(function(It){throw(dt(_,It)||d.resolve()).catch(function(){}),It})}}):L=J.then(function(nt){H(_);var ot=A[_.name],ut=ot.forages;nt.close();for(var ct=0;ct<ut.length;ct++){var pt=ut[ct];pt._dbInfo.db=null}var kt=new d(function(Ct,It){var Lt=f.deleteDatabase(_.name);Lt.onerror=function(){var Dt=Lt.result;Dt&&Dt.close(),It(Lt.error)},Lt.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},Lt.onsuccess=function(){var Dt=Lt.result;Dt&&Dt.close(),Ct(Dt)}});return kt.then(function(Ct){ot.db=Ct;for(var It=0;It<ut.length;It++){var Lt=ut[It];rt(Lt._dbInfo)}}).catch(function(Ct){throw(dt(_,Ct)||d.resolve()).catch(function(){}),Ct})})}return v(L,P),L}var Rt={_driver:"asyncStorage",_initStorage:yt,_support:g(),iterate:ft,getItem:lt,setItem:Pt,removeItem:Ot,clear:bt,length:xt,key:zt,keys:Ft,dropInstance:Nt};function l(){return typeof openDatabase=="function"}var G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",I=/^~~local_forage_type~([^~]+)~/,C="__lfsc__:",R=C.length,Q="arbf",tt="blob",U="si08",st="ui08",ht="uic8",it="si16",mt="si32",y="ur16",u="ui32",c="fl32",S="fl64",z=R+Q.length,$=Object.prototype.toString;function Y(_){var P=_.length*.75,E=_.length,D,L=0,O,J,nt,ot;_[_.length-1]==="="&&(P--,_[_.length-2]==="="&&P--);var ut=new ArrayBuffer(P),ct=new Uint8Array(ut);for(D=0;D<E;D+=4)O=G.indexOf(_[D]),J=G.indexOf(_[D+1]),nt=G.indexOf(_[D+2]),ot=G.indexOf(_[D+3]),ct[L++]=O<<2|J>>4,ct[L++]=(J&15)<<4|nt>>2,ct[L++]=(nt&3)<<6|ot&63;return ut}function wt(_){var P=new Uint8Array(_),E="",D;for(D=0;D<P.length;D+=3)E+=G[P[D]>>2],E+=G[(P[D]&3)<<4|P[D+1]>>4],E+=G[(P[D+1]&15)<<2|P[D+2]>>6],E+=G[P[D+2]&63];return P.length%3===2?E=E.substring(0,E.length-1)+"=":P.length%3===1&&(E=E.substring(0,E.length-2)+"=="),E}function Bt(_,P){var E="";if(_&&(E=$.call(_)),_&&(E==="[object ArrayBuffer]"||_.buffer&&$.call(_.buffer)==="[object ArrayBuffer]")){var D,L=C;_ instanceof ArrayBuffer?(D=_,L+=Q):(D=_.buffer,E==="[object Int8Array]"?L+=U:E==="[object Uint8Array]"?L+=st:E==="[object Uint8ClampedArray]"?L+=ht:E==="[object Int16Array]"?L+=it:E==="[object Uint16Array]"?L+=y:E==="[object Int32Array]"?L+=mt:E==="[object Uint32Array]"?L+=u:E==="[object Float32Array]"?L+=c:E==="[object Float64Array]"?L+=S:P(new Error("Failed to get type for BinaryArray"))),P(L+wt(D))}else if(E==="[object Blob]"){var O=new FileReader;O.onload=function(){var J=K+_.type+"~"+wt(this.result);P(C+tt+J)},O.readAsArrayBuffer(_)}else try{P(JSON.stringify(_))}catch(J){console.error("Couldn't convert value into a JSON string: ",_),P(null,J)}}function St(_){if(_.substring(0,R)!==C)return JSON.parse(_);var P=_.substring(z),E=_.substring(R,z),D;if(E===tt&&I.test(P)){var L=P.match(I);D=L[1],P=P.substring(L[0].length)}var O=Y(P);switch(E){case Q:return O;case tt:return p([O],{type:D});case U:return new Int8Array(O);case st:return new Uint8Array(O);case ht:return new Uint8ClampedArray(O);case it:return new Int16Array(O);case y:return new Uint16Array(O);case mt:return new Int32Array(O);case u:return new Uint32Array(O);case c:return new Float32Array(O);case S:return new Float64Array(O);default:throw new Error("Unkown type: "+E)}}var At={serialize:Bt,deserialize:St,stringToBuffer:Y,bufferToString:wt};function Et(_,P,E,D){_.executeSql("CREATE TABLE IF NOT EXISTS "+P.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],E,D)}function Ne(_){var P=this,E={db:null};if(_)for(var D in _)E[D]=typeof _[D]!="string"?_[D].toString():_[D];var L=new d(function(O,J){try{E.db=openDatabase(E.name,String(E.version),E.description,E.size)}catch(nt){return J(nt)}E.db.transaction(function(nt){Et(nt,E,function(){P._dbInfo=E,O()},function(ot,ut){J(ut)})},J)});return E.serializer=At,L}function Yt(_,P,E,D,L,O){_.executeSql(E,D,L,function(J,nt){nt.code===nt.SYNTAX_ERR?J.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[P.storeName],function(ot,ut){ut.rows.length?O(ot,nt):Et(ot,P,function(){ot.executeSql(E,D,L,O)},O)},O):O(J,nt)},O)}function ke(_,P){var E=this;_=x(_);var D=new d(function(L,O){E.ready().then(function(){var J=E._dbInfo;J.db.transaction(function(nt){Yt(nt,J,"SELECT * FROM "+J.storeName+" WHERE key = ? LIMIT 1",[_],function(ot,ut){var ct=ut.rows.length?ut.rows.item(0).value:null;ct&&(ct=J.serializer.deserialize(ct)),L(ct)},function(ot,ut){O(ut)})})}).catch(O)});return v(D,P),D}function ee(_,P){var E=this,D=new d(function(L,O){E.ready().then(function(){var J=E._dbInfo;J.db.transaction(function(nt){Yt(nt,J,"SELECT * FROM "+J.storeName,[],function(ot,ut){for(var ct=ut.rows,pt=ct.length,kt=0;kt<pt;kt++){var Ct=ct.item(kt),It=Ct.value;if(It&&(It=J.serializer.deserialize(It)),It=_(It,Ct.key,kt+1),It!==void 0){L(It);return}}L()},function(ot,ut){O(ut)})})}).catch(O)});return v(D,P),D}function re(_,P,E,D){var L=this;_=x(_);var O=new d(function(J,nt){L.ready().then(function(){P===void 0&&(P=null);var ot=P,ut=L._dbInfo;ut.serializer.serialize(P,function(ct,pt){pt?nt(pt):ut.db.transaction(function(kt){Yt(kt,ut,"INSERT OR REPLACE INTO "+ut.storeName+" (key, value) VALUES (?, ?)",[_,ct],function(){J(ot)},function(Ct,It){nt(It)})},function(kt){if(kt.code===kt.QUOTA_ERR){if(D>0){J(re.apply(L,[_,ot,E,D-1]));return}nt(kt)}})})}).catch(nt)});return v(O,E),O}function An(_,P,E){return re.apply(this,[_,P,E,1])}function In(_,P){var E=this;_=x(_);var D=new d(function(L,O){E.ready().then(function(){var J=E._dbInfo;J.db.transaction(function(nt){Yt(nt,J,"DELETE FROM "+J.storeName+" WHERE key = ?",[_],function(){L()},function(ot,ut){O(ut)})})}).catch(O)});return v(D,P),D}function Bn(_){var P=this,E=new d(function(D,L){P.ready().then(function(){var O=P._dbInfo;O.db.transaction(function(J){Yt(J,O,"DELETE FROM "+O.storeName,[],function(){D()},function(nt,ot){L(ot)})})}).catch(L)});return v(E,_),E}function Tn(_){var P=this,E=new d(function(D,L){P.ready().then(function(){var O=P._dbInfo;O.db.transaction(function(J){Yt(J,O,"SELECT COUNT(key) as c FROM "+O.storeName,[],function(nt,ot){var ut=ot.rows.item(0).c;D(ut)},function(nt,ot){L(ot)})})}).catch(L)});return v(E,_),E}function Pn(_,P){var E=this,D=new d(function(L,O){E.ready().then(function(){var J=E._dbInfo;J.db.transaction(function(nt){Yt(nt,J,"SELECT key FROM "+J.storeName+" WHERE id = ? LIMIT 1",[_+1],function(ot,ut){var ct=ut.rows.length?ut.rows.item(0).key:null;L(ct)},function(ot,ut){O(ut)})})}).catch(O)});return v(D,P),D}function Fn(_){var P=this,E=new d(function(D,L){P.ready().then(function(){var O=P._dbInfo;O.db.transaction(function(J){Yt(J,O,"SELECT key FROM "+O.storeName,[],function(nt,ot){for(var ut=[],ct=0;ct<ot.rows.length;ct++)ut.push(ot.rows.item(ct).key);D(ut)},function(nt,ot){L(ot)})})}).catch(L)});return v(E,_),E}function zn(_){return new d(function(P,E){_.transaction(function(D){D.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(L,O){for(var J=[],nt=0;nt<O.rows.length;nt++)J.push(O.rows.item(nt).name);P({db:_,storeNames:J})},function(L,O){E(O)})},function(D){E(D)})})}function On(_,P){P=w.apply(this,arguments);var E=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||E.name,_.storeName=_.storeName||E.storeName);var D=this,L;return _.name?L=new d(function(O){var J;_.name===E.name?J=D._dbInfo.db:J=openDatabase(_.name,"","",0),_.storeName?O({db:J,storeNames:[_.storeName]}):O(zn(J))}).then(function(O){return new d(function(J,nt){O.db.transaction(function(ot){function ut(Ct){return new d(function(It,Lt){ot.executeSql("DROP TABLE IF EXISTS "+Ct,[],function(){It()},function(Dt,Ht){Lt(Ht)})})}for(var ct=[],pt=0,kt=O.storeNames.length;pt<kt;pt++)ct.push(ut(O.storeNames[pt]));d.all(ct).then(function(){J()}).catch(function(Ct){nt(Ct)})},function(ot){nt(ot)})})}):L=d.reject("Invalid arguments"),v(L,P),L}var Dn={_driver:"webSQLStorage",_initStorage:Ne,_support:l(),iterate:ee,getItem:ke,setItem:An,removeItem:In,clear:Bn,length:Tn,key:Pn,keys:Fn,dropInstance:On};function Rn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(_){return!1}}function kr(_,P){var E=_.name+"/";return _.storeName!==P.storeName&&(E+=_.storeName+"/"),E}function Ln(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch(P){return!0}}function Nn(){return!Ln()||localStorage.length>0}function Un(_){var P=this,E={};if(_)for(var D in _)E[D]=_[D];return E.keyPrefix=kr(_,P._defaultConfig),Nn()?(P._dbInfo=E,E.serializer=At,d.resolve()):d.reject()}function jn(_){var P=this,E=P.ready().then(function(){for(var D=P._dbInfo.keyPrefix,L=localStorage.length-1;L>=0;L--){var O=localStorage.key(L);O.indexOf(D)===0&&localStorage.removeItem(O)}});return v(E,_),E}function Mn(_,P){var E=this;_=x(_);var D=E.ready().then(function(){var L=E._dbInfo,O=localStorage.getItem(L.keyPrefix+_);return O&&(O=L.serializer.deserialize(O)),O});return v(D,P),D}function Wn(_,P){var E=this,D=E.ready().then(function(){for(var L=E._dbInfo,O=L.keyPrefix,J=O.length,nt=localStorage.length,ot=1,ut=0;ut<nt;ut++){var ct=localStorage.key(ut);if(ct.indexOf(O)===0){var pt=localStorage.getItem(ct);if(pt&&(pt=L.serializer.deserialize(pt)),pt=_(pt,ct.substring(J),ot++),pt!==void 0)return pt}}});return v(D,P),D}function $n(_,P){var E=this,D=E.ready().then(function(){var L=E._dbInfo,O;try{O=localStorage.key(_)}catch(J){O=null}return O&&(O=O.substring(L.keyPrefix.length)),O});return v(D,P),D}function Hn(_){var P=this,E=P.ready().then(function(){for(var D=P._dbInfo,L=localStorage.length,O=[],J=0;J<L;J++){var nt=localStorage.key(J);nt.indexOf(D.keyPrefix)===0&&O.push(nt.substring(D.keyPrefix.length))}return O});return v(E,_),E}function Zn(_){var P=this,E=P.keys().then(function(D){return D.length});return v(E,_),E}function Yn(_,P){var E=this;_=x(_);var D=E.ready().then(function(){var L=E._dbInfo;localStorage.removeItem(L.keyPrefix+_)});return v(D,P),D}function Kn(_,P,E){var D=this;_=x(_);var L=D.ready().then(function(){P===void 0&&(P=null);var O=P;return new d(function(J,nt){var ot=D._dbInfo;ot.serializer.serialize(P,function(ut,ct){if(ct)nt(ct);else try{localStorage.setItem(ot.keyPrefix+_,ut),J(O)}catch(pt){(pt.name==="QuotaExceededError"||pt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&nt(pt),nt(pt)}})})});return v(L,E),L}function Vn(_,P){if(P=w.apply(this,arguments),_=typeof _!="function"&&_||{},!_.name){var E=this.config();_.name=_.name||E.name,_.storeName=_.storeName||E.storeName}var D=this,L;return _.name?L=new d(function(O){_.storeName?O(kr(_,D._defaultConfig)):O(_.name+"/")}).then(function(O){for(var J=localStorage.length-1;J>=0;J--){var nt=localStorage.key(J);nt.indexOf(O)===0&&localStorage.removeItem(nt)}}):L=d.reject("Invalid arguments"),v(L,P),L}var Gn={_driver:"localStorageWrapper",_initStorage:Un,_support:Rn(),iterate:Wn,getItem:Mn,setItem:Kn,removeItem:Yn,clear:jn,length:Zn,key:$n,keys:Hn,dropInstance:Vn},Xn=function(P,E){return P===E||typeof P=="number"&&typeof E=="number"&&isNaN(P)&&isNaN(E)},qn=function(P,E){for(var D=P.length,L=0;L<D;){if(Xn(P[L],E))return!0;L++}return!1},xr=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"},pe={},Sr={},oe={INDEXEDDB:Rt,WEBSQL:Dn,LOCALSTORAGE:Gn},Jn=[oe.INDEXEDDB._driver,oe.WEBSQL._driver,oe.LOCALSTORAGE._driver],xe=["dropInstance"],Ue=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(xe),Qn={description:"",driver:Jn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ti(_,P){_[P]=function(){var E=arguments;return _.ready().then(function(){return _[P].apply(_,E)})}}function je(){for(var _=1;_<arguments.length;_++){var P=arguments[_];if(P)for(var E in P)P.hasOwnProperty(E)&&(xr(P[E])?arguments[0][E]=P[E].slice():arguments[0][E]=P[E])}return arguments[0]}var ei=function(){function _(P){o(this,_);for(var E in oe)if(oe.hasOwnProperty(E)){var D=oe[E],L=D._driver;this[E]=L,pe[L]||this.defineDriver(D)}this._defaultConfig=je({},Qn),this._config=je({},this._defaultConfig,P),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(E){if((typeof E>"u"?"undefined":a(E))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var D in E){if(D==="storeName"&&(E[D]=E[D].replace(/\W/g,"_")),D==="version"&&typeof E[D]!="number")return new Error("Database version must be a number.");this._config[D]=E[D]}return"driver"in E&&E.driver?this.setDriver(this._config.driver):!0}else return typeof E=="string"?this._config[E]:this._config},_.prototype.defineDriver=function(E,D,L){var O=new d(function(J,nt){try{var ot=E._driver,ut=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!E._driver){nt(ut);return}for(var ct=Ue.concat("_initStorage"),pt=0,kt=ct.length;pt<kt;pt++){var Ct=ct[pt],It=!qn(xe,Ct);if((It||E[Ct])&&typeof E[Ct]!="function"){nt(ut);return}}var Lt=function(){for(var me=function(ii){return function(){var si=new Error("Method "+ii+" is not implemented by the current driver"),Er=d.reject(si);return v(Er,arguments[arguments.length-1]),Er}},Me=0,ni=xe.length;Me<ni;Me++){var We=xe[Me];E[We]||(E[We]=me(We))}};Lt();var Dt=function(me){pe[ot]&&console.info("Redefining LocalForage driver: "+ot),pe[ot]=E,Sr[ot]=me,J()};"_support"in E?E._support&&typeof E._support=="function"?E._support().then(Dt,nt):Dt(!!E._support):Dt(!0)}catch(Ht){nt(Ht)}});return h(O,D,L),O},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(E,D,L){var O=pe[E]?d.resolve(pe[E]):d.reject(new Error("Driver not found."));return h(O,D,L),O},_.prototype.getSerializer=function(E){var D=d.resolve(At);return h(D,E),D},_.prototype.ready=function(E){var D=this,L=D._driverSet.then(function(){return D._ready===null&&(D._ready=D._initDriver()),D._ready});return h(L,E,E),L},_.prototype.setDriver=function(E,D,L){var O=this;xr(E)||(E=[E]);var J=this._getSupportedDrivers(E);function nt(){O._config.driver=O.driver()}function ot(pt){return O._extend(pt),nt(),O._ready=O._initStorage(O._config),O._ready}function ut(pt){return function(){var kt=0;function Ct(){for(;kt<pt.length;){var It=pt[kt];return kt++,O._dbInfo=null,O._ready=null,O.getDriver(It).then(ot).catch(Ct)}nt();var Lt=new Error("No available storage method found.");return O._driverSet=d.reject(Lt),O._driverSet}return Ct()}}var ct=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=ct.then(function(){var pt=J[0];return O._dbInfo=null,O._ready=null,O.getDriver(pt).then(function(kt){O._driver=kt._driver,nt(),O._wrapLibraryMethodsWithReady(),O._initDriver=ut(J)})}).catch(function(){nt();var pt=new Error("No available storage method found.");return O._driverSet=d.reject(pt),O._driverSet}),h(this._driverSet,D,L),this._driverSet},_.prototype.supports=function(E){return!!Sr[E]},_.prototype._extend=function(E){je(this,E)},_.prototype._getSupportedDrivers=function(E){for(var D=[],L=0,O=E.length;L<O;L++){var J=E[L];this.supports(J)&&D.push(J)}return D},_.prototype._wrapLibraryMethodsWithReady=function(){for(var E=0,D=Ue.length;E<D;E++)ti(this,Ue[E])},_.prototype.createInstance=function(E){return new _(E)},_}(),ri=new ei;r.exports=ri},{3:3}]},{},[4])(4)})})(un);var ss=un.exports;const Vt=cr(ss);function yr(){let s,e;return{ready:new Promise((r,n)=>{s=r,e=n}),resolve:s,reject:e}}function De(...s){let e=0;for(const n of s)e+=n.length;const t=new Uint8Array(e);let r=0;for(const n of s)t.set(n,r),r+=n.length;return t}function be(s,e){const t=s.byteLength;if(t!==e.byteLength)return!1;for(let r=0;r<t;r++)if(s[r]!==e[r])return!1;return!0}function as(s){return new Uint8Array(s)}async function ie(s){try{return[await s,null]}catch(e){return[{},e]}}let He;function Be(s){return He||(He=new TextEncoder),He.encode(s)}let Ze;function rr(s){return Ze||(Ze=new TextDecoder),Ze.decode(s)}async function Or(s){for(let e=0;e<s.length;e++)await s[e]()}const cn=Symbol("");function os(s){return{[cn]:!0,value:s}}function Ye(s){let e=!1,t,r,n,a=!1;const o=f=>(a=!0,t=f,f),i=()=>{const f=s.shift();if(!f)return r==null?void 0:r(t);let g=f(t,o);if(g!=null&&g[cn]&&(g=g.value,a=!0),a)return r==null?void 0:r(g);const p=d=>{t=d,i()};if(g instanceof Promise){if(!e){e=!0;const d=yr();n=d.ready,r=d.resolve}g.then(p)}else p(g)};return i(),e?n:t}function Jt(s){const e=s.lastIndexOf("/");return e===-1?{path:s,parent:"",name:s}:{path:s,parent:s.substring(0,e)||"/",name:s.substring(e+1)}}function us(){const s=[];return{add(e){s.push(e)},run(){return Promise.all(s)}}}async function cs(s){return s instanceof Promise?await s:s}function Dr(s){return typeof s=="function"?s():s}function fs(){return navigator.userAgent.includes("Macintosh")}async function ls(s){try{const e=await fetch(s);return e.ok?await e.text():""}catch(e){return""}}function hs(s,e={}){const t=Object.keys(e),r=Object.values(e);return new Function(...t,s)(...r)}class ds{constructor(){this.name="",this.helpInfo="",this.helpDetails=""}activate(e,t){this.disk=e,this.provider=t}run(e,t){return""}}function ps(s,e=""){return s.split("/").length===2&&(s+="/".concat(e)),"https://cdn.jsdelivr.net/gh/".concat(s)}function Rr(s,e=!1){const t=e?"unpkg.com":"cdn.jsdelivr.net/npm";return"https://".concat(t,"/").concat(s)}function Kt(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function Lr(s,e){for(var t="",r=0,n=-1,a=0,o,i=0;i<=s.length;++i){if(i<s.length)o=s.charCodeAt(i);else{if(o===47)break;o=47}if(o===47){if(!(n===i-1||a===1))if(n!==i-1&&a===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",r=0):(t=t.slice(0,f),r=t.length-1-t.lastIndexOf("/")),n=i,a=0;continue}}else if(t.length===2||t.length===1){t="",r=0,n=i,a=0;continue}}e&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+="/"+s.slice(n+1,i):t=s.slice(n+1,i),r=i-n-1;n=i,a=0}else o===46&&a!==-1?++a:a=-1}return t}function ms(s,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+s+r:r}var ce={resolve:function(){for(var e="",t=!1,r,n=arguments.length-1;n>=-1&&!t;n--){var a;n>=0?a=arguments[n]:(r===void 0&&(r=process.cwd()),a=r),Kt(a),a.length!==0&&(e=a+"/"+e,t=a.charCodeAt(0)===47)}return e=Lr(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Kt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Lr(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Kt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];Kt(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":ce.normalize(e)},relative:function(e,t){if(Kt(e),Kt(t),e===t||(e=ce.resolve(e),t=ce.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var n=e.length,a=n-r,o=1;o<t.length&&t.charCodeAt(o)===47;++o);for(var i=t.length,f=i-o,g=a<f?a:f,p=-1,d=0;d<=g;++d){if(d===g){if(f>g){if(t.charCodeAt(o+d)===47)return t.slice(o+d+1);if(d===0)return t.slice(o+d)}else a>g&&(e.charCodeAt(r+d)===47?p=d:d===0&&(p=0));break}var v=e.charCodeAt(r+d),h=t.charCodeAt(o+d);if(v!==h)break;v===47&&(p=d)}var x="";for(d=r+p+1;d<=n;++d)(d===n||e.charCodeAt(d)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+t.slice(o+p):(o+=p,t.charCodeAt(o)===47&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Kt(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,n=-1,a=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),t===47){if(!a){n=o;break}}else a=!1;return n===-1?r?"/":".":r&&n===1?"//":e.slice(0,n)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Kt(e);var r=0,n=-1,a=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var i=t.length-1,f=-1;for(o=e.length-1;o>=0;--o){var g=e.charCodeAt(o);if(g===47){if(!a){r=o+1;break}}else f===-1&&(a=!1,f=o+1),i>=0&&(g===t.charCodeAt(i)?--i===-1&&(n=o):(i=-1,n=f))}return r===n?n=f:n===-1&&(n=e.length),e.slice(r,n)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!a){r=o+1;break}}else n===-1&&(a=!1,n=o+1);return n===-1?"":e.slice(r,n)}},extname:function(e){Kt(e);for(var t=-1,r=0,n=-1,a=!0,o=0,i=e.length-1;i>=0;--i){var f=e.charCodeAt(i);if(f===47){if(!a){r=i+1;break}continue}n===-1&&(a=!1,n=i+1),f===46?t===-1?t=i:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||n===-1||o===0||o===1&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return ms("/",e)},parse:function(e){Kt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),n=r===47,a;n?(t.root="/",a=1):a=0;for(var o=-1,i=0,f=-1,g=!0,p=e.length-1,d=0;p>=a;--p){if(r=e.charCodeAt(p),r===47){if(!g){i=p+1;break}continue}f===-1&&(g=!1,f=p+1),r===46?o===-1?o=p:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||f===-1||d===0||d===1&&o===f-1&&o===i+1?f!==-1&&(i===0&&n?t.base=t.name=e.slice(1,f):t.base=t.name=e.slice(i,f)):(i===0&&n?(t.name=e.slice(1,o),t.base=e.slice(1,f)):(t.name=e.slice(i,o),t.base=e.slice(i,f)),t.ext=e.slice(o,f)),i>0?t.dir=e.slice(0,i-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};ce.posix=ce;var fn=ce;const ys=cr(fn),gs=ai({__proto__:null,default:ys},[fn]),nr=gs;function vs(s){if(s=Ut(s),!s)return[[],""];const e=s.split("/");e[0]===""&&e.shift();const t=e.pop();return[e,t]}function Ut(s,e=!1){return s=s.trim(),s=s.replace(/(^\/*)|(\/*$)/g,""),s=s.replace(/\/+/g,"/"),s?(s="/".concat(s),e?"".concat(s,"/"):s):"/"}function Nr(s){return Jt(s).parent}function ir(s,e,t,r){const n=new Set(t),a={};for(const o of s){const i=(r==null?void 0:r[o])||o,{name:f}=Jt(i),g=n.has(f)?ws(f,n):f;n.add(g),a[o]=nr.join(e,g)}return a}function ws(s,e){for(;e.has(s);){const t=s.match(/(\((\d+)\))?(\..*)?$/);if(!t){s="".concat(s,"(1)");break}const[r,n,a]=t;if(!r)s="".concat(s,"(1)");else{let o="";a?o=r.replace(n,"(".concat(parseInt(a)+1,")")):o="(1)".concat(r),s=s.replace(r,o)}}return s}const _s="_$*%#@♧⊙";function gr(s){const e="".concat(s,"-").concat(_s),t=Be(e);return{data:t,length:t.byteLength}}const ln=()=>gr("dir"),{data:hn,length:ta}=ln(),{data:vr,length:dn}=gr("link");function qt(s){return s?be(s,hn)?"dir":pn(s,vr)?"link":"file":"empty"}function pn(s,e){const t=e.byteLength;return!!(s.byteLength>=t&&be(s.slice(0,t),e))}function fe(s,e){if(s==="empty")return new Uint8Array([]);if(s==="dir")return as(hn);const t=typeof e=="string"?Be(s==="link"?Ut(e):e):e;return s==="link"?De(vr,t):t}function bs(s){return rr(s.slice(dn))}class Ur{static Supported(){return typeof navigator.storage<"u"&&typeof FileSystemWritableFileStream<"u"}async init(){await navigator.permissions.query({name:"persistent-storage"});const{usage:e=0,quota:t=0}=await navigator.storage.estimate();if(e>=t)throw new Error("存储空间不足");this.root=await navigator.storage.getDirectory()}async read(e){const{file:t}=await this.getHandleByPath(e);return t?this._readFile(t):null}async write(e,t){const{file:r}=await this.getHandleByPath(e);return r?(await this._writeFile(r,t),!0):!1}async _writeFile(e,t){const r=await e.createWritable();await r.write(t),await r.close()}async append(e,t){const{file:r}=await this.getHandleByPath(e);if(!r)return!1;const n=await r.createWritable(),a=await this._readFile(r);return await n.write(a),await n.write({type:"write",position:a.byteLength,data:t}),await n.close(),!0}async remove(e){const{name:t,dir:r}=await this.getParentByPath(e);if(!r)return!1;const[,n]=await ie(r.removeEntry(t,{recursive:!0}));return!n}async stat(e,t=!0){const{type:r,file:n,dir:a}=await this.getHandleByPath(e);if(r==="empty")return{size:0,type:r};let o=0;if(r==="file"){const i=await n.getFile();if(o=i.size,await this._isLinkFile(i))return{type:"link",size:o}}else if(t){const i=[];await this.traverse(a,f=>{i.push((async()=>{o+=(await f.getFile()).size})())}),await Promise.all(i)}return{type:r,size:o}}async _isLinkFile(e){if(e.size===dn){const r=new Uint8Array(await e.arrayBuffer());if(be(r,vr))return!0}return!1}async traverse(e,t){for await(const r of e.entries())r[1].kind==="directory"?await this.traverse(r[1],t):t(r[1],r[0])}async traverseContent(e,t=""){let r;if(!t)r=this.root;else{const{dir:n}=await this.getHandleByPath(t);if(!n)throw new Error("dir not found: ".concat(t));r=n}await this._traverseContent(t,r,e)}async _traverseContent(e,t,r){for await(const n of t.entries()){const[a,o]=n,i="".concat(e,"/").concat(a);o.kind==="directory"?(r(i,Promise.resolve(null)),await this._traverseContent(i,o,r)):r(i,this._readFile(o))}}async exist(e){const{type:t}=await this.getHandleByPath(e);return t!=="empty"}async ls(e){console.log("ls ".concat(e));const{type:t,dir:r}=await this.getHandleByPath(e);if(t!=="dir")return null;const n=[];for await(const a of r.keys())n.push(a);return n}async existInDir(e,t){for await(const r of t.keys())if(e===r)return!0;return!1}async createLink(e,t,r=!1){return this.createFile(e,fe("link",t),r)}async createFile(e,t,r=!1){const{dir:n,name:a}=await this.clearTarget(e,r);if(!n)return!1;const o=await n.getFileHandle(a,{create:!0});return t&&await this._writeFile(o,t),!0}async createDir(e,t=!1){const{dir:r,name:n}=await this.clearTarget(e,t);return r?(await r.getDirectoryHandle(n,{create:!0}),!0):!1}async clearTarget(e,t){const{name:r,dir:n}=await this.getParentByPath(e);if(!n)return{dir:null,name:r};if(await this.existInDir(r,n))if(t)await n.removeEntry(r,{recursive:!0});else return{dir:null,name:r};return{dir:n,name:r}}async _readFile(e){const t=await e.getFile();return new Uint8Array(await t.arrayBuffer())}async getHandleByPath(e){if(e==="/")return{type:"dir",dir:this.root};const{name:t,dir:r}=await this.getParentByPath(e);if(!r)return{type:"empty"};const[n,a]=await ie(r.getFileHandle(t));if(a){const[o,i]=await ie(r.getDirectoryHandle(t));return i?{type:"empty"}:{type:"dir",dir:o}}else return{type:"file",file:n}}async getParentByPath(e){const[t,r]=vs(e);if(!r)return{name:r};let n=this.root;for(const a of t){const[o,i]=await ie(n.getDirectoryHandle(a));if(i)return{name:a};n=o}return{name:r,dir:n}}}class ks{async traverseContent(e,t=""){const r=await Vt.keys();for(const n of r)n.startsWith(t)&&e(n,Vt.getItem(n))}static Supported(){return!0}async init(){await Vt.ready()}async read(e){const t=await Vt.getItem(Ut(e)),r=qt(t);return r==="empty"||r==="dir"?null:t}async write(e,t){const[,r]=await ie(Vt.setItem(Ut(e),t));return!r}async append(e,t){e=Ut(e);const r=await this.read(e);return r?this.write(e,De(r,t)):!1}async remove(e){e=Ut(e);const t=await this.read(Ut(e)),r=qt(t);if(r==="empty")return!1;const[,n]=await ie(Vt.removeItem(e));if(!n)return!n;if(r==="file")return!0;const a=[];return await this.traverse(e,({path:o})=>{a.push(Vt.removeItem(o))}),await Promise.all(a),!0}async stat(e,t){e=Ut(e);const r=await this.read(e),n=qt(r);if(n==="empty")return{size:0,type:n};if(n==="file"||n==="link")return{size:r.byteLength,type:n};if(!t)return{size:0,type:n};let a=0;const o=[];return await this.traverse(e,({path:i})=>{o.push((async()=>{a+=(await this.stat(i,t)).size})())}),await Promise.all(o),{size:a,type:n}}async exist(e){return!!await this.read(Ut(e))}async ls(e){const t=[];return await this.traverse(e,({parent:r,name:n})=>{r===e&&t.push(n)}),t}async createFile(e,t=new Uint8Array([]),r=!1){return!r&&await this.exist(e)?!1:(await this.write(e,t),!0)}async createDir(e,t){if(e=Ut(e),await this.exist(e)){if(!t)return!1;const r=[];await this.traverse(e,({path:n})=>{r.push(this.remove(n))}),await Promise.all(r)}return await this.write(e,fe("dir")),!0}async traverse(e,t){const r=await Vt.keys(),n=Ut(e,!0);for(const a of r)a.startsWith(n)&&t(Jt(a))}}class xs{constructor(){this.fileMap={}}async init(e){const t=[];await e.traverseContent((r,n)=>{t.push((async()=>{const a=await n;this.fileMap[r]=a||ln().data})())}),await Promise.all(t)}read(e){const t=this.fileMap[e],r=qt(t);return r==="empty"||r==="dir"?null:t}pureRead(e){return this.fileMap[e]}write(e,t){return this.fileMap[e]=t,!0}append(e,t){if(e in this.fileMap)return!1;const r=this.read(e);if(!r)throw new Error("file not found");return this.write(e,De(r,t))}remove(e,t){const r=this.getType(e);return r==="empty"||!(e in this.fileMap)?!1:(this._removeSingle(e,t),r==="file"||this.traverse(e,({path:n})=>{this._removeSingle(n,t)}),!0)}_removeSingle(e,t){delete this.fileMap[e],t==null||t(e)}stat(e,t){const r=this.fileMap[e],n=qt(r);if(n==="empty")return{size:0,type:n};if(n==="file"||n==="link")return{size:r.byteLength,type:n};if(!t)return{size:0,type:n};let a=0;return this.traverse(e,({path:o})=>{const i=this.fileMap[o];qt(i)==="file"&&(a+=i.byteLength)}),{size:a,type:n}}exist(e){return e in this.fileMap}ls(e){const t=[];return this.traverse(e,({parent:r,name:n})=>{r===e&&t.push(n)}),t}createFile(e,t=new Uint8Array([]),r=!1){return!r&&this.exist(e)?!1:(this.write(e,t),!0)}createDir(e,t){if(this.exist(e)){if(!t)return!1;this.traverse(e,({path:r})=>{this.remove(r)})}return this.write(e,fe("dir")),!0}getType(e){const t=this.fileMap[e];return qt(t)}traverse(e,t,r=!1){const n=Object.keys(this.fileMap),a=Ut(e,!r);for(const o of n)o.startsWith(a)&&t(Jt(o))}traverseContent(e,t=""){this.traverse(t,({path:r})=>{e(r,this.read(r))})}}function Wt(s,e,t){const r=t.value,n=e.endsWith("Sync");t.value=function(...a){const o=this.fmtPath(a[0]||""),i=f=>(a[0]=f||o,r.apply(this,a));if(n){const f=this._link.getSync(o);return i(f)}else{const{ready:f,resolve:g}=yr();return this._link.get(o).then(p=>i(p)).then(p=>{g(p)}),f}}}class Ss{constructor(e,t){this.backend=e,this.syncMiddleware=t}async get(e,t){const r=t||await this.backend.read(e);return this._get(r)}getSync(e,t){const r=t||this.syncMiddleware.read(e);return this._get(r)}_get(e){return qt(e)==="link"?bs(e):""}}var mn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(s,e){(function(t){s.exports=t()})(function(){return function t(r,n,a){function o(g,p){if(!n[g]){if(!r[g]){var d=typeof te=="function"&&te;if(!p&&d)return d(g,!0);if(i)return i(g,!0);var v=new Error("Cannot find module '"+g+"'");throw v.code="MODULE_NOT_FOUND",v}var h=n[g]={exports:{}};r[g][0].call(h.exports,function(x){var w=r[g][1][x];return o(w||x)},h,h.exports,t,r,n,a)}return n[g].exports}for(var i=typeof te=="function"&&te,f=0;f<a.length;f++)o(a[f]);return o}({1:[function(t,r,n){var a=t("./utils"),o=t("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(f){for(var g,p,d,v,h,x,w,k=[],b=0,A=f.length,F=A,N=a.getTypeOf(f)!=="string";b<f.length;)F=A-b,d=N?(g=f[b++],p=b<A?f[b++]:0,b<A?f[b++]:0):(g=f.charCodeAt(b++),p=b<A?f.charCodeAt(b++):0,b<A?f.charCodeAt(b++):0),v=g>>2,h=(3&g)<<4|p>>4,x=1<F?(15&p)<<2|d>>6:64,w=2<F?63&d:64,k.push(i.charAt(v)+i.charAt(h)+i.charAt(x)+i.charAt(w));return k.join("")},n.decode=function(f){var g,p,d,v,h,x,w=0,k=0,b="data:";if(f.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var A,F=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===i.charAt(64)&&F--,f.charAt(f.length-2)===i.charAt(64)&&F--,F%1!=0)throw new Error("Invalid base64 input, bad content length.");for(A=o.uint8array?new Uint8Array(0|F):new Array(0|F);w<f.length;)g=i.indexOf(f.charAt(w++))<<2|(v=i.indexOf(f.charAt(w++)))>>4,p=(15&v)<<4|(h=i.indexOf(f.charAt(w++)))>>2,d=(3&h)<<6|(x=i.indexOf(f.charAt(w++))),A[k++]=g,h!==64&&(A[k++]=p),x!==64&&(A[k++]=d);return A}},{"./support":30,"./utils":32}],2:[function(t,r,n){var a=t("./external"),o=t("./stream/DataWorker"),i=t("./stream/Crc32Probe"),f=t("./stream/DataLengthProbe");function g(p,d,v,h,x){this.compressedSize=p,this.uncompressedSize=d,this.crc32=v,this.compression=h,this.compressedContent=x}g.prototype={getContentWorker:function(){var p=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),d=this;return p.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},g.createWorkerFrom=function(p,d,v){return p.pipe(new i).pipe(new f("uncompressedSize")).pipe(d.compressWorker(v)).pipe(new f("compressedSize")).withStreamInfo("compression",d)},r.exports=g},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,n){var a=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,n){var a=t("./utils"),o=function(){for(var i,f=[],g=0;g<256;g++){i=g;for(var p=0;p<8;p++)i=1&i?3988292384^i>>>1:i>>>1;f[g]=i}return f}();r.exports=function(i,f){return i!==void 0&&i.length?a.getTypeOf(i)!=="string"?function(g,p,d,v){var h=o,x=v+d;g^=-1;for(var w=v;w<x;w++)g=g>>>8^h[255&(g^p[w])];return-1^g}(0|f,i,i.length,0):function(g,p,d,v){var h=o,x=v+d;g^=-1;for(var w=v;w<x;w++)g=g>>>8^h[255&(g^p.charCodeAt(w))];return-1^g}(0|f,i,i.length,0):0}},{"./utils":32}],5:[function(t,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,r,n){var a=null;a=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:a}},{lie:37}],7:[function(t,r,n){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),i=t("./utils"),f=t("./stream/GenericWorker"),g=a?"uint8array":"array";function p(d,v){f.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=v,this.meta={}}n.magic="\b\0",i.inherits(p,f),p.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(g,d.data),!1)},p.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(v){d.push({data:v,meta:d.meta})}},n.compressWorker=function(d){return new p("Deflate",d)},n.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,n){function a(h,x){var w,k="";for(w=0;w<x;w++)k+=String.fromCharCode(255&h),h>>>=8;return k}function o(h,x,w,k,b,A){var F,N,B=h.file,Z=h.compression,W=A!==g.utf8encode,X=i.transformTo("string",A(B.name)),H=i.transformTo("string",g.utf8encode(B.name)),rt=B.comment,dt=i.transformTo("string",A(rt)),T=i.transformTo("string",g.utf8encode(rt)),V=H.length!==B.name.length,m=T.length!==rt.length,q="",vt="",et="",_t=B.dir,at=B.date,gt={crc32:0,compressedSize:0,uncompressedSize:0};x&&!w||(gt.crc32=h.crc32,gt.compressedSize=h.compressedSize,gt.uncompressedSize=h.uncompressedSize);var j=0;x&&(j|=8),W||!V&&!m||(j|=2048);var M=0,yt=0;_t&&(M|=16),b==="UNIX"?(yt=798,M|=function(ft,Pt){var Ot=ft;return ft||(Ot=Pt?16893:33204),(65535&Ot)<<16}(B.unixPermissions,_t)):(yt=20,M|=function(ft){return 63&(ft||0)}(B.dosPermissions)),F=at.getUTCHours(),F<<=6,F|=at.getUTCMinutes(),F<<=5,F|=at.getUTCSeconds()/2,N=at.getUTCFullYear()-1980,N<<=4,N|=at.getUTCMonth()+1,N<<=5,N|=at.getUTCDate(),V&&(vt=a(1,1)+a(p(X),4)+H,q+="up"+a(vt.length,2)+vt),m&&(et=a(1,1)+a(p(dt),4)+T,q+="uc"+a(et.length,2)+et);var lt="";return lt+="\n\0",lt+=a(j,2),lt+=Z.magic,lt+=a(F,2),lt+=a(N,2),lt+=a(gt.crc32,4),lt+=a(gt.compressedSize,4),lt+=a(gt.uncompressedSize,4),lt+=a(X.length,2),lt+=a(q.length,2),{fileRecord:d.LOCAL_FILE_HEADER+lt+X+q,dirRecord:d.CENTRAL_FILE_HEADER+a(yt,2)+lt+a(dt.length,2)+"\0\0\0\0"+a(M,4)+a(k,4)+X+q+dt}}var i=t("../utils"),f=t("../stream/GenericWorker"),g=t("../utf8"),p=t("../crc32"),d=t("../signature");function v(h,x,w,k){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=w,this.encodeFileName=k,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(v,f),v.prototype.push=function(h){var x=h.meta.percent||0,w=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,f.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:w?(x+100*(w-k-1))/w:100}}))},v.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var x=this.streamFiles&&!h.file.dir;if(x){var w=o(h,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(h){this.accumulate=!1;var x=this.streamFiles&&!h.file.dir,w=o(h,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),x)this.push({data:function(k){return d.DATA_DESCRIPTOR+a(k.crc32,4)+a(k.compressedSize,4)+a(k.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var h=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var w=this.bytesWritten-h,k=function(b,A,F,N,B){var Z=i.transformTo("string",B(N));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(b,2)+a(b,2)+a(A,4)+a(F,4)+a(Z.length,2)+Z}(this.dirRecords.length,w,h,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(h){this._sources.push(h);var x=this;return h.on("data",function(w){x.processChunk(w)}),h.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),h.on("error",function(w){x.error(w)}),this},v.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(h){var x=this._sources;if(!f.prototype.error.call(this,h))return!1;for(var w=0;w<x.length;w++)try{x[w].error(h)}catch(k){}return!0},v.prototype.lock=function(){f.prototype.lock.call(this);for(var h=this._sources,x=0;x<h.length;x++)h[x].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,n){var a=t("../compressions"),o=t("./ZipFileWorker");n.generateWorker=function(i,f,g){var p=new o(f.streamFiles,g,f.platform,f.encodeFileName),d=0;try{i.forEach(function(v,h){d++;var x=function(A,F){var N=A||F,B=a[N];if(!B)throw new Error(N+" is not a valid compression method !");return B}(h.options.compression,f.compression),w=h.options.compressionOptions||f.compressionOptions||{},k=h.dir,b=h.date;h._compressWorker(x,w).withStreamInfo("file",{name:v,dir:k,date:b,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(p)}),p.entriesCount=d}catch(v){p.error(v)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,n){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var i in this)typeof this[i]!="function"&&(o[i]=this[i]);return o}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(o,i){return new a().loadAsync(o,i)},a.external=t("./external"),r.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,n){var a=t("./utils"),o=t("./external"),i=t("./utf8"),f=t("./zipEntries"),g=t("./stream/Crc32Probe"),p=t("./nodejsUtils");function d(v){return new o.Promise(function(h,x){var w=v.decompressed.getContentWorker().pipe(new g);w.on("error",function(k){x(k)}).on("end",function(){w.streamInfo.crc32!==v.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}r.exports=function(v,h){var x=this;return h=a.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),p.isNode&&p.isStream(v)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",v,!0,h.optimizedBinaryString,h.base64).then(function(w){var k=new f(h);return k.load(w),k}).then(function(w){var k=[o.Promise.resolve(w)],b=w.files;if(h.checkCRC32)for(var A=0;A<b.length;A++)k.push(d(b[A]));return o.Promise.all(k)}).then(function(w){for(var k=w.shift(),b=k.files,A=0;A<b.length;A++){var F=b[A],N=F.fileNameStr,B=a.resolve(F.fileNameStr);x.file(B,F.decompressed,{binary:!0,optimizedBinaryString:!0,date:F.date,dir:F.dir,comment:F.fileCommentStr.length?F.fileCommentStr:null,unixPermissions:F.unixPermissions,dosPermissions:F.dosPermissions,createFolders:h.createFolders}),F.dir||(x.file(B).unsafeOriginalName=N)}return k.zipComment.length&&(x.comment=k.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,n){var a=t("../utils"),o=t("../stream/GenericWorker");function i(f,g){o.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(g)}a.inherits(i,o),i.prototype._bindStream=function(f){var g=this;(this._stream=f).pause(),f.on("data",function(p){g.push({data:p,meta:{percent:0}})}).on("error",function(p){g.isPaused?this.generatedError=p:g.error(p)}).on("end",function(){g.isPaused?g._upstreamEnded=!0:g.end()})},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,n){var a=t("readable-stream").Readable;function o(i,f,g){a.call(this,f),this._helper=i;var p=this;i.on("data",function(d,v){p.push(d)||p._helper.pause(),g&&g(v)}).on("error",function(d){p.emit("error",d)}).on("end",function(){p.push(null)})}t("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,n){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,r,n){function a(B,Z,W){var X,H=i.getTypeOf(Z),rt=i.extend(W||{},p);rt.date=rt.date||new Date,rt.compression!==null&&(rt.compression=rt.compression.toUpperCase()),typeof rt.unixPermissions=="string"&&(rt.unixPermissions=parseInt(rt.unixPermissions,8)),rt.unixPermissions&&16384&rt.unixPermissions&&(rt.dir=!0),rt.dosPermissions&&16&rt.dosPermissions&&(rt.dir=!0),rt.dir&&(B=b(B)),rt.createFolders&&(X=k(B))&&A.call(this,X,!0);var dt=H==="string"&&rt.binary===!1&&rt.base64===!1;W&&W.binary!==void 0||(rt.binary=!dt),(Z instanceof d&&Z.uncompressedSize===0||rt.dir||!Z||Z.length===0)&&(rt.base64=!1,rt.binary=!0,Z="",rt.compression="STORE",H="string");var T=null;T=Z instanceof d||Z instanceof f?Z:x.isNode&&x.isStream(Z)?new w(B,Z):i.prepareContent(B,Z,rt.binary,rt.optimizedBinaryString,rt.base64);var V=new v(B,T,rt);this.files[B]=V}var o=t("./utf8"),i=t("./utils"),f=t("./stream/GenericWorker"),g=t("./stream/StreamHelper"),p=t("./defaults"),d=t("./compressedObject"),v=t("./zipObject"),h=t("./generate"),x=t("./nodejsUtils"),w=t("./nodejs/NodejsStreamInputAdapter"),k=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var Z=B.lastIndexOf("/");return 0<Z?B.substring(0,Z):""},b=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},A=function(B,Z){return Z=Z!==void 0?Z:p.createFolders,B=b(B),this.files[B]||a.call(this,B,null,{dir:!0,createFolders:Z}),this.files[B]};function F(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var Z,W,X;for(Z in this.files)X=this.files[Z],(W=Z.slice(this.root.length,Z.length))&&Z.slice(0,this.root.length)===this.root&&B(W,X)},filter:function(B){var Z=[];return this.forEach(function(W,X){B(W,X)&&Z.push(X)}),Z},file:function(B,Z,W){if(arguments.length!==1)return B=this.root+B,a.call(this,B,Z,W),this;if(F(B)){var X=B;return this.filter(function(rt,dt){return!dt.dir&&X.test(rt)})}var H=this.files[this.root+B];return H&&!H.dir?H:null},folder:function(B){if(!B)return this;if(F(B))return this.filter(function(H,rt){return rt.dir&&B.test(H)});var Z=this.root+B,W=A.call(this,Z),X=this.clone();return X.root=W.name,X},remove:function(B){B=this.root+B;var Z=this.files[B];if(Z||(B.slice(-1)!=="/"&&(B+="/"),Z=this.files[B]),Z&&!Z.dir)delete this.files[B];else for(var W=this.filter(function(H,rt){return rt.name.slice(0,B.length)===B}),X=0;X<W.length;X++)delete this.files[W[X].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var Z,W={};try{if((W=i.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=W.type.toLowerCase(),W.compression=W.compression.toUpperCase(),W.type==="binarystring"&&(W.type="string"),!W.type)throw new Error("No output type specified.");i.checkSupport(W.type),W.platform!=="darwin"&&W.platform!=="freebsd"&&W.platform!=="linux"&&W.platform!=="sunos"||(W.platform="UNIX"),W.platform==="win32"&&(W.platform="DOS");var X=W.comment||this.comment||"";Z=h.generateWorker(this,W,X)}catch(H){(Z=new f("error")).error(H)}return new g(Z,W.type||"string",W.mimeType)},generateAsync:function(B,Z){return this.generateInternalStream(B).accumulate(Z)},generateNodeStream:function(B,Z){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(Z)}};r.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,n){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,n){var a=t("./DataReader");function o(i){a.call(this,i);for(var f=0;f<this.data.length;f++)i[f]=255&i[f]}t("../utils").inherits(o,a),o.prototype.byteAt=function(i){return this.data[this.zero+i]},o.prototype.lastIndexOfSignature=function(i){for(var f=i.charCodeAt(0),g=i.charCodeAt(1),p=i.charCodeAt(2),d=i.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===f&&this.data[v+1]===g&&this.data[v+2]===p&&this.data[v+3]===d)return v-this.zero;return-1},o.prototype.readAndCheckSignature=function(i){var f=i.charCodeAt(0),g=i.charCodeAt(1),p=i.charCodeAt(2),d=i.charCodeAt(3),v=this.readData(4);return f===v[0]&&g===v[1]&&p===v[2]&&d===v[3]},o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,f},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,n){var a=t("../utils");function o(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var f,g=0;for(this.checkOffset(i),f=this.index+i-1;f>=this.index;f--)g=(g<<8)+this.byteAt(f);return this.index+=i,g},readString:function(i){return a.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,n){var a=t("./Uint8ArrayReader");function o(i){a.call(this,i)}t("../utils").inherits(o,a),o.prototype.readData=function(i){this.checkOffset(i);var f=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,f},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,n){var a=t("./DataReader");function o(i){a.call(this,i)}t("../utils").inherits(o,a),o.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},o.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},o.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},o.prototype.readData=function(i){this.checkOffset(i);var f=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,f},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,n){var a=t("./ArrayReader");function o(i){a.call(this,i)}t("../utils").inherits(o,a),o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,f},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,n){var a=t("../utils"),o=t("../support"),i=t("./ArrayReader"),f=t("./StringReader"),g=t("./NodeBufferReader"),p=t("./Uint8ArrayReader");r.exports=function(d){var v=a.getTypeOf(d);return a.checkSupport(v),v!=="string"||o.uint8array?v==="nodebuffer"?new g(d):o.uint8array?new p(a.transformTo("uint8array",d)):new i(a.transformTo("array",d)):new f(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,n){var a=t("./GenericWorker"),o=t("../utils");function i(f){a.call(this,"ConvertWorker to "+f),this.destType=f}o.inherits(i,a),i.prototype.processChunk=function(f){this.push({data:o.transformTo(this.destType,f.data),meta:f.meta})},r.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,n){var a=t("./GenericWorker"),o=t("../crc32");function i(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(i,a),i.prototype.processChunk=function(f){this.streamInfo.crc32=o(f.data,this.streamInfo.crc32||0),this.push(f)},r.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,n){var a=t("../utils"),o=t("./GenericWorker");function i(f){o.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}a.inherits(i,o),i.prototype.processChunk=function(f){if(f){var g=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=g+f.data.length}o.prototype.processChunk.call(this,f)},r.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,n){var a=t("../utils"),o=t("./GenericWorker");function i(f){o.call(this,"DataWorker");var g=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(p){g.dataIsReady=!0,g.data=p,g.max=p&&p.length||0,g.type=a.getTypeOf(p),g.isPaused||g._tickAndRepeat()},function(p){g.error(p)})}a.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,g=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,g);break;case"uint8array":f=this.data.subarray(this.index,g);break;case"array":case"nodebuffer":f=this.data.slice(this.index,g)}return this.index=g,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,n){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,i){return this._listeners[o].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,i){if(this._listeners[o])for(var f=0;f<this._listeners[o].length;f++)this._listeners[o][f].call(this,i)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var i=this;return o.on("data",function(f){i.processChunk(f)}),o.on("end",function(){i.end()}),o.on("error",function(f){i.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,i){return this.extraStreamInfo[o]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=a},{}],29:[function(t,r,n){var a=t("../utils"),o=t("./ConvertWorker"),i=t("./GenericWorker"),f=t("../base64"),g=t("../support"),p=t("../external"),d=null;if(g.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch(x){}function v(x,w){return new p.Promise(function(k,b){var A=[],F=x._internalType,N=x._outputType,B=x._mimeType;x.on("data",function(Z,W){A.push(Z),w&&w(W)}).on("error",function(Z){A=[],b(Z)}).on("end",function(){try{var Z=function(W,X,H){switch(W){case"blob":return a.newBlob(a.transformTo("arraybuffer",X),H);case"base64":return f.encode(X);default:return a.transformTo(W,X)}}(N,function(W,X){var H,rt=0,dt=null,T=0;for(H=0;H<X.length;H++)T+=X[H].length;switch(W){case"string":return X.join("");case"array":return Array.prototype.concat.apply([],X);case"uint8array":for(dt=new Uint8Array(T),H=0;H<X.length;H++)dt.set(X[H],rt),rt+=X[H].length;return dt;case"nodebuffer":return Buffer.concat(X);default:throw new Error("concat : unsupported type '"+W+"'")}}(F,A),B);k(Z)}catch(W){b(W)}A=[]}).resume()})}function h(x,w,k){var b=w;switch(w){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=w,this._mimeType=k,a.checkSupport(b),this._worker=x.pipe(new o(b)),x.lock()}catch(A){this._worker=new i("error"),this._worker.error(A)}}h.prototype={accumulate:function(x){return v(this,x)},on:function(x,w){var k=this;return x==="data"?this._worker.on(x,function(b){w.call(k,b.data,b.meta)}):this._worker.on(x,function(){a.delay(w,arguments,k)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},x)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var a=new ArrayBuffer(0);try{n.blob=new Blob([a],{type:"application/zip"}).size===0}catch(i){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),n.blob=o.getBlob("application/zip").size===0}catch(f){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(i){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,n){for(var a=t("./utils"),o=t("./support"),i=t("./nodejsUtils"),f=t("./stream/GenericWorker"),g=new Array(256),p=0;p<256;p++)g[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;g[254]=g[254]=1;function d(){f.call(this,"utf-8 decode"),this.leftOver=null}function v(){f.call(this,"utf-8 encode")}n.utf8encode=function(h){return o.nodebuffer?i.newBufferFrom(h,"utf-8"):function(x){var w,k,b,A,F,N=x.length,B=0;for(A=0;A<N;A++)(64512&(k=x.charCodeAt(A)))==55296&&A+1<N&&(64512&(b=x.charCodeAt(A+1)))==56320&&(k=65536+(k-55296<<10)+(b-56320),A++),B+=k<128?1:k<2048?2:k<65536?3:4;for(w=o.uint8array?new Uint8Array(B):new Array(B),A=F=0;F<B;A++)(64512&(k=x.charCodeAt(A)))==55296&&A+1<N&&(64512&(b=x.charCodeAt(A+1)))==56320&&(k=65536+(k-55296<<10)+(b-56320),A++),k<128?w[F++]=k:(k<2048?w[F++]=192|k>>>6:(k<65536?w[F++]=224|k>>>12:(w[F++]=240|k>>>18,w[F++]=128|k>>>12&63),w[F++]=128|k>>>6&63),w[F++]=128|63&k);return w}(h)},n.utf8decode=function(h){return o.nodebuffer?a.transformTo("nodebuffer",h).toString("utf-8"):function(x){var w,k,b,A,F=x.length,N=new Array(2*F);for(w=k=0;w<F;)if((b=x[w++])<128)N[k++]=b;else if(4<(A=g[b]))N[k++]=65533,w+=A-1;else{for(b&=A===2?31:A===3?15:7;1<A&&w<F;)b=b<<6|63&x[w++],A--;1<A?N[k++]=65533:b<65536?N[k++]=b:(b-=65536,N[k++]=55296|b>>10&1023,N[k++]=56320|1023&b)}return N.length!==k&&(N.subarray?N=N.subarray(0,k):N.length=k),a.applyFromCharCode(N)}(h=a.transformTo(o.uint8array?"uint8array":"array",h))},a.inherits(d,f),d.prototype.processChunk=function(h){var x=a.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var w=x;(x=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),x.set(w,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var k=function(A,F){var N;for((F=F||A.length)>A.length&&(F=A.length),N=F-1;0<=N&&(192&A[N])==128;)N--;return N<0||N===0?F:N+g[A[N]]>F?N:F}(x),b=x;k!==x.length&&(o.uint8array?(b=x.subarray(0,k),this.leftOver=x.subarray(k,x.length)):(b=x.slice(0,k),this.leftOver=x.slice(k,x.length))),this.push({data:n.utf8decode(b),meta:h.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=d,a.inherits(v,f),v.prototype.processChunk=function(h){this.push({data:n.utf8encode(h.data),meta:h.meta})},n.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,n){var a=t("./support"),o=t("./base64"),i=t("./nodejsUtils"),f=t("./external");function g(w){return w}function p(w,k){for(var b=0;b<w.length;++b)k[b]=255&w.charCodeAt(b);return k}t("setimmediate"),n.newBlob=function(w,k){n.checkSupport("blob");try{return new Blob([w],{type:k})}catch(A){try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(w),b.getBlob(k)}catch(F){throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(w,k,b){var A=[],F=0,N=w.length;if(N<=b)return String.fromCharCode.apply(null,w);for(;F<N;)k==="array"||k==="nodebuffer"?A.push(String.fromCharCode.apply(null,w.slice(F,Math.min(F+b,N)))):A.push(String.fromCharCode.apply(null,w.subarray(F,Math.min(F+b,N)))),F+=b;return A.join("")},stringifyByChar:function(w){for(var k="",b=0;b<w.length;b++)k+=String.fromCharCode(w[b]);return k},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(w){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch(w){return!1}}()}};function v(w){var k=65536,b=n.getTypeOf(w),A=!0;if(b==="uint8array"?A=d.applyCanBeUsed.uint8array:b==="nodebuffer"&&(A=d.applyCanBeUsed.nodebuffer),A)for(;1<k;)try{return d.stringifyByChunk(w,b,k)}catch(F){k=Math.floor(k/2)}return d.stringifyByChar(w)}function h(w,k){for(var b=0;b<w.length;b++)k[b]=w[b];return k}n.applyFromCharCode=v;var x={};x.string={string:g,array:function(w){return p(w,new Array(w.length))},arraybuffer:function(w){return x.string.uint8array(w).buffer},uint8array:function(w){return p(w,new Uint8Array(w.length))},nodebuffer:function(w){return p(w,i.allocBuffer(w.length))}},x.array={string:v,array:g,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return i.newBufferFrom(w)}},x.arraybuffer={string:function(w){return v(new Uint8Array(w))},array:function(w){return h(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:g,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return i.newBufferFrom(new Uint8Array(w))}},x.uint8array={string:v,array:function(w){return h(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:g,nodebuffer:function(w){return i.newBufferFrom(w)}},x.nodebuffer={string:v,array:function(w){return h(w,new Array(w.length))},arraybuffer:function(w){return x.nodebuffer.uint8array(w).buffer},uint8array:function(w){return h(w,new Uint8Array(w.length))},nodebuffer:g},n.transformTo=function(w,k){if(k=k||"",!w)return k;n.checkSupport(w);var b=n.getTypeOf(k);return x[b][w](k)},n.resolve=function(w){for(var k=w.split("/"),b=[],A=0;A<k.length;A++){var F=k[A];F==="."||F===""&&A!==0&&A!==k.length-1||(F===".."?b.pop():b.push(F))}return b.join("/")},n.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":a.nodebuffer&&i.isBuffer(w)?"nodebuffer":a.uint8array&&w instanceof Uint8Array?"uint8array":a.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(w){if(!a[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(w){var k,b,A="";for(b=0;b<(w||"").length;b++)A+="\\x"+((k=w.charCodeAt(b))<16?"0":"")+k.toString(16).toUpperCase();return A},n.delay=function(w,k,b){setImmediate(function(){w.apply(b||null,k||[])})},n.inherits=function(w,k){function b(){}b.prototype=k.prototype,w.prototype=new b},n.extend=function(){var w,k,b={};for(w=0;w<arguments.length;w++)for(k in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],k)&&b[k]===void 0&&(b[k]=arguments[w][k]);return b},n.prepareContent=function(w,k,b,A,F){return f.Promise.resolve(k).then(function(N){return a.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new f.Promise(function(B,Z){var W=new FileReader;W.onload=function(X){B(X.target.result)},W.onerror=function(X){Z(X.target.error)},W.readAsArrayBuffer(N)}):N}).then(function(N){var B=n.getTypeOf(N);return B?(B==="arraybuffer"?N=n.transformTo("uint8array",N):B==="string"&&(F?N=o.decode(N):b&&A!==!0&&(N=function(Z){return p(Z,a.uint8array?new Uint8Array(Z.length):new Array(Z.length))}(N))),N):f.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,n){var a=t("./reader/readerFor"),o=t("./utils"),i=t("./signature"),f=t("./zipEntry"),g=t("./support");function p(d){this.files=[],this.loadOptions=d}p.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(v)+", expected "+o.pretty(d)+")")}},isSignature:function(d,v){var h=this.reader.index;this.reader.setIndex(d);var x=this.reader.readString(4)===v;return this.reader.setIndex(h),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),v=g.uint8array?"uint8array":"array",h=o.transformTo(v,d);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,v,h,x=this.zip64EndOfCentralSize-44;0<x;)d=this.reader.readInt(2),v=this.reader.readInt(4),h=this.reader.readData(v),this.zip64ExtensibleData[d]={id:d,length:v,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,v;for(d=0;d<this.files.length;d++)v=this.files[d],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(d=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var v=d;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var x=v-h;if(0<x)this.isSignature(v,i.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(d){this.reader=a(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,n){var a=t("./reader/readerFor"),o=t("./utils"),i=t("./compressedObject"),f=t("./crc32"),g=t("./utf8"),p=t("./compressions"),d=t("./support");function v(h,x){this.options=h,this.loadOptions=x}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var x,w;if(h.skip(22),this.fileNameLength=h.readInt(2),w=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((x=function(k){for(var b in p)if(Object.prototype.hasOwnProperty.call(p,b)&&p[b].magic===k)return p[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,x,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var x=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(x),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var x,w,k,b=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<b;)x=h.readInt(2),w=h.readInt(2),k=h.readData(w),this.extraFields[x]={id:x,length:w,value:k};h.setIndex(b)},handleUTF8:function(){var h=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=g.utf8decode(this.fileName),this.fileCommentStr=g.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(x!==null)this.fileNameStr=x;else{var w=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var b=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var x=a(h.value);return x.readInt(1)!==1||f(this.fileName)!==x.readInt(4)?null:g.utf8decode(x.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var x=a(h.value);return x.readInt(1)!==1||f(this.fileComment)!==x.readInt(4)?null:g.utf8decode(x.readData(h.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,n){function a(x,w,k){this.name=x,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=w,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var o=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),f=t("./utf8"),g=t("./compressedObject"),p=t("./stream/GenericWorker");a.prototype={internalStream:function(x){var w=null,k="string";try{if(!x)throw new Error("No output type specified.");var b=(k=x.toLowerCase())==="string"||k==="text";k!=="binarystring"&&k!=="text"||(k="string"),w=this._decompressWorker();var A=!this._dataBinary;A&&!b&&(w=w.pipe(new f.Utf8EncodeWorker)),!A&&b&&(w=w.pipe(new f.Utf8DecodeWorker))}catch(F){(w=new p("error")).error(F)}return new o(w,k,"")},async:function(x,w){return this.internalStream(x).accumulate(w)},nodeStream:function(x,w){return this.internalStream(x||"nodebuffer").toNodejsStream(w)},_compressWorker:function(x,w){if(this._data instanceof g&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new f.Utf8EncodeWorker)),g.createWorkerFrom(k,x,w)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof p?this._data:new i(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<d.length;h++)a.prototype[d[h]]=v;r.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,n){(function(a){var o,i,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,p=new f(x),d=a.document.createTextNode("");p.observe(d,{characterData:!0}),o=function(){d.data=g=++g%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var w=a.document.createElement("script");w.onreadystatechange=function(){x(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},a.document.documentElement.appendChild(w)}:function(){setTimeout(x,0)};else{var v=new a.MessageChannel;v.port1.onmessage=x,o=function(){v.port2.postMessage(0)}}var h=[];function x(){var w,k;i=!0;for(var b=h.length;b;){for(k=h,h=[],w=-1;++w<b;)k[w]();b=h.length}i=!1}r.exports=function(w){h.push(w)!==1||i||o()}}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,n){var a=t("immediate");function o(){}var i={},f=["REJECTED"],g=["FULFILLED"],p=["PENDING"];function d(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,b!==o&&w(this,b)}function v(b,A,F){this.promise=b,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof F=="function"&&(this.onRejected=F,this.callRejected=this.otherCallRejected)}function h(b,A,F){a(function(){var N;try{N=A(F)}catch(B){return i.reject(b,B)}N===b?i.reject(b,new TypeError("Cannot resolve promise with itself")):i.resolve(b,N)})}function x(b){var A=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof A=="function")return function(){A.apply(b,arguments)}}function w(b,A){var F=!1;function N(W){F||(F=!0,i.reject(b,W))}function B(W){F||(F=!0,i.resolve(b,W))}var Z=k(function(){A(B,N)});Z.status==="error"&&N(Z.value)}function k(b,A){var F={};try{F.value=b(A),F.status="success"}catch(N){F.status="error",F.value=N}return F}(r.exports=d).prototype.finally=function(b){if(typeof b!="function")return this;var A=this.constructor;return this.then(function(F){return A.resolve(b()).then(function(){return F})},function(F){return A.resolve(b()).then(function(){throw F})})},d.prototype.catch=function(b){return this.then(null,b)},d.prototype.then=function(b,A){if(typeof b!="function"&&this.state===g||typeof A!="function"&&this.state===f)return this;var F=new this.constructor(o);return this.state!==p?h(F,this.state===g?b:A,this.outcome):this.queue.push(new v(F,b,A)),F},v.prototype.callFulfilled=function(b){i.resolve(this.promise,b)},v.prototype.otherCallFulfilled=function(b){h(this.promise,this.onFulfilled,b)},v.prototype.callRejected=function(b){i.reject(this.promise,b)},v.prototype.otherCallRejected=function(b){h(this.promise,this.onRejected,b)},i.resolve=function(b,A){var F=k(x,A);if(F.status==="error")return i.reject(b,F.value);var N=F.value;if(N)w(b,N);else{b.state=g,b.outcome=A;for(var B=-1,Z=b.queue.length;++B<Z;)b.queue[B].callFulfilled(A)}return b},i.reject=function(b,A){b.state=f,b.outcome=A;for(var F=-1,N=b.queue.length;++F<N;)b.queue[F].callRejected(A);return b},d.resolve=function(b){return b instanceof this?b:i.resolve(new this(o),b)},d.reject=function(b){var A=new this(o);return i.reject(A,b)},d.all=function(b){var A=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var F=b.length,N=!1;if(!F)return this.resolve([]);for(var B=new Array(F),Z=0,W=-1,X=new this(o);++W<F;)H(b[W],W);return X;function H(rt,dt){A.resolve(rt).then(function(T){B[dt]=T,++Z!==F||N||(N=!0,i.resolve(X,B))},function(T){N||(N=!0,i.reject(X,T))})}},d.race=function(b){var A=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var F=b.length,N=!1;if(!F)return this.resolve([]);for(var B=-1,Z=new this(o);++B<F;)W=b[B],A.resolve(W).then(function(X){N||(N=!0,i.resolve(Z,X))},function(X){N||(N=!0,i.reject(Z,X))});var W;return Z}},{immediate:36}],38:[function(t,r,n){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,n){var a=t("./zlib/deflate"),o=t("./utils/common"),i=t("./utils/strings"),f=t("./zlib/messages"),g=t("./zlib/zstream"),p=Object.prototype.toString,d=0,v=-1,h=0,x=8;function w(b){if(!(this instanceof w))return new w(b);this.options=o.assign({level:v,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},b||{});var A=this.options;A.raw&&0<A.windowBits?A.windowBits=-A.windowBits:A.gzip&&0<A.windowBits&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var F=a.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(F!==d)throw new Error(f[F]);if(A.header&&a.deflateSetHeader(this.strm,A.header),A.dictionary){var N;if(N=typeof A.dictionary=="string"?i.string2buf(A.dictionary):p.call(A.dictionary)==="[object ArrayBuffer]"?new Uint8Array(A.dictionary):A.dictionary,(F=a.deflateSetDictionary(this.strm,N))!==d)throw new Error(f[F]);this._dict_set=!0}}function k(b,A){var F=new w(A);if(F.push(b,!0),F.err)throw F.msg||f[F.err];return F.result}w.prototype.push=function(b,A){var F,N,B=this.strm,Z=this.options.chunkSize;if(this.ended)return!1;N=A===~~A?A:A===!0?4:0,typeof b=="string"?B.input=i.string2buf(b):p.call(b)==="[object ArrayBuffer]"?B.input=new Uint8Array(b):B.input=b,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(Z),B.next_out=0,B.avail_out=Z),(F=a.deflate(B,N))!==1&&F!==d)return this.onEnd(F),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(o.shrinkBuf(B.output,B.next_out))):this.onData(o.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&F!==1);return N===4?(F=a.deflateEnd(this.strm),this.onEnd(F),this.ended=!0,F===d):N!==2||(this.onEnd(d),!(B.avail_out=0))},w.prototype.onData=function(b){this.chunks.push(b)},w.prototype.onEnd=function(b){b===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Deflate=w,n.deflate=k,n.deflateRaw=function(b,A){return(A=A||{}).raw=!0,k(b,A)},n.gzip=function(b,A){return(A=A||{}).gzip=!0,k(b,A)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,n){var a=t("./zlib/inflate"),o=t("./utils/common"),i=t("./utils/strings"),f=t("./zlib/constants"),g=t("./zlib/messages"),p=t("./zlib/zstream"),d=t("./zlib/gzheader"),v=Object.prototype.toString;function h(w){if(!(this instanceof h))return new h(w);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},w||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||w&&w.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&!(15&k.windowBits)&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var b=a.inflateInit2(this.strm,k.windowBits);if(b!==f.Z_OK)throw new Error(g[b]);this.header=new d,a.inflateGetHeader(this.strm,this.header)}function x(w,k){var b=new h(k);if(b.push(w,!0),b.err)throw b.msg||g[b.err];return b.result}h.prototype.push=function(w,k){var b,A,F,N,B,Z,W=this.strm,X=this.options.chunkSize,H=this.options.dictionary,rt=!1;if(this.ended)return!1;A=k===~~k?k:k===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof w=="string"?W.input=i.binstring2buf(w):v.call(w)==="[object ArrayBuffer]"?W.input=new Uint8Array(w):W.input=w,W.next_in=0,W.avail_in=W.input.length;do{if(W.avail_out===0&&(W.output=new o.Buf8(X),W.next_out=0,W.avail_out=X),(b=a.inflate(W,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&H&&(Z=typeof H=="string"?i.string2buf(H):v.call(H)==="[object ArrayBuffer]"?new Uint8Array(H):H,b=a.inflateSetDictionary(this.strm,Z)),b===f.Z_BUF_ERROR&&rt===!0&&(b=f.Z_OK,rt=!1),b!==f.Z_STREAM_END&&b!==f.Z_OK)return this.onEnd(b),!(this.ended=!0);W.next_out&&(W.avail_out!==0&&b!==f.Z_STREAM_END&&(W.avail_in!==0||A!==f.Z_FINISH&&A!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(F=i.utf8border(W.output,W.next_out),N=W.next_out-F,B=i.buf2string(W.output,F),W.next_out=N,W.avail_out=X-N,N&&o.arraySet(W.output,W.output,F,N,0),this.onData(B)):this.onData(o.shrinkBuf(W.output,W.next_out)))),W.avail_in===0&&W.avail_out===0&&(rt=!0)}while((0<W.avail_in||W.avail_out===0)&&b!==f.Z_STREAM_END);return b===f.Z_STREAM_END&&(A=f.Z_FINISH),A===f.Z_FINISH?(b=a.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===f.Z_OK):A!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(W.avail_out=0))},h.prototype.onData=function(w){this.chunks.push(w)},h.prototype.onEnd=function(w){w===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},n.Inflate=h,n.inflate=x,n.inflateRaw=function(w,k){return(k=k||{}).raw=!0,x(w,k)},n.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,n){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(f){for(var g=Array.prototype.slice.call(arguments,1);g.length;){var p=g.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var d in p)p.hasOwnProperty(d)&&(f[d]=p[d])}}return f},n.shrinkBuf=function(f,g){return f.length===g?f:f.subarray?f.subarray(0,g):(f.length=g,f)};var o={arraySet:function(f,g,p,d,v){if(g.subarray&&f.subarray)f.set(g.subarray(p,p+d),v);else for(var h=0;h<d;h++)f[v+h]=g[p+h]},flattenChunks:function(f){var g,p,d,v,h,x;for(g=d=0,p=f.length;g<p;g++)d+=f[g].length;for(x=new Uint8Array(d),g=v=0,p=f.length;g<p;g++)h=f[g],x.set(h,v),v+=h.length;return x}},i={arraySet:function(f,g,p,d,v){for(var h=0;h<d;h++)f[v+h]=g[p+h]},flattenChunks:function(f){return[].concat.apply([],f)}};n.setTyped=function(f){f?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(a)},{}],42:[function(t,r,n){var a=t("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(d){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(d){i=!1}for(var f=new a.Buf8(256),g=0;g<256;g++)f[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;function p(d,v){if(v<65537&&(d.subarray&&i||!d.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(d,v));for(var h="",x=0;x<v;x++)h+=String.fromCharCode(d[x]);return h}f[254]=f[254]=1,n.string2buf=function(d){var v,h,x,w,k,b=d.length,A=0;for(w=0;w<b;w++)(64512&(h=d.charCodeAt(w)))==55296&&w+1<b&&(64512&(x=d.charCodeAt(w+1)))==56320&&(h=65536+(h-55296<<10)+(x-56320),w++),A+=h<128?1:h<2048?2:h<65536?3:4;for(v=new a.Buf8(A),w=k=0;k<A;w++)(64512&(h=d.charCodeAt(w)))==55296&&w+1<b&&(64512&(x=d.charCodeAt(w+1)))==56320&&(h=65536+(h-55296<<10)+(x-56320),w++),h<128?v[k++]=h:(h<2048?v[k++]=192|h>>>6:(h<65536?v[k++]=224|h>>>12:(v[k++]=240|h>>>18,v[k++]=128|h>>>12&63),v[k++]=128|h>>>6&63),v[k++]=128|63&h);return v},n.buf2binstring=function(d){return p(d,d.length)},n.binstring2buf=function(d){for(var v=new a.Buf8(d.length),h=0,x=v.length;h<x;h++)v[h]=d.charCodeAt(h);return v},n.buf2string=function(d,v){var h,x,w,k,b=v||d.length,A=new Array(2*b);for(h=x=0;h<b;)if((w=d[h++])<128)A[x++]=w;else if(4<(k=f[w]))A[x++]=65533,h+=k-1;else{for(w&=k===2?31:k===3?15:7;1<k&&h<b;)w=w<<6|63&d[h++],k--;1<k?A[x++]=65533:w<65536?A[x++]=w:(w-=65536,A[x++]=55296|w>>10&1023,A[x++]=56320|1023&w)}return p(A,x)},n.utf8border=function(d,v){var h;for((v=v||d.length)>d.length&&(v=d.length),h=v-1;0<=h&&(192&d[h])==128;)h--;return h<0||h===0?v:h+f[d[h]]>v?h:v}},{"./common":41}],43:[function(t,r,n){r.exports=function(a,o,i,f){for(var g=65535&a|0,p=a>>>16&65535|0,d=0;i!==0;){for(i-=d=2e3<i?2e3:i;p=p+(g=g+o[f++]|0)|0,--d;);g%=65521,p%=65521}return g|p<<16|0}},{}],44:[function(t,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,n){var a=function(){for(var o,i=[],f=0;f<256;f++){o=f;for(var g=0;g<8;g++)o=1&o?3988292384^o>>>1:o>>>1;i[f]=o}return i}();r.exports=function(o,i,f,g){var p=a,d=g+f;o^=-1;for(var v=g;v<d;v++)o=o>>>8^p[255&(o^i[v])];return-1^o}},{}],46:[function(t,r,n){var a,o=t("../utils/common"),i=t("./trees"),f=t("./adler32"),g=t("./crc32"),p=t("./messages"),d=0,v=4,h=0,x=-2,w=-1,k=4,b=2,A=8,F=9,N=286,B=30,Z=19,W=2*N+1,X=15,H=3,rt=258,dt=rt+H+1,T=42,V=113,m=1,q=2,vt=3,et=4;function _t(l,G){return l.msg=p[G],G}function at(l){return(l<<1)-(4<l?9:0)}function gt(l){for(var G=l.length;0<=--G;)l[G]=0}function j(l){var G=l.state,K=G.pending;K>l.avail_out&&(K=l.avail_out),K!==0&&(o.arraySet(l.output,G.pending_buf,G.pending_out,K,l.next_out),l.next_out+=K,G.pending_out+=K,l.total_out+=K,l.avail_out-=K,G.pending-=K,G.pending===0&&(G.pending_out=0))}function M(l,G){i._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,G),l.block_start=l.strstart,j(l.strm)}function yt(l,G){l.pending_buf[l.pending++]=G}function lt(l,G){l.pending_buf[l.pending++]=G>>>8&255,l.pending_buf[l.pending++]=255&G}function ft(l,G){var K,I,C=l.max_chain_length,R=l.strstart,Q=l.prev_length,tt=l.nice_match,U=l.strstart>l.w_size-dt?l.strstart-(l.w_size-dt):0,st=l.window,ht=l.w_mask,it=l.prev,mt=l.strstart+rt,y=st[R+Q-1],u=st[R+Q];l.prev_length>=l.good_match&&(C>>=2),tt>l.lookahead&&(tt=l.lookahead);do if(st[(K=G)+Q]===u&&st[K+Q-1]===y&&st[K]===st[R]&&st[++K]===st[R+1]){R+=2,K++;do;while(st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&R<mt);if(I=rt-(mt-R),R=mt-rt,Q<I){if(l.match_start=G,tt<=(Q=I))break;y=st[R+Q-1],u=st[R+Q]}}while((G=it[G&ht])>U&&--C!=0);return Q<=l.lookahead?Q:l.lookahead}function Pt(l){var G,K,I,C,R,Q,tt,U,st,ht,it=l.w_size;do{if(C=l.window_size-l.lookahead-l.strstart,l.strstart>=it+(it-dt)){for(o.arraySet(l.window,l.window,it,it,0),l.match_start-=it,l.strstart-=it,l.block_start-=it,G=K=l.hash_size;I=l.head[--G],l.head[G]=it<=I?I-it:0,--K;);for(G=K=it;I=l.prev[--G],l.prev[G]=it<=I?I-it:0,--K;);C+=it}if(l.strm.avail_in===0)break;if(Q=l.strm,tt=l.window,U=l.strstart+l.lookahead,st=C,ht=void 0,ht=Q.avail_in,st<ht&&(ht=st),K=ht===0?0:(Q.avail_in-=ht,o.arraySet(tt,Q.input,Q.next_in,ht,U),Q.state.wrap===1?Q.adler=f(Q.adler,tt,ht,U):Q.state.wrap===2&&(Q.adler=g(Q.adler,tt,ht,U)),Q.next_in+=ht,Q.total_in+=ht,ht),l.lookahead+=K,l.lookahead+l.insert>=H)for(R=l.strstart-l.insert,l.ins_h=l.window[R],l.ins_h=(l.ins_h<<l.hash_shift^l.window[R+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[R+H-1])&l.hash_mask,l.prev[R&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=R,R++,l.insert--,!(l.lookahead+l.insert<H)););}while(l.lookahead<dt&&l.strm.avail_in!==0)}function Ot(l,G){for(var K,I;;){if(l.lookahead<dt){if(Pt(l),l.lookahead<dt&&G===d)return m;if(l.lookahead===0)break}if(K=0,l.lookahead>=H&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),K!==0&&l.strstart-K<=l.w_size-dt&&(l.match_length=ft(l,K)),l.match_length>=H)if(I=i._tr_tally(l,l.strstart-l.match_start,l.match_length-H),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=H){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else I=i._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(I&&(M(l,!1),l.strm.avail_out===0))return m}return l.insert=l.strstart<H-1?l.strstart:H-1,G===v?(M(l,!0),l.strm.avail_out===0?vt:et):l.last_lit&&(M(l,!1),l.strm.avail_out===0)?m:q}function bt(l,G){for(var K,I,C;;){if(l.lookahead<dt){if(Pt(l),l.lookahead<dt&&G===d)return m;if(l.lookahead===0)break}if(K=0,l.lookahead>=H&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=H-1,K!==0&&l.prev_length<l.max_lazy_match&&l.strstart-K<=l.w_size-dt&&(l.match_length=ft(l,K),l.match_length<=5&&(l.strategy===1||l.match_length===H&&4096<l.strstart-l.match_start)&&(l.match_length=H-1)),l.prev_length>=H&&l.match_length<=l.prev_length){for(C=l.strstart+l.lookahead-H,I=i._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-H),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=C&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=H-1,l.strstart++,I&&(M(l,!1),l.strm.avail_out===0))return m}else if(l.match_available){if((I=i._tr_tally(l,0,l.window[l.strstart-1]))&&M(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return m}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(I=i._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<H-1?l.strstart:H-1,G===v?(M(l,!0),l.strm.avail_out===0?vt:et):l.last_lit&&(M(l,!1),l.strm.avail_out===0)?m:q}function xt(l,G,K,I,C){this.good_length=l,this.max_lazy=G,this.nice_length=K,this.max_chain=I,this.func=C}function zt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*W),this.dyn_dtree=new o.Buf16(2*(2*B+1)),this.bl_tree=new o.Buf16(2*(2*Z+1)),gt(this.dyn_ltree),gt(this.dyn_dtree),gt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(X+1),this.heap=new o.Buf16(2*N+1),gt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*N+1),gt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ft(l){var G;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=b,(G=l.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?T:V,l.adler=G.wrap===2?0:1,G.last_flush=d,i._tr_init(G),h):_t(l,x)}function Nt(l){var G=Ft(l);return G===h&&function(K){K.window_size=2*K.w_size,gt(K.head),K.max_lazy_match=a[K.level].max_lazy,K.good_match=a[K.level].good_length,K.nice_match=a[K.level].nice_length,K.max_chain_length=a[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=H-1,K.match_available=0,K.ins_h=0}(l.state),G}function Rt(l,G,K,I,C,R){if(!l)return x;var Q=1;if(G===w&&(G=6),I<0?(Q=0,I=-I):15<I&&(Q=2,I-=16),C<1||F<C||K!==A||I<8||15<I||G<0||9<G||R<0||k<R)return _t(l,x);I===8&&(I=9);var tt=new zt;return(l.state=tt).strm=l,tt.wrap=Q,tt.gzhead=null,tt.w_bits=I,tt.w_size=1<<tt.w_bits,tt.w_mask=tt.w_size-1,tt.hash_bits=C+7,tt.hash_size=1<<tt.hash_bits,tt.hash_mask=tt.hash_size-1,tt.hash_shift=~~((tt.hash_bits+H-1)/H),tt.window=new o.Buf8(2*tt.w_size),tt.head=new o.Buf16(tt.hash_size),tt.prev=new o.Buf16(tt.w_size),tt.lit_bufsize=1<<C+6,tt.pending_buf_size=4*tt.lit_bufsize,tt.pending_buf=new o.Buf8(tt.pending_buf_size),tt.d_buf=1*tt.lit_bufsize,tt.l_buf=3*tt.lit_bufsize,tt.level=G,tt.strategy=R,tt.method=K,Nt(l)}a=[new xt(0,0,0,0,function(l,G){var K=65535;for(K>l.pending_buf_size-5&&(K=l.pending_buf_size-5);;){if(l.lookahead<=1){if(Pt(l),l.lookahead===0&&G===d)return m;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var I=l.block_start+K;if((l.strstart===0||l.strstart>=I)&&(l.lookahead=l.strstart-I,l.strstart=I,M(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-dt&&(M(l,!1),l.strm.avail_out===0))return m}return l.insert=0,G===v?(M(l,!0),l.strm.avail_out===0?vt:et):(l.strstart>l.block_start&&(M(l,!1),l.strm.avail_out),m)}),new xt(4,4,8,4,Ot),new xt(4,5,16,8,Ot),new xt(4,6,32,32,Ot),new xt(4,4,16,16,bt),new xt(8,16,32,32,bt),new xt(8,16,128,128,bt),new xt(8,32,128,256,bt),new xt(32,128,258,1024,bt),new xt(32,258,258,4096,bt)],n.deflateInit=function(l,G){return Rt(l,G,A,15,8,0)},n.deflateInit2=Rt,n.deflateReset=Nt,n.deflateResetKeep=Ft,n.deflateSetHeader=function(l,G){return l&&l.state?l.state.wrap!==2?x:(l.state.gzhead=G,h):x},n.deflate=function(l,G){var K,I,C,R;if(!l||!l.state||5<G||G<0)return l?_t(l,x):x;if(I=l.state,!l.output||!l.input&&l.avail_in!==0||I.status===666&&G!==v)return _t(l,l.avail_out===0?-5:x);if(I.strm=l,K=I.last_flush,I.last_flush=G,I.status===T)if(I.wrap===2)l.adler=0,yt(I,31),yt(I,139),yt(I,8),I.gzhead?(yt(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),yt(I,255&I.gzhead.time),yt(I,I.gzhead.time>>8&255),yt(I,I.gzhead.time>>16&255),yt(I,I.gzhead.time>>24&255),yt(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),yt(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(yt(I,255&I.gzhead.extra.length),yt(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(l.adler=g(l.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(yt(I,0),yt(I,0),yt(I,0),yt(I,0),yt(I,0),yt(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),yt(I,3),I.status=V);else{var Q=A+(I.w_bits-8<<4)<<8;Q|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(Q|=32),Q+=31-Q%31,I.status=V,lt(I,Q),I.strstart!==0&&(lt(I,l.adler>>>16),lt(I,65535&l.adler)),l.adler=1}if(I.status===69)if(I.gzhead.extra){for(C=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>C&&(l.adler=g(l.adler,I.pending_buf,I.pending-C,C)),j(l),C=I.pending,I.pending!==I.pending_buf_size));)yt(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>C&&(l.adler=g(l.adler,I.pending_buf,I.pending-C,C)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){C=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>C&&(l.adler=g(l.adler,I.pending_buf,I.pending-C,C)),j(l),C=I.pending,I.pending===I.pending_buf_size)){R=1;break}R=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,yt(I,R)}while(R!==0);I.gzhead.hcrc&&I.pending>C&&(l.adler=g(l.adler,I.pending_buf,I.pending-C,C)),R===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){C=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>C&&(l.adler=g(l.adler,I.pending_buf,I.pending-C,C)),j(l),C=I.pending,I.pending===I.pending_buf_size)){R=1;break}R=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,yt(I,R)}while(R!==0);I.gzhead.hcrc&&I.pending>C&&(l.adler=g(l.adler,I.pending_buf,I.pending-C,C)),R===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&j(l),I.pending+2<=I.pending_buf_size&&(yt(I,255&l.adler),yt(I,l.adler>>8&255),l.adler=0,I.status=V)):I.status=V),I.pending!==0){if(j(l),l.avail_out===0)return I.last_flush=-1,h}else if(l.avail_in===0&&at(G)<=at(K)&&G!==v)return _t(l,-5);if(I.status===666&&l.avail_in!==0)return _t(l,-5);if(l.avail_in!==0||I.lookahead!==0||G!==d&&I.status!==666){var tt=I.strategy===2?function(U,st){for(var ht;;){if(U.lookahead===0&&(Pt(U),U.lookahead===0)){if(st===d)return m;break}if(U.match_length=0,ht=i._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++,ht&&(M(U,!1),U.strm.avail_out===0))return m}return U.insert=0,st===v?(M(U,!0),U.strm.avail_out===0?vt:et):U.last_lit&&(M(U,!1),U.strm.avail_out===0)?m:q}(I,G):I.strategy===3?function(U,st){for(var ht,it,mt,y,u=U.window;;){if(U.lookahead<=rt){if(Pt(U),U.lookahead<=rt&&st===d)return m;if(U.lookahead===0)break}if(U.match_length=0,U.lookahead>=H&&0<U.strstart&&(it=u[mt=U.strstart-1])===u[++mt]&&it===u[++mt]&&it===u[++mt]){y=U.strstart+rt;do;while(it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&mt<y);U.match_length=rt-(y-mt),U.match_length>U.lookahead&&(U.match_length=U.lookahead)}if(U.match_length>=H?(ht=i._tr_tally(U,1,U.match_length-H),U.lookahead-=U.match_length,U.strstart+=U.match_length,U.match_length=0):(ht=i._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++),ht&&(M(U,!1),U.strm.avail_out===0))return m}return U.insert=0,st===v?(M(U,!0),U.strm.avail_out===0?vt:et):U.last_lit&&(M(U,!1),U.strm.avail_out===0)?m:q}(I,G):a[I.level].func(I,G);if(tt!==vt&&tt!==et||(I.status=666),tt===m||tt===vt)return l.avail_out===0&&(I.last_flush=-1),h;if(tt===q&&(G===1?i._tr_align(I):G!==5&&(i._tr_stored_block(I,0,0,!1),G===3&&(gt(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),j(l),l.avail_out===0))return I.last_flush=-1,h}return G!==v?h:I.wrap<=0?1:(I.wrap===2?(yt(I,255&l.adler),yt(I,l.adler>>8&255),yt(I,l.adler>>16&255),yt(I,l.adler>>24&255),yt(I,255&l.total_in),yt(I,l.total_in>>8&255),yt(I,l.total_in>>16&255),yt(I,l.total_in>>24&255)):(lt(I,l.adler>>>16),lt(I,65535&l.adler)),j(l),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?h:1)},n.deflateEnd=function(l){var G;return l&&l.state?(G=l.state.status)!==T&&G!==69&&G!==73&&G!==91&&G!==103&&G!==V&&G!==666?_t(l,x):(l.state=null,G===V?_t(l,-3):h):x},n.deflateSetDictionary=function(l,G){var K,I,C,R,Q,tt,U,st,ht=G.length;if(!l||!l.state||(R=(K=l.state).wrap)===2||R===1&&K.status!==T||K.lookahead)return x;for(R===1&&(l.adler=f(l.adler,G,ht,0)),K.wrap=0,ht>=K.w_size&&(R===0&&(gt(K.head),K.strstart=0,K.block_start=0,K.insert=0),st=new o.Buf8(K.w_size),o.arraySet(st,G,ht-K.w_size,K.w_size,0),G=st,ht=K.w_size),Q=l.avail_in,tt=l.next_in,U=l.input,l.avail_in=ht,l.next_in=0,l.input=G,Pt(K);K.lookahead>=H;){for(I=K.strstart,C=K.lookahead-(H-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[I+H-1])&K.hash_mask,K.prev[I&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=I,I++,--C;);K.strstart=I,K.lookahead=H-1,Pt(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=H-1,K.match_available=0,l.next_in=tt,l.input=U,l.avail_in=Q,K.wrap=R,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,n){r.exports=function(a,o){var i,f,g,p,d,v,h,x,w,k,b,A,F,N,B,Z,W,X,H,rt,dt,T,V,m,q;i=a.state,f=a.next_in,m=a.input,g=f+(a.avail_in-5),p=a.next_out,q=a.output,d=p-(o-a.avail_out),v=p+(a.avail_out-257),h=i.dmax,x=i.wsize,w=i.whave,k=i.wnext,b=i.window,A=i.hold,F=i.bits,N=i.lencode,B=i.distcode,Z=(1<<i.lenbits)-1,W=(1<<i.distbits)-1;t:do{F<15&&(A+=m[f++]<<F,F+=8,A+=m[f++]<<F,F+=8),X=N[A&Z];e:for(;;){if(A>>>=H=X>>>24,F-=H,(H=X>>>16&255)===0)q[p++]=65535&X;else{if(!(16&H)){if(!(64&H)){X=N[(65535&X)+(A&(1<<H)-1)];continue e}if(32&H){i.mode=12;break t}a.msg="invalid literal/length code",i.mode=30;break t}rt=65535&X,(H&=15)&&(F<H&&(A+=m[f++]<<F,F+=8),rt+=A&(1<<H)-1,A>>>=H,F-=H),F<15&&(A+=m[f++]<<F,F+=8,A+=m[f++]<<F,F+=8),X=B[A&W];r:for(;;){if(A>>>=H=X>>>24,F-=H,!(16&(H=X>>>16&255))){if(!(64&H)){X=B[(65535&X)+(A&(1<<H)-1)];continue r}a.msg="invalid distance code",i.mode=30;break t}if(dt=65535&X,F<(H&=15)&&(A+=m[f++]<<F,(F+=8)<H&&(A+=m[f++]<<F,F+=8)),h<(dt+=A&(1<<H)-1)){a.msg="invalid distance too far back",i.mode=30;break t}if(A>>>=H,F-=H,(H=p-d)<dt){if(w<(H=dt-H)&&i.sane){a.msg="invalid distance too far back",i.mode=30;break t}if(V=b,(T=0)===k){if(T+=x-H,H<rt){for(rt-=H;q[p++]=b[T++],--H;);T=p-dt,V=q}}else if(k<H){if(T+=x+k-H,(H-=k)<rt){for(rt-=H;q[p++]=b[T++],--H;);if(T=0,k<rt){for(rt-=H=k;q[p++]=b[T++],--H;);T=p-dt,V=q}}}else if(T+=k-H,H<rt){for(rt-=H;q[p++]=b[T++],--H;);T=p-dt,V=q}for(;2<rt;)q[p++]=V[T++],q[p++]=V[T++],q[p++]=V[T++],rt-=3;rt&&(q[p++]=V[T++],1<rt&&(q[p++]=V[T++]))}else{for(T=p-dt;q[p++]=q[T++],q[p++]=q[T++],q[p++]=q[T++],2<(rt-=3););rt&&(q[p++]=q[T++],1<rt&&(q[p++]=q[T++]))}break}}break}}while(f<g&&p<v);f-=rt=F>>3,A&=(1<<(F-=rt<<3))-1,a.next_in=f,a.next_out=p,a.avail_in=f<g?g-f+5:5-(f-g),a.avail_out=p<v?v-p+257:257-(p-v),i.hold=A,i.bits=F}},{}],49:[function(t,r,n){var a=t("../utils/common"),o=t("./adler32"),i=t("./crc32"),f=t("./inffast"),g=t("./inftrees"),p=1,d=2,v=0,h=-2,x=1,w=852,k=592;function b(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function A(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function F(T){var V;return T&&T.state?(V=T.state,T.total_in=T.total_out=V.total=0,T.msg="",V.wrap&&(T.adler=1&V.wrap),V.mode=x,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new a.Buf32(w),V.distcode=V.distdyn=new a.Buf32(k),V.sane=1,V.back=-1,v):h}function N(T){var V;return T&&T.state?((V=T.state).wsize=0,V.whave=0,V.wnext=0,F(T)):h}function B(T,V){var m,q;return T&&T.state?(q=T.state,V<0?(m=0,V=-V):(m=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?h:(q.window!==null&&q.wbits!==V&&(q.window=null),q.wrap=m,q.wbits=V,N(T))):h}function Z(T,V){var m,q;return T?(q=new A,(T.state=q).window=null,(m=B(T,V))!==v&&(T.state=null),m):h}var W,X,H=!0;function rt(T){if(H){var V;for(W=new a.Buf32(512),X=new a.Buf32(32),V=0;V<144;)T.lens[V++]=8;for(;V<256;)T.lens[V++]=9;for(;V<280;)T.lens[V++]=7;for(;V<288;)T.lens[V++]=8;for(g(p,T.lens,0,288,W,0,T.work,{bits:9}),V=0;V<32;)T.lens[V++]=5;g(d,T.lens,0,32,X,0,T.work,{bits:5}),H=!1}T.lencode=W,T.lenbits=9,T.distcode=X,T.distbits=5}function dt(T,V,m,q){var vt,et=T.state;return et.window===null&&(et.wsize=1<<et.wbits,et.wnext=0,et.whave=0,et.window=new a.Buf8(et.wsize)),q>=et.wsize?(a.arraySet(et.window,V,m-et.wsize,et.wsize,0),et.wnext=0,et.whave=et.wsize):(q<(vt=et.wsize-et.wnext)&&(vt=q),a.arraySet(et.window,V,m-q,vt,et.wnext),(q-=vt)?(a.arraySet(et.window,V,m-q,q,0),et.wnext=q,et.whave=et.wsize):(et.wnext+=vt,et.wnext===et.wsize&&(et.wnext=0),et.whave<et.wsize&&(et.whave+=vt))),0}n.inflateReset=N,n.inflateReset2=B,n.inflateResetKeep=F,n.inflateInit=function(T){return Z(T,15)},n.inflateInit2=Z,n.inflate=function(T,V){var m,q,vt,et,_t,at,gt,j,M,yt,lt,ft,Pt,Ot,bt,xt,zt,Ft,Nt,Rt,l,G,K,I,C=0,R=new a.Buf8(4),Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return h;(m=T.state).mode===12&&(m.mode=13),_t=T.next_out,vt=T.output,gt=T.avail_out,et=T.next_in,q=T.input,at=T.avail_in,j=m.hold,M=m.bits,yt=at,lt=gt,G=v;t:for(;;)switch(m.mode){case x:if(m.wrap===0){m.mode=13;break}for(;M<16;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}if(2&m.wrap&&j===35615){R[m.check=0]=255&j,R[1]=j>>>8&255,m.check=i(m.check,R,2,0),M=j=0,m.mode=2;break}if(m.flags=0,m.head&&(m.head.done=!1),!(1&m.wrap)||(((255&j)<<8)+(j>>8))%31){T.msg="incorrect header check",m.mode=30;break}if((15&j)!=8){T.msg="unknown compression method",m.mode=30;break}if(M-=4,l=8+(15&(j>>>=4)),m.wbits===0)m.wbits=l;else if(l>m.wbits){T.msg="invalid window size",m.mode=30;break}m.dmax=1<<l,T.adler=m.check=1,m.mode=512&j?10:12,M=j=0;break;case 2:for(;M<16;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}if(m.flags=j,(255&m.flags)!=8){T.msg="unknown compression method",m.mode=30;break}if(57344&m.flags){T.msg="unknown header flags set",m.mode=30;break}m.head&&(m.head.text=j>>8&1),512&m.flags&&(R[0]=255&j,R[1]=j>>>8&255,m.check=i(m.check,R,2,0)),M=j=0,m.mode=3;case 3:for(;M<32;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}m.head&&(m.head.time=j),512&m.flags&&(R[0]=255&j,R[1]=j>>>8&255,R[2]=j>>>16&255,R[3]=j>>>24&255,m.check=i(m.check,R,4,0)),M=j=0,m.mode=4;case 4:for(;M<16;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}m.head&&(m.head.xflags=255&j,m.head.os=j>>8),512&m.flags&&(R[0]=255&j,R[1]=j>>>8&255,m.check=i(m.check,R,2,0)),M=j=0,m.mode=5;case 5:if(1024&m.flags){for(;M<16;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}m.length=j,m.head&&(m.head.extra_len=j),512&m.flags&&(R[0]=255&j,R[1]=j>>>8&255,m.check=i(m.check,R,2,0)),M=j=0}else m.head&&(m.head.extra=null);m.mode=6;case 6:if(1024&m.flags&&(at<(ft=m.length)&&(ft=at),ft&&(m.head&&(l=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),a.arraySet(m.head.extra,q,et,ft,l)),512&m.flags&&(m.check=i(m.check,q,ft,et)),at-=ft,et+=ft,m.length-=ft),m.length))break t;m.length=0,m.mode=7;case 7:if(2048&m.flags){if(at===0)break t;for(ft=0;l=q[et+ft++],m.head&&l&&m.length<65536&&(m.head.name+=String.fromCharCode(l)),l&&ft<at;);if(512&m.flags&&(m.check=i(m.check,q,ft,et)),at-=ft,et+=ft,l)break t}else m.head&&(m.head.name=null);m.length=0,m.mode=8;case 8:if(4096&m.flags){if(at===0)break t;for(ft=0;l=q[et+ft++],m.head&&l&&m.length<65536&&(m.head.comment+=String.fromCharCode(l)),l&&ft<at;);if(512&m.flags&&(m.check=i(m.check,q,ft,et)),at-=ft,et+=ft,l)break t}else m.head&&(m.head.comment=null);m.mode=9;case 9:if(512&m.flags){for(;M<16;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}if(j!==(65535&m.check)){T.msg="header crc mismatch",m.mode=30;break}M=j=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),T.adler=m.check=0,m.mode=12;break;case 10:for(;M<32;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}T.adler=m.check=b(j),M=j=0,m.mode=11;case 11:if(m.havedict===0)return T.next_out=_t,T.avail_out=gt,T.next_in=et,T.avail_in=at,m.hold=j,m.bits=M,2;T.adler=m.check=1,m.mode=12;case 12:if(V===5||V===6)break t;case 13:if(m.last){j>>>=7&M,M-=7&M,m.mode=27;break}for(;M<3;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}switch(m.last=1&j,M-=1,3&(j>>>=1)){case 0:m.mode=14;break;case 1:if(rt(m),m.mode=20,V!==6)break;j>>>=2,M-=2;break t;case 2:m.mode=17;break;case 3:T.msg="invalid block type",m.mode=30}j>>>=2,M-=2;break;case 14:for(j>>>=7&M,M-=7&M;M<32;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}if((65535&j)!=(j>>>16^65535)){T.msg="invalid stored block lengths",m.mode=30;break}if(m.length=65535&j,M=j=0,m.mode=15,V===6)break t;case 15:m.mode=16;case 16:if(ft=m.length){if(at<ft&&(ft=at),gt<ft&&(ft=gt),ft===0)break t;a.arraySet(vt,q,et,ft,_t),at-=ft,et+=ft,gt-=ft,_t+=ft,m.length-=ft;break}m.mode=12;break;case 17:for(;M<14;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}if(m.nlen=257+(31&j),j>>>=5,M-=5,m.ndist=1+(31&j),j>>>=5,M-=5,m.ncode=4+(15&j),j>>>=4,M-=4,286<m.nlen||30<m.ndist){T.msg="too many length or distance symbols",m.mode=30;break}m.have=0,m.mode=18;case 18:for(;m.have<m.ncode;){for(;M<3;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}m.lens[Q[m.have++]]=7&j,j>>>=3,M-=3}for(;m.have<19;)m.lens[Q[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,K={bits:m.lenbits},G=g(0,m.lens,0,19,m.lencode,0,m.work,K),m.lenbits=K.bits,G){T.msg="invalid code lengths set",m.mode=30;break}m.have=0,m.mode=19;case 19:for(;m.have<m.nlen+m.ndist;){for(;xt=(C=m.lencode[j&(1<<m.lenbits)-1])>>>16&255,zt=65535&C,!((bt=C>>>24)<=M);){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}if(zt<16)j>>>=bt,M-=bt,m.lens[m.have++]=zt;else{if(zt===16){for(I=bt+2;M<I;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}if(j>>>=bt,M-=bt,m.have===0){T.msg="invalid bit length repeat",m.mode=30;break}l=m.lens[m.have-1],ft=3+(3&j),j>>>=2,M-=2}else if(zt===17){for(I=bt+3;M<I;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}M-=bt,l=0,ft=3+(7&(j>>>=bt)),j>>>=3,M-=3}else{for(I=bt+7;M<I;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}M-=bt,l=0,ft=11+(127&(j>>>=bt)),j>>>=7,M-=7}if(m.have+ft>m.nlen+m.ndist){T.msg="invalid bit length repeat",m.mode=30;break}for(;ft--;)m.lens[m.have++]=l}}if(m.mode===30)break;if(m.lens[256]===0){T.msg="invalid code -- missing end-of-block",m.mode=30;break}if(m.lenbits=9,K={bits:m.lenbits},G=g(p,m.lens,0,m.nlen,m.lencode,0,m.work,K),m.lenbits=K.bits,G){T.msg="invalid literal/lengths set",m.mode=30;break}if(m.distbits=6,m.distcode=m.distdyn,K={bits:m.distbits},G=g(d,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,K),m.distbits=K.bits,G){T.msg="invalid distances set",m.mode=30;break}if(m.mode=20,V===6)break t;case 20:m.mode=21;case 21:if(6<=at&&258<=gt){T.next_out=_t,T.avail_out=gt,T.next_in=et,T.avail_in=at,m.hold=j,m.bits=M,f(T,lt),_t=T.next_out,vt=T.output,gt=T.avail_out,et=T.next_in,q=T.input,at=T.avail_in,j=m.hold,M=m.bits,m.mode===12&&(m.back=-1);break}for(m.back=0;xt=(C=m.lencode[j&(1<<m.lenbits)-1])>>>16&255,zt=65535&C,!((bt=C>>>24)<=M);){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}if(xt&&!(240&xt)){for(Ft=bt,Nt=xt,Rt=zt;xt=(C=m.lencode[Rt+((j&(1<<Ft+Nt)-1)>>Ft)])>>>16&255,zt=65535&C,!(Ft+(bt=C>>>24)<=M);){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}j>>>=Ft,M-=Ft,m.back+=Ft}if(j>>>=bt,M-=bt,m.back+=bt,m.length=zt,xt===0){m.mode=26;break}if(32&xt){m.back=-1,m.mode=12;break}if(64&xt){T.msg="invalid literal/length code",m.mode=30;break}m.extra=15&xt,m.mode=22;case 22:if(m.extra){for(I=m.extra;M<I;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}m.length+=j&(1<<m.extra)-1,j>>>=m.extra,M-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=23;case 23:for(;xt=(C=m.distcode[j&(1<<m.distbits)-1])>>>16&255,zt=65535&C,!((bt=C>>>24)<=M);){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}if(!(240&xt)){for(Ft=bt,Nt=xt,Rt=zt;xt=(C=m.distcode[Rt+((j&(1<<Ft+Nt)-1)>>Ft)])>>>16&255,zt=65535&C,!(Ft+(bt=C>>>24)<=M);){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}j>>>=Ft,M-=Ft,m.back+=Ft}if(j>>>=bt,M-=bt,m.back+=bt,64&xt){T.msg="invalid distance code",m.mode=30;break}m.offset=zt,m.extra=15&xt,m.mode=24;case 24:if(m.extra){for(I=m.extra;M<I;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}m.offset+=j&(1<<m.extra)-1,j>>>=m.extra,M-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){T.msg="invalid distance too far back",m.mode=30;break}m.mode=25;case 25:if(gt===0)break t;if(ft=lt-gt,m.offset>ft){if((ft=m.offset-ft)>m.whave&&m.sane){T.msg="invalid distance too far back",m.mode=30;break}Pt=ft>m.wnext?(ft-=m.wnext,m.wsize-ft):m.wnext-ft,ft>m.length&&(ft=m.length),Ot=m.window}else Ot=vt,Pt=_t-m.offset,ft=m.length;for(gt<ft&&(ft=gt),gt-=ft,m.length-=ft;vt[_t++]=Ot[Pt++],--ft;);m.length===0&&(m.mode=21);break;case 26:if(gt===0)break t;vt[_t++]=m.length,gt--,m.mode=21;break;case 27:if(m.wrap){for(;M<32;){if(at===0)break t;at--,j|=q[et++]<<M,M+=8}if(lt-=gt,T.total_out+=lt,m.total+=lt,lt&&(T.adler=m.check=m.flags?i(m.check,vt,lt,_t-lt):o(m.check,vt,lt,_t-lt)),lt=gt,(m.flags?j:b(j))!==m.check){T.msg="incorrect data check",m.mode=30;break}M=j=0}m.mode=28;case 28:if(m.wrap&&m.flags){for(;M<32;){if(at===0)break t;at--,j+=q[et++]<<M,M+=8}if(j!==(4294967295&m.total)){T.msg="incorrect length check",m.mode=30;break}M=j=0}m.mode=29;case 29:G=1;break t;case 30:G=-3;break t;case 31:return-4;case 32:default:return h}return T.next_out=_t,T.avail_out=gt,T.next_in=et,T.avail_in=at,m.hold=j,m.bits=M,(m.wsize||lt!==T.avail_out&&m.mode<30&&(m.mode<27||V!==4))&&dt(T,T.output,T.next_out,lt-T.avail_out)?(m.mode=31,-4):(yt-=T.avail_in,lt-=T.avail_out,T.total_in+=yt,T.total_out+=lt,m.total+=lt,m.wrap&&lt&&(T.adler=m.check=m.flags?i(m.check,vt,lt,T.next_out-lt):o(m.check,vt,lt,T.next_out-lt)),T.data_type=m.bits+(m.last?64:0)+(m.mode===12?128:0)+(m.mode===20||m.mode===15?256:0),(yt==0&&lt===0||V===4)&&G===v&&(G=-5),G)},n.inflateEnd=function(T){if(!T||!T.state)return h;var V=T.state;return V.window&&(V.window=null),T.state=null,v},n.inflateGetHeader=function(T,V){var m;return T&&T.state&&2&(m=T.state).wrap?((m.head=V).done=!1,v):h},n.inflateSetDictionary=function(T,V){var m,q=V.length;return T&&T.state?(m=T.state).wrap!==0&&m.mode!==11?h:m.mode===11&&o(1,V,q,0)!==m.check?-3:dt(T,V,q,q)?(m.mode=31,-4):(m.havedict=1,v):h},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,n){var a=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(p,d,v,h,x,w,k,b){var A,F,N,B,Z,W,X,H,rt,dt=b.bits,T=0,V=0,m=0,q=0,vt=0,et=0,_t=0,at=0,gt=0,j=0,M=null,yt=0,lt=new a.Buf16(16),ft=new a.Buf16(16),Pt=null,Ot=0;for(T=0;T<=15;T++)lt[T]=0;for(V=0;V<h;V++)lt[d[v+V]]++;for(vt=dt,q=15;1<=q&&lt[q]===0;q--);if(q<vt&&(vt=q),q===0)return x[w++]=20971520,x[w++]=20971520,b.bits=1,0;for(m=1;m<q&&lt[m]===0;m++);for(vt<m&&(vt=m),T=at=1;T<=15;T++)if(at<<=1,(at-=lt[T])<0)return-1;if(0<at&&(p===0||q!==1))return-1;for(ft[1]=0,T=1;T<15;T++)ft[T+1]=ft[T]+lt[T];for(V=0;V<h;V++)d[v+V]!==0&&(k[ft[d[v+V]]++]=V);if(W=p===0?(M=Pt=k,19):p===1?(M=o,yt-=257,Pt=i,Ot-=257,256):(M=f,Pt=g,-1),T=m,Z=w,_t=V=j=0,N=-1,B=(gt=1<<(et=vt))-1,p===1&&852<gt||p===2&&592<gt)return 1;for(;;){for(X=T-_t,rt=k[V]<W?(H=0,k[V]):k[V]>W?(H=Pt[Ot+k[V]],M[yt+k[V]]):(H=96,0),A=1<<T-_t,m=F=1<<et;x[Z+(j>>_t)+(F-=A)]=X<<24|H<<16|rt|0,F!==0;);for(A=1<<T-1;j&A;)A>>=1;if(A!==0?(j&=A-1,j+=A):j=0,V++,--lt[T]==0){if(T===q)break;T=d[v+k[V]]}if(vt<T&&(j&B)!==N){for(_t===0&&(_t=vt),Z+=m,at=1<<(et=T-_t);et+_t<q&&!((at-=lt[et+_t])<=0);)et++,at<<=1;if(gt+=1<<et,p===1&&852<gt||p===2&&592<gt)return 1;x[N=j&B]=vt<<24|et<<16|Z-w|0}}return j!==0&&(x[Z+j]=T-_t<<24|64<<16|0),b.bits=vt,0}},{"../utils/common":41}],51:[function(t,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,n){var a=t("../utils/common"),o=0,i=1;function f(C){for(var R=C.length;0<=--R;)C[R]=0}var g=0,p=29,d=256,v=d+1+p,h=30,x=19,w=2*v+1,k=15,b=16,A=7,F=256,N=16,B=17,Z=18,W=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],X=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],dt=new Array(2*(v+2));f(dt);var T=new Array(2*h);f(T);var V=new Array(512);f(V);var m=new Array(256);f(m);var q=new Array(p);f(q);var vt,et,_t,at=new Array(h);function gt(C,R,Q,tt,U){this.static_tree=C,this.extra_bits=R,this.extra_base=Q,this.elems=tt,this.max_length=U,this.has_stree=C&&C.length}function j(C,R){this.dyn_tree=C,this.max_code=0,this.stat_desc=R}function M(C){return C<256?V[C]:V[256+(C>>>7)]}function yt(C,R){C.pending_buf[C.pending++]=255&R,C.pending_buf[C.pending++]=R>>>8&255}function lt(C,R,Q){C.bi_valid>b-Q?(C.bi_buf|=R<<C.bi_valid&65535,yt(C,C.bi_buf),C.bi_buf=R>>b-C.bi_valid,C.bi_valid+=Q-b):(C.bi_buf|=R<<C.bi_valid&65535,C.bi_valid+=Q)}function ft(C,R,Q){lt(C,Q[2*R],Q[2*R+1])}function Pt(C,R){for(var Q=0;Q|=1&C,C>>>=1,Q<<=1,0<--R;);return Q>>>1}function Ot(C,R,Q){var tt,U,st=new Array(k+1),ht=0;for(tt=1;tt<=k;tt++)st[tt]=ht=ht+Q[tt-1]<<1;for(U=0;U<=R;U++){var it=C[2*U+1];it!==0&&(C[2*U]=Pt(st[it]++,it))}}function bt(C){var R;for(R=0;R<v;R++)C.dyn_ltree[2*R]=0;for(R=0;R<h;R++)C.dyn_dtree[2*R]=0;for(R=0;R<x;R++)C.bl_tree[2*R]=0;C.dyn_ltree[2*F]=1,C.opt_len=C.static_len=0,C.last_lit=C.matches=0}function xt(C){8<C.bi_valid?yt(C,C.bi_buf):0<C.bi_valid&&(C.pending_buf[C.pending++]=C.bi_buf),C.bi_buf=0,C.bi_valid=0}function zt(C,R,Q,tt){var U=2*R,st=2*Q;return C[U]<C[st]||C[U]===C[st]&&tt[R]<=tt[Q]}function Ft(C,R,Q){for(var tt=C.heap[Q],U=Q<<1;U<=C.heap_len&&(U<C.heap_len&&zt(R,C.heap[U+1],C.heap[U],C.depth)&&U++,!zt(R,tt,C.heap[U],C.depth));)C.heap[Q]=C.heap[U],Q=U,U<<=1;C.heap[Q]=tt}function Nt(C,R,Q){var tt,U,st,ht,it=0;if(C.last_lit!==0)for(;tt=C.pending_buf[C.d_buf+2*it]<<8|C.pending_buf[C.d_buf+2*it+1],U=C.pending_buf[C.l_buf+it],it++,tt===0?ft(C,U,R):(ft(C,(st=m[U])+d+1,R),(ht=W[st])!==0&&lt(C,U-=q[st],ht),ft(C,st=M(--tt),Q),(ht=X[st])!==0&&lt(C,tt-=at[st],ht)),it<C.last_lit;);ft(C,F,R)}function Rt(C,R){var Q,tt,U,st=R.dyn_tree,ht=R.stat_desc.static_tree,it=R.stat_desc.has_stree,mt=R.stat_desc.elems,y=-1;for(C.heap_len=0,C.heap_max=w,Q=0;Q<mt;Q++)st[2*Q]!==0?(C.heap[++C.heap_len]=y=Q,C.depth[Q]=0):st[2*Q+1]=0;for(;C.heap_len<2;)st[2*(U=C.heap[++C.heap_len]=y<2?++y:0)]=1,C.depth[U]=0,C.opt_len--,it&&(C.static_len-=ht[2*U+1]);for(R.max_code=y,Q=C.heap_len>>1;1<=Q;Q--)Ft(C,st,Q);for(U=mt;Q=C.heap[1],C.heap[1]=C.heap[C.heap_len--],Ft(C,st,1),tt=C.heap[1],C.heap[--C.heap_max]=Q,C.heap[--C.heap_max]=tt,st[2*U]=st[2*Q]+st[2*tt],C.depth[U]=(C.depth[Q]>=C.depth[tt]?C.depth[Q]:C.depth[tt])+1,st[2*Q+1]=st[2*tt+1]=U,C.heap[1]=U++,Ft(C,st,1),2<=C.heap_len;);C.heap[--C.heap_max]=C.heap[1],function(u,c){var S,z,$,Y,wt,Bt,St=c.dyn_tree,At=c.max_code,Et=c.stat_desc.static_tree,Ne=c.stat_desc.has_stree,Yt=c.stat_desc.extra_bits,ke=c.stat_desc.extra_base,ee=c.stat_desc.max_length,re=0;for(Y=0;Y<=k;Y++)u.bl_count[Y]=0;for(St[2*u.heap[u.heap_max]+1]=0,S=u.heap_max+1;S<w;S++)ee<(Y=St[2*St[2*(z=u.heap[S])+1]+1]+1)&&(Y=ee,re++),St[2*z+1]=Y,At<z||(u.bl_count[Y]++,wt=0,ke<=z&&(wt=Yt[z-ke]),Bt=St[2*z],u.opt_len+=Bt*(Y+wt),Ne&&(u.static_len+=Bt*(Et[2*z+1]+wt)));if(re!==0){do{for(Y=ee-1;u.bl_count[Y]===0;)Y--;u.bl_count[Y]--,u.bl_count[Y+1]+=2,u.bl_count[ee]--,re-=2}while(0<re);for(Y=ee;Y!==0;Y--)for(z=u.bl_count[Y];z!==0;)At<($=u.heap[--S])||(St[2*$+1]!==Y&&(u.opt_len+=(Y-St[2*$+1])*St[2*$],St[2*$+1]=Y),z--)}}(C,R),Ot(st,y,C.bl_count)}function l(C,R,Q){var tt,U,st=-1,ht=R[1],it=0,mt=7,y=4;for(ht===0&&(mt=138,y=3),R[2*(Q+1)+1]=65535,tt=0;tt<=Q;tt++)U=ht,ht=R[2*(tt+1)+1],++it<mt&&U===ht||(it<y?C.bl_tree[2*U]+=it:U!==0?(U!==st&&C.bl_tree[2*U]++,C.bl_tree[2*N]++):it<=10?C.bl_tree[2*B]++:C.bl_tree[2*Z]++,st=U,y=(it=0)===ht?(mt=138,3):U===ht?(mt=6,3):(mt=7,4))}function G(C,R,Q){var tt,U,st=-1,ht=R[1],it=0,mt=7,y=4;for(ht===0&&(mt=138,y=3),tt=0;tt<=Q;tt++)if(U=ht,ht=R[2*(tt+1)+1],!(++it<mt&&U===ht)){if(it<y)for(;ft(C,U,C.bl_tree),--it!=0;);else U!==0?(U!==st&&(ft(C,U,C.bl_tree),it--),ft(C,N,C.bl_tree),lt(C,it-3,2)):it<=10?(ft(C,B,C.bl_tree),lt(C,it-3,3)):(ft(C,Z,C.bl_tree),lt(C,it-11,7));st=U,y=(it=0)===ht?(mt=138,3):U===ht?(mt=6,3):(mt=7,4)}}f(at);var K=!1;function I(C,R,Q,tt){lt(C,(g<<1)+(tt?1:0),3),function(U,st,ht,it){xt(U),yt(U,ht),yt(U,~ht),a.arraySet(U.pending_buf,U.window,st,ht,U.pending),U.pending+=ht}(C,R,Q)}n._tr_init=function(C){K||(function(){var R,Q,tt,U,st,ht=new Array(k+1);for(U=tt=0;U<p-1;U++)for(q[U]=tt,R=0;R<1<<W[U];R++)m[tt++]=U;for(m[tt-1]=U,U=st=0;U<16;U++)for(at[U]=st,R=0;R<1<<X[U];R++)V[st++]=U;for(st>>=7;U<h;U++)for(at[U]=st<<7,R=0;R<1<<X[U]-7;R++)V[256+st++]=U;for(Q=0;Q<=k;Q++)ht[Q]=0;for(R=0;R<=143;)dt[2*R+1]=8,R++,ht[8]++;for(;R<=255;)dt[2*R+1]=9,R++,ht[9]++;for(;R<=279;)dt[2*R+1]=7,R++,ht[7]++;for(;R<=287;)dt[2*R+1]=8,R++,ht[8]++;for(Ot(dt,v+1,ht),R=0;R<h;R++)T[2*R+1]=5,T[2*R]=Pt(R,5);vt=new gt(dt,W,d+1,v,k),et=new gt(T,X,0,h,k),_t=new gt(new Array(0),H,0,x,A)}(),K=!0),C.l_desc=new j(C.dyn_ltree,vt),C.d_desc=new j(C.dyn_dtree,et),C.bl_desc=new j(C.bl_tree,_t),C.bi_buf=0,C.bi_valid=0,bt(C)},n._tr_stored_block=I,n._tr_flush_block=function(C,R,Q,tt){var U,st,ht=0;0<C.level?(C.strm.data_type===2&&(C.strm.data_type=function(it){var mt,y=4093624447;for(mt=0;mt<=31;mt++,y>>>=1)if(1&y&&it.dyn_ltree[2*mt]!==0)return o;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return i;for(mt=32;mt<d;mt++)if(it.dyn_ltree[2*mt]!==0)return i;return o}(C)),Rt(C,C.l_desc),Rt(C,C.d_desc),ht=function(it){var mt;for(l(it,it.dyn_ltree,it.l_desc.max_code),l(it,it.dyn_dtree,it.d_desc.max_code),Rt(it,it.bl_desc),mt=x-1;3<=mt&&it.bl_tree[2*rt[mt]+1]===0;mt--);return it.opt_len+=3*(mt+1)+5+5+4,mt}(C),U=C.opt_len+3+7>>>3,(st=C.static_len+3+7>>>3)<=U&&(U=st)):U=st=Q+5,Q+4<=U&&R!==-1?I(C,R,Q,tt):C.strategy===4||st===U?(lt(C,2+(tt?1:0),3),Nt(C,dt,T)):(lt(C,4+(tt?1:0),3),function(it,mt,y,u){var c;for(lt(it,mt-257,5),lt(it,y-1,5),lt(it,u-4,4),c=0;c<u;c++)lt(it,it.bl_tree[2*rt[c]+1],3);G(it,it.dyn_ltree,mt-1),G(it,it.dyn_dtree,y-1)}(C,C.l_desc.max_code+1,C.d_desc.max_code+1,ht+1),Nt(C,C.dyn_ltree,C.dyn_dtree)),bt(C),tt&&xt(C)},n._tr_tally=function(C,R,Q){return C.pending_buf[C.d_buf+2*C.last_lit]=R>>>8&255,C.pending_buf[C.d_buf+2*C.last_lit+1]=255&R,C.pending_buf[C.l_buf+C.last_lit]=255&Q,C.last_lit++,R===0?C.dyn_ltree[2*Q]++:(C.matches++,R--,C.dyn_ltree[2*(m[Q]+d+1)]++,C.dyn_dtree[2*M(R)]++),C.last_lit===C.lit_bufsize-1},n._tr_align=function(C){lt(C,2,3),ft(C,F,dt),function(R){R.bi_valid===16?(yt(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):8<=R.bi_valid&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)}(C)}},{"../utils/common":41}],53:[function(t,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,n){(function(a){(function(o,i){if(!o.setImmediate){var f,g,p,d,v=1,h={},x=!1,w=o.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(o);k=k&&k.setTimeout?k:o,f={}.toString.call(o.process)==="[object process]"?function(N){process.nextTick(function(){A(N)})}:function(){if(o.postMessage&&!o.importScripts){var N=!0,B=o.onmessage;return o.onmessage=function(){N=!1},o.postMessage("","*"),o.onmessage=B,N}}()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",F,!1):o.attachEvent("onmessage",F),function(N){o.postMessage(d+N,"*")}):o.MessageChannel?((p=new MessageChannel).port1.onmessage=function(N){A(N.data)},function(N){p.port2.postMessage(N)}):w&&"onreadystatechange"in w.createElement("script")?(g=w.documentElement,function(N){var B=w.createElement("script");B.onreadystatechange=function(){A(N),B.onreadystatechange=null,g.removeChild(B),B=null},g.appendChild(B)}):function(N){setTimeout(A,0,N)},k.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var B=new Array(arguments.length-1),Z=0;Z<B.length;Z++)B[Z]=arguments[Z+1];var W={callback:N,args:B};return h[v]=W,f(v),v++},k.clearImmediate=b}function b(N){delete h[N]}function A(N){if(x)setTimeout(A,0,N);else{var B=h[N];if(B){x=!0;try{(function(Z){var W=Z.callback,X=Z.args;switch(X.length){case 0:W();break;case 1:W(X[0]);break;case 2:W(X[0],X[1]);break;case 3:W(X[0],X[1],X[2]);break;default:W.apply(i,X)}})(B)}finally{b(N),x=!1}}}}function F(N){N.source===o&&typeof N.data=="string"&&N.data.indexOf(d)===0&&A(+N.data.slice(d.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(mn);var Es=mn.exports;const jr=cr(Es),Cs={},{data:Ke}=gr("zip");class As{constructor(e){this.disk=e}async zip(e,t="compress.zip"){t=this.disk.fmtPath(t);const r=new jr;for(let i in e)i=this.disk.fmtPath(i),this.zipSingleFile(r,i);const n=await r.generateAsync({type:"uint8array"}),{parent:a}=Jt(t),o=ir([t],a,this.disk.lsSync(a)||[]);this.disk.createFile(o[t],De(Ke,n))}zipSingleFile(e,t){const r=this.disk.syncMiddleware.getType(t);if(r!=="empty")if(r==="dir"){const n=e.folder(t);if(!n)return;let a=this.disk.lsSync(t)||[];a=a.map(o=>Cs.join(t,o));for(const o of a)this.zipSingleFile(n,o)}else{const n=this.disk.readSync(t);if(!n)return;e.file(t,n,{binary:!0})}}async unzip(e,t){const r=this.disk.readSync(e),n=this.getZipData(r);if(!n)return;e=this.disk.fmtPath(e);const a=await this.unzipU8Arr(n);t=t?this.disk.fmtPath(t):this.disk.current;const o=[];for(const f of a)f.path.indexOf("/")===-1&&o.push(f.path);const i=ir(o,t,this.disk.lsSync(t)||[]);for(const f of a){const{parent:g,path:p}=Jt(f.path);let d=i[g];g&&(d=p.replace(g,d)),f.isDir?await this.disk.createDir(d):this.disk.createFile(f.path,f.data)}}async unzipU8Arr(e,t){const r=await jr.loadAsync(e);let n=0;const a=r.files,o=Object.keys(a).length,i=[];for(const f in r.files){const g=r.files[f],p=await g.async("uint8array");n++;const d={curName:g.name,count:n,curIndex:n,curSize:o,data:p,path:f,isDir:g.dir};t==null||t(d),i.push(d)}return i}isZip(e){const t=this.disk.readSync(e);return t?this.isZipData(t):!1}isZipData(e){return pn(e,Ke)}getZipData(e){return e&&this.isZipData(e)?e.slice(Ke.byteLength):null}}var wr={exports:{}},le=typeof Reflect=="object"?Reflect:null,Mr=le&&typeof le.apply=="function"?le.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},Ce;le&&typeof le.ownKeys=="function"?Ce=le.ownKeys:Object.getOwnPropertySymbols?Ce=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ce=function(e){return Object.getOwnPropertyNames(e)};function Is(s){console&&console.warn&&console.warn(s)}var yn=Number.isNaN||function(e){return e!==e};function Tt(){Tt.init.call(this)}wr.exports=Tt;wr.exports.once=Fs;Tt.EventEmitter=Tt;Tt.prototype._events=void 0;Tt.prototype._eventsCount=0;Tt.prototype._maxListeners=void 0;var Wr=10;function Re(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}Object.defineProperty(Tt,"defaultMaxListeners",{enumerable:!0,get:function(){return Wr},set:function(s){if(typeof s!="number"||s<0||yn(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");Wr=s}});Tt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Tt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||yn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function gn(s){return s._maxListeners===void 0?Tt.defaultMaxListeners:s._maxListeners}Tt.prototype.getMaxListeners=function(){return gn(this)};Tt.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n=e==="error",a=this._events;if(a!==void 0)n=n&&a.error===void 0;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var i=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw i.context=o,i}var f=a[e];if(f===void 0)return!1;if(typeof f=="function")Mr(f,this,t);else for(var g=f.length,p=kn(f,g),r=0;r<g;++r)Mr(p[r],this,t);return!0};function vn(s,e,t,r){var n,a,o;if(Re(t),a=s._events,a===void 0?(a=s._events=Object.create(null),s._eventsCount=0):(a.newListener!==void 0&&(s.emit("newListener",e,t.listener?t.listener:t),a=s._events),o=a[e]),o===void 0)o=a[e]=t,++s._eventsCount;else if(typeof o=="function"?o=a[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),n=gn(s),n>0&&o.length>n&&!o.warned){o.warned=!0;var i=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");i.name="MaxListenersExceededWarning",i.emitter=s,i.type=e,i.count=o.length,Is(i)}return s}Tt.prototype.addListener=function(e,t){return vn(this,e,t,!1)};Tt.prototype.on=Tt.prototype.addListener;Tt.prototype.prependListener=function(e,t){return vn(this,e,t,!0)};function Bs(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wn(s,e,t){var r={fired:!1,wrapFn:void 0,target:s,type:e,listener:t},n=Bs.bind(r);return n.listener=t,r.wrapFn=n,n}Tt.prototype.once=function(e,t){return Re(t),this.on(e,wn(this,e,t)),this};Tt.prototype.prependOnceListener=function(e,t){return Re(t),this.prependListener(e,wn(this,e,t)),this};Tt.prototype.removeListener=function(e,t){var r,n,a,o,i;if(Re(t),n=this._events,n===void 0)return this;if(r=n[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(a=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){i=r[o].listener,a=o;break}if(a<0)return this;a===0?r.shift():Ts(r,a),r.length===1&&(n[e]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",e,i||t)}return this};Tt.prototype.off=Tt.prototype.removeListener;Tt.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var a=Object.keys(r),o;for(n=0;n<a.length;++n)o=a[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this};function _n(s,e,t){var r=s._events;if(r===void 0)return[];var n=r[e];return n===void 0?[]:typeof n=="function"?t?[n.listener||n]:[n]:t?Ps(n):kn(n,n.length)}Tt.prototype.listeners=function(e){return _n(this,e,!0)};Tt.prototype.rawListeners=function(e){return _n(this,e,!1)};Tt.listenerCount=function(s,e){return typeof s.listenerCount=="function"?s.listenerCount(e):bn.call(s,e)};Tt.prototype.listenerCount=bn;function bn(s){var e=this._events;if(e!==void 0){var t=e[s];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Tt.prototype.eventNames=function(){return this._eventsCount>0?Ce(this._events):[]};function kn(s,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=s[r];return t}function Ts(s,e){for(;e+1<s.length;e++)s[e]=s[e+1];s.pop()}function Ps(s){for(var e=new Array(s.length),t=0;t<e.length;++t)e[t]=s[t].listener||s[t];return e}function Fs(s,e){return new Promise(function(t,r){function n(o){s.removeListener(e,a),r(o)}function a(){typeof s.removeListener=="function"&&s.removeListener("error",n),t([].slice.call(arguments))}xn(s,e,a,{once:!0}),e!=="error"&&zs(s,n,{once:!0})})}function zs(s,e,t){typeof s.on=="function"&&xn(s,"error",e,t)}function xn(s,e,t,r){if(typeof s.on=="function")r.once?s.once(e,t):s.on(e,t);else if(typeof s.addEventListener=="function")s.addEventListener(e,function n(a){r.once&&s.removeEventListener(e,n),t(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof s)}var Sn=wr.exports,se=(s=>(s[s.Create=0]="Create",s[s.Remove=1]="Remove",s[s.Change=2]="Change",s))(se||{}),sr={},Le={};Le.byteLength=Rs;Le.toByteArray=Ns;Le.fromByteArray=Ms;var Gt=[],Zt=[],Os=typeof Uint8Array<"u"?Uint8Array:Array,Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ue=0,Ds=Ve.length;ue<Ds;++ue)Gt[ue]=Ve[ue],Zt[Ve.charCodeAt(ue)]=ue;Zt[45]=62;Zt[95]=63;function En(s){var e=s.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=s.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Rs(s){var e=En(s),t=e[0],r=e[1];return(t+r)*3/4-r}function Ls(s,e,t){return(e+t)*3/4-t}function Ns(s){var e,t=En(s),r=t[0],n=t[1],a=new Os(Ls(s,r,n)),o=0,i=n>0?r-4:r,f;for(f=0;f<i;f+=4)e=Zt[s.charCodeAt(f)]<<18|Zt[s.charCodeAt(f+1)]<<12|Zt[s.charCodeAt(f+2)]<<6|Zt[s.charCodeAt(f+3)],a[o++]=e>>16&255,a[o++]=e>>8&255,a[o++]=e&255;return n===2&&(e=Zt[s.charCodeAt(f)]<<2|Zt[s.charCodeAt(f+1)]>>4,a[o++]=e&255),n===1&&(e=Zt[s.charCodeAt(f)]<<10|Zt[s.charCodeAt(f+1)]<<4|Zt[s.charCodeAt(f+2)]>>2,a[o++]=e>>8&255,a[o++]=e&255),a}function Us(s){return Gt[s>>18&63]+Gt[s>>12&63]+Gt[s>>6&63]+Gt[s&63]}function js(s,e,t){for(var r,n=[],a=e;a<t;a+=3)r=(s[a]<<16&16711680)+(s[a+1]<<8&65280)+(s[a+2]&255),n.push(Us(r));return n.join("")}function Ms(s){for(var e,t=s.length,r=t%3,n=[],a=16383,o=0,i=t-r;o<i;o+=a)n.push(js(s,o,o+a>i?i:o+a));return r===1?(e=s[t-1],n.push(Gt[e>>2]+Gt[e<<4&63]+"==")):r===2&&(e=(s[t-2]<<8)+s[t-1],n.push(Gt[e>>10]+Gt[e>>4&63]+Gt[e<<2&63]+"=")),n.join("")}var _r={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_r.read=function(s,e,t,r,n){var a,o,i=n*8-r-1,f=(1<<i)-1,g=f>>1,p=-7,d=t?n-1:0,v=t?-1:1,h=s[e+d];for(d+=v,a=h&(1<<-p)-1,h>>=-p,p+=i;p>0;a=a*256+s[e+d],d+=v,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=r;p>0;o=o*256+s[e+d],d+=v,p-=8);if(a===0)a=1-g;else{if(a===f)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),a=a-g}return(h?-1:1)*o*Math.pow(2,a-r)};_r.write=function(s,e,t,r,n,a){var o,i,f,g=a*8-n-1,p=(1<<g)-1,d=p>>1,v=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,x=r?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(i=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+d>=1?e+=v/f:e+=v*Math.pow(2,1-d),e*f>=2&&(o++,f/=2),o+d>=p?(i=0,o=p):o+d>=1?(i=(e*f-1)*Math.pow(2,n),o=o+d):(i=e*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;s[t+h]=i&255,h+=x,i/=256,n-=8);for(o=o<<n|i,g+=n;g>0;s[t+h]=o&255,h+=x,o/=256,g-=8);s[t+h-x]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(s){const e=Le,t=_r,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=i,s.SlowBuffer=A,s.INSPECT_MAX_BYTES=50;const n=2147483647;s.kMaxLength=n,i.TYPED_ARRAY_SUPPORT=a(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const y=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(y,u),y.foo()===42}catch(y){return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function o(y){if(y>n)throw new RangeError('The value "'+y+'" is invalid for option "size"');const u=new Uint8Array(y);return Object.setPrototypeOf(u,i.prototype),u}function i(y,u,c){if(typeof y=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(y)}return f(y,u,c)}i.poolSize=8192;function f(y,u,c){if(typeof y=="string")return v(y,u);if(ArrayBuffer.isView(y))return x(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(U(y,ArrayBuffer)||y&&U(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(U(y,SharedArrayBuffer)||y&&U(y.buffer,SharedArrayBuffer)))return w(y,u,c);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const S=y.valueOf&&y.valueOf();if(S!=null&&S!==y)return i.from(S,u,c);const z=k(y);if(z)return z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return i.from(y[Symbol.toPrimitive]("string"),u,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}i.from=function(y,u,c){return f(y,u,c)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function g(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function p(y,u,c){return g(y),y<=0?o(y):u!==void 0?typeof c=="string"?o(y).fill(u,c):o(y).fill(u):o(y)}i.alloc=function(y,u,c){return p(y,u,c)};function d(y){return g(y),o(y<0?0:b(y)|0)}i.allocUnsafe=function(y){return d(y)},i.allocUnsafeSlow=function(y){return d(y)};function v(y,u){if((typeof u!="string"||u==="")&&(u="utf8"),!i.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const c=F(y,u)|0;let S=o(c);const z=S.write(y,u);return z!==c&&(S=S.slice(0,z)),S}function h(y){const u=y.length<0?0:b(y.length)|0,c=o(u);for(let S=0;S<u;S+=1)c[S]=y[S]&255;return c}function x(y){if(U(y,Uint8Array)){const u=new Uint8Array(y);return w(u.buffer,u.byteOffset,u.byteLength)}return h(y)}function w(y,u,c){if(u<0||y.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<u+(c||0))throw new RangeError('"length" is outside of buffer bounds');let S;return u===void 0&&c===void 0?S=new Uint8Array(y):c===void 0?S=new Uint8Array(y,u):S=new Uint8Array(y,u,c),Object.setPrototypeOf(S,i.prototype),S}function k(y){if(i.isBuffer(y)){const u=b(y.length)|0,c=o(u);return c.length===0||y.copy(c,0,0,u),c}if(y.length!==void 0)return typeof y.length!="number"||st(y.length)?o(0):h(y);if(y.type==="Buffer"&&Array.isArray(y.data))return h(y.data)}function b(y){if(y>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return y|0}function A(y){return+y!=y&&(y=0),i.alloc(+y)}i.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==i.prototype},i.compare=function(u,c){if(U(u,Uint8Array)&&(u=i.from(u,u.offset,u.byteLength)),U(c,Uint8Array)&&(c=i.from(c,c.offset,c.byteLength)),!i.isBuffer(u)||!i.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===c)return 0;let S=u.length,z=c.length;for(let $=0,Y=Math.min(S,z);$<Y;++$)if(u[$]!==c[$]){S=u[$],z=c[$];break}return S<z?-1:z<S?1:0},i.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(u,c){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return i.alloc(0);let S;if(c===void 0)for(c=0,S=0;S<u.length;++S)c+=u[S].length;const z=i.allocUnsafe(c);let $=0;for(S=0;S<u.length;++S){let Y=u[S];if(U(Y,Uint8Array))$+Y.length>z.length?(i.isBuffer(Y)||(Y=i.from(Y)),Y.copy(z,$)):Uint8Array.prototype.set.call(z,Y,$);else if(i.isBuffer(Y))Y.copy(z,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=Y.length}return z};function F(y,u){if(i.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||U(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const c=y.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&c===0)return 0;let z=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return I(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Q(y).length;default:if(z)return S?-1:I(y).length;u=(""+u).toLowerCase(),z=!0}}i.byteLength=F;function N(y,u,c){let S=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,u>>>=0,c<=u))return"";for(y||(y="utf8");;)switch(y){case"hex":return at(this,u,c);case"utf8":case"utf-8":return m(this,u,c);case"ascii":return et(this,u,c);case"latin1":case"binary":return _t(this,u,c);case"base64":return V(this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,u,c);default:if(S)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),S=!0}}i.prototype._isBuffer=!0;function B(y,u,c){const S=y[u];y[u]=y[c],y[c]=S}i.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<u;c+=2)B(this,c,c+1);return this},i.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<u;c+=4)B(this,c,c+3),B(this,c+1,c+2);return this},i.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<u;c+=8)B(this,c,c+7),B(this,c+1,c+6),B(this,c+2,c+5),B(this,c+3,c+4);return this},i.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?m(this,0,u):N.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(u){if(!i.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:i.compare(this,u)===0},i.prototype.inspect=function(){let u="";const c=s.INSPECT_MAX_BYTES;return u=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(u+=" ... "),"<Buffer "+u+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(u,c,S,z,$){if(U(u,Uint8Array)&&(u=i.from(u,u.offset,u.byteLength)),!i.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(c===void 0&&(c=0),S===void 0&&(S=u?u.length:0),z===void 0&&(z=0),$===void 0&&($=this.length),c<0||S>u.length||z<0||$>this.length)throw new RangeError("out of range index");if(z>=$&&c>=S)return 0;if(z>=$)return-1;if(c>=S)return 1;if(c>>>=0,S>>>=0,z>>>=0,$>>>=0,this===u)return 0;let Y=$-z,wt=S-c;const Bt=Math.min(Y,wt),St=this.slice(z,$),At=u.slice(c,S);for(let Et=0;Et<Bt;++Et)if(St[Et]!==At[Et]){Y=St[Et],wt=At[Et];break}return Y<wt?-1:wt<Y?1:0};function Z(y,u,c,S,z){if(y.length===0)return-1;if(typeof c=="string"?(S=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,st(c)&&(c=z?0:y.length-1),c<0&&(c=y.length+c),c>=y.length){if(z)return-1;c=y.length-1}else if(c<0)if(z)c=0;else return-1;if(typeof u=="string"&&(u=i.from(u,S)),i.isBuffer(u))return u.length===0?-1:W(y,u,c,S,z);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(y,u,c):Uint8Array.prototype.lastIndexOf.call(y,u,c):W(y,[u],c,S,z);throw new TypeError("val must be string, number or Buffer")}function W(y,u,c,S,z){let $=1,Y=y.length,wt=u.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(y.length<2||u.length<2)return-1;$=2,Y/=2,wt/=2,c/=2}function Bt(At,Et){return $===1?At[Et]:At.readUInt16BE(Et*$)}let St;if(z){let At=-1;for(St=c;St<Y;St++)if(Bt(y,St)===Bt(u,At===-1?0:St-At)){if(At===-1&&(At=St),St-At+1===wt)return At*$}else At!==-1&&(St-=St-At),At=-1}else for(c+wt>Y&&(c=Y-wt),St=c;St>=0;St--){let At=!0;for(let Et=0;Et<wt;Et++)if(Bt(y,St+Et)!==Bt(u,Et)){At=!1;break}if(At)return St}return-1}i.prototype.includes=function(u,c,S){return this.indexOf(u,c,S)!==-1},i.prototype.indexOf=function(u,c,S){return Z(this,u,c,S,!0)},i.prototype.lastIndexOf=function(u,c,S){return Z(this,u,c,S,!1)};function X(y,u,c,S){c=Number(c)||0;const z=y.length-c;S?(S=Number(S),S>z&&(S=z)):S=z;const $=u.length;S>$/2&&(S=$/2);let Y;for(Y=0;Y<S;++Y){const wt=parseInt(u.substr(Y*2,2),16);if(st(wt))return Y;y[c+Y]=wt}return Y}function H(y,u,c,S){return tt(I(u,y.length-c),y,c,S)}function rt(y,u,c,S){return tt(C(u),y,c,S)}function dt(y,u,c,S){return tt(Q(u),y,c,S)}function T(y,u,c,S){return tt(R(u,y.length-c),y,c,S)}i.prototype.write=function(u,c,S,z){if(c===void 0)z="utf8",S=this.length,c=0;else if(S===void 0&&typeof c=="string")z=c,S=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(S)?(S=S>>>0,z===void 0&&(z="utf8")):(z=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-c;if((S===void 0||S>$)&&(S=$),u.length>0&&(S<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");let Y=!1;for(;;)switch(z){case"hex":return X(this,u,c,S);case"utf8":case"utf-8":return H(this,u,c,S);case"ascii":case"latin1":case"binary":return rt(this,u,c,S);case"base64":return dt(this,u,c,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,u,c,S);default:if(Y)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),Y=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(y,u,c){return u===0&&c===y.length?e.fromByteArray(y):e.fromByteArray(y.slice(u,c))}function m(y,u,c){c=Math.min(y.length,c);const S=[];let z=u;for(;z<c;){const $=y[z];let Y=null,wt=$>239?4:$>223?3:$>191?2:1;if(z+wt<=c){let Bt,St,At,Et;switch(wt){case 1:$<128&&(Y=$);break;case 2:Bt=y[z+1],(Bt&192)===128&&(Et=($&31)<<6|Bt&63,Et>127&&(Y=Et));break;case 3:Bt=y[z+1],St=y[z+2],(Bt&192)===128&&(St&192)===128&&(Et=($&15)<<12|(Bt&63)<<6|St&63,Et>2047&&(Et<55296||Et>57343)&&(Y=Et));break;case 4:Bt=y[z+1],St=y[z+2],At=y[z+3],(Bt&192)===128&&(St&192)===128&&(At&192)===128&&(Et=($&15)<<18|(Bt&63)<<12|(St&63)<<6|At&63,Et>65535&&Et<1114112&&(Y=Et))}}Y===null?(Y=65533,wt=1):Y>65535&&(Y-=65536,S.push(Y>>>10&1023|55296),Y=56320|Y&1023),S.push(Y),z+=wt}return vt(S)}const q=4096;function vt(y){const u=y.length;if(u<=q)return String.fromCharCode.apply(String,y);let c="",S=0;for(;S<u;)c+=String.fromCharCode.apply(String,y.slice(S,S+=q));return c}function et(y,u,c){let S="";c=Math.min(y.length,c);for(let z=u;z<c;++z)S+=String.fromCharCode(y[z]&127);return S}function _t(y,u,c){let S="";c=Math.min(y.length,c);for(let z=u;z<c;++z)S+=String.fromCharCode(y[z]);return S}function at(y,u,c){const S=y.length;(!u||u<0)&&(u=0),(!c||c<0||c>S)&&(c=S);let z="";for(let $=u;$<c;++$)z+=ht[y[$]];return z}function gt(y,u,c){const S=y.slice(u,c);let z="";for(let $=0;$<S.length-1;$+=2)z+=String.fromCharCode(S[$]+S[$+1]*256);return z}i.prototype.slice=function(u,c){const S=this.length;u=~~u,c=c===void 0?S:~~c,u<0?(u+=S,u<0&&(u=0)):u>S&&(u=S),c<0?(c+=S,c<0&&(c=0)):c>S&&(c=S),c<u&&(c=u);const z=this.subarray(u,c);return Object.setPrototypeOf(z,i.prototype),z};function j(y,u,c){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+u>c)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(u,c,S){u=u>>>0,c=c>>>0,S||j(u,c,this.length);let z=this[u],$=1,Y=0;for(;++Y<c&&($*=256);)z+=this[u+Y]*$;return z},i.prototype.readUintBE=i.prototype.readUIntBE=function(u,c,S){u=u>>>0,c=c>>>0,S||j(u,c,this.length);let z=this[u+--c],$=1;for(;c>0&&($*=256);)z+=this[u+--c]*$;return z},i.prototype.readUint8=i.prototype.readUInt8=function(u,c){return u=u>>>0,c||j(u,1,this.length),this[u]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(u,c){return u=u>>>0,c||j(u,2,this.length),this[u]|this[u+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(u,c){return u=u>>>0,c||j(u,2,this.length),this[u]<<8|this[u+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(u,c){return u=u>>>0,c||j(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(u,c){return u=u>>>0,c||j(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},i.prototype.readBigUInt64LE=it(function(u){u=u>>>0,Rt(u,"offset");const c=this[u],S=this[u+7];(c===void 0||S===void 0)&&l(u,this.length-8);const z=c+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,$=this[++u]+this[++u]*2**8+this[++u]*2**16+S*2**24;return BigInt(z)+(BigInt($)<<BigInt(32))}),i.prototype.readBigUInt64BE=it(function(u){u=u>>>0,Rt(u,"offset");const c=this[u],S=this[u+7];(c===void 0||S===void 0)&&l(u,this.length-8);const z=c*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],$=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+S;return(BigInt(z)<<BigInt(32))+BigInt($)}),i.prototype.readIntLE=function(u,c,S){u=u>>>0,c=c>>>0,S||j(u,c,this.length);let z=this[u],$=1,Y=0;for(;++Y<c&&($*=256);)z+=this[u+Y]*$;return $*=128,z>=$&&(z-=Math.pow(2,8*c)),z},i.prototype.readIntBE=function(u,c,S){u=u>>>0,c=c>>>0,S||j(u,c,this.length);let z=c,$=1,Y=this[u+--z];for(;z>0&&($*=256);)Y+=this[u+--z]*$;return $*=128,Y>=$&&(Y-=Math.pow(2,8*c)),Y},i.prototype.readInt8=function(u,c){return u=u>>>0,c||j(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},i.prototype.readInt16LE=function(u,c){u=u>>>0,c||j(u,2,this.length);const S=this[u]|this[u+1]<<8;return S&32768?S|4294901760:S},i.prototype.readInt16BE=function(u,c){u=u>>>0,c||j(u,2,this.length);const S=this[u+1]|this[u]<<8;return S&32768?S|4294901760:S},i.prototype.readInt32LE=function(u,c){return u=u>>>0,c||j(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},i.prototype.readInt32BE=function(u,c){return u=u>>>0,c||j(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},i.prototype.readBigInt64LE=it(function(u){u=u>>>0,Rt(u,"offset");const c=this[u],S=this[u+7];(c===void 0||S===void 0)&&l(u,this.length-8);const z=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(S<<24);return(BigInt(z)<<BigInt(32))+BigInt(c+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),i.prototype.readBigInt64BE=it(function(u){u=u>>>0,Rt(u,"offset");const c=this[u],S=this[u+7];(c===void 0||S===void 0)&&l(u,this.length-8);const z=(c<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(z)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+S)}),i.prototype.readFloatLE=function(u,c){return u=u>>>0,c||j(u,4,this.length),t.read(this,u,!0,23,4)},i.prototype.readFloatBE=function(u,c){return u=u>>>0,c||j(u,4,this.length),t.read(this,u,!1,23,4)},i.prototype.readDoubleLE=function(u,c){return u=u>>>0,c||j(u,8,this.length),t.read(this,u,!0,52,8)},i.prototype.readDoubleBE=function(u,c){return u=u>>>0,c||j(u,8,this.length),t.read(this,u,!1,52,8)};function M(y,u,c,S,z,$){if(!i.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>z||u<$)throw new RangeError('"value" argument is out of bounds');if(c+S>y.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(u,c,S,z){if(u=+u,c=c>>>0,S=S>>>0,!z){const wt=Math.pow(2,8*S)-1;M(this,u,c,S,wt,0)}let $=1,Y=0;for(this[c]=u&255;++Y<S&&($*=256);)this[c+Y]=u/$&255;return c+S},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(u,c,S,z){if(u=+u,c=c>>>0,S=S>>>0,!z){const wt=Math.pow(2,8*S)-1;M(this,u,c,S,wt,0)}let $=S-1,Y=1;for(this[c+$]=u&255;--$>=0&&(Y*=256);)this[c+$]=u/Y&255;return c+S},i.prototype.writeUint8=i.prototype.writeUInt8=function(u,c,S){return u=+u,c=c>>>0,S||M(this,u,c,1,255,0),this[c]=u&255,c+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(u,c,S){return u=+u,c=c>>>0,S||M(this,u,c,2,65535,0),this[c]=u&255,this[c+1]=u>>>8,c+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(u,c,S){return u=+u,c=c>>>0,S||M(this,u,c,2,65535,0),this[c]=u>>>8,this[c+1]=u&255,c+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(u,c,S){return u=+u,c=c>>>0,S||M(this,u,c,4,4294967295,0),this[c+3]=u>>>24,this[c+2]=u>>>16,this[c+1]=u>>>8,this[c]=u&255,c+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(u,c,S){return u=+u,c=c>>>0,S||M(this,u,c,4,4294967295,0),this[c]=u>>>24,this[c+1]=u>>>16,this[c+2]=u>>>8,this[c+3]=u&255,c+4};function yt(y,u,c,S,z){Nt(u,S,z,y,c,7);let $=Number(u&BigInt(4294967295));y[c++]=$,$=$>>8,y[c++]=$,$=$>>8,y[c++]=$,$=$>>8,y[c++]=$;let Y=Number(u>>BigInt(32)&BigInt(4294967295));return y[c++]=Y,Y=Y>>8,y[c++]=Y,Y=Y>>8,y[c++]=Y,Y=Y>>8,y[c++]=Y,c}function lt(y,u,c,S,z){Nt(u,S,z,y,c,7);let $=Number(u&BigInt(4294967295));y[c+7]=$,$=$>>8,y[c+6]=$,$=$>>8,y[c+5]=$,$=$>>8,y[c+4]=$;let Y=Number(u>>BigInt(32)&BigInt(4294967295));return y[c+3]=Y,Y=Y>>8,y[c+2]=Y,Y=Y>>8,y[c+1]=Y,Y=Y>>8,y[c]=Y,c+8}i.prototype.writeBigUInt64LE=it(function(u,c=0){return yt(this,u,c,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=it(function(u,c=0){return lt(this,u,c,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(u,c,S,z){if(u=+u,c=c>>>0,!z){const Bt=Math.pow(2,8*S-1);M(this,u,c,S,Bt-1,-Bt)}let $=0,Y=1,wt=0;for(this[c]=u&255;++$<S&&(Y*=256);)u<0&&wt===0&&this[c+$-1]!==0&&(wt=1),this[c+$]=(u/Y>>0)-wt&255;return c+S},i.prototype.writeIntBE=function(u,c,S,z){if(u=+u,c=c>>>0,!z){const Bt=Math.pow(2,8*S-1);M(this,u,c,S,Bt-1,-Bt)}let $=S-1,Y=1,wt=0;for(this[c+$]=u&255;--$>=0&&(Y*=256);)u<0&&wt===0&&this[c+$+1]!==0&&(wt=1),this[c+$]=(u/Y>>0)-wt&255;return c+S},i.prototype.writeInt8=function(u,c,S){return u=+u,c=c>>>0,S||M(this,u,c,1,127,-128),u<0&&(u=255+u+1),this[c]=u&255,c+1},i.prototype.writeInt16LE=function(u,c,S){return u=+u,c=c>>>0,S||M(this,u,c,2,32767,-32768),this[c]=u&255,this[c+1]=u>>>8,c+2},i.prototype.writeInt16BE=function(u,c,S){return u=+u,c=c>>>0,S||M(this,u,c,2,32767,-32768),this[c]=u>>>8,this[c+1]=u&255,c+2},i.prototype.writeInt32LE=function(u,c,S){return u=+u,c=c>>>0,S||M(this,u,c,4,2147483647,-2147483648),this[c]=u&255,this[c+1]=u>>>8,this[c+2]=u>>>16,this[c+3]=u>>>24,c+4},i.prototype.writeInt32BE=function(u,c,S){return u=+u,c=c>>>0,S||M(this,u,c,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[c]=u>>>24,this[c+1]=u>>>16,this[c+2]=u>>>8,this[c+3]=u&255,c+4},i.prototype.writeBigInt64LE=it(function(u,c=0){return yt(this,u,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=it(function(u,c=0){return lt(this,u,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ft(y,u,c,S,z,$){if(c+S>y.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function Pt(y,u,c,S,z){return u=+u,c=c>>>0,z||ft(y,u,c,4),t.write(y,u,c,S,23,4),c+4}i.prototype.writeFloatLE=function(u,c,S){return Pt(this,u,c,!0,S)},i.prototype.writeFloatBE=function(u,c,S){return Pt(this,u,c,!1,S)};function Ot(y,u,c,S,z){return u=+u,c=c>>>0,z||ft(y,u,c,8),t.write(y,u,c,S,52,8),c+8}i.prototype.writeDoubleLE=function(u,c,S){return Ot(this,u,c,!0,S)},i.prototype.writeDoubleBE=function(u,c,S){return Ot(this,u,c,!1,S)},i.prototype.copy=function(u,c,S,z){if(!i.isBuffer(u))throw new TypeError("argument should be a Buffer");if(S||(S=0),!z&&z!==0&&(z=this.length),c>=u.length&&(c=u.length),c||(c=0),z>0&&z<S&&(z=S),z===S||u.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),u.length-c<z-S&&(z=u.length-c+S);const $=z-S;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,S,z):Uint8Array.prototype.set.call(u,this.subarray(S,z),c),$},i.prototype.fill=function(u,c,S,z){if(typeof u=="string"){if(typeof c=="string"?(z=c,c=0,S=this.length):typeof S=="string"&&(z=S,S=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!i.isEncoding(z))throw new TypeError("Unknown encoding: "+z);if(u.length===1){const Y=u.charCodeAt(0);(z==="utf8"&&Y<128||z==="latin1")&&(u=Y)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(c<0||this.length<c||this.length<S)throw new RangeError("Out of range index");if(S<=c)return this;c=c>>>0,S=S===void 0?this.length:S>>>0,u||(u=0);let $;if(typeof u=="number")for($=c;$<S;++$)this[$]=u;else{const Y=i.isBuffer(u)?u:i.from(u,z),wt=Y.length;if(wt===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for($=0;$<S-c;++$)this[$+c]=Y[$%wt]}return this};const bt={};function xt(y,u,c){bt[y]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(y,"]"),this.stack,delete this.name}get code(){return y}set code(z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:z,writable:!0})}toString(){return"".concat(this.name," [").concat(y,"]: ").concat(this.message)}}}xt("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?"".concat(y," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),xt("ERR_INVALID_ARG_TYPE",function(y,u){return'The "'.concat(y,'" argument must be of type number. Received type ').concat(typeof u)},TypeError),xt("ERR_OUT_OF_RANGE",function(y,u,c){let S='The value of "'.concat(y,'" is out of range.'),z=c;return Number.isInteger(c)&&Math.abs(c)>2**32?z=zt(String(c)):typeof c=="bigint"&&(z=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(z=zt(z)),z+="n"),S+=" It must be ".concat(u,". Received ").concat(z),S},RangeError);function zt(y){let u="",c=y.length;const S=y[0]==="-"?1:0;for(;c>=S+4;c-=3)u="_".concat(y.slice(c-3,c)).concat(u);return"".concat(y.slice(0,c)).concat(u)}function Ft(y,u,c){Rt(u,"offset"),(y[u]===void 0||y[u+c]===void 0)&&l(u,y.length-(c+1))}function Nt(y,u,c,S,z,$){if(y>c||y<u){const Y=typeof u=="bigint"?"n":"";let wt;throw u===0||u===BigInt(0)?wt=">= 0".concat(Y," and < 2").concat(Y," ** ").concat(($+1)*8).concat(Y):wt=">= -(2".concat(Y," ** ").concat(($+1)*8-1).concat(Y,") and < 2 ** ")+"".concat(($+1)*8-1).concat(Y),new bt.ERR_OUT_OF_RANGE("value",wt,y)}Ft(S,z,$)}function Rt(y,u){if(typeof y!="number")throw new bt.ERR_INVALID_ARG_TYPE(u,"number",y)}function l(y,u,c){throw Math.floor(y)!==y?(Rt(y,c),new bt.ERR_OUT_OF_RANGE("offset","an integer",y)):u<0?new bt.ERR_BUFFER_OUT_OF_BOUNDS:new bt.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(u),y)}const G=/[^+/0-9A-Za-z-_]/g;function K(y){if(y=y.split("=")[0],y=y.trim().replace(G,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function I(y,u){u=u||1/0;let c;const S=y.length;let z=null;const $=[];for(let Y=0;Y<S;++Y){if(c=y.charCodeAt(Y),c>55295&&c<57344){if(!z){if(c>56319){(u-=3)>-1&&$.push(239,191,189);continue}else if(Y+1===S){(u-=3)>-1&&$.push(239,191,189);continue}z=c;continue}if(c<56320){(u-=3)>-1&&$.push(239,191,189),z=c;continue}c=(z-55296<<10|c-56320)+65536}else z&&(u-=3)>-1&&$.push(239,191,189);if(z=null,c<128){if((u-=1)<0)break;$.push(c)}else if(c<2048){if((u-=2)<0)break;$.push(c>>6|192,c&63|128)}else if(c<65536){if((u-=3)<0)break;$.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((u-=4)<0)break;$.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return $}function C(y){const u=[];for(let c=0;c<y.length;++c)u.push(y.charCodeAt(c)&255);return u}function R(y,u){let c,S,z;const $=[];for(let Y=0;Y<y.length&&!((u-=2)<0);++Y)c=y.charCodeAt(Y),S=c>>8,z=c%256,$.push(z),$.push(S);return $}function Q(y){return e.toByteArray(K(y))}function tt(y,u,c,S){let z;for(z=0;z<S&&!(z+c>=u.length||z>=y.length);++z)u[z+c]=y[z];return z}function U(y,u){return y instanceof u||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===u.name}function st(y){return y!==y}const ht=function(){const y="0123456789abcdef",u=new Array(256);for(let c=0;c<16;++c){const S=c*16;for(let z=0;z<16;++z)u[S+z]=y[c]+y[z]}return u}();function it(y){return typeof BigInt>"u"?mt:y}function mt(){throw new Error("BigInt not supported")}})(sr);class Te extends Sn.EventEmitter{constructor({watch:e,options:t,callback:r,path:n}){super(),e&&(this.options=Object.assign({persistent:!0,recursive:!1,encoding:"utf8"},t),this.watch=e,this.callback=r,this.path=n)}static empty(){return new Te({})}close(){const e=this.watch.watchers.indexOf(this);e>-1&&this.watch.watchers.splice(e,1),this.removeAllListeners()}checkChange(e,t){const{recursive:r,encoding:n}=this.options;if(!(r?e.startsWith(this.path):e===this.path))return;const o=e.replace(this.path,""),i=n==="buffer"?sr.Buffer.from(o):sr.Buffer.from(o,n).toString();this.emit("change",t,i),this.callback(t,i)}}class Ws{constructor(e){this.disk=e,this.events=new Sn.EventEmitter,this.watchers=[],this.fileWatchers={}}fireRename(e,t=!1,r=!0){r&&this.events.emit("watch",{type:t?se.Remove:se.Create,path:e}),this.watchers.forEach(n=>{n.checkChange(e,"rename")})}fireChange(e,t=!0){t&&this.events.emit("watch",{type:se.Change,path:e});const r=this.fileWatchers[e];let n=null;if(r&&r.length>0){const a=this.disk.statSync(e);n=()=>{r.forEach(o=>o(this.disk.statSync(e),a))}}return this.watchers.forEach(a=>{a.checkChange(e,"change")}),n}watch(e,t,r){if(e=this.disk.fmtPath(e),typeof t=="function"?(r=t,t={}):typeof t=="string"&&(t={encoding:t}),t.persistent===!1&&this.watchers.find(a=>a.path===e))return Te.empty();const n=new Te({watch:this,options:t,callback:r,path:e});return this.watchers.push(n),n}watchFile(e,t,r){e=this.disk.fmtPath(e),typeof t=="function"&&(r=t,t={});const{persistent:n=!0}=t;n&&this.fileWatchers[e]||(this.fileWatchers[e]||(this.fileWatchers[e]=[]),this.fileWatchers[e].push(r))}unwatchFile(e,t){e=this.disk.fmtPath(e);const r=this.fileWatchers[e];if(r)if(!t)delete this.fileWatchers[e];else{const n=r.indexOf(t);n>-1&&r.splice(n,1),r.length===0&&delete this.fileWatchers[e]}}}const $r=500,Ee=(()=>{const s="webos_fs_update_info",e=Vt.createInstance({name:"sync-manager",driver:Vt.INDEXEDDB}),t=Math.random().toString(16).substring(2),r=n=>e.setItem(s,n);return{id:t,async writeData(n){await r(n)},async writeChanges(n){const a=await this.read(),o={time:Date.now(),id:t,changes:n};if(a.length===0)a.push(o);else{const i=a.findIndex(f=>f.time>o.time);i===-1?a.push(o):a.splice(i,0,o)}await r(a)},async read(){const n=await e.getItem(s);return Array.isArray(n)?n:[]}}})();class $s{constructor(e){this.tempChange={},this.lastOprateId="",this.disk=e,this.timer=setInterval(async()=>{await this.checkUpdate(),await this.checkWriteChange()},$r);const t=({path:r,type:n})=>{this.tempChange[r]=n};this.disk._watch.events.on("watch",t),this.offWatch=()=>{this.disk._watch.events.off("watch",t)}}async checkUpdate(){const e=await Ee.read();if(e.length===0)return;const t=[],r=Date.now(),n=o=>r-o>$r*2,a={};for(let o=0;o<e.length;o++){const i=e[o];if(n(i.time)){t.push(o);continue}i.id!==Ee.id&&Object.assign(a,i.changes)}if(t.length){for(let o=t.length-1;o>=0;o--)e.splice(t[o],1);await Ee.writeData(e)}this.useChanges(a)}async writeFile(e){const t=await this.disk.read(e);if(t){const r=this.disk.syncMiddleware.pureRead(e);return be(t,r)?!1:(this.disk.syncMiddleware.write(e,t),!0)}return!1}async useChanges(e){if(console.log("useChanges",e),Object.keys(e).length===0)return;const t=Object.keys(e).sort((r,n)=>r.length-n.length);for(const r of t)switch(e[r]){case se.Change:this.disk.existSync(r)&&await this.writeFile(r)&&this.disk._watch.fireChange(r,!1);break;case se.Remove:this.disk.existSync(r)&&(this.disk.syncMiddleware.remove(r),this.disk._watch.fireRename(r,!0,!1));break;case se.Create:this.disk.existSync(r)||(await this.writeFile(r),this.disk._watch.fireRename(r,!1,!1));break}}async checkWriteChange(){Object.keys(this.tempChange).length!==0&&(console.log("sync-manager write",JSON.stringify(this.tempChange,null,2)),await Ee.writeChanges(this.tempChange),this.tempChange={})}clear(){clearInterval(this.timer),this.offWatch()}}var Hs=Object.defineProperty,Zs=Object.getOwnPropertyDescriptor,$t=(s,e,t,r)=>{for(var n=Zs(e,t),a=s.length-1,o;a>=0;a--)(o=s[a])&&(n=o(e,t,n)||n);return n&&Hs(e,t,n),n};const Mt=class Ae{constructor(){if(this.current="/",this.clipboard={paths:[],isCut:!1,active:!1},Ae.instance)return Ae.instance;Ae.instance=this,this.syncMiddleware=new xs,Ur.Supported()?this.backend=new Ur:(console.log("IDBBackEnd"),this.backend=new ks),this._link=new Ss(this.backend,this.syncMiddleware),this._zip=new As(this),this._watch=new Ws(this),this._sync=new $s(this),this.ready=this.init()}async init(){await this.backend.init(),await this.syncMiddleware.init(this.backend)}fmtPath(e){return e=e.trim(),e[0]==="/"?Ut(e):nr.join(this.current,Ut(e))}async size(e="/"){return(await this.backend.stat(this.fmtPath(e))).size}cd(e){return e=this.fmtPath(e),this.isDir(e)?(this.current=e,!0):!1}pwd(){return this.current}copy(e){return this._addToClipboard(e)}copySync(e){return this.copy(e),!0}move(e,t){return this._move(e,t)}moveSync(e,t){return this._move(e,t,!0)}_move(e,t,r=!1){const n=r?"Sync":"";return Ye([()=>this["cut".concat(n)]([e]),(a,o)=>{if(!a)return o(!1);const i=this.fmtPath(t),f=this.fmtPath(e),{parent:g}=Jt(i),p={[f]:i};return this["paste".concat(n)](g,p)},a=>a.success])}async cut(e){return this._addToClipboard(e,!0)}cutSync(e){return this.cut(e),!0}_addToClipboard(e,t=!1){return typeof e=="string"&&(e=[e]),this.clipboard={paths:e.map(r=>this.fmtPath(r)),active:!0,isCut:t},!0}paste(e,t={}){return this._paste(e,t,{ls:r=>this.ls(r),copy:async(r,n,a)=>{const o=[];for(const i in a)o.push((async()=>{const f=i,g=a[f];await this.copySingle(f,g)?n&&await this.remove(f):r.push(f)})());return await Promise.all(o),r}})}pasteSync(e,t={}){return this._paste(e,t,{ls:r=>this.lsSync(r),copy:(r,n,a)=>{for(const o in a){const i=o,f=a[i];this.copySingleSync(i,f)?n&&this.removeSync(i):r.push(i)}return r}})}_paste(e,t,{ls:r,copy:n}){const a=(o="")=>(this.clipboard.active=!1,os({success:!o,info:o}));return Ye([()=>this.clipboard.active?r(e):a("No Copy Files"),o=>{const i=o||[],{isCut:f,paths:g}=this.clipboard;console.log("pasteMap 1",g,e,i,t);const p=ir(g,this.fmtPath(e),i,t);return console.log("pasteMap",p),{isCut:f,fails:[],pasteMap:p}},({isCut:o,fails:i,pasteMap:f})=>n(i,o,f),o=>a(o.length>0?"Copy Failed: ".concat(o.join(", ")):"")])}copySingle(e,t){return this._copySingle(e,t,{read:r=>this.read(r),copyFile:(r,n)=>this.createFile(r,n,{ensure:!0}),copyDir:async r=>{let n=!0;const a=[()=>this.createDir(r)];return await this.backend.traverseContent((o,i)=>{a.push(async()=>{const f=await i,g=o.replace(e,r);f?await this.createFile(g,f)||(n=!1):await this.createDir(g)||(n=!1)})},e),await Or(a),n}})}copySingleSync(e,t){return this._copySingle(e,t,{read:r=>this.readSync(r),copyFile:(r,n)=>this.createFileSync(r,n,{ensure:!0}),copyDir:r=>{const n=[];let a=!0;const o=(i,f,g)=>{const p={ensure:!0},{async:d,sync:v}=f==="dir"?this._createDir(i,p):this._createFile(i,g||void 0,p),h=v();if(!h)throw a=!1,new Error("create fail: ".concat(i));return n.push(d),h};return o(r,"dir"),this.syncMiddleware.traverseContent((i,f)=>{const g=i.replace(e,r);o(g,f?"file":"dir",f)},e),Or(n),a}})}_copySingle(e,t,{read:r,copyFile:n,copyDir:a}){return Ye([()=>r(e),(o,i)=>{let f="empty";if(o?f=qt(o):f=this.isDir(e)?"dir":"empty",f==="empty")return i(!1);if(f==="file"||f==="link")return i(n(t,o))},()=>a(t)])}async readText(e){const t=await this.backend.read(e);return t?rr(t):""}readTextSync(e){const t=this.syncMiddleware.read(e);return t?rr(t):""}async read(e){return this.backend.read(e)}readSync(e){return this.syncMiddleware.read(e)}async write(e,t){var r;return((r=this._write(e,t))==null?void 0:r.async)||!0}writeSync(e,t){var r;return((r=this._write(e,t))==null?void 0:r.sync)||!0}_write(e,t){e=this.fmtPath(e);const r=this.syncMiddleware.pureRead(e);if(be(t,r))return null;if(!this.existSync(e)){const{async:o,sync:i}=this._createFile(e,t);return{sync:i(),async:o()}}const n=this._watch.fireChange(e),a={sync:this.syncMiddleware.write(e,t),async:this.backend.write(e,t)};return n==null||n(),a}async append(e,t){return this._append(e,t).async}appendSync(e,t){return this._append(e,t).sync}_append(e,t){e=this.fmtPath(e);const r=this._watch.fireChange(e),n={sync:this.syncMiddleware.append(e,t),async:this.backend.append(e,t)};return r==null||r(),n}async remove(e){return this._remove(e).async}removeSync(e){return this._remove(e).sync}_remove(e){return e=this.fmtPath(e),{sync:this.syncMiddleware.remove(e,t=>{this._watch.fireRename(t,!0)}),async:this.backend.remove(e)}}async stat(e,t=!0){return this._transStat(await this.backend.stat(this.fmtPath(e),t))}statSync(e,t=!0){return this._transStat(this.syncMiddleware.stat(this.fmtPath(e),t))}_transStat({size:e,type:t}){return{size:e,type:t,isDirectory:()=>t==="dir",isFile:()=>t==="file"}}exist(e){return e=this.fmtPath(e),e==="/"?Promise.resolve(!0):this.backend.exist(e)}existSync(e){return e=this.fmtPath(e),e==="/"?!0:this.syncMiddleware.exist(e)}async ls(e=""){return e=this.fmtPath(e),this.isDir(e)?await this.backend.ls(e):null}lsSync(e=""){return e=this.fmtPath(e),this.isDir(e)?this.syncMiddleware.ls(e):null}createDir(e,t={}){return this._createDir(e,t).bothAsync()}createDirSync(e,t={}){return this._createDir(e,t).bothSync()}_createDir(e,{overwrite:t,ensure:r}={}){e=this.fmtPath(e);let n=!1;const a=()=>{n||(n=!0,this._watch.fireRename(e))},o=()=>{r&&this._ensureParentPathSync(e);const f=this.syncMiddleware.createDir(e,t);return a(),f},i=async()=>{r&&await this._ensureParentPathAsync(e);const f=await this.backend.createDir(e,t);return a(),f};return{sync:o,async:i,bothSync:()=>{const f=o();return i(),f},bothAsync:()=>(o(),i())}}createFile(e,t,r={}){return this._createFile(e,t,r).async()}createFileSync(e,t,r={}){return this._createFile(e,t,r).sync()}_createFile(e,t,{overwrite:r,ensure:n}={}){e=this.fmtPath(e);const{parent:a}=Jt(e);if(!n&&!this.existSync(a))return{async:()=>Promise.resolve(!1),sync:()=>!1};let o=!1;const i=()=>{o||(this._watch.fireRename(e),o=!0)},f=()=>{n&&this._ensureParentPathSync(e);const p=this.syncMiddleware.createFile(e,t,r);return i(),p},g=async()=>{n&&await this._ensureParentPathAsync(e);const p=await this.backend.createFile(e,t,r);return i(),p};return{sync:()=>{const p=f();return g(),p},async:()=>(f(),g())}}createLink(e,t,r={}){return this._createFile(e,fe("link",t),r).async()}createLinkSync(e,t,r={}){return this._createFile(e,fe("link",t),r).sync()}zip(...e){return this._zip.zip(...e)}unzip(...e){return this._zip.unzip(...e)}isZip(...e){return this._zip.isZip(...e)}watch(...e){return this._watch.watch(...e)}watchFile(...e){return this._watch.watchFile(...e)}unwatchFile(...e){return this._watch.unwatchFile(...e)}isDir(e){return e=this.fmtPath(e),e==="/"||this.syncMiddleware.getType(e)==="dir"}clear(){const e=this.lsSync("/");e&&(e.forEach(t=>{this.removeSync(nr.join("/",t))}),this.cd("/"))}ensureParentPathSync(e){return this._ensureParentPathAsync(e),this._ensureParentPathSync(e)}_ensureParentPathSync(e){e=Nr(e),!this.existSync(e)&&(this._ensureParentPathSync(e),this._createDir(e).sync())}async ensureParentPath(e){return this._ensureParentPathAsync(e,!0)}async _ensureParentPathAsync(e,t=!1){e=Nr(e),!await this.exist(e)&&(await this.ensureParentPath(e),await this._createDir(e)[t?"bothAsync":"async"]())}createFileContent(e,t="file"){return fe(t,e)}};$t([Wt],Mt.prototype,"readText");$t([Wt],Mt.prototype,"readTextSync");$t([Wt],Mt.prototype,"read");$t([Wt],Mt.prototype,"readSync");$t([Wt],Mt.prototype,"write");$t([Wt],Mt.prototype,"writeSync");$t([Wt],Mt.prototype,"append");$t([Wt],Mt.prototype,"appendSync");$t([Wt],Mt.prototype,"ls");$t([Wt],Mt.prototype,"lsSync");$t([Wt],Mt.prototype,"watch");$t([Wt],Mt.prototype,"watchFile");$t([Wt],Mt.prototype,"unwatchFile");let Ys=Mt;class ve{constructor(){if(ve.instance)return ve.instance;ve.instance=this,this.disk=new Ys,this.ready=this.disk.ready}ls(e){return this.disk.lsSync(e)}cd(e){return this.disk.cd(e)}pwd(){return this.disk.pwd()}touch(e){return this.disk.createFile(e)}mkdir(e){return this.disk.createDir(e)}rmdir(e){return this.disk.remove(e)}cp(e,t){return this.disk.copySingle(e,t)}mv(e,t){return this.disk.move(e,t)}rm(e){return this.disk.remove(e)}cat(e){return this.disk.readTextSync(e)}more(e){return this.disk.readTextSync(e)}less(e){return this.disk.readTextSync(e)}head(e,t){const r=this.disk.readTextSync(e);return r?r.split("\n").slice(0,t).join("\n"):""}tail(e,t){const r=this.disk.readTextSync(e);return r?r.split("\n").slice(-t).join("\n"):""}grep(e,t){const r=this.disk.readTextSync(e);if(!r)return[""];typeof t=="string"&&(t=new RegExp(t,"g"));const n=r.match(t),a=[];if(!n)return a;for(const o of a)a.push(o[0]);return a}find(e,{name:t,type:r}={}){const n=typeof t=="string"?new RegExp(t):t,a=[];return this.disk.syncMiddleware.traverse(e,({path:o,name:i})=>{let f=!0;n&&!n.test(i)&&(f=!1),f&&r&&this.disk.syncMiddleware.getType(o)!==r&&(f=!1),f&&a.push(o)}),a}zip(e,t){return this.disk.zip(e,t)}unzip(e,t){return this.disk.unzip(e,t)}tar(e,t){return this.disk.zip(e,t)}du(e){return this.disk.statSync(e).size}}const Cn={name:"open-url",helpInfo:"Open Url in Browser",run(s,e){const t=s.args[0];console.log(e);let r="fail.";return globalThis!=null&&globalThis.open&&(globalThis.open(t),r="success!"),'Open "'.concat(t||"",'" ').concat(r)}},Ks=[Cn];function Hr(s){return Ks.find(e=>e.name===s)||null}const ar="/WebOS/System/Commands";function or(s){return"".concat(ar,"/").concat(s)}const ur=100;class Vs extends ds{constructor(){super(...arguments),this.name="install",this.helpDetails=this._viewDetails}async run(e){const t=e.options.rm;if(t)return this.removeCommand(t);if(!this.provider.registerCommand)return"CommandProvider not support Install";let r,n="";const{name:a,local:o,url:i}=this.parseUrl(e);if(i){const f=await this._installFromUrl(i);if(!f.command)return"Install fail ".concat(i,": ").concat(f.info);r=f.command,n=f.text}else if(a){const f=Hr(a);if(!f)return"Not a Built-in Command: ".concat(a);r=f,n=a;const{success:g,info:p}=this.provider.registerCommand(r);if(!g)return"Install fail: ".concat(p)}else if(o){const f=this.disk.readTextSync(o);if(!f)return"Install from local fail: ".concat(o);const g=await this._installFromText(f);if(!g.command)return"Install from local fail: ".concat(g.info);r=g.command}else return"Install fail: parse command fail";if(!o){const[,f]=await ie(this.saveCommand(r,n));if(f)return f}return"Install ".concat(r.name," success!")}async saveCommand(e,t){const r=or(e.name);if(!await this.disk.createFile(r,this.disk.createFileContent(t),{ensure:!0,overwrite:!0}))throw"Save command fail: ".concat(r)}parseUrl(e){const{args:t,options:r}=e,n=t[0];let a="",o="",i="";return r.ol?a=r.ol:r.gh?a=ps(r.gh):r.npm?a=Rr(r.npm):r.of?a=Rr("webos-commands/dist/".concat(r.of,".js")):r.l?o=r.l:i=n,{url:a,local:o,name:i}}async removeCommand(e){if(typeof e!="string"||e==="")return"Remove fail: name is not valid (".concat(e,")");if(!this.provider.removeCommand)return"CommandProvider not support Install -rm";const{success:t,info:r}=this.provider.removeCommand(e);return t?(await this.disk.remove(or(e)),"Remove command ".concat(e," success!")):r}async _installFromUrl(e){const t=await ls(e),{success:r,info:n,command:a}=await this._installFromText(t);return{success:r,info:n,text:t,command:a||null}}_installFromText(e){if(!this.provider.registerCommand)return Promise.resolve({success:!1,info:"RegisterCommand not Exists"});if(e.length<=ur){const n=Hr(e);if(n){const a=this.provider.registerCommand(n);return a.success&&Object.assign(a,{command:n}),Promise.resolve(a)}}const{ready:t,resolve:r}=yr();return hs(e,{registerCommand:n=>{const a=this.provider.registerCommand(n);a.success&&Object.assign(a,{command:n}),r(a)}}),setTimeout(()=>{r({success:!1,info:"Install timeout"})},2e3),t}_viewDetails(){return["install command_name : Install Built-in command","install -ol url : Install from url","install -gh user/repo[/filepath] : Install from github","install -npm pkg_name[/filepath] : Install from npm","install -l filepath : Install from local file","install -rm command_name: Remove command"].join("\r\n")}}const Qt={clear:"Clear the terminal.",ls:"View all the files under the folder.",mkdir:"Create a new directory.",cd:"Change the current working directory and switch the displayed PWD in the terminal.",pwd:"Display the current working directory.",rm:"Remove a file.",rmdir:"Remove a directory.",cat:"Display the content of a file.",touch:"Create a new empty file or update the access and modification times of an existing file.",echo:"Output the joined content of the provided arguments.",vi:"Edit file",mv:"Move or rename a file or directory from one location to another.",cp:"Copy a file or directory from one location to another.",more:"Display the content of a file in a paginated way (with limited functionality compared to less).",less:"Display the content of a file in a paginated way with more functionality like scrolling back and forth.",head:"Display the first few lines of a file (the number of lines is specified by an argument).",tail:"Display the last few lines of a file (the number of lines is specified by an argument).",grep:"Search for a specific pattern in files and return the matching lines.",find:"Search for files or directories based on certain conditions and return the results.",zip:"Compress files and directories into a zip file.",unzip:"Extract the contents of a zip file.",tar:"Compress files and directories into a zip file.",du:"Display the disk usage of a file or directory.",help:"Show commands information."};function Gs(){const s=[],e=Object.keys(Qt);let t=0;for(const r of e)r.length>t&&(t=r.length);for(const r in Qt)s.push("".concat(r.padEnd(t," ")," : ").concat(Qt[r]));return s.join("\r\n")}const Zr="Target is not a directory.",Yr="Target is already exists.";class Xs{constructor(){this.thirdCommands={},this.cmd=new ve,this.installCommand=new Vs,this.registerCommand(this.installCommand),this._loadCommands()}getPwd(){return this.cmd.pwd()}get disk(){return this.cmd.disk}async onCommand(e,t){if(e.length===0)return t.getHeader();let r="";for(const n of e){const a=await this.runSingleCommand(n,r,e,t);if(a===!1)return!1;r=typeof a=="boolean"?"":a}return r}async runSingleCommand(e,t,r,{clearTerminal:n,setPwd:a,openEditor:o}){var x;const{name:i,args:f,options:g}=e;let p="";const[d,v]=f,{cmd:h}=this;switch(i){case"vi":if(!d)return"Target is empty";if(!this.disk.existSync(d))return"Target file not exists: ".concat(d);if(this.disk.isDir(d))return"Target is Not File: ".concat(d);const w=h.cat(d);return w===null?"Open file fail: ".concat(d):(o({path:this.disk.fmtPath(d),content:w,save:A=>{this.disk.writeSync(d,Be(A))}}),!1);case"clear":return n(),!1;case"ls":const k=(x=h.ls(d))==null?void 0:x.join(" ");p=typeof k!="string"?Zr:k||" ";break;case"mkdir":await h.mkdir(d);break;case"cd":h.cd(d)?a(h.pwd()):p=Zr;break;case"pwd":p=h.pwd();break;case"rm":await h.rm(d);break;case"rmdir":await h.rmdir(d)||(p=Yr);break;case"cat":p=h.cat(d)||"";break;case"touch":await h.touch(d)||(p=Yr);break;case"echo":p=this.handleEchoCmd(f);break;case"mv":await h.mv(d,v);break;case"cp":await h.cp(d,v);break;case"more":p=h.more(d)||"";break;case"less":p=h.less(d)||"";break;case"head":p=h.head(d,parseInt(v))||"";break;case"tail":p=h.tail(d,parseInt(v))||"";break;case"grep":p=h.grep(d,v).join("\r\n");break;case"find":p=h.find(d,g).join("\r\n");break;case"zip":await h.zip(f.slice(1),d);break;case"unzip":await h.unzip(d,v);break;case"tar":await h.zip(f.slice(1),d);break;case"du":h.du(d);break;case"help":p=Gs();break;default:const b=this.thirdCommands[i];b?b.helpDetails&&e.options.d?p=Dr(b.helpDetails):p=await cs(b.run(e,{commands:r,disk:this.disk,data:t})):p="".concat(i,": Command not found");break}return p}handleEchoCmd(e){let t=e.indexOf(">"),r=!1;if(t===-1&&(t=e.indexOf(">>"),t!==-1&&(r=!0)),t===-1)return e.join(" ");const n=e[t+1];return n?(this.disk[r?"appendSync":"writeSync"](n,Be(e.slice(0,t).join(" "))),""):e.join(" ")}onTab(e,t){const r=!t.includes(" ");let n="",a="",o=[];if(r)n=e,o=Object.keys(Qt);else{const p=Jt(e);n=p.name,a=p.parent,o=this.cmd.ls(a)||[],console.log("onTab files",o,e,a,n)}const i=o.filter(p=>p.startsWith(n));let f=is(i,n.length);if(!r){const p="".concat(a).concat(a?"/":"").concat(f);f&&this.cmd.disk.isDir(p)&&(f+="/")}let g="";return n===f&&i.length>1&&(g=i.join(" ")),r&&i.length===1&&(f+=" "),{line:g,result:f.replace(n,"")}}registerCommand(e){var t;if(e.name.length>ur)return{success:!1,info:"Command name should less then ".concat(ur,": ").concat(e.name)};if(!Qt[e.name]){this.thirdCommands[e.name]=e;let r=Dr(e.helpInfo);return r||(r=e.helpDetails?"Run '".concat(e.name," -d' to view details"):"".concat(e.name," <args>.")),Qt[e.name]=r,(t=e.activate)==null||t.call(e,this.disk,this),{success:!0,info:"Register success"}}return{success:!1,info:"Command already exists ".concat(name)}}removeCommand(e){var t;if(e in this.thirdCommands){const r=this.thirdCommands[e];return delete this.thirdCommands[e],delete Qt[e],(t=r.dispose)==null||t.call(r),{success:!0,info:"Remove success"}}else if(e in Qt)return{success:!1,info:"Cannot remove built-in command: ".concat(e)};return{success:!1,info:"Command ".concat(e," not exists")}}async _loadCommands(){if(await this.disk.ready,!this.disk.existSync(ar))return;const e=this.disk.lsSync(ar);if(!e)return;const t=us();for(const r of e){const n=or(r);if(this.disk.isDir(n))continue;const a=this.disk.readTextSync(n);a&&t.add(this.installCommand._installFromText(a))}await t.run()}}class we{constructor(e){if(this.pwd="/",we.instance)return we.instance;we.instance=this;const t=new Xs;this.term=new ns({style:{padding:10},title:'Welcome to WebOS! Try running "help".\n',container:e,header:this.header}),this.commandProvider=t;let r;this.term.on("enter",async n=>{if(!n){this.term.write(n);return}const a=await t.onCommand(qs(n),{setPwd:o=>{this.pwd=o,this.term.setHeader(this.header)},clearTerminal:()=>{this.term.clearTerminal()},getHeader:()=>this.header,openEditor:({path:o,content:i,save:f})=>{this.term.vi(i,"Edit ".concat(o,' ("').concat(fs()?"cmd":"ctrl",'+s" to save, "esc" to exit)')),r=f}});typeof a=="string"&&(a?this.term.write(a):this.term.newLine())}),this.term.on("tab",n=>{const a=n.substring(n.lastIndexOf(" ")+1),o=this.commandProvider.onTab(a,this.term.value),{line:i,result:f}=o;i&&this.term.write(i),this.term.insertEdit(f)}),this.term.on("edit-done",n=>{r==null||r(n),this.term.newLine()})}get disk(){return this.commandProvider.disk}get header(){return"".concat(this.pwd," admin$ ")}get registerCommand(){var e;return((e=this.commandProvider.registerCommand)==null?void 0:e.bind(this.commandProvider))||(()=>{})}get removeCommand(){return this.commandProvider.removeCommand.bind(this.commandProvider)||(()=>{})}}function qs(s){if(s=s.trim(),!s)return[];const e=s.split("|").map(r=>r.trim()),t=[];for(const r of e){const n={name:"",args:[],options:{}},a=r.split(" ");n.name=a.shift()||"";let o="";for(let i of a)i=i.trim(),i&&(i[0]==="-"?(o&&(n.options[o]=!0),o=i.substring(1)):o?i[0]==="-"?(n.options[o]=!0,o=i.substring(1)):(n.options[o]=i,o=""):n.args.push(i));o&&(n.options[o]=!0),t.push(n)}return t}const br=new we;br.registerCommand(Cn);window.os=br;br.disk.watch("/aa",{recursive:!0},(s,e)=>{console.trace("watch",s,e)});export{Qs as __vite_legacy_guard};
