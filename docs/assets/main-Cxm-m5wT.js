function sa(){import.meta.url,import("_").catch(()=>1);async function*i(){}}function ci(i,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in i)){const a=Object.getOwnPropertyDescriptor(r,n);a&&Object.defineProperty(i,n,a.get?a:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var Xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dr(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var er={exports:{}};(function(i,e){(function(t,r){r(e)})(Xt,function(t){function r(f){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}function n(f,m){for(var p=0;p<m.length;p++){var h=m[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}function a(f){return function(m){if(Array.isArray(m))return o(m)}(f)||function(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}(f)||function(m,p){if(m){if(typeof m=="string")return o(m,p);var h=Object.prototype.toString.call(m).slice(8,-1);return(h=h==="Object"&&m.constructor?m.constructor.name:h)==="Map"||h==="Set"?Array.from(m):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?o(m,p):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(f,m){(m==null||m>f.length)&&(m=f.length);for(var p=0,h=new Array(m);p<m;p++)h[p]=f[p];return h}var s=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.usePrevEmit=!0,this._map={},this._prevData={}}var m,p,h;return m=f,h=[{key:"_",get:function(){return this.__||(this.__=new f),this.__}},{key:"usePrevEmit",get:function(){return this._.usePrevEmit},set:function(y){this._.usePrevEmit=y}},{key:"emit",value:function(y){for(var d,x=arguments.length,w=new Array(1<x?x-1:0),k=1;k<x;k++)w[k-1]=arguments[k];(d=this._).emit.apply(d,[y].concat(w))}},{key:"off",value:function(y,d){this._.off(y,d)}},{key:"clear",value:function(y){this._.clear(y)}},{key:"on",value:function(y,d){this._.on(y,d)}},{key:"once",value:function(y,d){this._.once(y,d)}},{key:"onWait",value:function(y){this._.onWait(y)}},{key:"head",value:function(y,d){this._.head(y,d)}},{key:"headOnce",value:function(y,d){this._.headOnce(y,d)}}],(p=[{key:"hasEvent",value:function(y){return!!this._map[y]}},{key:"on",value:function(y,d){var x=this;if(r(y)==="object"){var w,k=[];for(w in y)k.push(this.on(w,y[w]));return function(){k.forEach(function(C){return C()})}}if(!d)throw new Error("fn is required");var _=this._formatTarget(d);return this._checkPrev(y,_)&&_.once?function(){}:(this._getList(y).push(_),function(){x.off(y,_)})}},{key:"_formatTarget",value:function(y,d){return typeof y=="function"?{listener:y,once:d!=null&&d,prev:this.usePrevEmit}:(typeof d=="boolean"&&(y.once=d),y)}},{key:"emit",value:function(y){for(var d=arguments.length,x=new Array(1<d?d-1:0),w=1;w<d;w++)x[w-1]=arguments[w];this._prevData[y]=x;var k=this._map[y];if(!k)return!1;for(var _=0;_<k.length;_++){var C=k[_];C.listener.apply(C,x),C.once&&(k.splice(_,1),_--)}return!0}},{key:"off",value:function(y,d){if(y=this._map[y],!y)return!1;var x=y.findIndex(function(w){return w===d||w.listener===d});return x!==-1&&(y.splice(x,1),!0)}},{key:"clear",value:function(y){return!!this._map[y]&&(delete this._map[y],delete this._prevData[y],!0)}},{key:"onWait",value:function(y,d){var x=this;return new Promise(function(w){var k=function(){for(var _=arguments.length,C=new Array(_),F=0;F<_;F++)C[F]=arguments[F];return w(C)};d&&(k=Object.assign({listener:k},d)),x.once(y,k)})}},{key:"destroy",value:function(){this._map={},this._prevData={}}},{key:"_checkPrev",value:function(y,d){return d.prev?(y=this._prevData[y],y!==void 0&&(d.listener.apply(d,a(y)),!0)):!1}},{key:"once",value:function(y,d){return this.on(y,this._formatTarget(d,!0))}},{key:"head",value:function(y,d){var x=this,w=this._formatTarget(d);return this._checkPrev(y,w)&&w.once?function(){}:(this._getList(y).unshift(w),function(){x.off(y,d)})}},{key:"headOnce",value:function(y,d){return this.head(y,this._formatTarget(d,!0))}},{key:"_getList",value:function(y){var d=this._map[y];return d||(this._map[y]=d=[]),d}}])&&n(m.prototype,p),h&&n(m,h),Object.defineProperty(m,"prototype",{writable:!1}),f}();s.version="0.0.3",t.Eveit=s,t.default=s,Object.defineProperty(t,"__esModule",{value:!0})})})(er,er.exports);var Zr=er.exports;function rr(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function fi(i){if(Array.isArray(i))return rr(i)}function li(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function hi(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,gi(r.key),r)}}function di(i,e,t){return hi(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function pi(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function mi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cr(i){return fi(i)||pi(i)||vi(i)||mi()}function yi(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function gi(i){var e=yi(i,"string");return typeof e=="symbol"?e:e+""}function vi(i,e){if(i){if(typeof i=="string")return rr(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?rr(i,e):void 0}}var Ae=Symbol("E"),pr=function(i){return i[i.Fork=0]="Fork",i[i.Append=1]="Append",i}(pr||{}),Yr=function(){function i(){var e=this,t,r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.max,o=a===void 0?0:a,s=n.useStorage,f=s===void 0?!1:s,m=n.storageKey,p=m===void 0?"_def_history_stack":m,h=n.mode,y=h===void 0?0:h,d=n.storageProvider,x=n.onStepChange,w=n.onHistorySizeChange,k=n.onHistoryOut;if(li(this,i),this.step=0,this.size=0,this.max=40,this.list=[],this.index=0,this.End=Ae,this.isActive=!1,this.max=o,this.mode=y,f!==!1&&(d||p)&&(f=!0),f&&(this.storageProvider=d||{read:function(){var C=localStorage.getItem(p);return C?JSON.parse(C):[]},write:function(C){localStorage.setItem(p,JSON.stringify(C))}}),x&&(this.osc=function(){return x(e.step)}),w&&(this.ohsc=function(){return w(e.size)}),this.oho=k,(t=this.osc)===null||t===void 0||t.call(this),(r=this.ohsc)===null||r===void 0||r.call(this),f){var _=this.storageProvider.read();_ instanceof Promise?_.then(function(C){e.useCache(C)}):this.useCache(_)}}return di(i,[{key:"useCache",value:function(e){e.length!==0&&this.push.apply(this,Cr(e))}},{key:"setMax",value:function(e){this.max=e}},{key:"setStep",value:function(e){var t;this.step=e,(t=this.osc)===null||t===void 0||t.call(this)}},{key:"setHistoryIndex",value:function(e){var t;this.isActive||(this.isActive=!0),this.index=e,this.size=e,(t=this.ohsc)===null||t===void 0||t.call(this)}},{key:"back",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canBack(t))return t>1&&(this.setStep(this.step-this.index),this.setHistoryIndex(0)),this.End;this.setStep(this.step-t),this.setHistoryIndex(this.index-t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"canBack",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index-e>=0}},{key:"first",value:function(){return this.list.length===0?Ae:(this.setStep(this.step-this.index),this.setHistoryIndex(0),this.list[0])}},{key:"last",value:function(){return this.list.length===0?Ae:(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1),this.list[this.list.length-1])}},{key:"forward",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canForward(t))return t>1&&(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1)),this.End;this.setStep(this.step+t),this.setHistoryIndex(this.index+t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"isEnd",value:function(e){return e===Ae}},{key:"canForward",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index+e<this.list.length}},{key:"pop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=this.list.length;if(t<=e){var r=Cr(this.list);return this.clear(),r}var n=t-e,a=this.list.splice(n),o=this.list.length;return o<this.index&&(this.setHistoryIndex(o),this.setStep(this.step-(this.index-o))),a}},{key:"push",value:function(){var e,t=this.list.length;this.index<t&&(this.step++,this.index++,this.mode===0&&this.list.splice(this.index));var r=arguments.length,n=0,a=r;this.max>0&&t+r>this.max&&(n=t+r-this.max,a=r-n),(e=this.list).push.apply(e,arguments),n&&this.list.splice(0,n),this._onListChange(),a&&(this.mode===1?this.setHistoryIndex(this.list.length):this.setHistoryIndex(this.index+a)),this.mode===1?this.setStep(this.list.length):this.setStep(this.step+a),this.isActive&&(this.isActive=!1)}},{key:"clear",value:function(){this.list=[],this._onListChange(),this.setHistoryIndex(0),this.setStep(0),this.isActive=!1}},{key:"replace",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.index;typeof this.list[t]>"u"||(this.list[t]=e,this._onListChange())}},{key:"isLatest",get:function(){return this.index===this.list.length-1}},{key:"_onListChange",value:function(){var e;(e=this.storageProvider)===null||e===void 0||e.write(this.list)}},{key:"current",value:function(){return this.list[this.index]}}])}();Yr.Mode=pr;function nr(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function wi(i){if(Array.isArray(i))return nr(i)}function De(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _i(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Si(r.key),r)}}function Le(i,e,t){return e&&_i(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function bi(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ki(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xi(i){return wi(i)||bi(i)||Ci(i)||ki()}function Ei(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function Si(i){var e=Ei(i,"string");return typeof e=="symbol"?e:e+""}function ke(i){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(i)}function Ci(i,e){if(i){if(typeof i=="string")return nr(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?nr(i,e):void 0}}function mr(i){return!!(i!=null&&i.__isRef)}var ir=null;function Ai(i){return ir=i,function(){ir=null}}function Kr(){return ir}var Ii=function(){function i(e,t){var r=this;De(this,i),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=e,this._set=t;var n=Ai(function(a,o){var s=function(){if(r._dirty=!0,r._listeners.length>0){var m=r._value,p=r.value;r._listeners.forEach(function(h){h(p,m)})}},f=typeof o=="string"?a.$sub(o,s):a.sub(s);r._clearSub.push(f)});this._refreshValue(),n()}return Le(i,[{key:"value",get:function(){var e;return this._dirty&&this._refreshValue(),Xr(this),(e=Kr())===null||e===void 0||e(this),this._value},set:function(e){if(!this._set){console.warn("Computed not have set property");return}this._set(e)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(e){var t=this;return this._listeners.push(e),function(){return t.unsub(e)}}},{key:"unsub",value:function(e){var t=this._listeners.indexOf(e);return t!==-1?(this._listeners.splice(t,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(e){return e()}),this._clearSub=[]}}])}();function Bi(i,e){return Ne(i)?i:new Ii(i,e)}function Ne(i){return!!(i!=null&&i.__isComputed)}function Vr(i){return typeof i=="function"||Ne(i)}function Gr(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={},r={},n={$sub:function(p,h){return t[p]||(t[p]=[]),t[p].push(h),function(){n.$unsub(p,h)}},$unsub:function(p,h){if(t[p]){if(typeof h>"u")return delete t[p],!0;var y=t[p].indexOf(h);return y===-1?!1:(t[p].splice(y,1),!0)}},$get:function(p){return r[p]}},a={},o=function(p){var h=i[p];r[p]=h,a[p]={get:function(){var y;Xr(n,p),(y=Kr())===null||y===void 0||y(n,p);var d=r[p];return d},set:function(y){var d,x=r[p];r[p]=y,(d=t[p])===null||d===void 0||d.forEach(function(w){w(y,x)})}},n[p]=h};for(var s in i)o(s);Object.defineProperties(n,a);var f=function(p){n[p]=function(){for(var h=arguments.length,y=new Array(h),d=0;d<h;d++)y[d]=arguments[d];return e[p].apply(n,y)}};for(var m in e)f(m);return n}var be={};function Xr(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t;Ne(i)||mr(i)?(e="value",t=function(r){return i.sub(r)}):t=function(r){return i.$sub(e,r)},Object.assign(be,{set:function(r){i[e]=r},get:function(){return i[e]},sub:t})}function Ti(i,e){if(!be)throw new Error("Bind 传入参数错误");(Ne(e)||mr(e))&&(e=e.value);var t=be.get,r=be.set,n=be.sub;if(t()!==e)throw new Error("Bind 传入参数错误");var a=i.el,o="string";if(a.tagName==="INPUT"){var s=i.attr("type");s==="number"||s==="range"?o="number":(s==="radio"||s==="checkbox")&&(o="boolean")}var f=function(){if(o==="boolean")return a.checked;var y=i.value();return o==="number"?parseFloat(y):y},m=function(y){if(o==="boolean"){a.checked=y;return}i.value(y)},p=!1,h=function(){p=!0,r(f()),p=!1};m(t()),i.on("input",function(){h()}),i.on("change",function(){h()}),n(function(y){p||m(y)})}function se(i,e){if(mr(i))i.sub(function(){e(i.value,!1)}),e(i.value,!0);else if(Vr(i)){var t=Bi(i);t.sub(function(){e(t.value,!1)}),e(t.value,!0)}else return e(i,!0),!1;return!0}var qr=function(){function i(e){De(this,i),this.__ld_type=Ue.Text,this.el=document.createTextNode(""),typeof e<"u"&&this.text(e)}return Le(i,[{key:"text",value:function(e){var t=this;return se(e,function(r){return t.el.textContent=r}),this}},{key:"mounted",value:function(e){return this.__mounted=e,this}}])}(),Pi=function(){function i(){De(this,i),this.__ld_type=Ue.Frag,this.children=[],this.el=document.createDocumentFragment()}return Le(i,[{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return yr(r,function(a,o){e.children.push(o),e.el.appendChild(a)}),this}},{key:"mounted",value:function(e){return this.__mounted=function(t){t.children.forEach(function(r){var n;(n=r.__mounted)===null||n===void 0||n.call(r,r)}),e(t)},this}}])}(),Ue=function(i){return i[i.Dom=0]="Dom",i[i.Text=1]="Text",i[i.Frag=2]="Frag",i}(Ue||{});function yr(i,e){i.forEach(function(t){var r;if(Array.isArray(t)){yr(t,e);return}var n=t;Vr(n)?(n=new qr(n),n=n.el):typeof n.__ld_type=="number"?n=n.el:t instanceof HTMLElement||(n=document.createTextNode("".concat(t))),e(n,t),(r=t.__mounted)===null||r===void 0||r.call(t,t)})}var Fi=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,Ar=/!important$/,zi=/^[0-9]+$/;function Oi(i,e){i=Ri(i);var t="";return Ar.test(e)&&(t="important",e=e.replace(Ar,"")),zi.test(e)&&Fi.test(i)&&(e="".concat(e,"px")),{cssKey:i,cssValue:e,important:t}}function Ri(i){for(var e=i.length,t="",r=0;r<e;r++){var n=i[r],a=n.charCodeAt(0);a>=65&&a<=90?t+="-".concat(n.toLowerCase()):t+=n}return t}var Di=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function Jr(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(e){var r=t.querySelector(i);if(r)return new oe(r);throw new Error("Element is not exist"+i)}for(var n=t.querySelectorAll(i),a=[],o=0;o<n.length;o++)a.push(new oe(n[o]));return a}var Mt=function(){var i=function(t){return new oe(t)},e={frag:{get:function(){return new Pi}},text:{get:function(){var t=function(r){return new qr(r)};return t.text=t,t}}};return Di.forEach(function(t){e[t]={get:function(){return i(t)}}}),Object.defineProperties(i,e),i}();function Li(i,e){var t,r=e;r=Jr(e,!0),Array.isArray(i)?(t=r).append.apply(t,xi(i)):r.append(i)}var oe=function(){function i(e){De(this,i),this.__ld_type=Ue.Dom,this.__xr_funcs={},this.el=typeof e=="string"?document.createElement(e):e}return Le(i,[{key:"_ur",value:function(e,t){var r=this;return typeof t>"u"?this.el[e]:(se(t,function(n){return r.el[e]=n}),this)}},{key:"class",value:function(e){return this._ur("className",e)}},{key:"id",value:function(e){return this._ur("id",e)}},{key:"addClass",value:function(e){return this.el.classList.add(e),this}},{key:"removeClass",value:function(e){return this.el.classList.remove(e),this}},{key:"hasClass",value:function(e){var t;return(t=this.el)===null||t===void 0?void 0:t.classList.contains(e)}},{key:"toggleClass",value:function(e,t){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(e,t))}},{key:"remove",value:function(){var e;return(e=this.el)===null||e===void 0||e.remove(),this}},{key:"text",value:function(e){return typeof e>"u"?this.el.innerText:this._ur("innerText",e)}},{key:"mounted",value:function(e){return this.__mounted=e,this}},{key:"attr",value:function(e,t){var r=this;if(ke(e)==="object"){for(var n in e)this.attr(n,e[n]);return this}return typeof t>"u"?this.el.getAttribute(e)||"":(se(t,function(a){return r.el.setAttribute(e,a)}),this)}},{key:"removeAttr",value:function(e){return this.el.removeAttribute(e),this}},{key:"func",value:function(e,t){return typeof t>"u"?this.__xr_funcs[e]:(this.__xr_funcs[e]=t,this)}},{key:"data",value:function(e,t){var r=this;if(ke(e)==="object"){for(var n in e)this.data(n,e[n]);return this}if(typeof t>"u"){var a;return((a=this.el.__xr_data)===null||a===void 0?void 0:a[e])||null}return this.el.__xr_data||(this.el.__xr_data={}),se(t,function(o){return r.el.__xr_data[e]=o}),this}},{key:"style",value:function(e,t){var r=this.el.style;if(typeof t<"u")return se(t,function(a){var o=Oi(e,a),s=o.important,f=o.cssValue,m=o.cssKey;r.setProperty(m,f,s)}),this;if(typeof e=="string")return r[e];for(var n in e)this.style(n,e[n]);return this}},{key:"value",value:function(e){return this._ur("value",e)}},{key:"html",value:function(e){return this._ur("innerHTML",e)}},{key:"outerHtml",value:function(e){var t=this;return typeof e>"u"?this.el.outerHTML:(se(e,function(r){t.html(r),t.el=t.el.children[0]}),this)}},{key:"child",value:function(e){var t=this.el.children[e];return t?new i(t):null}},{key:"children",value:function(){for(var e=this.el.children.length,t=[],r=0;r<e;r++)t.push(this.child(r));return t}},{key:"click",value:function(e){return this.on("click",e)}},{key:"on",value:function(e,t){if(ke(e)==="object"){for(var r in e)this.on(r,e[r]);return this}var n=this.el;if(typeof t=="function")this.el.addEventListener(e,t);else{var a,o=function(s){var f;t.self&&s.target!==n||(t.stop&&s.stopPropagation(),t.prevent&&s.preventDefault(),t.once&&n.removeEventListener(e,o,t.capture),(f=t.listener)===null||f===void 0||f.call(t,s))};n.addEventListener(e,o,(a=t.capture)!==null&&a!==void 0?a:!1)}return this}},{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return yr(r,function(a){e.el.appendChild(a)}),this}},{key:"ref",value:function(e){return e(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",e)}},{key:"show",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return se(e,function(n){t.display(n?r:"none")}),this}},{key:"query",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Jr(e,t,this.el)}},{key:"src",value:function(e){return this._ur("src",e)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(e){return this.attr("__xr_name",e)}},{key:"find",value:function(e){return this.query('[__xr_name="'.concat(e,'"]'),!0)}},{key:"type",value:function(e){return this.attr("type",e)}},{key:"bind",value:function(e){return Ti(this,e),this}}])}();function Ir(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function Br(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=Ni(i))||e){t&&(i=t);var r=0,n=function(){};return{s:n,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(f){throw f},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){t=t.call(i)},n:function(){var f=t.next();return o=f.done,f},e:function(f){s=!0,a=f},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function Ni(i,e){if(i){if(typeof i=="string")return Ir(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ir(i,e):void 0}}var Qr="  ";function Ui(i){Qr=i}function Mi(i){ji(this,i,Qr)}function ji(i,e,t){var r=t.length;if(e.code==="Tab"){e.preventDefault();var n=Tr(i),a=n.startLineIndex,o=n.start,s=n.end,f=n.lineText.split("\n");if(e.shiftKey){var m=!0,p=Br(f),h;try{for(p.s();!(h=p.n()).done;){var y=h.value;y.startsWith(t)?(i.selectionStart=a,i.selectionEnd=a+r,document.execCommand("delete",!1),m&&y.startsWith(t+t)&&(o-=r),s-=r,a+=y.length-r+1):a+=y.length+1,m=!1}}catch(N){p.e(N)}finally{p.f()}console.log(o,s),i.selectionStart=o,i.selectionEnd=s;return}if(f.length===1){Ve(t);return}o+=r;var d=Br(f),x;try{for(d.s();!(x=d.n()).done;){var w=x.value;i.selectionStart=i.selectionEnd=a,Ve(t),a+=r+w.length+1,s+=r}}catch(N){d.e(N)}finally{d.f()}i.selectionStart=o,i.selectionEnd=s}else if(e.code==="Enter"&&!e.ctrlKey){for(var k=Tr(i),_=k.lineText.split("\n")[0],C="\n",F=0;_.substring(F,F+r)===t;)C+=t,F+=r;F>0&&(Ve(C),e.preventDefault())}}function Ve(i){i&&document.execCommand("insertText",!1,i)}function Tr(i){var e=i.selectionStart,t=i.selectionEnd,r="",n=i.value;r=n.substring(e,t);var a=n.substring(0,e),o=a.lastIndexOf("\n"),s=o+1;return{start:e,end:t,text:r,lineText:n.substring(s,t),line:r.split("\n").length,startLineIndex:s}}function Pr(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function Ge(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=Wi(i))||e){t&&(i=t);var r=0,n=function(){};return{s:n,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(f){throw f},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){t=t.call(i)},n:function(){var f=t.next();return o=f.done,f},e:function(f){s=!0,a=f},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function Wi(i,e){if(i){if(typeof i=="string")return Pr(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pr(i,e):void 0}}function sr(i){if(i=i.trim(),!i)return[];var e=i.split("|").map(function(o){return o.trim()}),t=[],r=Ge(e),n;try{var a=function(){var o=n.value,s={name:"",args:[],options:{}},f=o.split(" ");s.name=f.shift()||"";var m="",p=!1,h=function(_){if(p)s.options[m]=_;else{var C=Ge(m),F;try{for(C.s();!(F=C.n()).done;){var N=F.value;s.options[N]=_}}catch(B){C.e(B)}finally{C.f()}}},y=function(_){m=_.substring(p?2:1)},d=function(_){p=_[1]==="-"},x=Ge(f),w;try{for(x.s();!(w=x.n()).done;){var k=w.value;k=k.trim(),k&&(k[0]==="-"?(d(k),m&&h(!0),y(k)):m?k[0]==="-"?(d(k),h(!0),y(k)):(h(k),m=""):s.args.push(k))}}catch(_){x.e(_)}finally{x.f()}m&&h(!0),t.push(s)};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return t}(function(){try{if(typeof document<"u"){var i=document.createElement("style");i.appendChild(document.createTextNode(".style-text{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.full-parent{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea::-webkit-scrollbar,.web-term-container::-webkit-scrollbar{width:5px;cursor:pointer;height:5px}.editor-textarea::-webkit-scrollbar-button,.web-term-container::-webkit-scrollbar-button{display:none}.editor-textarea::-webkit-scrollbar-track,.web-term-container::-webkit-scrollbar-track{display:none}.editor-textarea::-webkit-scrollbar-thumb,.web-term-container::-webkit-scrollbar-thumb{background-color:#777;cursor:pointer}.editor-textarea ::selection,.web-term-container ::selection{background-color:var(--selection-bg);color:var(--selection)}.web-term-container{position:relative;font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box;background-color:var(--background);color:var(--color);cursor:text}.web-term-container *{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.editor-cursor{position:absolute;z-index:2;height:var(--line-height);background-color:var(--background);color:var(--color)}.editor-cursor.cursor-focus{background-color:var(--selection-bg);color:var(--selection)}.editor-cursor .editor-cursor-border{position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid var(--selection-bg)}.editor-cursor .editor-cursor-text{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea{color:var(--color)}.term-editor-title{color:var(--color);opacity:.7}.term-display-box>div,.term-below-box>div{padding:2px 0;word-break:break-all;white-space:pre-wrap;color:var(--color)}.term-display-box>div a,.term-below-box>div a{opacity:.7}.term-below-box>div{opacity:.7}")),document.head.appendChild(i)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();function ar(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function $i(i){if(Array.isArray(i))return ar(i)}function Hi(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function tn(i,e,t){return e=Te(e),Gi(i,rn()?Reflect.construct(e,[],Te(i).constructor):e.apply(i,t))}function ce(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Zi(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,nn(r.key),r)}}function fe(i,e,t){return e&&Zi(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Yi(i,e,t){return(e=nn(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Te(i){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(i)}function en(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&or(i,e)}function rn(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(rn=function(){return!!i})()}function Ki(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Vi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fr(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function xe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fr(Object(t),!0).forEach(function(r){Yi(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Fr(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function Gi(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hi(i)}function or(i,e){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},or(i,e)}function Xi(i){return $i(i)||Ki(i)||Ji(i)||Vi()}function qi(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function nn(i){var e=qi(i,"string");return typeof e=="symbol"?e:e+""}function Ji(i,e){if(i){if(typeof i=="string")return ar(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ar(i,e):void 0}}var Qi=function(){function i(e,t){var r=this;ce(this,i),this.pushedCurrent=!1,this.provider=t,this.history=new Yr({max:e,mode:pr.Append});var n=t.read();n instanceof Promise?n.then(function(a){r._initHistory(a)}):this._initHistory(n)}return fe(i,[{key:"_initHistory",value:function(e){var t,r=JSON.parse(e);(t=this.history).push.apply(t,Xi(r))}},{key:"up",value:function(e){if(this.history.isActive||(this.push(e),this.history.back(),this.pushedCurrent=!0),this.history.canBack()){var t=this.history.back();return t}else return null}},{key:"down",value:function(){return this.history.canForward()?this.history.forward():null}},{key:"checkLatest",value:function(e){this.history.isLatest&&(this.history.replace(e),this.save())}},{key:"push",value:function(e){this.pushedCurrent&&(this.history.pop(),this.pushedCurrent=!1),this.history.push(e),this.save()}},{key:"save",value:function(){this.provider.write(JSON.stringify(this.history.list))}},{key:"clear",value:function(){this.pushedCurrent=!1,this.history.clear(),this.save()}}])}();function zr(){var i=navigator.userAgent;return/macintosh|mac os x/i.test(i)}function ur(i){return zr()&&i.metaKey||!zr()&&i.ctrlKey}function ts(i){var e=!1;return i.on("compositionstart",function(){e=!0}),i.on("compositionend",function(){e=!1}),function(){return e}}function sn(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return i instanceof HTMLElement?new oe(i):i instanceof oe?i:typeof i=="string"?Mt.div[e?"html":"text"](i+t):Mt.div[e?"html":"text"](i.toString()+t)}var es=function(){function i(){ce(this,i),this.container=Mt.div.class("term-display-box").on("click",function(e){e.stopPropagation()})}return fe(i,[{key:"pushContent",value:function(e,t){this.container.append(sn(e,t,"\n"))}}])}(),Or="web-term-container",rs=2,an={FullParent:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},on={padding:5,fontSize:14,color:"#fff",background:"#000",selectionBackground:"#fff",selectionColor:"#000"};function ns(i){if(!i)return!1;var e=i.charCodeAt(0);return e>=128}var un=function(i){function e(t){var r,n=t.header,a=n===void 0?"":n,o=t.paddingTop,s=o===void 0?5:o,f=t.paddingLeft,m=f===void 0?5:f,p=t.size,h=p===void 0?"full":p,y=t.mode,d=y===void 0?"inline":y,x=t.tab,w=x===void 0?"  ":x,k=t.fontSize,_=k===void 0?on.fontSize:k;ce(this,e),r=tn(this,e),r.SingleCharWidth=9,r.MultiCharWidth=15,r.fontSize=0,r.lineHeight=0,r.wrapLine=!0,r.store=Gr({cx:0,cy:0}),r.header="",r._prevHeader="",r._prevHeaderWidth=0,r._pasteTimer=null,r._prevPos={x:-1,y:-1},r._isShowCursor=!1,r.setFontSize(_),r.size=h,r.mode=d,Ui(w),r.paddingTop=s,r.paddingLeft=m;var C=Mt.canvas;return r.ctx=C.el.getContext("2d"),r.resize(!0),r.header=a,r.render(),r._monitorStart(),r}return en(e,i),fe(e,[{key:"setFontSize",value:function(t){this.fontSize=t,this.lineHeight=t+2}},{key:"value",get:function(){var t=this.fullValue,r=this.header.length;return r?t.substring(r):t}},{key:"fullValue",get:function(){return this.textarea.value()}},{key:"beforeValue",get:function(){var t=this.fullValue,r=this.header.length,n=this.textarea.el.selectionStart;return typeof n=="number"&&n>0?t.substring(r,n):t.substring(r)}},{key:"headerWidth",get:function(){var t=this.header;return(t!==this._prevHeader||this._prevHeaderWidth<0)&&(this._prevHeader=t,this._prevHeaderWidth=this.measureTextWidth(t)),this._prevHeaderWidth}},{key:"_monitorStart",value:function(){var t=this;setTimeout(function(){t.textarea.el.clientWidth?t.relocateCursorPosition():t._monitorStart()},100)}},{key:"render",value:function(){var t=this.size==="full";this.container=Mt.div.style({position:"relative",height:t?"100%":"".concat(this.lineHeight+2*this.paddingTop,"px")}).append(this.cursor=Mt.div.class("editor-cursor").append(Mt.div.class("editor-cursor-border"),this.cursorText=Mt.div.class("editor-cursor-text")),this.textarea=Mt.textarea.class("editor-textarea").value(this.header).style(xe(xe({},an.FullParent),{},{padding:"".concat(this.paddingTop,"px ").concat(this.paddingLeft,"px"),backgroundColor:"transparent",border:"none",outline:"none",resize:"none",zIndex:"1",caretColor:"transparent"}))),this.wrapLine&&this.textarea.style({wordBreak:"break-all",whiteSpace:"pre-wrap"}),this.initEvents()}},{key:"initEvents",value:function(){var t=this,r=!1,n=this.textarea.el,a=function(p){return p.code==="Backspace"||p.code==="Enter"},o=ts(this.textarea),s=null,f=this.compatSelChange();this.textarea.on("keydown",function(p){if(!o()){if(t.mode==="inline"){if(p.code==="Enter")if(ur(p))t.pushText("\n");else{p.preventDefault(),t.emit("key","Enter");return}else if(p.code==="ArrowUp"||p.code==="ArrowDown"||p.code==="Tab"){p.preventDefault(),t.emit("key",p.code);return}}if(p.code==="Tab"&&n.selectionStart!==n.selectionEnd&&t.showCursor(!1),Mi.call(n,p),a(p)&&(r=!0),p.code==="Backspace"){var h=t.getCursorPosition(),y=h.x,d=h.y,x=h.isRange;d===0&&y<=t.headerWidth&&!x&&p.preventDefault()}ur(p)&&p.code==="KeyZ"&&(clearTimeout(s),s=setTimeout(function(){t.relocateCursorPosition()},50))}}).on("keyup",function(p){o()||a(p)&&(r=!1)}).on("paste",function(){t._pasteTimer=setTimeout(function(){t.relocateCursorPosition()},50)}).on("input",function(p){if(p.preventDefault(),r&&t.relocateCursorPosition(),t.size==="auto"){var h=t._countContentHeight(t.fullValue,!0);h!=n.clientHeight&&t.textarea.style("height","".concat(h,"px"))}t.emit("input")}).on("selectionchange",function(){f&&(f(),f=null),t._onSelectionChange()}).on("scroll",function(){t.relocateCursorPosition()}).on("focus",function(){t.cursor.addClass("cursor-focus")}).on("blur",function(){t.cursor.removeClass("cursor-focus")}).on("cut",function(){var p=t.textarea.el;p.selectionStart!==p.selectionEnd&&t.relocateCursorPosition()});var m=n.clientWidth;globalThis.addEventListener("resize",function(){n.clientWidth!==m&&(m=n.clientWidth,t.relocateCursorPosition())})}},{key:"_countContentHeight",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._countContentSize(t,r).height}},{key:"_countContentSize",value:function(t){var r=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=t.split("\n"),o=0,s=a.map(function(f){var m=r.countSingleLineInfo(f);return o+=m.length*r.lineHeight,m});return{lines:s,height:o+(n?2*this.paddingTop:0)}}},{key:"countSingleLineInfo",value:function(t){var r=this,n=this._getLineBoxWidth();if(n<=0)return[{content:t,width:this.measureTextWidth(t)}];var a=Math.floor(n/this.MultiCharWidth);if(t.length<=a)return[{content:t,width:this.measureTextWidth(t)}];for(var o=[],s=t.length,f=0,m=f+a,p=function(){var k=t.substring(f,m);return{content:k,width:r.measureTextWidth(k)}};s>a;){var h=p(),y=h.content,d=h.width,x=void 0,w=void 0;do{if(x=y,w=d,m>=t.length){m++;break}y+=t[m],d=this.measureTextWidth(y),m++}while(d<=n);o.push({content:x,width:w}),f=m-1,m=f+a,s-=x.length}return f<t.length&&o.push(p()),o}},{key:"_onSelectionChange",value:function(){var t=this.textarea.el;if(t.selectionStart===t.selectionEnd)this.relocateCursorPosition();else{if(t.clientWidth===0)return;var r=this.header.length;t.selectionStart<r&&(t.selectionStart=r);var n=t.value.length;t.selectionEnd>n&&(t.selectionEnd=n)}}},{key:"compatSelChange",value:function(){var t=this,r=function(){var n=t.textarea.el;document.activeElement===n&&t._onSelectionChange()};return document.addEventListener("selectionchange",r),function(){return document.removeEventListener("selectionchange",r)}}},{key:"measureTextWidth",value:function(t){return t?this.ctx.measureText(t).width:0}},{key:"_getLineBoxWidth",value:function(){return this.textarea.el.clientWidth-2*this.paddingLeft}},{key:"getCursorPosition",value:function(){var t=this.textarea.el,r=t.selectionStart,n=t.selectionEnd,a=t.value.substring(0,r),o=this._getLineBoxWidth(),s=t.value[r]||"",f=0,m=0;if(this.wrapLine){var p,h=this._countContentSize(a);m=h.height-this.lineHeight,f=((p=h.lines.pop())===null||p===void 0||(p=p.pop())===null||p===void 0?void 0:p.width)||0}else f=this.measureTextWidth(a),m=(a.split("\n").length-1)*this.lineHeight;var y=ns(s)?this.MultiCharWidth:this.SingleCharWidth;return f+y>o&&(f=0,m+=this.lineHeight),(this._prevPos.x!==f||this._prevPos.y!==m)&&(Object.assign(this._prevPos,{x:f,y:m}),this.emit("cursor-change",{x:f,y:m,word:s,wordWidth:y,beforeValue:this.beforeValue,value:this.value})),{x:f,y:m,isRange:r!=n,word:s,wordWidth:y}}},{key:"showCursor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._isShowCursor!==t&&(this.cursor.style("visibility",t?"visible":"hidden"),this._isShowCursor=t)}},{key:"relocateCursorPosition",value:function(){clearTimeout(this._pasteTimer);var t=this.textarea.el;this.showCursor();var r=this.getCursorPosition(),n=r.x,a=r.y,o=r.word,s=r.wordWidth,f=n;if(a===0&&n<this.headerWidth){var m=this.header.length;t.setSelectionRange(m,m),f=this.headerWidth}this.cursor.style({left:"".concat(f+this.paddingLeft,"px"),top:"".concat(a+this.paddingTop-t.scrollTop,"px"),width:"".concat(s,"px")}),this.cursorText.text(o)}},{key:"focus",value:function(){this.textarea.el.focus()}},{key:"pushText",value:function(t){var r=this.textarea.el;r.selectionStart=r.selectionEnd=r.value.length,this.insertText(t)}},{key:"insertText",value:function(t){t&&document.execCommand("insertText",!1,t)}},{key:"replaceText",value:function(t){this.clearContent(!1),this.pushText(t),this.relocateCursorPosition()}},{key:"clearContent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=this.textarea.el,n=r.value,a=!n.startsWith(this.header),o=this.header.length;r.selectionStart=a?0:o,r.selectionEnd=n.length+1,o!==n.length&&(document.execCommand("delete",!1),a&&this.insertText(this.header),t&&this.relocateCursorPosition())}},{key:"setCursorToHead",value:function(){this.setCursorPos(0)}},{key:"setCursorPos",value:function(t){var r=this.textarea.el;r.selectionStart=r.selectionEnd=this.header.length+t}},{key:"resize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.ctx.font="".concat(this.fontSize,'px Menlo, Monaco, "Courier New", monospace'),this.SingleCharWidth=this.measureTextWidth("a"),this.MultiCharWidth=this.measureTextWidth("一"),!t){this._prevHeaderWidth=-1;var r=this.size==="full";r||this.container.style("height","".concat(this.lineHeight+2*this.paddingTop,"px")),this.relocateCursorPosition()}}}])}(Zr.Eveit),is=function(){function i(){ce(this,i),this.container=Mt.div.class("term-below-box").on("click",function(e){e.stopPropagation()})}return fe(i,[{key:"write",value:function(e,t){var r=this.container.children();r.length>0&&r[r.length-1].remove(),this.push(e,t)}},{key:"push",value:function(e,t){this.container.append(sn(e,t,"\n"))}},{key:"clear",value:function(){this.container.empty()}}])}(),ss=function(){function i(e){var t=this;ce(this,i),this.editor=new un({mode:"full",paddingLeft:0,paddingTop:0,fontSize:e.fontSize}),this.container=Mt.div.style(xe(xe({},an.FullParent),{},{padding:e.padding,zIndex:100,flexDirection:"column",display:"flex"})).append(this.title=Mt.div.class("term-editor-title").text(""),this.editor.container.style({flex:"1",height:"auto"})),this.container.on("click",function(r){r.stopPropagation()}),this.container.on("keydown",function(r){if(r.code==="KeyS"&&ur(r)){var n=t.editor.value;t.editor.clearContent(),t.editor.emit("edit-done",n),r.preventDefault()}r.code==="Escape"&&(t.editor.clearContent(),t.editor.emit("edit-cancel"))})}return fe(i,[{key:"_init",value:function(e,t){var r=t.title,n=r===void 0?"":r,a=t.html,o=a===void 0?!1:a;this.editor.textarea.el.focus(),this.editor.replaceText(e),this.title.style({paddingBottom:n?"5px":0})[o?"html":"text"](n)}}])}(),as=function(){function i(e,t){ce(this,i),this.parent=e,this.style=t,this.list=[]}return fe(i,[{key:"create",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new ss(this.style);this.parent.container.append(n.container),this.parent.store.showEditor=!0;var a=n.editor,o=function(){t.removeEditor(n)};if(a.once("edit-done",o),a.once("edit-cancel",o),this.list.length>0){var s=this.list[this.list.length-1];s.container.display("none")}return this.list.push(n),n._init(e,r),a}},{key:"removeEditor",value:function(e){var t=this.list.indexOf(e);if(t>=0){if(this.list.splice(t,1),this.list.length===0)this.parent.store.showEditor=!1;else{var r=this.list[this.list.length-1];r.container.display("flex"),r.editor.focus()}e.container.remove(),this.parent.input.focus()}}},{key:"setFontSize",value:function(e){this.list.forEach(function(t){t.editor.setFontSize(e)})}},{key:"resize",value:function(){this.list.forEach(function(e){e.editor.resize()})}}])}();function os(){var i="_web_term_ui_history;";return{read:function(){return localStorage.getItem(i)||"[]"},write:function(e){return localStorage.setItem(i,e),!0}}}var us=function(i){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.title,a=n===void 0?"":n,o=r.titleHtml,s=o===void 0?!0:o,f=r.historyMax,m=f===void 0?100:f,p=r.storageProvider,h=p===void 0?os():p,y=r.container,d=r.header,x=r.theme,w=r.style,k=w===void 0?{padding:5}:w,_=r.parseCommand,C=_===void 0?!0:_;if(ce(this,e),t=tn(this,e),t.style=xe({},on),t.store=Gr({showEditor:!1}),t.theme="dark",t._parseCommand=C,t.title=a,t.history=new Qi(m,h),Object.assign(t.style,k),t.editManager=new as(t,k),t.input=new un({paddingTop:rs,paddingLeft:0,header:d,size:"auto",mode:"inline",fontSize:t.style.fontSize}),t.display=new es,t.below=new is,a&&t.display.pushContent(a,s),!y)t.container=Mt.div.class(Or).style({position:"fixed",top:0,left:0,width:"100%",height:"100%"}),Li(t.container,"body");else{if(typeof y=="string"){var F=document.querySelector(y);if(!F)throw new Error("Container not exists");t.container=new oe(F)}else t.container=new oe(y);t.container.addClass(Or)}return t.initEvents(),x?t.setTheme(x):t.setColor(k),t._setFontSize(t.style.fontSize),t.render(),t}return en(e,i),fe(e,[{key:"value",get:function(){return this.input.value}},{key:"beforeValue",get:function(){return this.input.beforeValue}},{key:"header",get:function(){return this.input.header}},{key:"initEvents",value:function(){var t=this;this.input.on("key",function(r){switch(r){case"Enter":{var n=t.input.value;if(n&&t.history.push(n),t.emit("enter",n),t._parseCommand){var a=sr(n);t.emit("command",a[0],a)}}break;case"ArrowDown":{var o=t.history.down();typeof o=="string"&&t.input.replaceText(o)}break;case"ArrowUp":{var s=t.history.up(t.input.value);typeof s=="string"?t.input.replaceText(s):t.input.setCursorToHead()}break;case"Tab":t.emit("tab",t.input.beforeValue);break}}),this.input.on("input",function(){t.history.checkLatest(t.input.value),t.emit("input",t.value,t.input.beforeValue)}),this.container.on("click",function(){t.input.focus()}),this.input.on("cursor-change",function(r){t.emit("cursor-change",r)})}},{key:"render",value:function(){var t=this;this.container.style({overflow:function(){return t.store.showEditor?"hidden":"auto"}}).append(this.mainContainer=Mt.div.style("padding",this.style.padding).append(this.display.container,this.input.container,this.below.container).show(function(){return!t.store.showEditor}))}},{key:"setTheme",value:function(t){var r="#fff",n="#000",a=t==="light";this.theme=t,this.setColor({background:a?r:n,color:a?n:r,selectionBackground:a?n:r,selectionColor:a?r:n})}},{key:"setColor",value:function(t){Object.assign(this.style,t),this.container.style({"--background":this.style.background,"--color":this.style.color,"--selection":this.style.selectionColor,"--selection-bg":this.style.selectionBackground})}},{key:"_setFontSize",value:function(t){this.style.fontSize=t;var r=t+2;this.container.style({"--font-size":t,"--line-height":r})}},{key:"fontSize",get:function(){return this.style.fontSize}},{key:"setFontSize",value:function(t){this._setFontSize(t),this.editManager.setFontSize(t),this.input.setFontSize(t),this.resize()}},{key:"clearInputHistory",value:function(){this.history.clear()}},{key:"write",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.html,a=n===void 0?!0:n,o=r.clear,s=o===void 0?!0:o;this.display.pushContent(this.input.fullValue,a),t&&this.display.pushContent(t,a),s&&this.input.clearContent(),this.scrollToBottom()}},{key:"insertText",value:function(t){this.input.insertText(t)}},{key:"setCursorPos",value:function(t){this.input.setCursorPos(t)}},{key:"edit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.editManager.create(t,r)}},{key:"clearTerminal",value:function(){this.display.container.empty(),this.input.clearContent()}},{key:"newLine",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.write("",{html:t})}},{key:"setHeader",value:function(t){this.input.header=t}},{key:"scrollToBottom",value:function(){this.container.el.scrollTop=this.container.el.scrollHeight}},{key:"focus",value:function(){this.input.focus()}},{key:"writeBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.write(t,r),this.scrollToBottom()}},{key:"pushBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.push(t,r),this.scrollToBottom()}},{key:"clearBelow",value:function(){this.below.clear()}},{key:"resize",value:function(){this.editManager.resize(),this.input.resize()}},{key:"parseCommand",value:function(t){return sr(t)}}])}(Zr.Eveit);function cs(i,e=0){if(i.length===0)return"";if(i.length===1)return i[0];let t=i[0].substring(0,e),r=e;for(;;){const n=i[0][r];if(!n)return t;for(let a=1;a<i.length;a++)if(i[a][r]!==n)return t;t+=n,r++}}function te(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cn={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(r,n,a){function o(m,p){if(!n[m]){if(!r[m]){var h=typeof te=="function"&&te;if(!p&&h)return h(m,!0);if(s)return s(m,!0);var y=new Error("Cannot find module '"+m+"'");throw y.code="MODULE_NOT_FOUND",y}var d=n[m]={exports:{}};r[m][0].call(d.exports,function(x){var w=r[m][1][x];return o(w||x)},d,d.exports,t,r,n,a)}return n[m].exports}for(var s=typeof te=="function"&&te,f=0;f<a.length;f++)o(a[f]);return o}({1:[function(t,r,n){(function(a){var o=a.MutationObserver||a.WebKitMutationObserver,s;if(o){var f=0,m=new o(x),p=a.document.createTextNode("");m.observe(p,{characterData:!0}),s=function(){p.data=f=++f%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var h=new a.MessageChannel;h.port1.onmessage=x,s=function(){h.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?s=function(){var k=a.document.createElement("script");k.onreadystatechange=function(){x(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},a.document.documentElement.appendChild(k)}:s=function(){setTimeout(x,0)};var y,d=[];function x(){y=!0;for(var k,_,C=d.length;C;){for(_=d,d=[],k=-1;++k<C;)_[k]();C=d.length}y=!1}r.exports=w;function w(k){d.push(k)===1&&!y&&s()}}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,n){var a=t(1);function o(){}var s={},f=["REJECTED"],m=["FULFILLED"],p=["PENDING"];r.exports=h;function h(B){if(typeof B!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,B!==o&&w(this,B)}h.prototype.catch=function(B){return this.then(null,B)},h.prototype.then=function(B,Z){if(typeof B!="function"&&this.state===m||typeof Z!="function"&&this.state===f)return this;var W=new this.constructor(o);if(this.state!==p){var X=this.state===m?B:Z;d(W,X,this.outcome)}else this.queue.push(new y(W,B,Z));return W};function y(B,Z,W){this.promise=B,typeof Z=="function"&&(this.onFulfilled=Z,this.callFulfilled=this.otherCallFulfilled),typeof W=="function"&&(this.onRejected=W,this.callRejected=this.otherCallRejected)}y.prototype.callFulfilled=function(B){s.resolve(this.promise,B)},y.prototype.otherCallFulfilled=function(B){d(this.promise,this.onFulfilled,B)},y.prototype.callRejected=function(B){s.reject(this.promise,B)},y.prototype.otherCallRejected=function(B){d(this.promise,this.onRejected,B)};function d(B,Z,W){a(function(){var X;try{X=Z(W)}catch(H){return s.reject(B,H)}X===B?s.reject(B,new TypeError("Cannot resolve promise with itself")):s.resolve(B,X)})}s.resolve=function(B,Z){var W=k(x,Z);if(W.status==="error")return s.reject(B,W.value);var X=W.value;if(X)w(B,X);else{B.state=m,B.outcome=Z;for(var H=-1,rt=B.queue.length;++H<rt;)B.queue[H].callFulfilled(Z)}return B},s.reject=function(B,Z){B.state=f,B.outcome=Z;for(var W=-1,X=B.queue.length;++W<X;)B.queue[W].callRejected(Z);return B};function x(B){var Z=B&&B.then;if(B&&(typeof B=="object"||typeof B=="function")&&typeof Z=="function")return function(){Z.apply(B,arguments)}}function w(B,Z){var W=!1;function X(T){W||(W=!0,s.reject(B,T))}function H(T){W||(W=!0,s.resolve(B,T))}function rt(){Z(H,X)}var dt=k(rt);dt.status==="error"&&X(dt.value)}function k(B,Z){var W={};try{W.value=B(Z),W.status="success"}catch(X){W.status="error",W.value=X}return W}h.resolve=_;function _(B){return B instanceof this?B:s.resolve(new this(o),B)}h.reject=C;function C(B){var Z=new this(o);return s.reject(Z,B)}h.all=F;function F(B){var Z=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var W=B.length,X=!1;if(!W)return this.resolve([]);for(var H=new Array(W),rt=0,dt=-1,T=new this(o);++dt<W;)V(B[dt],dt);return T;function V(g,q){Z.resolve(g).then(vt,function(et){X||(X=!0,s.reject(T,et))});function vt(et){H[q]=et,++rt===W&&!X&&(X=!0,s.resolve(T,H))}}}h.race=N;function N(B){var Z=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var W=B.length,X=!1;if(!W)return this.resolve([]);for(var H=-1,rt=new this(o);++H<W;)dt(B[H]);return rt;function dt(T){Z.resolve(T).then(function(V){X||(X=!0,s.resolve(rt,V))},function(V){X||(X=!0,s.reject(rt,V))})}}},{1:1}],3:[function(t,r,n){(function(a){typeof a.Promise!="function"&&(a.Promise=t(2))}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,n){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};function o(b,P){if(!(b instanceof P))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(b){return}}var f=s();function m(){try{if(!f||!f.open)return!1;var b=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),P=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!b||P)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(S){return!1}}function p(b,P){b=b||[],P=P||{};try{return new Blob(b,P)}catch(O){if(O.name!=="TypeError")throw O;for(var S=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,R=new S,L=0;L<b.length;L+=1)R.append(b[L]);return R.getBlob(P.type)}}typeof Promise>"u"&&t(3);var h=Promise;function y(b,P){P&&b.then(function(S){P(null,S)},function(S){P(S)})}function d(b,P,S){typeof P=="function"&&b.then(P),typeof S=="function"&&b.catch(S)}function x(b){return typeof b!="string"&&(console.warn(b+" used as a key, but it is not a string."),b=String(b)),b}function w(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",_=void 0,C={},F=Object.prototype.toString,N="readonly",B="readwrite";function Z(b){for(var P=b.length,S=new ArrayBuffer(P),R=new Uint8Array(S),L=0;L<P;L++)R[L]=b.charCodeAt(L);return S}function W(b){return new h(function(P){var S=b.transaction(k,B),R=p([""]);S.objectStore(k).put(R,"key"),S.onabort=function(L){L.preventDefault(),L.stopPropagation(),P(!1)},S.oncomplete=function(){var L=navigator.userAgent.match(/Chrome\/(\d+)/),O=navigator.userAgent.match(/Edge\//);P(O||!L||parseInt(L[1],10)>=43)}}).catch(function(){return!1})}function X(b){return typeof _=="boolean"?h.resolve(_):W(b).then(function(P){return _=P,_})}function H(b){var P=C[b.name],S={};S.promise=new h(function(R,L){S.resolve=R,S.reject=L}),P.deferredOperations.push(S),P.dbReady?P.dbReady=P.dbReady.then(function(){return S.promise}):P.dbReady=S.promise}function rt(b){var P=C[b.name],S=P.deferredOperations.pop();if(S)return S.resolve(),S.promise}function dt(b,P){var S=C[b.name],R=S.deferredOperations.pop();if(R)return R.reject(P),R.promise}function T(b,P){return new h(function(S,R){if(C[b.name]=C[b.name]||j(),b.db)if(P)H(b),b.db.close();else return S(b.db);var L=[b.name];P&&L.push(b.version);var O=f.open.apply(f,L);P&&(O.onupgradeneeded=function(J){var nt=O.result;try{nt.createObjectStore(b.storeName),J.oldVersion<=1&&nt.createObjectStore(k)}catch(ot){if(ot.name==="ConstraintError")console.warn('The database "'+b.name+'" has been upgraded from version '+J.oldVersion+" to version "+J.newVersion+', but the storage "'+b.storeName+'" already exists.');else throw ot}}),O.onerror=function(J){J.preventDefault(),R(O.error)},O.onsuccess=function(){var J=O.result;J.onversionchange=function(nt){nt.target.close()},S(J),rt(b)}})}function V(b){return T(b,!1)}function g(b){return T(b,!0)}function q(b,P){if(!b.db)return!0;var S=!b.db.objectStoreNames.contains(b.storeName),R=b.version<b.db.version,L=b.version>b.db.version;if(R&&(b.version!==P&&console.warn('The database "'+b.name+"\" can't be downgraded from version "+b.db.version+" to version "+b.version+"."),b.version=b.db.version),L||S){if(S){var O=b.db.version+1;O>b.version&&(b.version=O)}return!0}return!1}function vt(b){return new h(function(P,S){var R=new FileReader;R.onerror=S,R.onloadend=function(L){var O=btoa(L.target.result||"");P({__local_forage_encoded_blob:!0,data:O,type:b.type})},R.readAsBinaryString(b)})}function et(b){var P=Z(atob(b.data));return p([P],{type:b.type})}function _t(b){return b&&b.__local_forage_encoded_blob}function at(b){var P=this,S=P._initReady().then(function(){var R=C[P._dbInfo.name];if(R&&R.dbReady)return R.dbReady});return d(S,b,b),S}function gt(b){H(b);for(var P=C[b.name],S=P.forages,R=0;R<S.length;R++){var L=S[R];L._dbInfo.db&&(L._dbInfo.db.close(),L._dbInfo.db=null)}return b.db=null,V(b).then(function(O){return b.db=O,q(b)?g(b):O}).then(function(O){b.db=P.db=O;for(var J=0;J<S.length;J++)S[J]._dbInfo.db=O}).catch(function(O){throw dt(b,O),O})}function M(b,P,S,R){R===void 0&&(R=1);try{var L=b.db.transaction(b.storeName,P);S(null,L)}catch(O){if(R>0&&(!b.db||O.name==="InvalidStateError"||O.name==="NotFoundError"))return h.resolve().then(function(){if(!b.db||O.name==="NotFoundError"&&!b.db.objectStoreNames.contains(b.storeName)&&b.version<=b.db.version)return b.db&&(b.version=b.db.version+1),g(b)}).then(function(){return gt(b).then(function(){M(b,P,S,R-1)})}).catch(S);S(O)}}function j(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function yt(b){var P=this,S={db:null};if(b)for(var R in b)S[R]=b[R];var L=C[S.name];L||(L=j(),C[S.name]=L),L.forages.push(P),P._initReady||(P._initReady=P.ready,P.ready=at);var O=[];function J(){return h.resolve()}for(var nt=0;nt<L.forages.length;nt++){var ot=L.forages[nt];ot!==P&&O.push(ot._initReady().catch(J))}var ut=L.forages.slice(0);return h.all(O).then(function(){return S.db=L.db,V(S)}).then(function(ct){return S.db=ct,q(S,P._defaultConfig.version)?g(S):ct}).then(function(ct){S.db=L.db=ct,P._dbInfo=S;for(var pt=0;pt<ut.length;pt++){var kt=ut[pt];kt!==P&&(kt._dbInfo.db=S.db,kt._dbInfo.version=S.version)}})}function lt(b,P){var S=this;b=x(b);var R=new h(function(L,O){S.ready().then(function(){M(S._dbInfo,N,function(J,nt){if(J)return O(J);try{var ot=nt.objectStore(S._dbInfo.storeName),ut=ot.get(b);ut.onsuccess=function(){var ct=ut.result;ct===void 0&&(ct=null),_t(ct)&&(ct=et(ct)),L(ct)},ut.onerror=function(){O(ut.error)}}catch(ct){O(ct)}})}).catch(O)});return y(R,P),R}function ft(b,P){var S=this,R=new h(function(L,O){S.ready().then(function(){M(S._dbInfo,N,function(J,nt){if(J)return O(J);try{var ot=nt.objectStore(S._dbInfo.storeName),ut=ot.openCursor(),ct=1;ut.onsuccess=function(){var pt=ut.result;if(pt){var kt=pt.value;_t(kt)&&(kt=et(kt));var Ct=b(kt,pt.key,ct++);Ct!==void 0?L(Ct):pt.continue()}else L()},ut.onerror=function(){O(ut.error)}}catch(pt){O(pt)}})}).catch(O)});return y(R,P),R}function Pt(b,P,S){var R=this;b=x(b);var L=new h(function(O,J){var nt;R.ready().then(function(){return nt=R._dbInfo,F.call(P)==="[object Blob]"?X(nt.db).then(function(ot){return ot?P:vt(P)}):P}).then(function(ot){M(R._dbInfo,B,function(ut,ct){if(ut)return J(ut);try{var pt=ct.objectStore(R._dbInfo.storeName);ot===null&&(ot=void 0);var kt=pt.put(ot,b);ct.oncomplete=function(){ot===void 0&&(ot=null),O(ot)},ct.onabort=ct.onerror=function(){var Ct=kt.error?kt.error:kt.transaction.error;J(Ct)}}catch(Ct){J(Ct)}})}).catch(J)});return y(L,S),L}function Ot(b,P){var S=this;b=x(b);var R=new h(function(L,O){S.ready().then(function(){M(S._dbInfo,B,function(J,nt){if(J)return O(J);try{var ot=nt.objectStore(S._dbInfo.storeName),ut=ot.delete(b);nt.oncomplete=function(){L()},nt.onerror=function(){O(ut.error)},nt.onabort=function(){var ct=ut.error?ut.error:ut.transaction.error;O(ct)}}catch(ct){O(ct)}})}).catch(O)});return y(R,P),R}function bt(b){var P=this,S=new h(function(R,L){P.ready().then(function(){M(P._dbInfo,B,function(O,J){if(O)return L(O);try{var nt=J.objectStore(P._dbInfo.storeName),ot=nt.clear();J.oncomplete=function(){R()},J.onabort=J.onerror=function(){var ut=ot.error?ot.error:ot.transaction.error;L(ut)}}catch(ut){L(ut)}})}).catch(L)});return y(S,b),S}function xt(b){var P=this,S=new h(function(R,L){P.ready().then(function(){M(P._dbInfo,N,function(O,J){if(O)return L(O);try{var nt=J.objectStore(P._dbInfo.storeName),ot=nt.count();ot.onsuccess=function(){R(ot.result)},ot.onerror=function(){L(ot.error)}}catch(ut){L(ut)}})}).catch(L)});return y(S,b),S}function zt(b,P){var S=this,R=new h(function(L,O){if(b<0){L(null);return}S.ready().then(function(){M(S._dbInfo,N,function(J,nt){if(J)return O(J);try{var ot=nt.objectStore(S._dbInfo.storeName),ut=!1,ct=ot.openKeyCursor();ct.onsuccess=function(){var pt=ct.result;if(!pt){L(null);return}b===0||ut?L(pt.key):(ut=!0,pt.advance(b))},ct.onerror=function(){O(ct.error)}}catch(pt){O(pt)}})}).catch(O)});return y(R,P),R}function Ft(b){var P=this,S=new h(function(R,L){P.ready().then(function(){M(P._dbInfo,N,function(O,J){if(O)return L(O);try{var nt=J.objectStore(P._dbInfo.storeName),ot=nt.openKeyCursor(),ut=[];ot.onsuccess=function(){var ct=ot.result;if(!ct){R(ut);return}ut.push(ct.key),ct.continue()},ot.onerror=function(){L(ot.error)}}catch(ct){L(ct)}})}).catch(L)});return y(S,b),S}function Nt(b,P){P=w.apply(this,arguments);var S=this.config();b=typeof b!="function"&&b||{},b.name||(b.name=b.name||S.name,b.storeName=b.storeName||S.storeName);var R=this,L;if(!b.name)L=h.reject("Invalid arguments");else{var O=b.name===S.name&&R._dbInfo.db,J=O?h.resolve(R._dbInfo.db):V(b).then(function(nt){var ot=C[b.name],ut=ot.forages;ot.db=nt;for(var ct=0;ct<ut.length;ct++)ut[ct]._dbInfo.db=nt;return nt});b.storeName?L=J.then(function(nt){if(nt.objectStoreNames.contains(b.storeName)){var ot=nt.version+1;H(b);var ut=C[b.name],ct=ut.forages;nt.close();for(var pt=0;pt<ct.length;pt++){var kt=ct[pt];kt._dbInfo.db=null,kt._dbInfo.version=ot}var Ct=new h(function(It,Lt){var Rt=f.open(b.name,ot);Rt.onerror=function(Wt){var _e=Rt.result;_e.close(),Lt(Wt)},Rt.onupgradeneeded=function(){var Wt=Rt.result;Wt.deleteObjectStore(b.storeName)},Rt.onsuccess=function(){var Wt=Rt.result;Wt.close(),It(Wt)}});return Ct.then(function(It){ut.db=It;for(var Lt=0;Lt<ct.length;Lt++){var Rt=ct[Lt];Rt._dbInfo.db=It,rt(Rt._dbInfo)}}).catch(function(It){throw(dt(b,It)||h.resolve()).catch(function(){}),It})}}):L=J.then(function(nt){H(b);var ot=C[b.name],ut=ot.forages;nt.close();for(var ct=0;ct<ut.length;ct++){var pt=ut[ct];pt._dbInfo.db=null}var kt=new h(function(Ct,It){var Lt=f.deleteDatabase(b.name);Lt.onerror=function(){var Rt=Lt.result;Rt&&Rt.close(),It(Lt.error)},Lt.onblocked=function(){console.warn('dropInstance blocked for database "'+b.name+'" until all open connections are closed')},Lt.onsuccess=function(){var Rt=Lt.result;Rt&&Rt.close(),Ct(Rt)}});return kt.then(function(Ct){ot.db=Ct;for(var It=0;It<ut.length;It++){var Lt=ut[It];rt(Lt._dbInfo)}}).catch(function(Ct){throw(dt(b,Ct)||h.resolve()).catch(function(){}),Ct})})}return y(L,P),L}var Dt={_driver:"asyncStorage",_initStorage:yt,_support:m(),iterate:ft,getItem:lt,setItem:Pt,removeItem:Ot,clear:bt,length:xt,key:zt,keys:Ft,dropInstance:Nt};function l(){return typeof openDatabase=="function"}var G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",I=/^~~local_forage_type~([^~]+)~/,A="__lfsc__:",D=A.length,Q="arbf",tt="blob",U="si08",st="ui08",ht="uic8",it="si16",mt="si32",v="ur16",u="ui32",c="fl32",E="fl64",z=D+Q.length,$=Object.prototype.toString;function Y(b){var P=b.length*.75,S=b.length,R,L=0,O,J,nt,ot;b[b.length-1]==="="&&(P--,b[b.length-2]==="="&&P--);var ut=new ArrayBuffer(P),ct=new Uint8Array(ut);for(R=0;R<S;R+=4)O=G.indexOf(b[R]),J=G.indexOf(b[R+1]),nt=G.indexOf(b[R+2]),ot=G.indexOf(b[R+3]),ct[L++]=O<<2|J>>4,ct[L++]=(J&15)<<4|nt>>2,ct[L++]=(nt&3)<<6|ot&63;return ut}function wt(b){var P=new Uint8Array(b),S="",R;for(R=0;R<P.length;R+=3)S+=G[P[R]>>2],S+=G[(P[R]&3)<<4|P[R+1]>>4],S+=G[(P[R+1]&15)<<2|P[R+2]>>6],S+=G[P[R+2]&63];return P.length%3===2?S=S.substring(0,S.length-1)+"=":P.length%3===1&&(S=S.substring(0,S.length-2)+"=="),S}function Bt(b,P){var S="";if(b&&(S=$.call(b)),b&&(S==="[object ArrayBuffer]"||b.buffer&&$.call(b.buffer)==="[object ArrayBuffer]")){var R,L=A;b instanceof ArrayBuffer?(R=b,L+=Q):(R=b.buffer,S==="[object Int8Array]"?L+=U:S==="[object Uint8Array]"?L+=st:S==="[object Uint8ClampedArray]"?L+=ht:S==="[object Int16Array]"?L+=it:S==="[object Uint16Array]"?L+=v:S==="[object Int32Array]"?L+=mt:S==="[object Uint32Array]"?L+=u:S==="[object Float32Array]"?L+=c:S==="[object Float64Array]"?L+=E:P(new Error("Failed to get type for BinaryArray"))),P(L+wt(R))}else if(S==="[object Blob]"){var O=new FileReader;O.onload=function(){var J=K+b.type+"~"+wt(this.result);P(A+tt+J)},O.readAsArrayBuffer(b)}else try{P(JSON.stringify(b))}catch(J){console.error("Couldn't convert value into a JSON string: ",b),P(null,J)}}function Et(b){if(b.substring(0,D)!==A)return JSON.parse(b);var P=b.substring(z),S=b.substring(D,z),R;if(S===tt&&I.test(P)){var L=P.match(I);R=L[1],P=P.substring(L[0].length)}var O=Y(P);switch(S){case Q:return O;case tt:return p([O],{type:R});case U:return new Int8Array(O);case st:return new Uint8Array(O);case ht:return new Uint8ClampedArray(O);case it:return new Int16Array(O);case v:return new Uint16Array(O);case mt:return new Int32Array(O);case u:return new Uint32Array(O);case c:return new Float32Array(O);case E:return new Float64Array(O);default:throw new Error("Unkown type: "+S)}}var At={serialize:Bt,deserialize:Et,stringToBuffer:Y,bufferToString:wt};function St(b,P,S,R){b.executeSql("CREATE TABLE IF NOT EXISTS "+P.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],S,R)}function $e(b){var P=this,S={db:null};if(b)for(var R in b)S[R]=typeof b[R]!="string"?b[R].toString():b[R];var L=new h(function(O,J){try{S.db=openDatabase(S.name,String(S.version),S.description,S.size)}catch(nt){return J(nt)}S.db.transaction(function(nt){St(nt,S,function(){P._dbInfo=S,O()},function(ot,ut){J(ut)})},J)});return S.serializer=At,L}function Zt(b,P,S,R,L,O){b.executeSql(S,R,L,function(J,nt){nt.code===nt.SYNTAX_ERR?J.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[P.storeName],function(ot,ut){ut.rows.length?O(ot,nt):St(ot,P,function(){ot.executeSql(S,R,L,O)},O)},O):O(J,nt)},O)}function Se(b,P){var S=this;b=x(b);var R=new h(function(L,O){S.ready().then(function(){var J=S._dbInfo;J.db.transaction(function(nt){Zt(nt,J,"SELECT * FROM "+J.storeName+" WHERE key = ? LIMIT 1",[b],function(ot,ut){var ct=ut.rows.length?ut.rows.item(0).value:null;ct&&(ct=J.serializer.deserialize(ct)),L(ct)},function(ot,ut){O(ut)})})}).catch(O)});return y(R,P),R}function ne(b,P){var S=this,R=new h(function(L,O){S.ready().then(function(){var J=S._dbInfo;J.db.transaction(function(nt){Zt(nt,J,"SELECT * FROM "+J.storeName,[],function(ot,ut){for(var ct=ut.rows,pt=ct.length,kt=0;kt<pt;kt++){var Ct=ct.item(kt),It=Ct.value;if(It&&(It=J.serializer.deserialize(It)),It=b(It,Ct.key,kt+1),It!==void 0){L(It);return}}L()},function(ot,ut){O(ut)})})}).catch(O)});return y(R,P),R}function ie(b,P,S,R){var L=this;b=x(b);var O=new h(function(J,nt){L.ready().then(function(){P===void 0&&(P=null);var ot=P,ut=L._dbInfo;ut.serializer.serialize(P,function(ct,pt){pt?nt(pt):ut.db.transaction(function(kt){Zt(kt,ut,"INSERT OR REPLACE INTO "+ut.storeName+" (key, value) VALUES (?, ?)",[b,ct],function(){J(ot)},function(Ct,It){nt(It)})},function(kt){if(kt.code===kt.QUOTA_ERR){if(R>0){J(ie.apply(L,[b,ot,S,R-1]));return}nt(kt)}})})}).catch(nt)});return y(O,S),O}function Tn(b,P,S){return ie.apply(this,[b,P,S,1])}function Pn(b,P){var S=this;b=x(b);var R=new h(function(L,O){S.ready().then(function(){var J=S._dbInfo;J.db.transaction(function(nt){Zt(nt,J,"DELETE FROM "+J.storeName+" WHERE key = ?",[b],function(){L()},function(ot,ut){O(ut)})})}).catch(O)});return y(R,P),R}function Fn(b){var P=this,S=new h(function(R,L){P.ready().then(function(){var O=P._dbInfo;O.db.transaction(function(J){Zt(J,O,"DELETE FROM "+O.storeName,[],function(){R()},function(nt,ot){L(ot)})})}).catch(L)});return y(S,b),S}function zn(b){var P=this,S=new h(function(R,L){P.ready().then(function(){var O=P._dbInfo;O.db.transaction(function(J){Zt(J,O,"SELECT COUNT(key) as c FROM "+O.storeName,[],function(nt,ot){var ut=ot.rows.item(0).c;R(ut)},function(nt,ot){L(ot)})})}).catch(L)});return y(S,b),S}function On(b,P){var S=this,R=new h(function(L,O){S.ready().then(function(){var J=S._dbInfo;J.db.transaction(function(nt){Zt(nt,J,"SELECT key FROM "+J.storeName+" WHERE id = ? LIMIT 1",[b+1],function(ot,ut){var ct=ut.rows.length?ut.rows.item(0).key:null;L(ct)},function(ot,ut){O(ut)})})}).catch(O)});return y(R,P),R}function Rn(b){var P=this,S=new h(function(R,L){P.ready().then(function(){var O=P._dbInfo;O.db.transaction(function(J){Zt(J,O,"SELECT key FROM "+O.storeName,[],function(nt,ot){for(var ut=[],ct=0;ct<ot.rows.length;ct++)ut.push(ot.rows.item(ct).key);R(ut)},function(nt,ot){L(ot)})})}).catch(L)});return y(S,b),S}function Dn(b){return new h(function(P,S){b.transaction(function(R){R.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(L,O){for(var J=[],nt=0;nt<O.rows.length;nt++)J.push(O.rows.item(nt).name);P({db:b,storeNames:J})},function(L,O){S(O)})},function(R){S(R)})})}function Ln(b,P){P=w.apply(this,arguments);var S=this.config();b=typeof b!="function"&&b||{},b.name||(b.name=b.name||S.name,b.storeName=b.storeName||S.storeName);var R=this,L;return b.name?L=new h(function(O){var J;b.name===S.name?J=R._dbInfo.db:J=openDatabase(b.name,"","",0),b.storeName?O({db:J,storeNames:[b.storeName]}):O(Dn(J))}).then(function(O){return new h(function(J,nt){O.db.transaction(function(ot){function ut(Ct){return new h(function(It,Lt){ot.executeSql("DROP TABLE IF EXISTS "+Ct,[],function(){It()},function(Rt,Wt){Lt(Wt)})})}for(var ct=[],pt=0,kt=O.storeNames.length;pt<kt;pt++)ct.push(ut(O.storeNames[pt]));h.all(ct).then(function(){J()}).catch(function(Ct){nt(Ct)})},function(ot){nt(ot)})})}):L=h.reject("Invalid arguments"),y(L,P),L}var Nn={_driver:"webSQLStorage",_initStorage:$e,_support:l(),iterate:ne,getItem:Se,setItem:Tn,removeItem:Pn,clear:Fn,length:zn,key:On,keys:Rn,dropInstance:Ln};function Un(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(b){return!1}}function kr(b,P){var S=b.name+"/";return b.storeName!==P.storeName&&(S+=b.storeName+"/"),S}function Mn(){var b="_localforage_support_test";try{return localStorage.setItem(b,!0),localStorage.removeItem(b),!1}catch(P){return!0}}function jn(){return!Mn()||localStorage.length>0}function Wn(b){var P=this,S={};if(b)for(var R in b)S[R]=b[R];return S.keyPrefix=kr(b,P._defaultConfig),jn()?(P._dbInfo=S,S.serializer=At,h.resolve()):h.reject()}function $n(b){var P=this,S=P.ready().then(function(){for(var R=P._dbInfo.keyPrefix,L=localStorage.length-1;L>=0;L--){var O=localStorage.key(L);O.indexOf(R)===0&&localStorage.removeItem(O)}});return y(S,b),S}function Hn(b,P){var S=this;b=x(b);var R=S.ready().then(function(){var L=S._dbInfo,O=localStorage.getItem(L.keyPrefix+b);return O&&(O=L.serializer.deserialize(O)),O});return y(R,P),R}function Zn(b,P){var S=this,R=S.ready().then(function(){for(var L=S._dbInfo,O=L.keyPrefix,J=O.length,nt=localStorage.length,ot=1,ut=0;ut<nt;ut++){var ct=localStorage.key(ut);if(ct.indexOf(O)===0){var pt=localStorage.getItem(ct);if(pt&&(pt=L.serializer.deserialize(pt)),pt=b(pt,ct.substring(J),ot++),pt!==void 0)return pt}}});return y(R,P),R}function Yn(b,P){var S=this,R=S.ready().then(function(){var L=S._dbInfo,O;try{O=localStorage.key(b)}catch(J){O=null}return O&&(O=O.substring(L.keyPrefix.length)),O});return y(R,P),R}function Kn(b){var P=this,S=P.ready().then(function(){for(var R=P._dbInfo,L=localStorage.length,O=[],J=0;J<L;J++){var nt=localStorage.key(J);nt.indexOf(R.keyPrefix)===0&&O.push(nt.substring(R.keyPrefix.length))}return O});return y(S,b),S}function Vn(b){var P=this,S=P.keys().then(function(R){return R.length});return y(S,b),S}function Gn(b,P){var S=this;b=x(b);var R=S.ready().then(function(){var L=S._dbInfo;localStorage.removeItem(L.keyPrefix+b)});return y(R,P),R}function Xn(b,P,S){var R=this;b=x(b);var L=R.ready().then(function(){P===void 0&&(P=null);var O=P;return new h(function(J,nt){var ot=R._dbInfo;ot.serializer.serialize(P,function(ut,ct){if(ct)nt(ct);else try{localStorage.setItem(ot.keyPrefix+b,ut),J(O)}catch(pt){(pt.name==="QuotaExceededError"||pt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&nt(pt),nt(pt)}})})});return y(L,S),L}function qn(b,P){if(P=w.apply(this,arguments),b=typeof b!="function"&&b||{},!b.name){var S=this.config();b.name=b.name||S.name,b.storeName=b.storeName||S.storeName}var R=this,L;return b.name?L=new h(function(O){b.storeName?O(kr(b,R._defaultConfig)):O(b.name+"/")}).then(function(O){for(var J=localStorage.length-1;J>=0;J--){var nt=localStorage.key(J);nt.indexOf(O)===0&&localStorage.removeItem(nt)}}):L=h.reject("Invalid arguments"),y(L,P),L}var Jn={_driver:"localStorageWrapper",_initStorage:Wn,_support:Un(),iterate:Zn,getItem:Hn,setItem:Xn,removeItem:Gn,clear:$n,length:Vn,key:Yn,keys:Kn,dropInstance:qn},Qn=function(P,S){return P===S||typeof P=="number"&&typeof S=="number"&&isNaN(P)&&isNaN(S)},ti=function(P,S){for(var R=P.length,L=0;L<R;){if(Qn(P[L],S))return!0;L++}return!1},xr=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"},we={},Er={},le={INDEXEDDB:Dt,WEBSQL:Nn,LOCALSTORAGE:Jn},ei=[le.INDEXEDDB._driver,le.WEBSQL._driver,le.LOCALSTORAGE._driver],Ce=["dropInstance"],He=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ce),ri={description:"",driver:ei.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ni(b,P){b[P]=function(){var S=arguments;return b.ready().then(function(){return b[P].apply(b,S)})}}function Ze(){for(var b=1;b<arguments.length;b++){var P=arguments[b];if(P)for(var S in P)P.hasOwnProperty(S)&&(xr(P[S])?arguments[0][S]=P[S].slice():arguments[0][S]=P[S])}return arguments[0]}var ii=function(){function b(P){o(this,b);for(var S in le)if(le.hasOwnProperty(S)){var R=le[S],L=R._driver;this[S]=L,we[L]||this.defineDriver(R)}this._defaultConfig=Ze({},ri),this._config=Ze({},this._defaultConfig,P),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return b.prototype.config=function(S){if((typeof S>"u"?"undefined":a(S))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var R in S){if(R==="storeName"&&(S[R]=S[R].replace(/\W/g,"_")),R==="version"&&typeof S[R]!="number")return new Error("Database version must be a number.");this._config[R]=S[R]}return"driver"in S&&S.driver?this.setDriver(this._config.driver):!0}else return typeof S=="string"?this._config[S]:this._config},b.prototype.defineDriver=function(S,R,L){var O=new h(function(J,nt){try{var ot=S._driver,ut=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!S._driver){nt(ut);return}for(var ct=He.concat("_initStorage"),pt=0,kt=ct.length;pt<kt;pt++){var Ct=ct[pt],It=!ti(Ce,Ct);if((It||S[Ct])&&typeof S[Ct]!="function"){nt(ut);return}}var Lt=function(){for(var _e=function(oi){return function(){var ui=new Error("Method "+oi+" is not implemented by the current driver"),Sr=h.reject(ui);return y(Sr,arguments[arguments.length-1]),Sr}},Ye=0,ai=Ce.length;Ye<ai;Ye++){var Ke=Ce[Ye];S[Ke]||(S[Ke]=_e(Ke))}};Lt();var Rt=function(_e){we[ot]&&console.info("Redefining LocalForage driver: "+ot),we[ot]=S,Er[ot]=_e,J()};"_support"in S?S._support&&typeof S._support=="function"?S._support().then(Rt,nt):Rt(!!S._support):Rt(!0)}catch(Wt){nt(Wt)}});return d(O,R,L),O},b.prototype.driver=function(){return this._driver||null},b.prototype.getDriver=function(S,R,L){var O=we[S]?h.resolve(we[S]):h.reject(new Error("Driver not found."));return d(O,R,L),O},b.prototype.getSerializer=function(S){var R=h.resolve(At);return d(R,S),R},b.prototype.ready=function(S){var R=this,L=R._driverSet.then(function(){return R._ready===null&&(R._ready=R._initDriver()),R._ready});return d(L,S,S),L},b.prototype.setDriver=function(S,R,L){var O=this;xr(S)||(S=[S]);var J=this._getSupportedDrivers(S);function nt(){O._config.driver=O.driver()}function ot(pt){return O._extend(pt),nt(),O._ready=O._initStorage(O._config),O._ready}function ut(pt){return function(){var kt=0;function Ct(){for(;kt<pt.length;){var It=pt[kt];return kt++,O._dbInfo=null,O._ready=null,O.getDriver(It).then(ot).catch(Ct)}nt();var Lt=new Error("No available storage method found.");return O._driverSet=h.reject(Lt),O._driverSet}return Ct()}}var ct=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=ct.then(function(){var pt=J[0];return O._dbInfo=null,O._ready=null,O.getDriver(pt).then(function(kt){O._driver=kt._driver,nt(),O._wrapLibraryMethodsWithReady(),O._initDriver=ut(J)})}).catch(function(){nt();var pt=new Error("No available storage method found.");return O._driverSet=h.reject(pt),O._driverSet}),d(this._driverSet,R,L),this._driverSet},b.prototype.supports=function(S){return!!Er[S]},b.prototype._extend=function(S){Ze(this,S)},b.prototype._getSupportedDrivers=function(S){for(var R=[],L=0,O=S.length;L<O;L++){var J=S[L];this.supports(J)&&R.push(J)}return R},b.prototype._wrapLibraryMethodsWithReady=function(){for(var S=0,R=He.length;S<R;S++)ni(this,He[S])},b.prototype.createInstance=function(S){return new b(S)},b}(),si=new ii;r.exports=si},{3:3}]},{},[4])(4)})})(cn);var fs=cn.exports;const Kt=dr(fs);function fn(){let i,e;return{ready:new Promise((r,n)=>{i=r,e=n}),resolve:i,reject:e}}function Me(...i){let e=0;for(const n of i)e+=n.length;const t=new Uint8Array(e);let r=0;for(const n of i)t.set(n,r),r+=n.length;return t}function ve(i,e){if(!i||!e)return!1;const t=i.byteLength;if(t!==e.byteLength)return!1;for(let r=0;r<t;r++)if(i[r]!==e[r])return!1;return!0}function ls(i){return new Uint8Array(i)}async function ae(i){try{return[await i,null]}catch(e){return[{},e]}}let Xe;function Pe(i){return Xe||(Xe=new TextEncoder),Xe.encode(i)}let qe;function gr(i){return qe||(qe=new TextDecoder),qe.decode(i)}async function ln(i){for(let e=0;e<i.length;e++)await i[e]()}function hs(){const i=[];return{add:e=>{i.push(e)},run:()=>Promise.all(i)}}function Gt(i){const e=i.lastIndexOf("/");return e===-1?{path:i,parent:"",name:i}:{path:i,parent:i.substring(0,e)||"/",name:i.substring(e+1)}}function ds(){const i=[];return{add(e){i.push(e)},run(){return Promise.all(i)}}}async function ps(i){return i instanceof Promise?await i:i}function Je(i){return typeof i=="function"?i():i}function ms(){return navigator.userAgent.includes("Macintosh")}async function ys(i){try{const e=await fetch(i);return e.ok?await e.text():""}catch(e){return""}}function gs(i,e={}){const t=Object.keys(e),r=Object.values(e);return new Function(...t,i)(...r)}class vs{constructor(){this.name="",this.helpInfo="",this.helpDetails=""}activate(e,t){this.disk=e,this.provider=t}run(e,t){return""}}function ws(i,e=""){return i.split("/").length===2&&(i+="/".concat(e)),"https://cdn.jsdelivr.net/gh/".concat(i)}function Rr(i,e=!1){const t=e?"unpkg.com":"cdn.jsdelivr.net/npm";return"https://".concat(t,"/").concat(i)}function Yt(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function Dr(i,e){for(var t="",r=0,n=-1,a=0,o,s=0;s<=i.length;++s){if(s<i.length)o=i.charCodeAt(s);else{if(o===47)break;o=47}if(o===47){if(!(n===s-1||a===1))if(n!==s-1&&a===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",r=0):(t=t.slice(0,f),r=t.length-1-t.lastIndexOf("/")),n=s,a=0;continue}}else if(t.length===2||t.length===1){t="",r=0,n=s,a=0;continue}}e&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+="/"+i.slice(n+1,s):t=i.slice(n+1,s),r=s-n-1;n=s,a=0}else o===46&&a!==-1?++a:a=-1}return t}function _s(i,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+i+r:r}var me={resolve:function(){for(var e="",t=!1,r,n=arguments.length-1;n>=-1&&!t;n--){var a;n>=0?a=arguments[n]:(r===void 0&&(r=process.cwd()),a=r),Yt(a),a.length!==0&&(e=a+"/"+e,t=a.charCodeAt(0)===47)}return e=Dr(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Yt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Dr(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Yt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];Yt(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":me.normalize(e)},relative:function(e,t){if(Yt(e),Yt(t),e===t||(e=me.resolve(e),t=me.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var n=e.length,a=n-r,o=1;o<t.length&&t.charCodeAt(o)===47;++o);for(var s=t.length,f=s-o,m=a<f?a:f,p=-1,h=0;h<=m;++h){if(h===m){if(f>m){if(t.charCodeAt(o+h)===47)return t.slice(o+h+1);if(h===0)return t.slice(o+h)}else a>m&&(e.charCodeAt(r+h)===47?p=h:h===0&&(p=0));break}var y=e.charCodeAt(r+h),d=t.charCodeAt(o+h);if(y!==d)break;y===47&&(p=h)}var x="";for(h=r+p+1;h<=n;++h)(h===n||e.charCodeAt(h)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+t.slice(o+p):(o+=p,t.charCodeAt(o)===47&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Yt(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,n=-1,a=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),t===47){if(!a){n=o;break}}else a=!1;return n===-1?r?"/":".":r&&n===1?"//":e.slice(0,n)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Yt(e);var r=0,n=-1,a=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,f=-1;for(o=e.length-1;o>=0;--o){var m=e.charCodeAt(o);if(m===47){if(!a){r=o+1;break}}else f===-1&&(a=!1,f=o+1),s>=0&&(m===t.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=f))}return r===n?n=f:n===-1&&(n=e.length),e.slice(r,n)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!a){r=o+1;break}}else n===-1&&(a=!1,n=o+1);return n===-1?"":e.slice(r,n)}},extname:function(e){Yt(e);for(var t=-1,r=0,n=-1,a=!0,o=0,s=e.length-1;s>=0;--s){var f=e.charCodeAt(s);if(f===47){if(!a){r=s+1;break}continue}n===-1&&(a=!1,n=s+1),f===46?t===-1?t=s:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||n===-1||o===0||o===1&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return _s("/",e)},parse:function(e){Yt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),n=r===47,a;n?(t.root="/",a=1):a=0;for(var o=-1,s=0,f=-1,m=!0,p=e.length-1,h=0;p>=a;--p){if(r=e.charCodeAt(p),r===47){if(!m){s=p+1;break}continue}f===-1&&(m=!1,f=p+1),r===46?o===-1?o=p:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||f===-1||h===0||h===1&&o===f-1&&o===s+1?f!==-1&&(s===0&&n?t.base=t.name=e.slice(1,f):t.base=t.name=e.slice(s,f)):(s===0&&n?(t.name=e.slice(1,o),t.base=e.slice(1,f)):(t.name=e.slice(s,o),t.base=e.slice(s,f)),t.ext=e.slice(o,f)),s>0?t.dir=e.slice(0,s-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};me.posix=me;var hn=me;const bs=dr(hn),ks=ci({__proto__:null,default:bs},[hn]),Fe=ks;function xs(i){if(i=Ut(i),!i)return[[],""];const e=i.split("/");e[0]===""&&e.shift();const t=e.pop();return[e,t]}function Ut(i,e=!1){return i=i.trim(),i=i.replace(/(^\/*)|(\/*$)/g,""),i=i.replace(/\/+/g,"/"),i?(i="/".concat(i),e?"".concat(i,"/"):i):"/"}function ze(i){return Gt(i).parent}function Oe(i,e,t,r){const n=new Set(t),a={};for(const o of i){const s=(r==null?void 0:r[o])||o,{name:f}=Gt(s),m=n.has(f)?Es(f,n):f;n.add(m),a[o]=Fe.join(e,m)}return a}function Es(i,e){for(;e.has(i);){const t=i.match(/(\((\d+)\))?(\..*)?$/);if(!t){i="".concat(i,"(1)");break}const[r,n,a]=t;if(!r)i="".concat(i,"(1)");else{let o="";a?o=r.replace(n,"(".concat(parseInt(a)+1,")")):o="(1)".concat(r),i=i.replace(r,o)}}return i}const Ss="_$*%#@♧⊙";function vr(i){const e="".concat(i,"-").concat(Ss),t=Pe(e);return{data:t,length:t.byteLength}}const dn=()=>vr("dir"),{data:pn,length:aa}=dn(),{data:wr,length:mn}=vr("link");function Ht(i){return i?ve(i,pn)?"dir":yn(i,wr)?"link":"file":"empty"}function yn(i,e){const t=e.byteLength;return!!(i.byteLength>=t&&ve(i.slice(0,t),e))}function ge(i,e){if(i==="empty")return new Uint8Array([]);if(i==="dir")return ls(pn);const t=typeof e=="string"?Pe(i==="link"?Ut(e):e):e;return i==="link"?Me(wr,t):t}function Cs(i){return gr(i.slice(mn))}class Lr{static Supported(){return typeof navigator.storage<"u"&&typeof FileSystemWritableFileStream<"u"}async init(){await navigator.permissions.query({name:"persistent-storage"});const{usage:e=0,quota:t=0}=await navigator.storage.estimate();if(e>=t)throw new Error("存储空间不足");this.root=await navigator.storage.getDirectory()}async read(e){const{file:t}=await this.getHandleByPath(e);return t?this._readFile(t):null}async write(e,t){const{file:r}=await this.getHandleByPath(e);return r?(await this._writeFile(r,t),!0):!1}async _writeFile(e,t){const r=await e.createWritable();await r.write(t),await r.close()}async append(e,t){const{file:r}=await this.getHandleByPath(e);if(!r)return!1;const n=await r.createWritable(),a=await this._readFile(r);return await n.write(a),await n.write({type:"write",position:a.byteLength,data:t}),await n.close(),!0}async remove(e){const{name:t,dir:r}=await this.getParentByPath(e);if(!r)return!1;const[,n]=await ae(r.removeEntry(t,{recursive:!0}));return!n}async stat(e,t=!0){const{type:r,file:n,dir:a}=await this.getHandleByPath(e);if(r==="empty")return{size:0,type:r};let o=0;if(r==="file"){const s=await n.getFile();if(o=s.size,await this._isLinkFile(s))return{type:"link",size:o}}else if(t){const s=[];await this.traverse(a,f=>{s.push((async()=>{o+=(await f.getFile()).size})())}),await Promise.all(s)}return{type:r,size:o}}async _isLinkFile(e){if(e.size===mn){const r=new Uint8Array(await e.arrayBuffer());if(ve(r,wr))return!0}return!1}async traverse(e,t){for await(const r of e.entries())r[1].kind==="directory"?await this.traverse(r[1],t):t(r[1],r[0])}async traverseContent(e,t=""){let r;if(!t)r=this.root;else{const{dir:n}=await this.getHandleByPath(t);if(!n)throw new Error("dir not found: ".concat(t));r=n}await this._traverseContent(t,r,e)}async _traverseContent(e,t,r){for await(const n of t.entries()){const[a,o]=n,s="".concat(e,"/").concat(a);o.kind==="directory"?(await r(s,Promise.resolve(null),a),await this._traverseContent(s,o,r)):await r(s,this._readFile(o),a)}}async exist(e){const{type:t}=await this.getHandleByPath(e);return t!=="empty"}async ls(e){const{type:t,dir:r}=await this.getHandleByPath(e);if(t!=="dir")return null;const n=[];for await(const a of r.keys())n.push(a);return n}async existInDir(e,t){for await(const r of t.keys())if(e===r)return!0;return!1}async createLink(e,t,r=!1){return this.createFile(e,ge("link",t),r)}async createFile(e,t,r=!1){const{dir:n,name:a}=await this.clearTarget(e,r);if(!n)return!1;const o=await n.getFileHandle(a,{create:!0});return t&&await this._writeFile(o,t),!0}async createDir(e,t=!1){const{dir:r,name:n}=await this.clearTarget(e,t);return r?(await r.getDirectoryHandle(n,{create:!0}),!0):!1}async clearTarget(e,t){const{name:r,dir:n}=await this.getParentByPath(e);if(!n)return{dir:null,name:r};if(await this.existInDir(r,n))if(t)await n.removeEntry(r,{recursive:!0});else return{dir:null,name:r};return{dir:n,name:r}}async _readFile(e){const t=await e.getFile();return new Uint8Array(await t.arrayBuffer())}async getHandleByPath(e){if(e==="/")return{type:"dir",dir:this.root};const{name:t,dir:r}=await this.getParentByPath(e);if(!r)return{type:"empty"};const[n,a]=await ae(r.getFileHandle(t));if(a){const[o,s]=await ae(r.getDirectoryHandle(t));return s?{type:"empty"}:{type:"dir",dir:o}}else return{type:"file",file:n}}async getParentByPath(e){const[t,r]=xs(e);if(!r)return{name:r};let n=this.root;for(const a of t){const[o,s]=await ae(n.getDirectoryHandle(a));if(s)return{name:a};n=o}return{name:r,dir:n}}async getType(e){const{type:t}=await this.getHandleByPath(e);return t}}class As{async traverseContent(e,t=""){const r=await Kt.keys();for(const n of r)n.startsWith(t)&&e(n,Kt.getItem(n),Gt(n).name)}static Supported(){return!0}async init(){await Kt.ready()}async read(e){const t=await Kt.getItem(Ut(e)),r=Ht(t);return r==="empty"||r==="dir"?null:t}async write(e,t){const[,r]=await ae(Kt.setItem(Ut(e),t));return!r}async append(e,t){e=Ut(e);const r=await this.read(e);return r?this.write(e,Me(r,t)):!1}async remove(e){e=Ut(e);const t=await this.read(Ut(e)),r=Ht(t);if(r==="empty")return!1;const[,n]=await ae(Kt.removeItem(e));if(!n)return!n;if(r==="file")return!0;const a=[];return await this.traverse(e,({path:o})=>{a.push(Kt.removeItem(o))}),await Promise.all(a),!0}async stat(e,t){e=Ut(e);const r=await this.read(e),n=Ht(r);if(n==="empty")return{size:0,type:n};if(n==="file"||n==="link")return{size:r.byteLength,type:n};if(!t)return{size:0,type:n};let a=0;const o=[];return await this.traverse(e,({path:s})=>{o.push((async()=>{a+=(await this.stat(s,t)).size})())}),await Promise.all(o),{size:a,type:n}}async exist(e){return!!await this.read(Ut(e))}async ls(e){const t=[];return await this.traverse(e,({parent:r,name:n})=>{r===e&&t.push(n)}),t}async createFile(e,t=new Uint8Array([]),r=!1){return!r&&await this.exist(e)?!1:(await this.write(e,t),!0)}async createDir(e,t){if(e=Ut(e),await this.exist(e)){if(!t)return!1;const r=[];await this.traverse(e,({path:n})=>{r.push(this.remove(n))}),await Promise.all(r)}return await this.write(e,ge("dir")),!0}async traverse(e,t){const r=await Kt.keys(),n=Ut(e,!0);for(const a of r)a.startsWith(n)&&t(Gt(a))}async getType(e){const t=await this.read(e);return Ht(t)}}function jt(i,e,t){const r=t.value,n=e.endsWith("Sync");t.value=function(...a){const o=this.fmtPath(a[0]||""),s=f=>(a[0]=f||o,r.apply(this,a));if(n){const f=this._link.getSync(o);return s(f)}else{const{ready:f,resolve:m}=fn();return this._link.get(o).then(p=>s(p)).then(p=>{m(p)}),f}}}class Is{constructor(e,t){this.backend=e,this.syncMiddleware=t}async get(e,t){const r=t||await this.backend.read(e);return this._get(r)}getSync(e,t){var n;const r=t||((n=this.syncMiddleware)==null?void 0:n.read(e));return this._get(r)}_get(e){return Ht(e)==="link"?Cs(e):""}}var gn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(r,n,a){function o(m,p){if(!n[m]){if(!r[m]){var h=typeof te=="function"&&te;if(!p&&h)return h(m,!0);if(s)return s(m,!0);var y=new Error("Cannot find module '"+m+"'");throw y.code="MODULE_NOT_FOUND",y}var d=n[m]={exports:{}};r[m][0].call(d.exports,function(x){var w=r[m][1][x];return o(w||x)},d,d.exports,t,r,n,a)}return n[m].exports}for(var s=typeof te=="function"&&te,f=0;f<a.length;f++)o(a[f]);return o}({1:[function(t,r,n){var a=t("./utils"),o=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(f){for(var m,p,h,y,d,x,w,k=[],_=0,C=f.length,F=C,N=a.getTypeOf(f)!=="string";_<f.length;)F=C-_,h=N?(m=f[_++],p=_<C?f[_++]:0,_<C?f[_++]:0):(m=f.charCodeAt(_++),p=_<C?f.charCodeAt(_++):0,_<C?f.charCodeAt(_++):0),y=m>>2,d=(3&m)<<4|p>>4,x=1<F?(15&p)<<2|h>>6:64,w=2<F?63&h:64,k.push(s.charAt(y)+s.charAt(d)+s.charAt(x)+s.charAt(w));return k.join("")},n.decode=function(f){var m,p,h,y,d,x,w=0,k=0,_="data:";if(f.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var C,F=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===s.charAt(64)&&F--,f.charAt(f.length-2)===s.charAt(64)&&F--,F%1!=0)throw new Error("Invalid base64 input, bad content length.");for(C=o.uint8array?new Uint8Array(0|F):new Array(0|F);w<f.length;)m=s.indexOf(f.charAt(w++))<<2|(y=s.indexOf(f.charAt(w++)))>>4,p=(15&y)<<4|(d=s.indexOf(f.charAt(w++)))>>2,h=(3&d)<<6|(x=s.indexOf(f.charAt(w++))),C[k++]=m,d!==64&&(C[k++]=p),x!==64&&(C[k++]=h);return C}},{"./support":30,"./utils":32}],2:[function(t,r,n){var a=t("./external"),o=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),f=t("./stream/DataLengthProbe");function m(p,h,y,d,x){this.compressedSize=p,this.uncompressedSize=h,this.crc32=y,this.compression=d,this.compressedContent=x}m.prototype={getContentWorker:function(){var p=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),h=this;return p.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(p,h,y){return p.pipe(new s).pipe(new f("uncompressedSize")).pipe(h.compressWorker(y)).pipe(new f("compressedSize")).withStreamInfo("compression",h)},r.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,n){var a=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,n){var a=t("./utils"),o=function(){for(var s,f=[],m=0;m<256;m++){s=m;for(var p=0;p<8;p++)s=1&s?3988292384^s>>>1:s>>>1;f[m]=s}return f}();r.exports=function(s,f){return s!==void 0&&s.length?a.getTypeOf(s)!=="string"?function(m,p,h,y){var d=o,x=y+h;m^=-1;for(var w=y;w<x;w++)m=m>>>8^d[255&(m^p[w])];return-1^m}(0|f,s,s.length,0):function(m,p,h,y){var d=o,x=y+h;m^=-1;for(var w=y;w<x;w++)m=m>>>8^d[255&(m^p.charCodeAt(w))];return-1^m}(0|f,s,s.length,0):0}},{"./utils":32}],5:[function(t,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,r,n){var a=null;a=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:a}},{lie:37}],7:[function(t,r,n){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),s=t("./utils"),f=t("./stream/GenericWorker"),m=a?"uint8array":"array";function p(h,y){f.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=y,this.meta={}}n.magic="\b\0",s.inherits(p,f),p.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(m,h.data),!1)},p.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(y){h.push({data:y,meta:h.meta})}},n.compressWorker=function(h){return new p("Deflate",h)},n.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,n){function a(d,x){var w,k="";for(w=0;w<x;w++)k+=String.fromCharCode(255&d),d>>>=8;return k}function o(d,x,w,k,_,C){var F,N,B=d.file,Z=d.compression,W=C!==m.utf8encode,X=s.transformTo("string",C(B.name)),H=s.transformTo("string",m.utf8encode(B.name)),rt=B.comment,dt=s.transformTo("string",C(rt)),T=s.transformTo("string",m.utf8encode(rt)),V=H.length!==B.name.length,g=T.length!==rt.length,q="",vt="",et="",_t=B.dir,at=B.date,gt={crc32:0,compressedSize:0,uncompressedSize:0};x&&!w||(gt.crc32=d.crc32,gt.compressedSize=d.compressedSize,gt.uncompressedSize=d.uncompressedSize);var M=0;x&&(M|=8),W||!V&&!g||(M|=2048);var j=0,yt=0;_t&&(j|=16),_==="UNIX"?(yt=798,j|=function(ft,Pt){var Ot=ft;return ft||(Ot=Pt?16893:33204),(65535&Ot)<<16}(B.unixPermissions,_t)):(yt=20,j|=function(ft){return 63&(ft||0)}(B.dosPermissions)),F=at.getUTCHours(),F<<=6,F|=at.getUTCMinutes(),F<<=5,F|=at.getUTCSeconds()/2,N=at.getUTCFullYear()-1980,N<<=4,N|=at.getUTCMonth()+1,N<<=5,N|=at.getUTCDate(),V&&(vt=a(1,1)+a(p(X),4)+H,q+="up"+a(vt.length,2)+vt),g&&(et=a(1,1)+a(p(dt),4)+T,q+="uc"+a(et.length,2)+et);var lt="";return lt+="\n\0",lt+=a(M,2),lt+=Z.magic,lt+=a(F,2),lt+=a(N,2),lt+=a(gt.crc32,4),lt+=a(gt.compressedSize,4),lt+=a(gt.uncompressedSize,4),lt+=a(X.length,2),lt+=a(q.length,2),{fileRecord:h.LOCAL_FILE_HEADER+lt+X+q,dirRecord:h.CENTRAL_FILE_HEADER+a(yt,2)+lt+a(dt.length,2)+"\0\0\0\0"+a(j,4)+a(k,4)+X+q+dt}}var s=t("../utils"),f=t("../stream/GenericWorker"),m=t("../utf8"),p=t("../crc32"),h=t("../signature");function y(d,x,w,k){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=w,this.encodeFileName=k,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(y,f),y.prototype.push=function(d){var x=d.meta.percent||0,w=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,f.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:w?(x+100*(w-k-1))/w:100}}))},y.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var x=this.streamFiles&&!d.file.dir;if(x){var w=o(d,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(d){this.accumulate=!1;var x=this.streamFiles&&!d.file.dir,w=o(d,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),x)this.push({data:function(k){return h.DATA_DESCRIPTOR+a(k.crc32,4)+a(k.compressedSize,4)+a(k.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var d=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var w=this.bytesWritten-d,k=function(_,C,F,N,B){var Z=s.transformTo("string",B(N));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(_,2)+a(_,2)+a(C,4)+a(F,4)+a(Z.length,2)+Z}(this.dirRecords.length,w,d,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(d){this._sources.push(d);var x=this;return d.on("data",function(w){x.processChunk(w)}),d.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),d.on("error",function(w){x.error(w)}),this},y.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(d){var x=this._sources;if(!f.prototype.error.call(this,d))return!1;for(var w=0;w<x.length;w++)try{x[w].error(d)}catch(k){}return!0},y.prototype.lock=function(){f.prototype.lock.call(this);for(var d=this._sources,x=0;x<d.length;x++)d[x].lock()},r.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,n){var a=t("../compressions"),o=t("./ZipFileWorker");n.generateWorker=function(s,f,m){var p=new o(f.streamFiles,m,f.platform,f.encodeFileName),h=0;try{s.forEach(function(y,d){h++;var x=function(C,F){var N=C||F,B=a[N];if(!B)throw new Error(N+" is not a valid compression method !");return B}(d.options.compression,f.compression),w=d.options.compressionOptions||f.compressionOptions||{},k=d.dir,_=d.date;d._compressWorker(x,w).withStreamInfo("file",{name:y,dir:k,date:_,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(p)}),p.entriesCount=h}catch(y){p.error(y)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,n){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(o,s){return new a().loadAsync(o,s)},a.external=t("./external"),r.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,n){var a=t("./utils"),o=t("./external"),s=t("./utf8"),f=t("./zipEntries"),m=t("./stream/Crc32Probe"),p=t("./nodejsUtils");function h(y){return new o.Promise(function(d,x){var w=y.decompressed.getContentWorker().pipe(new m);w.on("error",function(k){x(k)}).on("end",function(){w.streamInfo.crc32!==y.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}r.exports=function(y,d){var x=this;return d=a.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),p.isNode&&p.isStream(y)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",y,!0,d.optimizedBinaryString,d.base64).then(function(w){var k=new f(d);return k.load(w),k}).then(function(w){var k=[o.Promise.resolve(w)],_=w.files;if(d.checkCRC32)for(var C=0;C<_.length;C++)k.push(h(_[C]));return o.Promise.all(k)}).then(function(w){for(var k=w.shift(),_=k.files,C=0;C<_.length;C++){var F=_[C],N=F.fileNameStr,B=a.resolve(F.fileNameStr);x.file(B,F.decompressed,{binary:!0,optimizedBinaryString:!0,date:F.date,dir:F.dir,comment:F.fileCommentStr.length?F.fileCommentStr:null,unixPermissions:F.unixPermissions,dosPermissions:F.dosPermissions,createFolders:d.createFolders}),F.dir||(x.file(B).unsafeOriginalName=N)}return k.zipComment.length&&(x.comment=k.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,n){var a=t("../utils"),o=t("../stream/GenericWorker");function s(f,m){o.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(m)}a.inherits(s,o),s.prototype._bindStream=function(f){var m=this;(this._stream=f).pause(),f.on("data",function(p){m.push({data:p,meta:{percent:0}})}).on("error",function(p){m.isPaused?this.generatedError=p:m.error(p)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,n){var a=t("readable-stream").Readable;function o(s,f,m){a.call(this,f),this._helper=s;var p=this;s.on("data",function(h,y){p.push(h)||p._helper.pause(),m&&m(y)}).on("error",function(h){p.emit("error",h)}).on("end",function(){p.push(null)})}t("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,n){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,r,n){function a(B,Z,W){var X,H=s.getTypeOf(Z),rt=s.extend(W||{},p);rt.date=rt.date||new Date,rt.compression!==null&&(rt.compression=rt.compression.toUpperCase()),typeof rt.unixPermissions=="string"&&(rt.unixPermissions=parseInt(rt.unixPermissions,8)),rt.unixPermissions&&16384&rt.unixPermissions&&(rt.dir=!0),rt.dosPermissions&&16&rt.dosPermissions&&(rt.dir=!0),rt.dir&&(B=_(B)),rt.createFolders&&(X=k(B))&&C.call(this,X,!0);var dt=H==="string"&&rt.binary===!1&&rt.base64===!1;W&&W.binary!==void 0||(rt.binary=!dt),(Z instanceof h&&Z.uncompressedSize===0||rt.dir||!Z||Z.length===0)&&(rt.base64=!1,rt.binary=!0,Z="",rt.compression="STORE",H="string");var T=null;T=Z instanceof h||Z instanceof f?Z:x.isNode&&x.isStream(Z)?new w(B,Z):s.prepareContent(B,Z,rt.binary,rt.optimizedBinaryString,rt.base64);var V=new y(B,T,rt);this.files[B]=V}var o=t("./utf8"),s=t("./utils"),f=t("./stream/GenericWorker"),m=t("./stream/StreamHelper"),p=t("./defaults"),h=t("./compressedObject"),y=t("./zipObject"),d=t("./generate"),x=t("./nodejsUtils"),w=t("./nodejs/NodejsStreamInputAdapter"),k=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var Z=B.lastIndexOf("/");return 0<Z?B.substring(0,Z):""},_=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},C=function(B,Z){return Z=Z!==void 0?Z:p.createFolders,B=_(B),this.files[B]||a.call(this,B,null,{dir:!0,createFolders:Z}),this.files[B]};function F(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var Z,W,X;for(Z in this.files)X=this.files[Z],(W=Z.slice(this.root.length,Z.length))&&Z.slice(0,this.root.length)===this.root&&B(W,X)},filter:function(B){var Z=[];return this.forEach(function(W,X){B(W,X)&&Z.push(X)}),Z},file:function(B,Z,W){if(arguments.length!==1)return B=this.root+B,a.call(this,B,Z,W),this;if(F(B)){var X=B;return this.filter(function(rt,dt){return!dt.dir&&X.test(rt)})}var H=this.files[this.root+B];return H&&!H.dir?H:null},folder:function(B){if(!B)return this;if(F(B))return this.filter(function(H,rt){return rt.dir&&B.test(H)});var Z=this.root+B,W=C.call(this,Z),X=this.clone();return X.root=W.name,X},remove:function(B){B=this.root+B;var Z=this.files[B];if(Z||(B.slice(-1)!=="/"&&(B+="/"),Z=this.files[B]),Z&&!Z.dir)delete this.files[B];else for(var W=this.filter(function(H,rt){return rt.name.slice(0,B.length)===B}),X=0;X<W.length;X++)delete this.files[W[X].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var Z,W={};try{if((W=s.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=W.type.toLowerCase(),W.compression=W.compression.toUpperCase(),W.type==="binarystring"&&(W.type="string"),!W.type)throw new Error("No output type specified.");s.checkSupport(W.type),W.platform!=="darwin"&&W.platform!=="freebsd"&&W.platform!=="linux"&&W.platform!=="sunos"||(W.platform="UNIX"),W.platform==="win32"&&(W.platform="DOS");var X=W.comment||this.comment||"";Z=d.generateWorker(this,W,X)}catch(H){(Z=new f("error")).error(H)}return new m(Z,W.type||"string",W.mimeType)},generateAsync:function(B,Z){return this.generateInternalStream(B).accumulate(Z)},generateNodeStream:function(B,Z){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(Z)}};r.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,n){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,n){var a=t("./DataReader");function o(s){a.call(this,s);for(var f=0;f<this.data.length;f++)s[f]=255&s[f]}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var f=s.charCodeAt(0),m=s.charCodeAt(1),p=s.charCodeAt(2),h=s.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===f&&this.data[y+1]===m&&this.data[y+2]===p&&this.data[y+3]===h)return y-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var f=s.charCodeAt(0),m=s.charCodeAt(1),p=s.charCodeAt(2),h=s.charCodeAt(3),y=this.readData(4);return f===y[0]&&m===y[1]&&p===y[2]&&h===y[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,n){var a=t("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var f,m=0;for(this.checkOffset(s),f=this.index+s-1;f>=this.index;f--)m=(m<<8)+this.byteAt(f);return this.index+=s,m},readString:function(s){return a.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,n){var a=t("./Uint8ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){this.checkOffset(s);var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,n){var a=t("./DataReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,n){var a=t("./ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,n){var a=t("../utils"),o=t("../support"),s=t("./ArrayReader"),f=t("./StringReader"),m=t("./NodeBufferReader"),p=t("./Uint8ArrayReader");r.exports=function(h){var y=a.getTypeOf(h);return a.checkSupport(y),y!=="string"||o.uint8array?y==="nodebuffer"?new m(h):o.uint8array?new p(a.transformTo("uint8array",h)):new s(a.transformTo("array",h)):new f(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,n){var a=t("./GenericWorker"),o=t("../utils");function s(f){a.call(this,"ConvertWorker to "+f),this.destType=f}o.inherits(s,a),s.prototype.processChunk=function(f){this.push({data:o.transformTo(this.destType,f.data),meta:f.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,n){var a=t("./GenericWorker"),o=t("../crc32");function s(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,a),s.prototype.processChunk=function(f){this.streamInfo.crc32=o(f.data,this.streamInfo.crc32||0),this.push(f)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,n){var a=t("../utils"),o=t("./GenericWorker");function s(f){o.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}a.inherits(s,o),s.prototype.processChunk=function(f){if(f){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+f.data.length}o.prototype.processChunk.call(this,f)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,n){var a=t("../utils"),o=t("./GenericWorker");function s(f){o.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(p){m.dataIsReady=!0,m.data=p,m.max=p&&p.length||0,m.type=a.getTypeOf(p),m.isPaused||m._tickAndRepeat()},function(p){m.error(p)})}a.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,m);break;case"uint8array":f=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":f=this.data.slice(this.index,m)}return this.index=m,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,n){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var f=0;f<this._listeners[o].length;f++)this._listeners[o][f].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(f){s.processChunk(f)}),o.on("end",function(){s.end()}),o.on("error",function(f){s.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=a},{}],29:[function(t,r,n){var a=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),f=t("../base64"),m=t("../support"),p=t("../external"),h=null;if(m.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch(x){}function y(x,w){return new p.Promise(function(k,_){var C=[],F=x._internalType,N=x._outputType,B=x._mimeType;x.on("data",function(Z,W){C.push(Z),w&&w(W)}).on("error",function(Z){C=[],_(Z)}).on("end",function(){try{var Z=function(W,X,H){switch(W){case"blob":return a.newBlob(a.transformTo("arraybuffer",X),H);case"base64":return f.encode(X);default:return a.transformTo(W,X)}}(N,function(W,X){var H,rt=0,dt=null,T=0;for(H=0;H<X.length;H++)T+=X[H].length;switch(W){case"string":return X.join("");case"array":return Array.prototype.concat.apply([],X);case"uint8array":for(dt=new Uint8Array(T),H=0;H<X.length;H++)dt.set(X[H],rt),rt+=X[H].length;return dt;case"nodebuffer":return Buffer.concat(X);default:throw new Error("concat : unsupported type '"+W+"'")}}(F,C),B);k(Z)}catch(W){_(W)}C=[]}).resume()})}function d(x,w,k){var _=w;switch(w){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=w,this._mimeType=k,a.checkSupport(_),this._worker=x.pipe(new o(_)),x.lock()}catch(C){this._worker=new s("error"),this._worker.error(C)}}d.prototype={accumulate:function(x){return y(this,x)},on:function(x,w){var k=this;return x==="data"?this._worker.on(x,function(_){w.call(k,_.data,_.meta)}):this._worker.on(x,function(){a.delay(w,arguments,k)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},x)}},r.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var a=new ArrayBuffer(0);try{n.blob=new Blob([a],{type:"application/zip"}).size===0}catch(s){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),n.blob=o.getBlob("application/zip").size===0}catch(f){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(s){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,n){for(var a=t("./utils"),o=t("./support"),s=t("./nodejsUtils"),f=t("./stream/GenericWorker"),m=new Array(256),p=0;p<256;p++)m[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;m[254]=m[254]=1;function h(){f.call(this,"utf-8 decode"),this.leftOver=null}function y(){f.call(this,"utf-8 encode")}n.utf8encode=function(d){return o.nodebuffer?s.newBufferFrom(d,"utf-8"):function(x){var w,k,_,C,F,N=x.length,B=0;for(C=0;C<N;C++)(64512&(k=x.charCodeAt(C)))==55296&&C+1<N&&(64512&(_=x.charCodeAt(C+1)))==56320&&(k=65536+(k-55296<<10)+(_-56320),C++),B+=k<128?1:k<2048?2:k<65536?3:4;for(w=o.uint8array?new Uint8Array(B):new Array(B),C=F=0;F<B;C++)(64512&(k=x.charCodeAt(C)))==55296&&C+1<N&&(64512&(_=x.charCodeAt(C+1)))==56320&&(k=65536+(k-55296<<10)+(_-56320),C++),k<128?w[F++]=k:(k<2048?w[F++]=192|k>>>6:(k<65536?w[F++]=224|k>>>12:(w[F++]=240|k>>>18,w[F++]=128|k>>>12&63),w[F++]=128|k>>>6&63),w[F++]=128|63&k);return w}(d)},n.utf8decode=function(d){return o.nodebuffer?a.transformTo("nodebuffer",d).toString("utf-8"):function(x){var w,k,_,C,F=x.length,N=new Array(2*F);for(w=k=0;w<F;)if((_=x[w++])<128)N[k++]=_;else if(4<(C=m[_]))N[k++]=65533,w+=C-1;else{for(_&=C===2?31:C===3?15:7;1<C&&w<F;)_=_<<6|63&x[w++],C--;1<C?N[k++]=65533:_<65536?N[k++]=_:(_-=65536,N[k++]=55296|_>>10&1023,N[k++]=56320|1023&_)}return N.length!==k&&(N.subarray?N=N.subarray(0,k):N.length=k),a.applyFromCharCode(N)}(d=a.transformTo(o.uint8array?"uint8array":"array",d))},a.inherits(h,f),h.prototype.processChunk=function(d){var x=a.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var w=x;(x=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),x.set(w,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var k=function(C,F){var N;for((F=F||C.length)>C.length&&(F=C.length),N=F-1;0<=N&&(192&C[N])==128;)N--;return N<0||N===0?F:N+m[C[N]]>F?N:F}(x),_=x;k!==x.length&&(o.uint8array?(_=x.subarray(0,k),this.leftOver=x.subarray(k,x.length)):(_=x.slice(0,k),this.leftOver=x.slice(k,x.length))),this.push({data:n.utf8decode(_),meta:d.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=h,a.inherits(y,f),y.prototype.processChunk=function(d){this.push({data:n.utf8encode(d.data),meta:d.meta})},n.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,n){var a=t("./support"),o=t("./base64"),s=t("./nodejsUtils"),f=t("./external");function m(w){return w}function p(w,k){for(var _=0;_<w.length;++_)k[_]=255&w.charCodeAt(_);return k}t("setimmediate"),n.newBlob=function(w,k){n.checkSupport("blob");try{return new Blob([w],{type:k})}catch(C){try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(w),_.getBlob(k)}catch(F){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(w,k,_){var C=[],F=0,N=w.length;if(N<=_)return String.fromCharCode.apply(null,w);for(;F<N;)k==="array"||k==="nodebuffer"?C.push(String.fromCharCode.apply(null,w.slice(F,Math.min(F+_,N)))):C.push(String.fromCharCode.apply(null,w.subarray(F,Math.min(F+_,N)))),F+=_;return C.join("")},stringifyByChar:function(w){for(var k="",_=0;_<w.length;_++)k+=String.fromCharCode(w[_]);return k},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(w){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch(w){return!1}}()}};function y(w){var k=65536,_=n.getTypeOf(w),C=!0;if(_==="uint8array"?C=h.applyCanBeUsed.uint8array:_==="nodebuffer"&&(C=h.applyCanBeUsed.nodebuffer),C)for(;1<k;)try{return h.stringifyByChunk(w,_,k)}catch(F){k=Math.floor(k/2)}return h.stringifyByChar(w)}function d(w,k){for(var _=0;_<w.length;_++)k[_]=w[_];return k}n.applyFromCharCode=y;var x={};x.string={string:m,array:function(w){return p(w,new Array(w.length))},arraybuffer:function(w){return x.string.uint8array(w).buffer},uint8array:function(w){return p(w,new Uint8Array(w.length))},nodebuffer:function(w){return p(w,s.allocBuffer(w.length))}},x.array={string:y,array:m,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return s.newBufferFrom(w)}},x.arraybuffer={string:function(w){return y(new Uint8Array(w))},array:function(w){return d(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:m,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return s.newBufferFrom(new Uint8Array(w))}},x.uint8array={string:y,array:function(w){return d(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:m,nodebuffer:function(w){return s.newBufferFrom(w)}},x.nodebuffer={string:y,array:function(w){return d(w,new Array(w.length))},arraybuffer:function(w){return x.nodebuffer.uint8array(w).buffer},uint8array:function(w){return d(w,new Uint8Array(w.length))},nodebuffer:m},n.transformTo=function(w,k){if(k=k||"",!w)return k;n.checkSupport(w);var _=n.getTypeOf(k);return x[_][w](k)},n.resolve=function(w){for(var k=w.split("/"),_=[],C=0;C<k.length;C++){var F=k[C];F==="."||F===""&&C!==0&&C!==k.length-1||(F===".."?_.pop():_.push(F))}return _.join("/")},n.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":a.nodebuffer&&s.isBuffer(w)?"nodebuffer":a.uint8array&&w instanceof Uint8Array?"uint8array":a.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(w){if(!a[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(w){var k,_,C="";for(_=0;_<(w||"").length;_++)C+="\\x"+((k=w.charCodeAt(_))<16?"0":"")+k.toString(16).toUpperCase();return C},n.delay=function(w,k,_){setImmediate(function(){w.apply(_||null,k||[])})},n.inherits=function(w,k){function _(){}_.prototype=k.prototype,w.prototype=new _},n.extend=function(){var w,k,_={};for(w=0;w<arguments.length;w++)for(k in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],k)&&_[k]===void 0&&(_[k]=arguments[w][k]);return _},n.prepareContent=function(w,k,_,C,F){return f.Promise.resolve(k).then(function(N){return a.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new f.Promise(function(B,Z){var W=new FileReader;W.onload=function(X){B(X.target.result)},W.onerror=function(X){Z(X.target.error)},W.readAsArrayBuffer(N)}):N}).then(function(N){var B=n.getTypeOf(N);return B?(B==="arraybuffer"?N=n.transformTo("uint8array",N):B==="string"&&(F?N=o.decode(N):_&&C!==!0&&(N=function(Z){return p(Z,a.uint8array?new Uint8Array(Z.length):new Array(Z.length))}(N))),N):f.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,n){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./signature"),f=t("./zipEntry"),m=t("./support");function p(h){this.files=[],this.loadOptions=h}p.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(y)+", expected "+o.pretty(h)+")")}},isSignature:function(h,y){var d=this.reader.index;this.reader.setIndex(h);var x=this.reader.readString(4)===y;return this.reader.setIndex(d),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),y=m.uint8array?"uint8array":"array",d=o.transformTo(y,h);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,y,d,x=this.zip64EndOfCentralSize-44;0<x;)h=this.reader.readInt(2),y=this.reader.readInt(4),d=this.reader.readData(y),this.zip64ExtensibleData[h]={id:h,length:y,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,y;for(h=0;h<this.files.length;h++)y=this.files[h],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var y=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var x=y-d;if(0<x)this.isSignature(y,s.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(h){this.reader=a(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,n){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./compressedObject"),f=t("./crc32"),m=t("./utf8"),p=t("./compressions"),h=t("./support");function y(d,x){this.options=d,this.loadOptions=x}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var x,w;if(d.skip(22),this.fileNameLength=d.readInt(2),w=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((x=function(k){for(var _ in p)if(Object.prototype.hasOwnProperty.call(p,_)&&p[_].magic===k)return p[_];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,x,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var x=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(x),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var x,w,k,_=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<_;)x=d.readInt(2),w=d.readInt(2),k=d.readData(w),this.extraFields[x]={id:x,length:w,value:k};d.setIndex(_)},handleUTF8:function(){var d=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(x!==null)this.fileNameStr=x;else{var w=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var _=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var x=a(d.value);return x.readInt(1)!==1||f(this.fileName)!==x.readInt(4)?null:m.utf8decode(x.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var x=a(d.value);return x.readInt(1)!==1||f(this.fileComment)!==x.readInt(4)?null:m.utf8decode(x.readData(d.length-5))}return null}},r.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,n){function a(x,w,k){this.name=x,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=w,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var o=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),f=t("./utf8"),m=t("./compressedObject"),p=t("./stream/GenericWorker");a.prototype={internalStream:function(x){var w=null,k="string";try{if(!x)throw new Error("No output type specified.");var _=(k=x.toLowerCase())==="string"||k==="text";k!=="binarystring"&&k!=="text"||(k="string"),w=this._decompressWorker();var C=!this._dataBinary;C&&!_&&(w=w.pipe(new f.Utf8EncodeWorker)),!C&&_&&(w=w.pipe(new f.Utf8DecodeWorker))}catch(F){(w=new p("error")).error(F)}return new o(w,k,"")},async:function(x,w){return this.internalStream(x).accumulate(w)},nodeStream:function(x,w){return this.internalStream(x||"nodebuffer").toNodejsStream(w)},_compressWorker:function(x,w){if(this._data instanceof m&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new f.Utf8EncodeWorker)),m.createWorkerFrom(k,x,w)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof p?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<h.length;d++)a.prototype[h[d]]=y;r.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,n){(function(a){var o,s,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var m=0,p=new f(x),h=a.document.createTextNode("");p.observe(h,{characterData:!0}),o=function(){h.data=m=++m%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var w=a.document.createElement("script");w.onreadystatechange=function(){x(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},a.document.documentElement.appendChild(w)}:function(){setTimeout(x,0)};else{var y=new a.MessageChannel;y.port1.onmessage=x,o=function(){y.port2.postMessage(0)}}var d=[];function x(){var w,k;s=!0;for(var _=d.length;_;){for(k=d,d=[],w=-1;++w<_;)k[w]();_=d.length}s=!1}r.exports=function(w){d.push(w)!==1||s||o()}}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,n){var a=t("immediate");function o(){}var s={},f=["REJECTED"],m=["FULFILLED"],p=["PENDING"];function h(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,_!==o&&w(this,_)}function y(_,C,F){this.promise=_,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof F=="function"&&(this.onRejected=F,this.callRejected=this.otherCallRejected)}function d(_,C,F){a(function(){var N;try{N=C(F)}catch(B){return s.reject(_,B)}N===_?s.reject(_,new TypeError("Cannot resolve promise with itself")):s.resolve(_,N)})}function x(_){var C=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof C=="function")return function(){C.apply(_,arguments)}}function w(_,C){var F=!1;function N(W){F||(F=!0,s.reject(_,W))}function B(W){F||(F=!0,s.resolve(_,W))}var Z=k(function(){C(B,N)});Z.status==="error"&&N(Z.value)}function k(_,C){var F={};try{F.value=_(C),F.status="success"}catch(N){F.status="error",F.value=N}return F}(r.exports=h).prototype.finally=function(_){if(typeof _!="function")return this;var C=this.constructor;return this.then(function(F){return C.resolve(_()).then(function(){return F})},function(F){return C.resolve(_()).then(function(){throw F})})},h.prototype.catch=function(_){return this.then(null,_)},h.prototype.then=function(_,C){if(typeof _!="function"&&this.state===m||typeof C!="function"&&this.state===f)return this;var F=new this.constructor(o);return this.state!==p?d(F,this.state===m?_:C,this.outcome):this.queue.push(new y(F,_,C)),F},y.prototype.callFulfilled=function(_){s.resolve(this.promise,_)},y.prototype.otherCallFulfilled=function(_){d(this.promise,this.onFulfilled,_)},y.prototype.callRejected=function(_){s.reject(this.promise,_)},y.prototype.otherCallRejected=function(_){d(this.promise,this.onRejected,_)},s.resolve=function(_,C){var F=k(x,C);if(F.status==="error")return s.reject(_,F.value);var N=F.value;if(N)w(_,N);else{_.state=m,_.outcome=C;for(var B=-1,Z=_.queue.length;++B<Z;)_.queue[B].callFulfilled(C)}return _},s.reject=function(_,C){_.state=f,_.outcome=C;for(var F=-1,N=_.queue.length;++F<N;)_.queue[F].callRejected(C);return _},h.resolve=function(_){return _ instanceof this?_:s.resolve(new this(o),_)},h.reject=function(_){var C=new this(o);return s.reject(C,_)},h.all=function(_){var C=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var F=_.length,N=!1;if(!F)return this.resolve([]);for(var B=new Array(F),Z=0,W=-1,X=new this(o);++W<F;)H(_[W],W);return X;function H(rt,dt){C.resolve(rt).then(function(T){B[dt]=T,++Z!==F||N||(N=!0,s.resolve(X,B))},function(T){N||(N=!0,s.reject(X,T))})}},h.race=function(_){var C=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var F=_.length,N=!1;if(!F)return this.resolve([]);for(var B=-1,Z=new this(o);++B<F;)W=_[B],C.resolve(W).then(function(X){N||(N=!0,s.resolve(Z,X))},function(X){N||(N=!0,s.reject(Z,X))});var W;return Z}},{immediate:36}],38:[function(t,r,n){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,n){var a=t("./zlib/deflate"),o=t("./utils/common"),s=t("./utils/strings"),f=t("./zlib/messages"),m=t("./zlib/zstream"),p=Object.prototype.toString,h=0,y=-1,d=0,x=8;function w(_){if(!(this instanceof w))return new w(_);this.options=o.assign({level:y,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},_||{});var C=this.options;C.raw&&0<C.windowBits?C.windowBits=-C.windowBits:C.gzip&&0<C.windowBits&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var F=a.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(F!==h)throw new Error(f[F]);if(C.header&&a.deflateSetHeader(this.strm,C.header),C.dictionary){var N;if(N=typeof C.dictionary=="string"?s.string2buf(C.dictionary):p.call(C.dictionary)==="[object ArrayBuffer]"?new Uint8Array(C.dictionary):C.dictionary,(F=a.deflateSetDictionary(this.strm,N))!==h)throw new Error(f[F]);this._dict_set=!0}}function k(_,C){var F=new w(C);if(F.push(_,!0),F.err)throw F.msg||f[F.err];return F.result}w.prototype.push=function(_,C){var F,N,B=this.strm,Z=this.options.chunkSize;if(this.ended)return!1;N=C===~~C?C:C===!0?4:0,typeof _=="string"?B.input=s.string2buf(_):p.call(_)==="[object ArrayBuffer]"?B.input=new Uint8Array(_):B.input=_,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(Z),B.next_out=0,B.avail_out=Z),(F=a.deflate(B,N))!==1&&F!==h)return this.onEnd(F),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(B.output,B.next_out))):this.onData(o.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&F!==1);return N===4?(F=a.deflateEnd(this.strm),this.onEnd(F),this.ended=!0,F===h):N!==2||(this.onEnd(h),!(B.avail_out=0))},w.prototype.onData=function(_){this.chunks.push(_)},w.prototype.onEnd=function(_){_===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},n.Deflate=w,n.deflate=k,n.deflateRaw=function(_,C){return(C=C||{}).raw=!0,k(_,C)},n.gzip=function(_,C){return(C=C||{}).gzip=!0,k(_,C)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,n){var a=t("./zlib/inflate"),o=t("./utils/common"),s=t("./utils/strings"),f=t("./zlib/constants"),m=t("./zlib/messages"),p=t("./zlib/zstream"),h=t("./zlib/gzheader"),y=Object.prototype.toString;function d(w){if(!(this instanceof d))return new d(w);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},w||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||w&&w.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&!(15&k.windowBits)&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var _=a.inflateInit2(this.strm,k.windowBits);if(_!==f.Z_OK)throw new Error(m[_]);this.header=new h,a.inflateGetHeader(this.strm,this.header)}function x(w,k){var _=new d(k);if(_.push(w,!0),_.err)throw _.msg||m[_.err];return _.result}d.prototype.push=function(w,k){var _,C,F,N,B,Z,W=this.strm,X=this.options.chunkSize,H=this.options.dictionary,rt=!1;if(this.ended)return!1;C=k===~~k?k:k===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof w=="string"?W.input=s.binstring2buf(w):y.call(w)==="[object ArrayBuffer]"?W.input=new Uint8Array(w):W.input=w,W.next_in=0,W.avail_in=W.input.length;do{if(W.avail_out===0&&(W.output=new o.Buf8(X),W.next_out=0,W.avail_out=X),(_=a.inflate(W,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&H&&(Z=typeof H=="string"?s.string2buf(H):y.call(H)==="[object ArrayBuffer]"?new Uint8Array(H):H,_=a.inflateSetDictionary(this.strm,Z)),_===f.Z_BUF_ERROR&&rt===!0&&(_=f.Z_OK,rt=!1),_!==f.Z_STREAM_END&&_!==f.Z_OK)return this.onEnd(_),!(this.ended=!0);W.next_out&&(W.avail_out!==0&&_!==f.Z_STREAM_END&&(W.avail_in!==0||C!==f.Z_FINISH&&C!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(F=s.utf8border(W.output,W.next_out),N=W.next_out-F,B=s.buf2string(W.output,F),W.next_out=N,W.avail_out=X-N,N&&o.arraySet(W.output,W.output,F,N,0),this.onData(B)):this.onData(o.shrinkBuf(W.output,W.next_out)))),W.avail_in===0&&W.avail_out===0&&(rt=!0)}while((0<W.avail_in||W.avail_out===0)&&_!==f.Z_STREAM_END);return _===f.Z_STREAM_END&&(C=f.Z_FINISH),C===f.Z_FINISH?(_=a.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===f.Z_OK):C!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(W.avail_out=0))},d.prototype.onData=function(w){this.chunks.push(w)},d.prototype.onEnd=function(w){w===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},n.Inflate=d,n.inflate=x,n.inflateRaw=function(w,k){return(k=k||{}).raw=!0,x(w,k)},n.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,n){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(f){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var p=m.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var h in p)p.hasOwnProperty(h)&&(f[h]=p[h])}}return f},n.shrinkBuf=function(f,m){return f.length===m?f:f.subarray?f.subarray(0,m):(f.length=m,f)};var o={arraySet:function(f,m,p,h,y){if(m.subarray&&f.subarray)f.set(m.subarray(p,p+h),y);else for(var d=0;d<h;d++)f[y+d]=m[p+d]},flattenChunks:function(f){var m,p,h,y,d,x;for(m=h=0,p=f.length;m<p;m++)h+=f[m].length;for(x=new Uint8Array(h),m=y=0,p=f.length;m<p;m++)d=f[m],x.set(d,y),y+=d.length;return x}},s={arraySet:function(f,m,p,h,y){for(var d=0;d<h;d++)f[y+d]=m[p+d]},flattenChunks:function(f){return[].concat.apply([],f)}};n.setTyped=function(f){f?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(a)},{}],42:[function(t,r,n){var a=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(h){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){s=!1}for(var f=new a.Buf8(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function p(h,y){if(y<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(h,y));for(var d="",x=0;x<y;x++)d+=String.fromCharCode(h[x]);return d}f[254]=f[254]=1,n.string2buf=function(h){var y,d,x,w,k,_=h.length,C=0;for(w=0;w<_;w++)(64512&(d=h.charCodeAt(w)))==55296&&w+1<_&&(64512&(x=h.charCodeAt(w+1)))==56320&&(d=65536+(d-55296<<10)+(x-56320),w++),C+=d<128?1:d<2048?2:d<65536?3:4;for(y=new a.Buf8(C),w=k=0;k<C;w++)(64512&(d=h.charCodeAt(w)))==55296&&w+1<_&&(64512&(x=h.charCodeAt(w+1)))==56320&&(d=65536+(d-55296<<10)+(x-56320),w++),d<128?y[k++]=d:(d<2048?y[k++]=192|d>>>6:(d<65536?y[k++]=224|d>>>12:(y[k++]=240|d>>>18,y[k++]=128|d>>>12&63),y[k++]=128|d>>>6&63),y[k++]=128|63&d);return y},n.buf2binstring=function(h){return p(h,h.length)},n.binstring2buf=function(h){for(var y=new a.Buf8(h.length),d=0,x=y.length;d<x;d++)y[d]=h.charCodeAt(d);return y},n.buf2string=function(h,y){var d,x,w,k,_=y||h.length,C=new Array(2*_);for(d=x=0;d<_;)if((w=h[d++])<128)C[x++]=w;else if(4<(k=f[w]))C[x++]=65533,d+=k-1;else{for(w&=k===2?31:k===3?15:7;1<k&&d<_;)w=w<<6|63&h[d++],k--;1<k?C[x++]=65533:w<65536?C[x++]=w:(w-=65536,C[x++]=55296|w>>10&1023,C[x++]=56320|1023&w)}return p(C,x)},n.utf8border=function(h,y){var d;for((y=y||h.length)>h.length&&(y=h.length),d=y-1;0<=d&&(192&h[d])==128;)d--;return d<0||d===0?y:d+f[h[d]]>y?d:y}},{"./common":41}],43:[function(t,r,n){r.exports=function(a,o,s,f){for(var m=65535&a|0,p=a>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;p=p+(m=m+o[f++]|0)|0,--h;);m%=65521,p%=65521}return m|p<<16|0}},{}],44:[function(t,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,n){var a=function(){for(var o,s=[],f=0;f<256;f++){o=f;for(var m=0;m<8;m++)o=1&o?3988292384^o>>>1:o>>>1;s[f]=o}return s}();r.exports=function(o,s,f,m){var p=a,h=m+f;o^=-1;for(var y=m;y<h;y++)o=o>>>8^p[255&(o^s[y])];return-1^o}},{}],46:[function(t,r,n){var a,o=t("../utils/common"),s=t("./trees"),f=t("./adler32"),m=t("./crc32"),p=t("./messages"),h=0,y=4,d=0,x=-2,w=-1,k=4,_=2,C=8,F=9,N=286,B=30,Z=19,W=2*N+1,X=15,H=3,rt=258,dt=rt+H+1,T=42,V=113,g=1,q=2,vt=3,et=4;function _t(l,G){return l.msg=p[G],G}function at(l){return(l<<1)-(4<l?9:0)}function gt(l){for(var G=l.length;0<=--G;)l[G]=0}function M(l){var G=l.state,K=G.pending;K>l.avail_out&&(K=l.avail_out),K!==0&&(o.arraySet(l.output,G.pending_buf,G.pending_out,K,l.next_out),l.next_out+=K,G.pending_out+=K,l.total_out+=K,l.avail_out-=K,G.pending-=K,G.pending===0&&(G.pending_out=0))}function j(l,G){s._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,G),l.block_start=l.strstart,M(l.strm)}function yt(l,G){l.pending_buf[l.pending++]=G}function lt(l,G){l.pending_buf[l.pending++]=G>>>8&255,l.pending_buf[l.pending++]=255&G}function ft(l,G){var K,I,A=l.max_chain_length,D=l.strstart,Q=l.prev_length,tt=l.nice_match,U=l.strstart>l.w_size-dt?l.strstart-(l.w_size-dt):0,st=l.window,ht=l.w_mask,it=l.prev,mt=l.strstart+rt,v=st[D+Q-1],u=st[D+Q];l.prev_length>=l.good_match&&(A>>=2),tt>l.lookahead&&(tt=l.lookahead);do if(st[(K=G)+Q]===u&&st[K+Q-1]===v&&st[K]===st[D]&&st[++K]===st[D+1]){D+=2,K++;do;while(st[++D]===st[++K]&&st[++D]===st[++K]&&st[++D]===st[++K]&&st[++D]===st[++K]&&st[++D]===st[++K]&&st[++D]===st[++K]&&st[++D]===st[++K]&&st[++D]===st[++K]&&D<mt);if(I=rt-(mt-D),D=mt-rt,Q<I){if(l.match_start=G,tt<=(Q=I))break;v=st[D+Q-1],u=st[D+Q]}}while((G=it[G&ht])>U&&--A!=0);return Q<=l.lookahead?Q:l.lookahead}function Pt(l){var G,K,I,A,D,Q,tt,U,st,ht,it=l.w_size;do{if(A=l.window_size-l.lookahead-l.strstart,l.strstart>=it+(it-dt)){for(o.arraySet(l.window,l.window,it,it,0),l.match_start-=it,l.strstart-=it,l.block_start-=it,G=K=l.hash_size;I=l.head[--G],l.head[G]=it<=I?I-it:0,--K;);for(G=K=it;I=l.prev[--G],l.prev[G]=it<=I?I-it:0,--K;);A+=it}if(l.strm.avail_in===0)break;if(Q=l.strm,tt=l.window,U=l.strstart+l.lookahead,st=A,ht=void 0,ht=Q.avail_in,st<ht&&(ht=st),K=ht===0?0:(Q.avail_in-=ht,o.arraySet(tt,Q.input,Q.next_in,ht,U),Q.state.wrap===1?Q.adler=f(Q.adler,tt,ht,U):Q.state.wrap===2&&(Q.adler=m(Q.adler,tt,ht,U)),Q.next_in+=ht,Q.total_in+=ht,ht),l.lookahead+=K,l.lookahead+l.insert>=H)for(D=l.strstart-l.insert,l.ins_h=l.window[D],l.ins_h=(l.ins_h<<l.hash_shift^l.window[D+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[D+H-1])&l.hash_mask,l.prev[D&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=D,D++,l.insert--,!(l.lookahead+l.insert<H)););}while(l.lookahead<dt&&l.strm.avail_in!==0)}function Ot(l,G){for(var K,I;;){if(l.lookahead<dt){if(Pt(l),l.lookahead<dt&&G===h)return g;if(l.lookahead===0)break}if(K=0,l.lookahead>=H&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),K!==0&&l.strstart-K<=l.w_size-dt&&(l.match_length=ft(l,K)),l.match_length>=H)if(I=s._tr_tally(l,l.strstart-l.match_start,l.match_length-H),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=H){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else I=s._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(I&&(j(l,!1),l.strm.avail_out===0))return g}return l.insert=l.strstart<H-1?l.strstart:H-1,G===y?(j(l,!0),l.strm.avail_out===0?vt:et):l.last_lit&&(j(l,!1),l.strm.avail_out===0)?g:q}function bt(l,G){for(var K,I,A;;){if(l.lookahead<dt){if(Pt(l),l.lookahead<dt&&G===h)return g;if(l.lookahead===0)break}if(K=0,l.lookahead>=H&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=H-1,K!==0&&l.prev_length<l.max_lazy_match&&l.strstart-K<=l.w_size-dt&&(l.match_length=ft(l,K),l.match_length<=5&&(l.strategy===1||l.match_length===H&&4096<l.strstart-l.match_start)&&(l.match_length=H-1)),l.prev_length>=H&&l.match_length<=l.prev_length){for(A=l.strstart+l.lookahead-H,I=s._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-H),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=A&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=H-1,l.strstart++,I&&(j(l,!1),l.strm.avail_out===0))return g}else if(l.match_available){if((I=s._tr_tally(l,0,l.window[l.strstart-1]))&&j(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return g}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(I=s._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<H-1?l.strstart:H-1,G===y?(j(l,!0),l.strm.avail_out===0?vt:et):l.last_lit&&(j(l,!1),l.strm.avail_out===0)?g:q}function xt(l,G,K,I,A){this.good_length=l,this.max_lazy=G,this.nice_length=K,this.max_chain=I,this.func=A}function zt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*W),this.dyn_dtree=new o.Buf16(2*(2*B+1)),this.bl_tree=new o.Buf16(2*(2*Z+1)),gt(this.dyn_ltree),gt(this.dyn_dtree),gt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(X+1),this.heap=new o.Buf16(2*N+1),gt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*N+1),gt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ft(l){var G;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=_,(G=l.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?T:V,l.adler=G.wrap===2?0:1,G.last_flush=h,s._tr_init(G),d):_t(l,x)}function Nt(l){var G=Ft(l);return G===d&&function(K){K.window_size=2*K.w_size,gt(K.head),K.max_lazy_match=a[K.level].max_lazy,K.good_match=a[K.level].good_length,K.nice_match=a[K.level].nice_length,K.max_chain_length=a[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=H-1,K.match_available=0,K.ins_h=0}(l.state),G}function Dt(l,G,K,I,A,D){if(!l)return x;var Q=1;if(G===w&&(G=6),I<0?(Q=0,I=-I):15<I&&(Q=2,I-=16),A<1||F<A||K!==C||I<8||15<I||G<0||9<G||D<0||k<D)return _t(l,x);I===8&&(I=9);var tt=new zt;return(l.state=tt).strm=l,tt.wrap=Q,tt.gzhead=null,tt.w_bits=I,tt.w_size=1<<tt.w_bits,tt.w_mask=tt.w_size-1,tt.hash_bits=A+7,tt.hash_size=1<<tt.hash_bits,tt.hash_mask=tt.hash_size-1,tt.hash_shift=~~((tt.hash_bits+H-1)/H),tt.window=new o.Buf8(2*tt.w_size),tt.head=new o.Buf16(tt.hash_size),tt.prev=new o.Buf16(tt.w_size),tt.lit_bufsize=1<<A+6,tt.pending_buf_size=4*tt.lit_bufsize,tt.pending_buf=new o.Buf8(tt.pending_buf_size),tt.d_buf=1*tt.lit_bufsize,tt.l_buf=3*tt.lit_bufsize,tt.level=G,tt.strategy=D,tt.method=K,Nt(l)}a=[new xt(0,0,0,0,function(l,G){var K=65535;for(K>l.pending_buf_size-5&&(K=l.pending_buf_size-5);;){if(l.lookahead<=1){if(Pt(l),l.lookahead===0&&G===h)return g;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var I=l.block_start+K;if((l.strstart===0||l.strstart>=I)&&(l.lookahead=l.strstart-I,l.strstart=I,j(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-dt&&(j(l,!1),l.strm.avail_out===0))return g}return l.insert=0,G===y?(j(l,!0),l.strm.avail_out===0?vt:et):(l.strstart>l.block_start&&(j(l,!1),l.strm.avail_out),g)}),new xt(4,4,8,4,Ot),new xt(4,5,16,8,Ot),new xt(4,6,32,32,Ot),new xt(4,4,16,16,bt),new xt(8,16,32,32,bt),new xt(8,16,128,128,bt),new xt(8,32,128,256,bt),new xt(32,128,258,1024,bt),new xt(32,258,258,4096,bt)],n.deflateInit=function(l,G){return Dt(l,G,C,15,8,0)},n.deflateInit2=Dt,n.deflateReset=Nt,n.deflateResetKeep=Ft,n.deflateSetHeader=function(l,G){return l&&l.state?l.state.wrap!==2?x:(l.state.gzhead=G,d):x},n.deflate=function(l,G){var K,I,A,D;if(!l||!l.state||5<G||G<0)return l?_t(l,x):x;if(I=l.state,!l.output||!l.input&&l.avail_in!==0||I.status===666&&G!==y)return _t(l,l.avail_out===0?-5:x);if(I.strm=l,K=I.last_flush,I.last_flush=G,I.status===T)if(I.wrap===2)l.adler=0,yt(I,31),yt(I,139),yt(I,8),I.gzhead?(yt(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),yt(I,255&I.gzhead.time),yt(I,I.gzhead.time>>8&255),yt(I,I.gzhead.time>>16&255),yt(I,I.gzhead.time>>24&255),yt(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),yt(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(yt(I,255&I.gzhead.extra.length),yt(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(l.adler=m(l.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(yt(I,0),yt(I,0),yt(I,0),yt(I,0),yt(I,0),yt(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),yt(I,3),I.status=V);else{var Q=C+(I.w_bits-8<<4)<<8;Q|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(Q|=32),Q+=31-Q%31,I.status=V,lt(I,Q),I.strstart!==0&&(lt(I,l.adler>>>16),lt(I,65535&l.adler)),l.adler=1}if(I.status===69)if(I.gzhead.extra){for(A=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>A&&(l.adler=m(l.adler,I.pending_buf,I.pending-A,A)),M(l),A=I.pending,I.pending!==I.pending_buf_size));)yt(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>A&&(l.adler=m(l.adler,I.pending_buf,I.pending-A,A)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){A=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>A&&(l.adler=m(l.adler,I.pending_buf,I.pending-A,A)),M(l),A=I.pending,I.pending===I.pending_buf_size)){D=1;break}D=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,yt(I,D)}while(D!==0);I.gzhead.hcrc&&I.pending>A&&(l.adler=m(l.adler,I.pending_buf,I.pending-A,A)),D===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){A=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>A&&(l.adler=m(l.adler,I.pending_buf,I.pending-A,A)),M(l),A=I.pending,I.pending===I.pending_buf_size)){D=1;break}D=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,yt(I,D)}while(D!==0);I.gzhead.hcrc&&I.pending>A&&(l.adler=m(l.adler,I.pending_buf,I.pending-A,A)),D===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&M(l),I.pending+2<=I.pending_buf_size&&(yt(I,255&l.adler),yt(I,l.adler>>8&255),l.adler=0,I.status=V)):I.status=V),I.pending!==0){if(M(l),l.avail_out===0)return I.last_flush=-1,d}else if(l.avail_in===0&&at(G)<=at(K)&&G!==y)return _t(l,-5);if(I.status===666&&l.avail_in!==0)return _t(l,-5);if(l.avail_in!==0||I.lookahead!==0||G!==h&&I.status!==666){var tt=I.strategy===2?function(U,st){for(var ht;;){if(U.lookahead===0&&(Pt(U),U.lookahead===0)){if(st===h)return g;break}if(U.match_length=0,ht=s._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++,ht&&(j(U,!1),U.strm.avail_out===0))return g}return U.insert=0,st===y?(j(U,!0),U.strm.avail_out===0?vt:et):U.last_lit&&(j(U,!1),U.strm.avail_out===0)?g:q}(I,G):I.strategy===3?function(U,st){for(var ht,it,mt,v,u=U.window;;){if(U.lookahead<=rt){if(Pt(U),U.lookahead<=rt&&st===h)return g;if(U.lookahead===0)break}if(U.match_length=0,U.lookahead>=H&&0<U.strstart&&(it=u[mt=U.strstart-1])===u[++mt]&&it===u[++mt]&&it===u[++mt]){v=U.strstart+rt;do;while(it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&mt<v);U.match_length=rt-(v-mt),U.match_length>U.lookahead&&(U.match_length=U.lookahead)}if(U.match_length>=H?(ht=s._tr_tally(U,1,U.match_length-H),U.lookahead-=U.match_length,U.strstart+=U.match_length,U.match_length=0):(ht=s._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++),ht&&(j(U,!1),U.strm.avail_out===0))return g}return U.insert=0,st===y?(j(U,!0),U.strm.avail_out===0?vt:et):U.last_lit&&(j(U,!1),U.strm.avail_out===0)?g:q}(I,G):a[I.level].func(I,G);if(tt!==vt&&tt!==et||(I.status=666),tt===g||tt===vt)return l.avail_out===0&&(I.last_flush=-1),d;if(tt===q&&(G===1?s._tr_align(I):G!==5&&(s._tr_stored_block(I,0,0,!1),G===3&&(gt(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),M(l),l.avail_out===0))return I.last_flush=-1,d}return G!==y?d:I.wrap<=0?1:(I.wrap===2?(yt(I,255&l.adler),yt(I,l.adler>>8&255),yt(I,l.adler>>16&255),yt(I,l.adler>>24&255),yt(I,255&l.total_in),yt(I,l.total_in>>8&255),yt(I,l.total_in>>16&255),yt(I,l.total_in>>24&255)):(lt(I,l.adler>>>16),lt(I,65535&l.adler)),M(l),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?d:1)},n.deflateEnd=function(l){var G;return l&&l.state?(G=l.state.status)!==T&&G!==69&&G!==73&&G!==91&&G!==103&&G!==V&&G!==666?_t(l,x):(l.state=null,G===V?_t(l,-3):d):x},n.deflateSetDictionary=function(l,G){var K,I,A,D,Q,tt,U,st,ht=G.length;if(!l||!l.state||(D=(K=l.state).wrap)===2||D===1&&K.status!==T||K.lookahead)return x;for(D===1&&(l.adler=f(l.adler,G,ht,0)),K.wrap=0,ht>=K.w_size&&(D===0&&(gt(K.head),K.strstart=0,K.block_start=0,K.insert=0),st=new o.Buf8(K.w_size),o.arraySet(st,G,ht-K.w_size,K.w_size,0),G=st,ht=K.w_size),Q=l.avail_in,tt=l.next_in,U=l.input,l.avail_in=ht,l.next_in=0,l.input=G,Pt(K);K.lookahead>=H;){for(I=K.strstart,A=K.lookahead-(H-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[I+H-1])&K.hash_mask,K.prev[I&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=I,I++,--A;);K.strstart=I,K.lookahead=H-1,Pt(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=H-1,K.match_available=0,l.next_in=tt,l.input=U,l.avail_in=Q,K.wrap=D,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,n){r.exports=function(a,o){var s,f,m,p,h,y,d,x,w,k,_,C,F,N,B,Z,W,X,H,rt,dt,T,V,g,q;s=a.state,f=a.next_in,g=a.input,m=f+(a.avail_in-5),p=a.next_out,q=a.output,h=p-(o-a.avail_out),y=p+(a.avail_out-257),d=s.dmax,x=s.wsize,w=s.whave,k=s.wnext,_=s.window,C=s.hold,F=s.bits,N=s.lencode,B=s.distcode,Z=(1<<s.lenbits)-1,W=(1<<s.distbits)-1;t:do{F<15&&(C+=g[f++]<<F,F+=8,C+=g[f++]<<F,F+=8),X=N[C&Z];e:for(;;){if(C>>>=H=X>>>24,F-=H,(H=X>>>16&255)===0)q[p++]=65535&X;else{if(!(16&H)){if(!(64&H)){X=N[(65535&X)+(C&(1<<H)-1)];continue e}if(32&H){s.mode=12;break t}a.msg="invalid literal/length code",s.mode=30;break t}rt=65535&X,(H&=15)&&(F<H&&(C+=g[f++]<<F,F+=8),rt+=C&(1<<H)-1,C>>>=H,F-=H),F<15&&(C+=g[f++]<<F,F+=8,C+=g[f++]<<F,F+=8),X=B[C&W];r:for(;;){if(C>>>=H=X>>>24,F-=H,!(16&(H=X>>>16&255))){if(!(64&H)){X=B[(65535&X)+(C&(1<<H)-1)];continue r}a.msg="invalid distance code",s.mode=30;break t}if(dt=65535&X,F<(H&=15)&&(C+=g[f++]<<F,(F+=8)<H&&(C+=g[f++]<<F,F+=8)),d<(dt+=C&(1<<H)-1)){a.msg="invalid distance too far back",s.mode=30;break t}if(C>>>=H,F-=H,(H=p-h)<dt){if(w<(H=dt-H)&&s.sane){a.msg="invalid distance too far back",s.mode=30;break t}if(V=_,(T=0)===k){if(T+=x-H,H<rt){for(rt-=H;q[p++]=_[T++],--H;);T=p-dt,V=q}}else if(k<H){if(T+=x+k-H,(H-=k)<rt){for(rt-=H;q[p++]=_[T++],--H;);if(T=0,k<rt){for(rt-=H=k;q[p++]=_[T++],--H;);T=p-dt,V=q}}}else if(T+=k-H,H<rt){for(rt-=H;q[p++]=_[T++],--H;);T=p-dt,V=q}for(;2<rt;)q[p++]=V[T++],q[p++]=V[T++],q[p++]=V[T++],rt-=3;rt&&(q[p++]=V[T++],1<rt&&(q[p++]=V[T++]))}else{for(T=p-dt;q[p++]=q[T++],q[p++]=q[T++],q[p++]=q[T++],2<(rt-=3););rt&&(q[p++]=q[T++],1<rt&&(q[p++]=q[T++]))}break}}break}}while(f<m&&p<y);f-=rt=F>>3,C&=(1<<(F-=rt<<3))-1,a.next_in=f,a.next_out=p,a.avail_in=f<m?m-f+5:5-(f-m),a.avail_out=p<y?y-p+257:257-(p-y),s.hold=C,s.bits=F}},{}],49:[function(t,r,n){var a=t("../utils/common"),o=t("./adler32"),s=t("./crc32"),f=t("./inffast"),m=t("./inftrees"),p=1,h=2,y=0,d=-2,x=1,w=852,k=592;function _(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function F(T){var V;return T&&T.state?(V=T.state,T.total_in=T.total_out=V.total=0,T.msg="",V.wrap&&(T.adler=1&V.wrap),V.mode=x,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new a.Buf32(w),V.distcode=V.distdyn=new a.Buf32(k),V.sane=1,V.back=-1,y):d}function N(T){var V;return T&&T.state?((V=T.state).wsize=0,V.whave=0,V.wnext=0,F(T)):d}function B(T,V){var g,q;return T&&T.state?(q=T.state,V<0?(g=0,V=-V):(g=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?d:(q.window!==null&&q.wbits!==V&&(q.window=null),q.wrap=g,q.wbits=V,N(T))):d}function Z(T,V){var g,q;return T?(q=new C,(T.state=q).window=null,(g=B(T,V))!==y&&(T.state=null),g):d}var W,X,H=!0;function rt(T){if(H){var V;for(W=new a.Buf32(512),X=new a.Buf32(32),V=0;V<144;)T.lens[V++]=8;for(;V<256;)T.lens[V++]=9;for(;V<280;)T.lens[V++]=7;for(;V<288;)T.lens[V++]=8;for(m(p,T.lens,0,288,W,0,T.work,{bits:9}),V=0;V<32;)T.lens[V++]=5;m(h,T.lens,0,32,X,0,T.work,{bits:5}),H=!1}T.lencode=W,T.lenbits=9,T.distcode=X,T.distbits=5}function dt(T,V,g,q){var vt,et=T.state;return et.window===null&&(et.wsize=1<<et.wbits,et.wnext=0,et.whave=0,et.window=new a.Buf8(et.wsize)),q>=et.wsize?(a.arraySet(et.window,V,g-et.wsize,et.wsize,0),et.wnext=0,et.whave=et.wsize):(q<(vt=et.wsize-et.wnext)&&(vt=q),a.arraySet(et.window,V,g-q,vt,et.wnext),(q-=vt)?(a.arraySet(et.window,V,g-q,q,0),et.wnext=q,et.whave=et.wsize):(et.wnext+=vt,et.wnext===et.wsize&&(et.wnext=0),et.whave<et.wsize&&(et.whave+=vt))),0}n.inflateReset=N,n.inflateReset2=B,n.inflateResetKeep=F,n.inflateInit=function(T){return Z(T,15)},n.inflateInit2=Z,n.inflate=function(T,V){var g,q,vt,et,_t,at,gt,M,j,yt,lt,ft,Pt,Ot,bt,xt,zt,Ft,Nt,Dt,l,G,K,I,A=0,D=new a.Buf8(4),Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return d;(g=T.state).mode===12&&(g.mode=13),_t=T.next_out,vt=T.output,gt=T.avail_out,et=T.next_in,q=T.input,at=T.avail_in,M=g.hold,j=g.bits,yt=at,lt=gt,G=y;t:for(;;)switch(g.mode){case x:if(g.wrap===0){g.mode=13;break}for(;j<16;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(2&g.wrap&&M===35615){D[g.check=0]=255&M,D[1]=M>>>8&255,g.check=s(g.check,D,2,0),j=M=0,g.mode=2;break}if(g.flags=0,g.head&&(g.head.done=!1),!(1&g.wrap)||(((255&M)<<8)+(M>>8))%31){T.msg="incorrect header check",g.mode=30;break}if((15&M)!=8){T.msg="unknown compression method",g.mode=30;break}if(j-=4,l=8+(15&(M>>>=4)),g.wbits===0)g.wbits=l;else if(l>g.wbits){T.msg="invalid window size",g.mode=30;break}g.dmax=1<<l,T.adler=g.check=1,g.mode=512&M?10:12,j=M=0;break;case 2:for(;j<16;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(g.flags=M,(255&g.flags)!=8){T.msg="unknown compression method",g.mode=30;break}if(57344&g.flags){T.msg="unknown header flags set",g.mode=30;break}g.head&&(g.head.text=M>>8&1),512&g.flags&&(D[0]=255&M,D[1]=M>>>8&255,g.check=s(g.check,D,2,0)),j=M=0,g.mode=3;case 3:for(;j<32;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.head&&(g.head.time=M),512&g.flags&&(D[0]=255&M,D[1]=M>>>8&255,D[2]=M>>>16&255,D[3]=M>>>24&255,g.check=s(g.check,D,4,0)),j=M=0,g.mode=4;case 4:for(;j<16;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.head&&(g.head.xflags=255&M,g.head.os=M>>8),512&g.flags&&(D[0]=255&M,D[1]=M>>>8&255,g.check=s(g.check,D,2,0)),j=M=0,g.mode=5;case 5:if(1024&g.flags){for(;j<16;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.length=M,g.head&&(g.head.extra_len=M),512&g.flags&&(D[0]=255&M,D[1]=M>>>8&255,g.check=s(g.check,D,2,0)),j=M=0}else g.head&&(g.head.extra=null);g.mode=6;case 6:if(1024&g.flags&&(at<(ft=g.length)&&(ft=at),ft&&(g.head&&(l=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),a.arraySet(g.head.extra,q,et,ft,l)),512&g.flags&&(g.check=s(g.check,q,ft,et)),at-=ft,et+=ft,g.length-=ft),g.length))break t;g.length=0,g.mode=7;case 7:if(2048&g.flags){if(at===0)break t;for(ft=0;l=q[et+ft++],g.head&&l&&g.length<65536&&(g.head.name+=String.fromCharCode(l)),l&&ft<at;);if(512&g.flags&&(g.check=s(g.check,q,ft,et)),at-=ft,et+=ft,l)break t}else g.head&&(g.head.name=null);g.length=0,g.mode=8;case 8:if(4096&g.flags){if(at===0)break t;for(ft=0;l=q[et+ft++],g.head&&l&&g.length<65536&&(g.head.comment+=String.fromCharCode(l)),l&&ft<at;);if(512&g.flags&&(g.check=s(g.check,q,ft,et)),at-=ft,et+=ft,l)break t}else g.head&&(g.head.comment=null);g.mode=9;case 9:if(512&g.flags){for(;j<16;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(M!==(65535&g.check)){T.msg="header crc mismatch",g.mode=30;break}j=M=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),T.adler=g.check=0,g.mode=12;break;case 10:for(;j<32;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}T.adler=g.check=_(M),j=M=0,g.mode=11;case 11:if(g.havedict===0)return T.next_out=_t,T.avail_out=gt,T.next_in=et,T.avail_in=at,g.hold=M,g.bits=j,2;T.adler=g.check=1,g.mode=12;case 12:if(V===5||V===6)break t;case 13:if(g.last){M>>>=7&j,j-=7&j,g.mode=27;break}for(;j<3;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}switch(g.last=1&M,j-=1,3&(M>>>=1)){case 0:g.mode=14;break;case 1:if(rt(g),g.mode=20,V!==6)break;M>>>=2,j-=2;break t;case 2:g.mode=17;break;case 3:T.msg="invalid block type",g.mode=30}M>>>=2,j-=2;break;case 14:for(M>>>=7&j,j-=7&j;j<32;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if((65535&M)!=(M>>>16^65535)){T.msg="invalid stored block lengths",g.mode=30;break}if(g.length=65535&M,j=M=0,g.mode=15,V===6)break t;case 15:g.mode=16;case 16:if(ft=g.length){if(at<ft&&(ft=at),gt<ft&&(ft=gt),ft===0)break t;a.arraySet(vt,q,et,ft,_t),at-=ft,et+=ft,gt-=ft,_t+=ft,g.length-=ft;break}g.mode=12;break;case 17:for(;j<14;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(g.nlen=257+(31&M),M>>>=5,j-=5,g.ndist=1+(31&M),M>>>=5,j-=5,g.ncode=4+(15&M),M>>>=4,j-=4,286<g.nlen||30<g.ndist){T.msg="too many length or distance symbols",g.mode=30;break}g.have=0,g.mode=18;case 18:for(;g.have<g.ncode;){for(;j<3;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.lens[Q[g.have++]]=7&M,M>>>=3,j-=3}for(;g.have<19;)g.lens[Q[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,K={bits:g.lenbits},G=m(0,g.lens,0,19,g.lencode,0,g.work,K),g.lenbits=K.bits,G){T.msg="invalid code lengths set",g.mode=30;break}g.have=0,g.mode=19;case 19:for(;g.have<g.nlen+g.ndist;){for(;xt=(A=g.lencode[M&(1<<g.lenbits)-1])>>>16&255,zt=65535&A,!((bt=A>>>24)<=j);){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(zt<16)M>>>=bt,j-=bt,g.lens[g.have++]=zt;else{if(zt===16){for(I=bt+2;j<I;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(M>>>=bt,j-=bt,g.have===0){T.msg="invalid bit length repeat",g.mode=30;break}l=g.lens[g.have-1],ft=3+(3&M),M>>>=2,j-=2}else if(zt===17){for(I=bt+3;j<I;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}j-=bt,l=0,ft=3+(7&(M>>>=bt)),M>>>=3,j-=3}else{for(I=bt+7;j<I;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}j-=bt,l=0,ft=11+(127&(M>>>=bt)),M>>>=7,j-=7}if(g.have+ft>g.nlen+g.ndist){T.msg="invalid bit length repeat",g.mode=30;break}for(;ft--;)g.lens[g.have++]=l}}if(g.mode===30)break;if(g.lens[256]===0){T.msg="invalid code -- missing end-of-block",g.mode=30;break}if(g.lenbits=9,K={bits:g.lenbits},G=m(p,g.lens,0,g.nlen,g.lencode,0,g.work,K),g.lenbits=K.bits,G){T.msg="invalid literal/lengths set",g.mode=30;break}if(g.distbits=6,g.distcode=g.distdyn,K={bits:g.distbits},G=m(h,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,K),g.distbits=K.bits,G){T.msg="invalid distances set",g.mode=30;break}if(g.mode=20,V===6)break t;case 20:g.mode=21;case 21:if(6<=at&&258<=gt){T.next_out=_t,T.avail_out=gt,T.next_in=et,T.avail_in=at,g.hold=M,g.bits=j,f(T,lt),_t=T.next_out,vt=T.output,gt=T.avail_out,et=T.next_in,q=T.input,at=T.avail_in,M=g.hold,j=g.bits,g.mode===12&&(g.back=-1);break}for(g.back=0;xt=(A=g.lencode[M&(1<<g.lenbits)-1])>>>16&255,zt=65535&A,!((bt=A>>>24)<=j);){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(xt&&!(240&xt)){for(Ft=bt,Nt=xt,Dt=zt;xt=(A=g.lencode[Dt+((M&(1<<Ft+Nt)-1)>>Ft)])>>>16&255,zt=65535&A,!(Ft+(bt=A>>>24)<=j);){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}M>>>=Ft,j-=Ft,g.back+=Ft}if(M>>>=bt,j-=bt,g.back+=bt,g.length=zt,xt===0){g.mode=26;break}if(32&xt){g.back=-1,g.mode=12;break}if(64&xt){T.msg="invalid literal/length code",g.mode=30;break}g.extra=15&xt,g.mode=22;case 22:if(g.extra){for(I=g.extra;j<I;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.length+=M&(1<<g.extra)-1,M>>>=g.extra,j-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=23;case 23:for(;xt=(A=g.distcode[M&(1<<g.distbits)-1])>>>16&255,zt=65535&A,!((bt=A>>>24)<=j);){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(!(240&xt)){for(Ft=bt,Nt=xt,Dt=zt;xt=(A=g.distcode[Dt+((M&(1<<Ft+Nt)-1)>>Ft)])>>>16&255,zt=65535&A,!(Ft+(bt=A>>>24)<=j);){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}M>>>=Ft,j-=Ft,g.back+=Ft}if(M>>>=bt,j-=bt,g.back+=bt,64&xt){T.msg="invalid distance code",g.mode=30;break}g.offset=zt,g.extra=15&xt,g.mode=24;case 24:if(g.extra){for(I=g.extra;j<I;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.offset+=M&(1<<g.extra)-1,M>>>=g.extra,j-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){T.msg="invalid distance too far back",g.mode=30;break}g.mode=25;case 25:if(gt===0)break t;if(ft=lt-gt,g.offset>ft){if((ft=g.offset-ft)>g.whave&&g.sane){T.msg="invalid distance too far back",g.mode=30;break}Pt=ft>g.wnext?(ft-=g.wnext,g.wsize-ft):g.wnext-ft,ft>g.length&&(ft=g.length),Ot=g.window}else Ot=vt,Pt=_t-g.offset,ft=g.length;for(gt<ft&&(ft=gt),gt-=ft,g.length-=ft;vt[_t++]=Ot[Pt++],--ft;);g.length===0&&(g.mode=21);break;case 26:if(gt===0)break t;vt[_t++]=g.length,gt--,g.mode=21;break;case 27:if(g.wrap){for(;j<32;){if(at===0)break t;at--,M|=q[et++]<<j,j+=8}if(lt-=gt,T.total_out+=lt,g.total+=lt,lt&&(T.adler=g.check=g.flags?s(g.check,vt,lt,_t-lt):o(g.check,vt,lt,_t-lt)),lt=gt,(g.flags?M:_(M))!==g.check){T.msg="incorrect data check",g.mode=30;break}j=M=0}g.mode=28;case 28:if(g.wrap&&g.flags){for(;j<32;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(M!==(4294967295&g.total)){T.msg="incorrect length check",g.mode=30;break}j=M=0}g.mode=29;case 29:G=1;break t;case 30:G=-3;break t;case 31:return-4;case 32:default:return d}return T.next_out=_t,T.avail_out=gt,T.next_in=et,T.avail_in=at,g.hold=M,g.bits=j,(g.wsize||lt!==T.avail_out&&g.mode<30&&(g.mode<27||V!==4))&&dt(T,T.output,T.next_out,lt-T.avail_out)?(g.mode=31,-4):(yt-=T.avail_in,lt-=T.avail_out,T.total_in+=yt,T.total_out+=lt,g.total+=lt,g.wrap&&lt&&(T.adler=g.check=g.flags?s(g.check,vt,lt,T.next_out-lt):o(g.check,vt,lt,T.next_out-lt)),T.data_type=g.bits+(g.last?64:0)+(g.mode===12?128:0)+(g.mode===20||g.mode===15?256:0),(yt==0&&lt===0||V===4)&&G===y&&(G=-5),G)},n.inflateEnd=function(T){if(!T||!T.state)return d;var V=T.state;return V.window&&(V.window=null),T.state=null,y},n.inflateGetHeader=function(T,V){var g;return T&&T.state&&2&(g=T.state).wrap?((g.head=V).done=!1,y):d},n.inflateSetDictionary=function(T,V){var g,q=V.length;return T&&T.state?(g=T.state).wrap!==0&&g.mode!==11?d:g.mode===11&&o(1,V,q,0)!==g.check?-3:dt(T,V,q,q)?(g.mode=31,-4):(g.havedict=1,y):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,n){var a=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(p,h,y,d,x,w,k,_){var C,F,N,B,Z,W,X,H,rt,dt=_.bits,T=0,V=0,g=0,q=0,vt=0,et=0,_t=0,at=0,gt=0,M=0,j=null,yt=0,lt=new a.Buf16(16),ft=new a.Buf16(16),Pt=null,Ot=0;for(T=0;T<=15;T++)lt[T]=0;for(V=0;V<d;V++)lt[h[y+V]]++;for(vt=dt,q=15;1<=q&&lt[q]===0;q--);if(q<vt&&(vt=q),q===0)return x[w++]=20971520,x[w++]=20971520,_.bits=1,0;for(g=1;g<q&&lt[g]===0;g++);for(vt<g&&(vt=g),T=at=1;T<=15;T++)if(at<<=1,(at-=lt[T])<0)return-1;if(0<at&&(p===0||q!==1))return-1;for(ft[1]=0,T=1;T<15;T++)ft[T+1]=ft[T]+lt[T];for(V=0;V<d;V++)h[y+V]!==0&&(k[ft[h[y+V]]++]=V);if(W=p===0?(j=Pt=k,19):p===1?(j=o,yt-=257,Pt=s,Ot-=257,256):(j=f,Pt=m,-1),T=g,Z=w,_t=V=M=0,N=-1,B=(gt=1<<(et=vt))-1,p===1&&852<gt||p===2&&592<gt)return 1;for(;;){for(X=T-_t,rt=k[V]<W?(H=0,k[V]):k[V]>W?(H=Pt[Ot+k[V]],j[yt+k[V]]):(H=96,0),C=1<<T-_t,g=F=1<<et;x[Z+(M>>_t)+(F-=C)]=X<<24|H<<16|rt|0,F!==0;);for(C=1<<T-1;M&C;)C>>=1;if(C!==0?(M&=C-1,M+=C):M=0,V++,--lt[T]==0){if(T===q)break;T=h[y+k[V]]}if(vt<T&&(M&B)!==N){for(_t===0&&(_t=vt),Z+=g,at=1<<(et=T-_t);et+_t<q&&!((at-=lt[et+_t])<=0);)et++,at<<=1;if(gt+=1<<et,p===1&&852<gt||p===2&&592<gt)return 1;x[N=M&B]=vt<<24|et<<16|Z-w|0}}return M!==0&&(x[Z+M]=T-_t<<24|64<<16|0),_.bits=vt,0}},{"../utils/common":41}],51:[function(t,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,n){var a=t("../utils/common"),o=0,s=1;function f(A){for(var D=A.length;0<=--D;)A[D]=0}var m=0,p=29,h=256,y=h+1+p,d=30,x=19,w=2*y+1,k=15,_=16,C=7,F=256,N=16,B=17,Z=18,W=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],X=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],dt=new Array(2*(y+2));f(dt);var T=new Array(2*d);f(T);var V=new Array(512);f(V);var g=new Array(256);f(g);var q=new Array(p);f(q);var vt,et,_t,at=new Array(d);function gt(A,D,Q,tt,U){this.static_tree=A,this.extra_bits=D,this.extra_base=Q,this.elems=tt,this.max_length=U,this.has_stree=A&&A.length}function M(A,D){this.dyn_tree=A,this.max_code=0,this.stat_desc=D}function j(A){return A<256?V[A]:V[256+(A>>>7)]}function yt(A,D){A.pending_buf[A.pending++]=255&D,A.pending_buf[A.pending++]=D>>>8&255}function lt(A,D,Q){A.bi_valid>_-Q?(A.bi_buf|=D<<A.bi_valid&65535,yt(A,A.bi_buf),A.bi_buf=D>>_-A.bi_valid,A.bi_valid+=Q-_):(A.bi_buf|=D<<A.bi_valid&65535,A.bi_valid+=Q)}function ft(A,D,Q){lt(A,Q[2*D],Q[2*D+1])}function Pt(A,D){for(var Q=0;Q|=1&A,A>>>=1,Q<<=1,0<--D;);return Q>>>1}function Ot(A,D,Q){var tt,U,st=new Array(k+1),ht=0;for(tt=1;tt<=k;tt++)st[tt]=ht=ht+Q[tt-1]<<1;for(U=0;U<=D;U++){var it=A[2*U+1];it!==0&&(A[2*U]=Pt(st[it]++,it))}}function bt(A){var D;for(D=0;D<y;D++)A.dyn_ltree[2*D]=0;for(D=0;D<d;D++)A.dyn_dtree[2*D]=0;for(D=0;D<x;D++)A.bl_tree[2*D]=0;A.dyn_ltree[2*F]=1,A.opt_len=A.static_len=0,A.last_lit=A.matches=0}function xt(A){8<A.bi_valid?yt(A,A.bi_buf):0<A.bi_valid&&(A.pending_buf[A.pending++]=A.bi_buf),A.bi_buf=0,A.bi_valid=0}function zt(A,D,Q,tt){var U=2*D,st=2*Q;return A[U]<A[st]||A[U]===A[st]&&tt[D]<=tt[Q]}function Ft(A,D,Q){for(var tt=A.heap[Q],U=Q<<1;U<=A.heap_len&&(U<A.heap_len&&zt(D,A.heap[U+1],A.heap[U],A.depth)&&U++,!zt(D,tt,A.heap[U],A.depth));)A.heap[Q]=A.heap[U],Q=U,U<<=1;A.heap[Q]=tt}function Nt(A,D,Q){var tt,U,st,ht,it=0;if(A.last_lit!==0)for(;tt=A.pending_buf[A.d_buf+2*it]<<8|A.pending_buf[A.d_buf+2*it+1],U=A.pending_buf[A.l_buf+it],it++,tt===0?ft(A,U,D):(ft(A,(st=g[U])+h+1,D),(ht=W[st])!==0&&lt(A,U-=q[st],ht),ft(A,st=j(--tt),Q),(ht=X[st])!==0&&lt(A,tt-=at[st],ht)),it<A.last_lit;);ft(A,F,D)}function Dt(A,D){var Q,tt,U,st=D.dyn_tree,ht=D.stat_desc.static_tree,it=D.stat_desc.has_stree,mt=D.stat_desc.elems,v=-1;for(A.heap_len=0,A.heap_max=w,Q=0;Q<mt;Q++)st[2*Q]!==0?(A.heap[++A.heap_len]=v=Q,A.depth[Q]=0):st[2*Q+1]=0;for(;A.heap_len<2;)st[2*(U=A.heap[++A.heap_len]=v<2?++v:0)]=1,A.depth[U]=0,A.opt_len--,it&&(A.static_len-=ht[2*U+1]);for(D.max_code=v,Q=A.heap_len>>1;1<=Q;Q--)Ft(A,st,Q);for(U=mt;Q=A.heap[1],A.heap[1]=A.heap[A.heap_len--],Ft(A,st,1),tt=A.heap[1],A.heap[--A.heap_max]=Q,A.heap[--A.heap_max]=tt,st[2*U]=st[2*Q]+st[2*tt],A.depth[U]=(A.depth[Q]>=A.depth[tt]?A.depth[Q]:A.depth[tt])+1,st[2*Q+1]=st[2*tt+1]=U,A.heap[1]=U++,Ft(A,st,1),2<=A.heap_len;);A.heap[--A.heap_max]=A.heap[1],function(u,c){var E,z,$,Y,wt,Bt,Et=c.dyn_tree,At=c.max_code,St=c.stat_desc.static_tree,$e=c.stat_desc.has_stree,Zt=c.stat_desc.extra_bits,Se=c.stat_desc.extra_base,ne=c.stat_desc.max_length,ie=0;for(Y=0;Y<=k;Y++)u.bl_count[Y]=0;for(Et[2*u.heap[u.heap_max]+1]=0,E=u.heap_max+1;E<w;E++)ne<(Y=Et[2*Et[2*(z=u.heap[E])+1]+1]+1)&&(Y=ne,ie++),Et[2*z+1]=Y,At<z||(u.bl_count[Y]++,wt=0,Se<=z&&(wt=Zt[z-Se]),Bt=Et[2*z],u.opt_len+=Bt*(Y+wt),$e&&(u.static_len+=Bt*(St[2*z+1]+wt)));if(ie!==0){do{for(Y=ne-1;u.bl_count[Y]===0;)Y--;u.bl_count[Y]--,u.bl_count[Y+1]+=2,u.bl_count[ne]--,ie-=2}while(0<ie);for(Y=ne;Y!==0;Y--)for(z=u.bl_count[Y];z!==0;)At<($=u.heap[--E])||(Et[2*$+1]!==Y&&(u.opt_len+=(Y-Et[2*$+1])*Et[2*$],Et[2*$+1]=Y),z--)}}(A,D),Ot(st,v,A.bl_count)}function l(A,D,Q){var tt,U,st=-1,ht=D[1],it=0,mt=7,v=4;for(ht===0&&(mt=138,v=3),D[2*(Q+1)+1]=65535,tt=0;tt<=Q;tt++)U=ht,ht=D[2*(tt+1)+1],++it<mt&&U===ht||(it<v?A.bl_tree[2*U]+=it:U!==0?(U!==st&&A.bl_tree[2*U]++,A.bl_tree[2*N]++):it<=10?A.bl_tree[2*B]++:A.bl_tree[2*Z]++,st=U,v=(it=0)===ht?(mt=138,3):U===ht?(mt=6,3):(mt=7,4))}function G(A,D,Q){var tt,U,st=-1,ht=D[1],it=0,mt=7,v=4;for(ht===0&&(mt=138,v=3),tt=0;tt<=Q;tt++)if(U=ht,ht=D[2*(tt+1)+1],!(++it<mt&&U===ht)){if(it<v)for(;ft(A,U,A.bl_tree),--it!=0;);else U!==0?(U!==st&&(ft(A,U,A.bl_tree),it--),ft(A,N,A.bl_tree),lt(A,it-3,2)):it<=10?(ft(A,B,A.bl_tree),lt(A,it-3,3)):(ft(A,Z,A.bl_tree),lt(A,it-11,7));st=U,v=(it=0)===ht?(mt=138,3):U===ht?(mt=6,3):(mt=7,4)}}f(at);var K=!1;function I(A,D,Q,tt){lt(A,(m<<1)+(tt?1:0),3),function(U,st,ht,it){xt(U),yt(U,ht),yt(U,~ht),a.arraySet(U.pending_buf,U.window,st,ht,U.pending),U.pending+=ht}(A,D,Q)}n._tr_init=function(A){K||(function(){var D,Q,tt,U,st,ht=new Array(k+1);for(U=tt=0;U<p-1;U++)for(q[U]=tt,D=0;D<1<<W[U];D++)g[tt++]=U;for(g[tt-1]=U,U=st=0;U<16;U++)for(at[U]=st,D=0;D<1<<X[U];D++)V[st++]=U;for(st>>=7;U<d;U++)for(at[U]=st<<7,D=0;D<1<<X[U]-7;D++)V[256+st++]=U;for(Q=0;Q<=k;Q++)ht[Q]=0;for(D=0;D<=143;)dt[2*D+1]=8,D++,ht[8]++;for(;D<=255;)dt[2*D+1]=9,D++,ht[9]++;for(;D<=279;)dt[2*D+1]=7,D++,ht[7]++;for(;D<=287;)dt[2*D+1]=8,D++,ht[8]++;for(Ot(dt,y+1,ht),D=0;D<d;D++)T[2*D+1]=5,T[2*D]=Pt(D,5);vt=new gt(dt,W,h+1,y,k),et=new gt(T,X,0,d,k),_t=new gt(new Array(0),H,0,x,C)}(),K=!0),A.l_desc=new M(A.dyn_ltree,vt),A.d_desc=new M(A.dyn_dtree,et),A.bl_desc=new M(A.bl_tree,_t),A.bi_buf=0,A.bi_valid=0,bt(A)},n._tr_stored_block=I,n._tr_flush_block=function(A,D,Q,tt){var U,st,ht=0;0<A.level?(A.strm.data_type===2&&(A.strm.data_type=function(it){var mt,v=4093624447;for(mt=0;mt<=31;mt++,v>>>=1)if(1&v&&it.dyn_ltree[2*mt]!==0)return o;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return s;for(mt=32;mt<h;mt++)if(it.dyn_ltree[2*mt]!==0)return s;return o}(A)),Dt(A,A.l_desc),Dt(A,A.d_desc),ht=function(it){var mt;for(l(it,it.dyn_ltree,it.l_desc.max_code),l(it,it.dyn_dtree,it.d_desc.max_code),Dt(it,it.bl_desc),mt=x-1;3<=mt&&it.bl_tree[2*rt[mt]+1]===0;mt--);return it.opt_len+=3*(mt+1)+5+5+4,mt}(A),U=A.opt_len+3+7>>>3,(st=A.static_len+3+7>>>3)<=U&&(U=st)):U=st=Q+5,Q+4<=U&&D!==-1?I(A,D,Q,tt):A.strategy===4||st===U?(lt(A,2+(tt?1:0),3),Nt(A,dt,T)):(lt(A,4+(tt?1:0),3),function(it,mt,v,u){var c;for(lt(it,mt-257,5),lt(it,v-1,5),lt(it,u-4,4),c=0;c<u;c++)lt(it,it.bl_tree[2*rt[c]+1],3);G(it,it.dyn_ltree,mt-1),G(it,it.dyn_dtree,v-1)}(A,A.l_desc.max_code+1,A.d_desc.max_code+1,ht+1),Nt(A,A.dyn_ltree,A.dyn_dtree)),bt(A),tt&&xt(A)},n._tr_tally=function(A,D,Q){return A.pending_buf[A.d_buf+2*A.last_lit]=D>>>8&255,A.pending_buf[A.d_buf+2*A.last_lit+1]=255&D,A.pending_buf[A.l_buf+A.last_lit]=255&Q,A.last_lit++,D===0?A.dyn_ltree[2*Q]++:(A.matches++,D--,A.dyn_ltree[2*(g[Q]+h+1)]++,A.dyn_dtree[2*j(D)]++),A.last_lit===A.lit_bufsize-1},n._tr_align=function(A){lt(A,2,3),ft(A,F,dt),function(D){D.bi_valid===16?(yt(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):8<=D.bi_valid&&(D.pending_buf[D.pending++]=255&D.bi_buf,D.bi_buf>>=8,D.bi_valid-=8)}(A)}},{"../utils/common":41}],53:[function(t,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,n){(function(a){(function(o,s){if(!o.setImmediate){var f,m,p,h,y=1,d={},x=!1,w=o.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(o);k=k&&k.setTimeout?k:o,f={}.toString.call(o.process)==="[object process]"?function(N){process.nextTick(function(){C(N)})}:function(){if(o.postMessage&&!o.importScripts){var N=!0,B=o.onmessage;return o.onmessage=function(){N=!1},o.postMessage("","*"),o.onmessage=B,N}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",F,!1):o.attachEvent("onmessage",F),function(N){o.postMessage(h+N,"*")}):o.MessageChannel?((p=new MessageChannel).port1.onmessage=function(N){C(N.data)},function(N){p.port2.postMessage(N)}):w&&"onreadystatechange"in w.createElement("script")?(m=w.documentElement,function(N){var B=w.createElement("script");B.onreadystatechange=function(){C(N),B.onreadystatechange=null,m.removeChild(B),B=null},m.appendChild(B)}):function(N){setTimeout(C,0,N)},k.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var B=new Array(arguments.length-1),Z=0;Z<B.length;Z++)B[Z]=arguments[Z+1];var W={callback:N,args:B};return d[y]=W,f(y),y++},k.clearImmediate=_}function _(N){delete d[N]}function C(N){if(x)setTimeout(C,0,N);else{var B=d[N];if(B){x=!0;try{(function(Z){var W=Z.callback,X=Z.args;switch(X.length){case 0:W();break;case 1:W(X[0]);break;case 2:W(X[0],X[1]);break;case 3:W(X[0],X[1],X[2]);break;default:W.apply(s,X)}})(B)}finally{_(N),x=!1}}}}function F(N){N.source===o&&typeof N.data=="string"&&N.data.indexOf(h)===0&&C(+N.data.slice(h.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(gn);var Bs=gn.exports;const Nr=dr(Bs),Ts={},{data:Qe}=vr("zip");class Ps{constructor(e){this.disk=e}async zip(e,t="compress.zip"){t=this.disk.fmtPath(t);const r=new Nr,{add:n,run:a}=hs();for(let m in e)m=this.disk.fmtPath(m),n(this.zipSingleFile(r,m));await a();const o=await r.generateAsync({type:"uint8array"}),{parent:s}=Gt(t),f=Oe([t],s,await this.disk.ls(s)||[]);this.disk.createFile(f[t],Me(Qe,o))}async zipSingleFile(e,t){const r=await this.disk.getType(t);if(r!=="empty")if(r==="dir"){const n=e.folder(t);if(!n)return;let a=await this.disk.ls(t)||[];a=a.map(o=>Ts.join(t,o));for(const o of a)this.zipSingleFile(n,o)}else{const n=await this.disk.read(t);if(!n)return;e.file(t,n,{binary:!0})}}async unzip(e,t){const r=await this.disk.read(e),n=this.getZipData(r);if(!n)return;e=this.disk.fmtPath(e);const a=await this.unzipU8Arr(n);t=t?this.disk.fmtPath(t):this.disk.current;const o=[];for(const f of a)f.path.indexOf("/")===-1&&o.push(f.path);const s=Oe(o,t,await this.disk.ls(t)||[]);for(const f of a){const{parent:m,path:p}=Gt(f.path);let h=s[m];m&&(h=p.replace(m,h)),f.isDir?await this.disk.createDir(h):this.disk.createFile(f.path,f.data)}}async unzipU8Arr(e,t){const r=await Nr.loadAsync(e);let n=0;const a=r.files,o=Object.keys(a).length,s=[];for(const f in r.files){const m=r.files[f],p=await m.async("uint8array");n++;const h={curName:m.name,count:n,curIndex:n,curSize:o,data:p,path:f,isDir:m.dir};t==null||t(h),s.push(h)}return s}async isZip(e){const t=await this.disk.read(e);return t?this.isZipData(t):!1}isZipData(e){return yn(e,Qe)}getZipData(e){return e&&this.isZipData(e)?e.slice(Qe.byteLength):null}}var _r={exports:{}},ye=typeof Reflect=="object"?Reflect:null,Ur=ye&&typeof ye.apply=="function"?ye.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},Be;ye&&typeof ye.ownKeys=="function"?Be=ye.ownKeys:Object.getOwnPropertySymbols?Be=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Be=function(e){return Object.getOwnPropertyNames(e)};function Fs(i){console&&console.warn&&console.warn(i)}var vn=Number.isNaN||function(e){return e!==e};function Tt(){Tt.init.call(this)}_r.exports=Tt;_r.exports.once=Ds;Tt.EventEmitter=Tt;Tt.prototype._events=void 0;Tt.prototype._eventsCount=0;Tt.prototype._maxListeners=void 0;var Mr=10;function je(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(Tt,"defaultMaxListeners",{enumerable:!0,get:function(){return Mr},set:function(i){if(typeof i!="number"||i<0||vn(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Mr=i}});Tt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Tt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||vn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function wn(i){return i._maxListeners===void 0?Tt.defaultMaxListeners:i._maxListeners}Tt.prototype.getMaxListeners=function(){return wn(this)};Tt.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n=e==="error",a=this._events;if(a!==void 0)n=n&&a.error===void 0;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var f=a[e];if(f===void 0)return!1;if(typeof f=="function")Ur(f,this,t);else for(var m=f.length,p=En(f,m),r=0;r<m;++r)Ur(p[r],this,t);return!0};function _n(i,e,t,r){var n,a,o;if(je(t),a=i._events,a===void 0?(a=i._events=Object.create(null),i._eventsCount=0):(a.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),a=i._events),o=a[e]),o===void 0)o=a[e]=t,++i._eventsCount;else if(typeof o=="function"?o=a[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),n=wn(i),n>0&&o.length>n&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=i,s.type=e,s.count=o.length,Fs(s)}return i}Tt.prototype.addListener=function(e,t){return _n(this,e,t,!1)};Tt.prototype.on=Tt.prototype.addListener;Tt.prototype.prependListener=function(e,t){return _n(this,e,t,!0)};function zs(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bn(i,e,t){var r={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},n=zs.bind(r);return n.listener=t,r.wrapFn=n,n}Tt.prototype.once=function(e,t){return je(t),this.on(e,bn(this,e,t)),this};Tt.prototype.prependOnceListener=function(e,t){return je(t),this.prependListener(e,bn(this,e,t)),this};Tt.prototype.removeListener=function(e,t){var r,n,a,o,s;if(je(t),n=this._events,n===void 0)return this;if(r=n[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(a=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,a=o;break}if(a<0)return this;a===0?r.shift():Os(r,a),r.length===1&&(n[e]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",e,s||t)}return this};Tt.prototype.off=Tt.prototype.removeListener;Tt.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var a=Object.keys(r),o;for(n=0;n<a.length;++n)o=a[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this};function kn(i,e,t){var r=i._events;if(r===void 0)return[];var n=r[e];return n===void 0?[]:typeof n=="function"?t?[n.listener||n]:[n]:t?Rs(n):En(n,n.length)}Tt.prototype.listeners=function(e){return kn(this,e,!0)};Tt.prototype.rawListeners=function(e){return kn(this,e,!1)};Tt.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):xn.call(i,e)};Tt.prototype.listenerCount=xn;function xn(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Tt.prototype.eventNames=function(){return this._eventsCount>0?Be(this._events):[]};function En(i,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=i[r];return t}function Os(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function Rs(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function Ds(i,e){return new Promise(function(t,r){function n(o){i.removeListener(e,a),r(o)}function a(){typeof i.removeListener=="function"&&i.removeListener("error",n),t([].slice.call(arguments))}Sn(i,e,a,{once:!0}),e!=="error"&&Ls(i,n,{once:!0})})}function Ls(i,e,t){typeof i.on=="function"&&Sn(i,"error",e,t)}function Sn(i,e,t,r){if(typeof i.on=="function")r.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function n(a){r.once&&i.removeEventListener(e,n),t(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var Cn=_r.exports,ee=(i=>(i[i.Create=0]="Create",i[i.Remove=1]="Remove",i[i.Change=2]="Change",i))(ee||{}),cr={},We={};We.byteLength=Ms;We.toByteArray=Ws;We.fromByteArray=Zs;var Vt=[],$t=[],Ns=typeof Uint8Array<"u"?Uint8Array:Array,tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var he=0,Us=tr.length;he<Us;++he)Vt[he]=tr[he],$t[tr.charCodeAt(he)]=he;$t[45]=62;$t[95]=63;function An(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Ms(i){var e=An(i),t=e[0],r=e[1];return(t+r)*3/4-r}function js(i,e,t){return(e+t)*3/4-t}function Ws(i){var e,t=An(i),r=t[0],n=t[1],a=new Ns(js(i,r,n)),o=0,s=n>0?r-4:r,f;for(f=0;f<s;f+=4)e=$t[i.charCodeAt(f)]<<18|$t[i.charCodeAt(f+1)]<<12|$t[i.charCodeAt(f+2)]<<6|$t[i.charCodeAt(f+3)],a[o++]=e>>16&255,a[o++]=e>>8&255,a[o++]=e&255;return n===2&&(e=$t[i.charCodeAt(f)]<<2|$t[i.charCodeAt(f+1)]>>4,a[o++]=e&255),n===1&&(e=$t[i.charCodeAt(f)]<<10|$t[i.charCodeAt(f+1)]<<4|$t[i.charCodeAt(f+2)]>>2,a[o++]=e>>8&255,a[o++]=e&255),a}function $s(i){return Vt[i>>18&63]+Vt[i>>12&63]+Vt[i>>6&63]+Vt[i&63]}function Hs(i,e,t){for(var r,n=[],a=e;a<t;a+=3)r=(i[a]<<16&16711680)+(i[a+1]<<8&65280)+(i[a+2]&255),n.push($s(r));return n.join("")}function Zs(i){for(var e,t=i.length,r=t%3,n=[],a=16383,o=0,s=t-r;o<s;o+=a)n.push(Hs(i,o,o+a>s?s:o+a));return r===1?(e=i[t-1],n.push(Vt[e>>2]+Vt[e<<4&63]+"==")):r===2&&(e=(i[t-2]<<8)+i[t-1],n.push(Vt[e>>10]+Vt[e>>4&63]+Vt[e<<2&63]+"=")),n.join("")}var br={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */br.read=function(i,e,t,r,n){var a,o,s=n*8-r-1,f=(1<<s)-1,m=f>>1,p=-7,h=t?n-1:0,y=t?-1:1,d=i[e+h];for(h+=y,a=d&(1<<-p)-1,d>>=-p,p+=s;p>0;a=a*256+i[e+h],h+=y,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=r;p>0;o=o*256+i[e+h],h+=y,p-=8);if(a===0)a=1-m;else{if(a===f)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),a=a-m}return(d?-1:1)*o*Math.pow(2,a-r)};br.write=function(i,e,t,r,n,a){var o,s,f,m=a*8-n-1,p=(1<<m)-1,h=p>>1,y=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,x=r?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+h>=1?e+=y/f:e+=y*Math.pow(2,1-h),e*f>=2&&(o++,f/=2),o+h>=p?(s=0,o=p):o+h>=1?(s=(e*f-1)*Math.pow(2,n),o=o+h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;i[t+d]=s&255,d+=x,s/=256,n-=8);for(o=o<<n|s,m+=n;m>0;i[t+d]=o&255,d+=x,o/=256,m-=8);i[t+d-x]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=We,t=br,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=s,i.SlowBuffer=C,i.INSPECT_MAX_BYTES=50;const n=2147483647;i.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const v=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(v,u),v.foo()===42}catch(v){return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(v){if(v>n)throw new RangeError('The value "'+v+'" is invalid for option "size"');const u=new Uint8Array(v);return Object.setPrototypeOf(u,s.prototype),u}function s(v,u,c){if(typeof v=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(v)}return f(v,u,c)}s.poolSize=8192;function f(v,u,c){if(typeof v=="string")return y(v,u);if(ArrayBuffer.isView(v))return x(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(U(v,ArrayBuffer)||v&&U(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(U(v,SharedArrayBuffer)||v&&U(v.buffer,SharedArrayBuffer)))return w(v,u,c);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const E=v.valueOf&&v.valueOf();if(E!=null&&E!==v)return s.from(E,u,c);const z=k(v);if(z)return z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return s.from(v[Symbol.toPrimitive]("string"),u,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}s.from=function(v,u,c){return f(v,u,c)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function m(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function p(v,u,c){return m(v),v<=0?o(v):u!==void 0?typeof c=="string"?o(v).fill(u,c):o(v).fill(u):o(v)}s.alloc=function(v,u,c){return p(v,u,c)};function h(v){return m(v),o(v<0?0:_(v)|0)}s.allocUnsafe=function(v){return h(v)},s.allocUnsafeSlow=function(v){return h(v)};function y(v,u){if((typeof u!="string"||u==="")&&(u="utf8"),!s.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const c=F(v,u)|0;let E=o(c);const z=E.write(v,u);return z!==c&&(E=E.slice(0,z)),E}function d(v){const u=v.length<0?0:_(v.length)|0,c=o(u);for(let E=0;E<u;E+=1)c[E]=v[E]&255;return c}function x(v){if(U(v,Uint8Array)){const u=new Uint8Array(v);return w(u.buffer,u.byteOffset,u.byteLength)}return d(v)}function w(v,u,c){if(u<0||v.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<u+(c||0))throw new RangeError('"length" is outside of buffer bounds');let E;return u===void 0&&c===void 0?E=new Uint8Array(v):c===void 0?E=new Uint8Array(v,u):E=new Uint8Array(v,u,c),Object.setPrototypeOf(E,s.prototype),E}function k(v){if(s.isBuffer(v)){const u=_(v.length)|0,c=o(u);return c.length===0||v.copy(c,0,0,u),c}if(v.length!==void 0)return typeof v.length!="number"||st(v.length)?o(0):d(v);if(v.type==="Buffer"&&Array.isArray(v.data))return d(v.data)}function _(v){if(v>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return v|0}function C(v){return+v!=v&&(v=0),s.alloc(+v)}s.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==s.prototype},s.compare=function(u,c){if(U(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),U(c,Uint8Array)&&(c=s.from(c,c.offset,c.byteLength)),!s.isBuffer(u)||!s.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===c)return 0;let E=u.length,z=c.length;for(let $=0,Y=Math.min(E,z);$<Y;++$)if(u[$]!==c[$]){E=u[$],z=c[$];break}return E<z?-1:z<E?1:0},s.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(u,c){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return s.alloc(0);let E;if(c===void 0)for(c=0,E=0;E<u.length;++E)c+=u[E].length;const z=s.allocUnsafe(c);let $=0;for(E=0;E<u.length;++E){let Y=u[E];if(U(Y,Uint8Array))$+Y.length>z.length?(s.isBuffer(Y)||(Y=s.from(Y)),Y.copy(z,$)):Uint8Array.prototype.set.call(z,Y,$);else if(s.isBuffer(Y))Y.copy(z,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=Y.length}return z};function F(v,u){if(s.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||U(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const c=v.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&c===0)return 0;let z=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return I(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Q(v).length;default:if(z)return E?-1:I(v).length;u=(""+u).toLowerCase(),z=!0}}s.byteLength=F;function N(v,u,c){let E=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,u>>>=0,c<=u))return"";for(v||(v="utf8");;)switch(v){case"hex":return at(this,u,c);case"utf8":case"utf-8":return g(this,u,c);case"ascii":return et(this,u,c);case"latin1":case"binary":return _t(this,u,c);case"base64":return V(this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,u,c);default:if(E)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),E=!0}}s.prototype._isBuffer=!0;function B(v,u,c){const E=v[u];v[u]=v[c],v[c]=E}s.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<u;c+=2)B(this,c,c+1);return this},s.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<u;c+=4)B(this,c,c+3),B(this,c+1,c+2);return this},s.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<u;c+=8)B(this,c,c+7),B(this,c+1,c+6),B(this,c+2,c+5),B(this,c+3,c+4);return this},s.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?g(this,0,u):N.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(u){if(!s.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:s.compare(this,u)===0},s.prototype.inspect=function(){let u="";const c=i.INSPECT_MAX_BYTES;return u=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(u+=" ... "),"<Buffer "+u+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(u,c,E,z,$){if(U(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),!s.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(c===void 0&&(c=0),E===void 0&&(E=u?u.length:0),z===void 0&&(z=0),$===void 0&&($=this.length),c<0||E>u.length||z<0||$>this.length)throw new RangeError("out of range index");if(z>=$&&c>=E)return 0;if(z>=$)return-1;if(c>=E)return 1;if(c>>>=0,E>>>=0,z>>>=0,$>>>=0,this===u)return 0;let Y=$-z,wt=E-c;const Bt=Math.min(Y,wt),Et=this.slice(z,$),At=u.slice(c,E);for(let St=0;St<Bt;++St)if(Et[St]!==At[St]){Y=Et[St],wt=At[St];break}return Y<wt?-1:wt<Y?1:0};function Z(v,u,c,E,z){if(v.length===0)return-1;if(typeof c=="string"?(E=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,st(c)&&(c=z?0:v.length-1),c<0&&(c=v.length+c),c>=v.length){if(z)return-1;c=v.length-1}else if(c<0)if(z)c=0;else return-1;if(typeof u=="string"&&(u=s.from(u,E)),s.isBuffer(u))return u.length===0?-1:W(v,u,c,E,z);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(v,u,c):Uint8Array.prototype.lastIndexOf.call(v,u,c):W(v,[u],c,E,z);throw new TypeError("val must be string, number or Buffer")}function W(v,u,c,E,z){let $=1,Y=v.length,wt=u.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(v.length<2||u.length<2)return-1;$=2,Y/=2,wt/=2,c/=2}function Bt(At,St){return $===1?At[St]:At.readUInt16BE(St*$)}let Et;if(z){let At=-1;for(Et=c;Et<Y;Et++)if(Bt(v,Et)===Bt(u,At===-1?0:Et-At)){if(At===-1&&(At=Et),Et-At+1===wt)return At*$}else At!==-1&&(Et-=Et-At),At=-1}else for(c+wt>Y&&(c=Y-wt),Et=c;Et>=0;Et--){let At=!0;for(let St=0;St<wt;St++)if(Bt(v,Et+St)!==Bt(u,St)){At=!1;break}if(At)return Et}return-1}s.prototype.includes=function(u,c,E){return this.indexOf(u,c,E)!==-1},s.prototype.indexOf=function(u,c,E){return Z(this,u,c,E,!0)},s.prototype.lastIndexOf=function(u,c,E){return Z(this,u,c,E,!1)};function X(v,u,c,E){c=Number(c)||0;const z=v.length-c;E?(E=Number(E),E>z&&(E=z)):E=z;const $=u.length;E>$/2&&(E=$/2);let Y;for(Y=0;Y<E;++Y){const wt=parseInt(u.substr(Y*2,2),16);if(st(wt))return Y;v[c+Y]=wt}return Y}function H(v,u,c,E){return tt(I(u,v.length-c),v,c,E)}function rt(v,u,c,E){return tt(A(u),v,c,E)}function dt(v,u,c,E){return tt(Q(u),v,c,E)}function T(v,u,c,E){return tt(D(u,v.length-c),v,c,E)}s.prototype.write=function(u,c,E,z){if(c===void 0)z="utf8",E=this.length,c=0;else if(E===void 0&&typeof c=="string")z=c,E=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(E)?(E=E>>>0,z===void 0&&(z="utf8")):(z=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-c;if((E===void 0||E>$)&&(E=$),u.length>0&&(E<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");let Y=!1;for(;;)switch(z){case"hex":return X(this,u,c,E);case"utf8":case"utf-8":return H(this,u,c,E);case"ascii":case"latin1":case"binary":return rt(this,u,c,E);case"base64":return dt(this,u,c,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,u,c,E);default:if(Y)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),Y=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(v,u,c){return u===0&&c===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(u,c))}function g(v,u,c){c=Math.min(v.length,c);const E=[];let z=u;for(;z<c;){const $=v[z];let Y=null,wt=$>239?4:$>223?3:$>191?2:1;if(z+wt<=c){let Bt,Et,At,St;switch(wt){case 1:$<128&&(Y=$);break;case 2:Bt=v[z+1],(Bt&192)===128&&(St=($&31)<<6|Bt&63,St>127&&(Y=St));break;case 3:Bt=v[z+1],Et=v[z+2],(Bt&192)===128&&(Et&192)===128&&(St=($&15)<<12|(Bt&63)<<6|Et&63,St>2047&&(St<55296||St>57343)&&(Y=St));break;case 4:Bt=v[z+1],Et=v[z+2],At=v[z+3],(Bt&192)===128&&(Et&192)===128&&(At&192)===128&&(St=($&15)<<18|(Bt&63)<<12|(Et&63)<<6|At&63,St>65535&&St<1114112&&(Y=St))}}Y===null?(Y=65533,wt=1):Y>65535&&(Y-=65536,E.push(Y>>>10&1023|55296),Y=56320|Y&1023),E.push(Y),z+=wt}return vt(E)}const q=4096;function vt(v){const u=v.length;if(u<=q)return String.fromCharCode.apply(String,v);let c="",E=0;for(;E<u;)c+=String.fromCharCode.apply(String,v.slice(E,E+=q));return c}function et(v,u,c){let E="";c=Math.min(v.length,c);for(let z=u;z<c;++z)E+=String.fromCharCode(v[z]&127);return E}function _t(v,u,c){let E="";c=Math.min(v.length,c);for(let z=u;z<c;++z)E+=String.fromCharCode(v[z]);return E}function at(v,u,c){const E=v.length;(!u||u<0)&&(u=0),(!c||c<0||c>E)&&(c=E);let z="";for(let $=u;$<c;++$)z+=ht[v[$]];return z}function gt(v,u,c){const E=v.slice(u,c);let z="";for(let $=0;$<E.length-1;$+=2)z+=String.fromCharCode(E[$]+E[$+1]*256);return z}s.prototype.slice=function(u,c){const E=this.length;u=~~u,c=c===void 0?E:~~c,u<0?(u+=E,u<0&&(u=0)):u>E&&(u=E),c<0?(c+=E,c<0&&(c=0)):c>E&&(c=E),c<u&&(c=u);const z=this.subarray(u,c);return Object.setPrototypeOf(z,s.prototype),z};function M(v,u,c){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+u>c)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(u,c,E){u=u>>>0,c=c>>>0,E||M(u,c,this.length);let z=this[u],$=1,Y=0;for(;++Y<c&&($*=256);)z+=this[u+Y]*$;return z},s.prototype.readUintBE=s.prototype.readUIntBE=function(u,c,E){u=u>>>0,c=c>>>0,E||M(u,c,this.length);let z=this[u+--c],$=1;for(;c>0&&($*=256);)z+=this[u+--c]*$;return z},s.prototype.readUint8=s.prototype.readUInt8=function(u,c){return u=u>>>0,c||M(u,1,this.length),this[u]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(u,c){return u=u>>>0,c||M(u,2,this.length),this[u]|this[u+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(u,c){return u=u>>>0,c||M(u,2,this.length),this[u]<<8|this[u+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(u,c){return u=u>>>0,c||M(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(u,c){return u=u>>>0,c||M(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},s.prototype.readBigUInt64LE=it(function(u){u=u>>>0,Dt(u,"offset");const c=this[u],E=this[u+7];(c===void 0||E===void 0)&&l(u,this.length-8);const z=c+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,$=this[++u]+this[++u]*2**8+this[++u]*2**16+E*2**24;return BigInt(z)+(BigInt($)<<BigInt(32))}),s.prototype.readBigUInt64BE=it(function(u){u=u>>>0,Dt(u,"offset");const c=this[u],E=this[u+7];(c===void 0||E===void 0)&&l(u,this.length-8);const z=c*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],$=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+E;return(BigInt(z)<<BigInt(32))+BigInt($)}),s.prototype.readIntLE=function(u,c,E){u=u>>>0,c=c>>>0,E||M(u,c,this.length);let z=this[u],$=1,Y=0;for(;++Y<c&&($*=256);)z+=this[u+Y]*$;return $*=128,z>=$&&(z-=Math.pow(2,8*c)),z},s.prototype.readIntBE=function(u,c,E){u=u>>>0,c=c>>>0,E||M(u,c,this.length);let z=c,$=1,Y=this[u+--z];for(;z>0&&($*=256);)Y+=this[u+--z]*$;return $*=128,Y>=$&&(Y-=Math.pow(2,8*c)),Y},s.prototype.readInt8=function(u,c){return u=u>>>0,c||M(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},s.prototype.readInt16LE=function(u,c){u=u>>>0,c||M(u,2,this.length);const E=this[u]|this[u+1]<<8;return E&32768?E|4294901760:E},s.prototype.readInt16BE=function(u,c){u=u>>>0,c||M(u,2,this.length);const E=this[u+1]|this[u]<<8;return E&32768?E|4294901760:E},s.prototype.readInt32LE=function(u,c){return u=u>>>0,c||M(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},s.prototype.readInt32BE=function(u,c){return u=u>>>0,c||M(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},s.prototype.readBigInt64LE=it(function(u){u=u>>>0,Dt(u,"offset");const c=this[u],E=this[u+7];(c===void 0||E===void 0)&&l(u,this.length-8);const z=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(E<<24);return(BigInt(z)<<BigInt(32))+BigInt(c+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),s.prototype.readBigInt64BE=it(function(u){u=u>>>0,Dt(u,"offset");const c=this[u],E=this[u+7];(c===void 0||E===void 0)&&l(u,this.length-8);const z=(c<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(z)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+E)}),s.prototype.readFloatLE=function(u,c){return u=u>>>0,c||M(u,4,this.length),t.read(this,u,!0,23,4)},s.prototype.readFloatBE=function(u,c){return u=u>>>0,c||M(u,4,this.length),t.read(this,u,!1,23,4)},s.prototype.readDoubleLE=function(u,c){return u=u>>>0,c||M(u,8,this.length),t.read(this,u,!0,52,8)},s.prototype.readDoubleBE=function(u,c){return u=u>>>0,c||M(u,8,this.length),t.read(this,u,!1,52,8)};function j(v,u,c,E,z,$){if(!s.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>z||u<$)throw new RangeError('"value" argument is out of bounds');if(c+E>v.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(u,c,E,z){if(u=+u,c=c>>>0,E=E>>>0,!z){const wt=Math.pow(2,8*E)-1;j(this,u,c,E,wt,0)}let $=1,Y=0;for(this[c]=u&255;++Y<E&&($*=256);)this[c+Y]=u/$&255;return c+E},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(u,c,E,z){if(u=+u,c=c>>>0,E=E>>>0,!z){const wt=Math.pow(2,8*E)-1;j(this,u,c,E,wt,0)}let $=E-1,Y=1;for(this[c+$]=u&255;--$>=0&&(Y*=256);)this[c+$]=u/Y&255;return c+E},s.prototype.writeUint8=s.prototype.writeUInt8=function(u,c,E){return u=+u,c=c>>>0,E||j(this,u,c,1,255,0),this[c]=u&255,c+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(u,c,E){return u=+u,c=c>>>0,E||j(this,u,c,2,65535,0),this[c]=u&255,this[c+1]=u>>>8,c+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(u,c,E){return u=+u,c=c>>>0,E||j(this,u,c,2,65535,0),this[c]=u>>>8,this[c+1]=u&255,c+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(u,c,E){return u=+u,c=c>>>0,E||j(this,u,c,4,4294967295,0),this[c+3]=u>>>24,this[c+2]=u>>>16,this[c+1]=u>>>8,this[c]=u&255,c+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(u,c,E){return u=+u,c=c>>>0,E||j(this,u,c,4,4294967295,0),this[c]=u>>>24,this[c+1]=u>>>16,this[c+2]=u>>>8,this[c+3]=u&255,c+4};function yt(v,u,c,E,z){Nt(u,E,z,v,c,7);let $=Number(u&BigInt(4294967295));v[c++]=$,$=$>>8,v[c++]=$,$=$>>8,v[c++]=$,$=$>>8,v[c++]=$;let Y=Number(u>>BigInt(32)&BigInt(4294967295));return v[c++]=Y,Y=Y>>8,v[c++]=Y,Y=Y>>8,v[c++]=Y,Y=Y>>8,v[c++]=Y,c}function lt(v,u,c,E,z){Nt(u,E,z,v,c,7);let $=Number(u&BigInt(4294967295));v[c+7]=$,$=$>>8,v[c+6]=$,$=$>>8,v[c+5]=$,$=$>>8,v[c+4]=$;let Y=Number(u>>BigInt(32)&BigInt(4294967295));return v[c+3]=Y,Y=Y>>8,v[c+2]=Y,Y=Y>>8,v[c+1]=Y,Y=Y>>8,v[c]=Y,c+8}s.prototype.writeBigUInt64LE=it(function(u,c=0){return yt(this,u,c,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=it(function(u,c=0){return lt(this,u,c,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(u,c,E,z){if(u=+u,c=c>>>0,!z){const Bt=Math.pow(2,8*E-1);j(this,u,c,E,Bt-1,-Bt)}let $=0,Y=1,wt=0;for(this[c]=u&255;++$<E&&(Y*=256);)u<0&&wt===0&&this[c+$-1]!==0&&(wt=1),this[c+$]=(u/Y>>0)-wt&255;return c+E},s.prototype.writeIntBE=function(u,c,E,z){if(u=+u,c=c>>>0,!z){const Bt=Math.pow(2,8*E-1);j(this,u,c,E,Bt-1,-Bt)}let $=E-1,Y=1,wt=0;for(this[c+$]=u&255;--$>=0&&(Y*=256);)u<0&&wt===0&&this[c+$+1]!==0&&(wt=1),this[c+$]=(u/Y>>0)-wt&255;return c+E},s.prototype.writeInt8=function(u,c,E){return u=+u,c=c>>>0,E||j(this,u,c,1,127,-128),u<0&&(u=255+u+1),this[c]=u&255,c+1},s.prototype.writeInt16LE=function(u,c,E){return u=+u,c=c>>>0,E||j(this,u,c,2,32767,-32768),this[c]=u&255,this[c+1]=u>>>8,c+2},s.prototype.writeInt16BE=function(u,c,E){return u=+u,c=c>>>0,E||j(this,u,c,2,32767,-32768),this[c]=u>>>8,this[c+1]=u&255,c+2},s.prototype.writeInt32LE=function(u,c,E){return u=+u,c=c>>>0,E||j(this,u,c,4,2147483647,-2147483648),this[c]=u&255,this[c+1]=u>>>8,this[c+2]=u>>>16,this[c+3]=u>>>24,c+4},s.prototype.writeInt32BE=function(u,c,E){return u=+u,c=c>>>0,E||j(this,u,c,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[c]=u>>>24,this[c+1]=u>>>16,this[c+2]=u>>>8,this[c+3]=u&255,c+4},s.prototype.writeBigInt64LE=it(function(u,c=0){return yt(this,u,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=it(function(u,c=0){return lt(this,u,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ft(v,u,c,E,z,$){if(c+E>v.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function Pt(v,u,c,E,z){return u=+u,c=c>>>0,z||ft(v,u,c,4),t.write(v,u,c,E,23,4),c+4}s.prototype.writeFloatLE=function(u,c,E){return Pt(this,u,c,!0,E)},s.prototype.writeFloatBE=function(u,c,E){return Pt(this,u,c,!1,E)};function Ot(v,u,c,E,z){return u=+u,c=c>>>0,z||ft(v,u,c,8),t.write(v,u,c,E,52,8),c+8}s.prototype.writeDoubleLE=function(u,c,E){return Ot(this,u,c,!0,E)},s.prototype.writeDoubleBE=function(u,c,E){return Ot(this,u,c,!1,E)},s.prototype.copy=function(u,c,E,z){if(!s.isBuffer(u))throw new TypeError("argument should be a Buffer");if(E||(E=0),!z&&z!==0&&(z=this.length),c>=u.length&&(c=u.length),c||(c=0),z>0&&z<E&&(z=E),z===E||u.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),u.length-c<z-E&&(z=u.length-c+E);const $=z-E;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,E,z):Uint8Array.prototype.set.call(u,this.subarray(E,z),c),$},s.prototype.fill=function(u,c,E,z){if(typeof u=="string"){if(typeof c=="string"?(z=c,c=0,E=this.length):typeof E=="string"&&(z=E,E=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!s.isEncoding(z))throw new TypeError("Unknown encoding: "+z);if(u.length===1){const Y=u.charCodeAt(0);(z==="utf8"&&Y<128||z==="latin1")&&(u=Y)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(c<0||this.length<c||this.length<E)throw new RangeError("Out of range index");if(E<=c)return this;c=c>>>0,E=E===void 0?this.length:E>>>0,u||(u=0);let $;if(typeof u=="number")for($=c;$<E;++$)this[$]=u;else{const Y=s.isBuffer(u)?u:s.from(u,z),wt=Y.length;if(wt===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for($=0;$<E-c;++$)this[$+c]=Y[$%wt]}return this};const bt={};function xt(v,u,c){bt[v]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(v,"]"),this.stack,delete this.name}get code(){return v}set code(z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:z,writable:!0})}toString(){return"".concat(this.name," [").concat(v,"]: ").concat(this.message)}}}xt("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?"".concat(v," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),xt("ERR_INVALID_ARG_TYPE",function(v,u){return'The "'.concat(v,'" argument must be of type number. Received type ').concat(typeof u)},TypeError),xt("ERR_OUT_OF_RANGE",function(v,u,c){let E='The value of "'.concat(v,'" is out of range.'),z=c;return Number.isInteger(c)&&Math.abs(c)>2**32?z=zt(String(c)):typeof c=="bigint"&&(z=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(z=zt(z)),z+="n"),E+=" It must be ".concat(u,". Received ").concat(z),E},RangeError);function zt(v){let u="",c=v.length;const E=v[0]==="-"?1:0;for(;c>=E+4;c-=3)u="_".concat(v.slice(c-3,c)).concat(u);return"".concat(v.slice(0,c)).concat(u)}function Ft(v,u,c){Dt(u,"offset"),(v[u]===void 0||v[u+c]===void 0)&&l(u,v.length-(c+1))}function Nt(v,u,c,E,z,$){if(v>c||v<u){const Y=typeof u=="bigint"?"n":"";let wt;throw u===0||u===BigInt(0)?wt=">= 0".concat(Y," and < 2").concat(Y," ** ").concat(($+1)*8).concat(Y):wt=">= -(2".concat(Y," ** ").concat(($+1)*8-1).concat(Y,") and < 2 ** ")+"".concat(($+1)*8-1).concat(Y),new bt.ERR_OUT_OF_RANGE("value",wt,v)}Ft(E,z,$)}function Dt(v,u){if(typeof v!="number")throw new bt.ERR_INVALID_ARG_TYPE(u,"number",v)}function l(v,u,c){throw Math.floor(v)!==v?(Dt(v,c),new bt.ERR_OUT_OF_RANGE("offset","an integer",v)):u<0?new bt.ERR_BUFFER_OUT_OF_BOUNDS:new bt.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(u),v)}const G=/[^+/0-9A-Za-z-_]/g;function K(v){if(v=v.split("=")[0],v=v.trim().replace(G,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function I(v,u){u=u||1/0;let c;const E=v.length;let z=null;const $=[];for(let Y=0;Y<E;++Y){if(c=v.charCodeAt(Y),c>55295&&c<57344){if(!z){if(c>56319){(u-=3)>-1&&$.push(239,191,189);continue}else if(Y+1===E){(u-=3)>-1&&$.push(239,191,189);continue}z=c;continue}if(c<56320){(u-=3)>-1&&$.push(239,191,189),z=c;continue}c=(z-55296<<10|c-56320)+65536}else z&&(u-=3)>-1&&$.push(239,191,189);if(z=null,c<128){if((u-=1)<0)break;$.push(c)}else if(c<2048){if((u-=2)<0)break;$.push(c>>6|192,c&63|128)}else if(c<65536){if((u-=3)<0)break;$.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((u-=4)<0)break;$.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return $}function A(v){const u=[];for(let c=0;c<v.length;++c)u.push(v.charCodeAt(c)&255);return u}function D(v,u){let c,E,z;const $=[];for(let Y=0;Y<v.length&&!((u-=2)<0);++Y)c=v.charCodeAt(Y),E=c>>8,z=c%256,$.push(z),$.push(E);return $}function Q(v){return e.toByteArray(K(v))}function tt(v,u,c,E){let z;for(z=0;z<E&&!(z+c>=u.length||z>=v.length);++z)u[z+c]=v[z];return z}function U(v,u){return v instanceof u||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===u.name}function st(v){return v!==v}const ht=function(){const v="0123456789abcdef",u=new Array(256);for(let c=0;c<16;++c){const E=c*16;for(let z=0;z<16;++z)u[E+z]=v[c]+v[z]}return u}();function it(v){return typeof BigInt>"u"?mt:v}function mt(){throw new Error("BigInt not supported")}})(cr);class Re extends Cn.EventEmitter{constructor({watch:e,options:t,callback:r,path:n}){super(),e&&(this.options=Object.assign({persistent:!0,recursive:!1,encoding:"utf8"},t),this.watch=e,this.callback=r,this.path=n)}static empty(){return new Re({})}close(){const e=this.watch.watchers.indexOf(this);e>-1&&this.watch.watchers.splice(e,1),this.removeAllListeners()}checkChange(e,t){const{recursive:r,encoding:n}=this.options;if(!(r?e.startsWith(this.path):e===this.path))return;const o=e.replace(this.path,""),s=n==="buffer"?cr.Buffer.from(o):cr.Buffer.from(o,n).toString();this.emit("change",t,s),this.callback(t,s)}}class Ys{constructor(e){this.disk=e,this.events=new Cn.EventEmitter,this.watchers=[],this.fileWatchers={}}fireRename(e,t=!1,r=!0){r&&this.events.emit("watch",{type:t?ee.Remove:ee.Create,path:e}),this.watchers.forEach(n=>{n.checkChange(e,"rename")})}async fireChange(e,t=!0){t&&this.events.emit("watch",{type:ee.Change,path:e});const r=this.fileWatchers[e];let n=null;if(r&&r.length>0){const a=await this.disk.stat(e);n=()=>{r.forEach(async o=>o(await this.disk.stat(e),a))}}return this.watchers.forEach(a=>{a.checkChange(e,"change")}),n}fireChangeSync(e,t=!0){t&&this.events.emit("watch",{type:ee.Change,path:e});const r=this.fileWatchers[e];let n=null;if(r&&r.length>0){const a=this.disk._sync.stat(e);n=()=>{r.forEach(o=>o(this.disk._sync.stat(e),a))}}return this.watchers.forEach(a=>{a.checkChange(e,"change")}),n}watch(e,t,r){if(e=this.disk.fmtPath(e),typeof t=="function"?(r=t,t={}):typeof t=="string"&&(t={encoding:t}),t.persistent===!1&&this.watchers.find(a=>a.path===e))return Re.empty();const n=new Re({watch:this,options:t,callback:r,path:e});return this.watchers.push(n),n}watchFile(e,t,r){e=this.disk.fmtPath(e),typeof t=="function"&&(r=t,t={});const{persistent:n=!0}=t;n&&this.fileWatchers[e]||(this.fileWatchers[e]||(this.fileWatchers[e]=[]),this.fileWatchers[e].push(r))}unwatchFile(e,t){e=this.disk.fmtPath(e);const r=this.fileWatchers[e];if(r)if(!t)delete this.fileWatchers[e];else{const n=r.indexOf(t);n>-1&&r.splice(n,1),r.length===0&&delete this.fileWatchers[e]}}}class Ks{constructor(){this.fileMap={}}async init(e){const t=[];await e.traverseContent((r,n)=>{t.push((async()=>{const a=await n;this.fileMap[r]=a||dn().data})())}),await Promise.all(t)}read(e){const t=this.fileMap[e],r=Ht(t);return r==="empty"||r==="dir"?null:t}pureRead(e){return this.fileMap[e]}write(e,t){return this.fileMap[e]=t,!0}append(e,t){if(e in this.fileMap)return!1;const r=this.read(e);if(!r)throw new Error("file not found");return this.write(e,Me(r,t))}remove(e,t){const r=this.getType(e);return r==="empty"||!(e in this.fileMap)?!1:(this._removeSingle(e,t),r==="file"||this.traverse(e,({path:n})=>{this._removeSingle(n,t)}),!0)}_removeSingle(e,t){delete this.fileMap[e],t==null||t(e)}stat(e,t){const r=this.fileMap[e],n=Ht(r);if(n==="empty")return{size:0,type:n};if(n==="file"||n==="link")return{size:r.byteLength,type:n};if(!t)return{size:0,type:n};let a=0;return this.traverse(e,({path:o})=>{const s=this.fileMap[o];Ht(s)==="file"&&(a+=s.byteLength)}),{size:a,type:n}}exist(e){return e in this.fileMap}ls(e){const t=[];return this.traverse(e,({parent:r,name:n})=>{r===e&&t.push(n)}),t}createFile(e,t=new Uint8Array([]),r=!1){return!r&&this.exist(e)?!1:(this.write(e,t),!0)}createDir(e,t){if(this.exist(e)){if(!t)return!1;this.traverse(e,({path:r})=>{this.remove(r)})}return this.write(e,ge("dir")),!0}getType(e){const t=this.fileMap[e];return Ht(t)}traverse(e,t,r=!1){const n=Object.keys(this.fileMap),a=Ut(e,!r);for(const o of n)o.startsWith(a)&&t(Gt(o))}traverseContent(e,t=""){this.traverse(t,({path:r})=>{e(r,this.read(r))})}}var Vs=Object.defineProperty,Gs=Object.getOwnPropertyDescriptor,Ee=(i,e,t,r)=>{for(var n=Gs(e,t),a=i.length-1,o;a>=0;a--)(o=i[a])&&(n=o(e,t,n)||n);return n&&Vs(e,t,n),n};class ue{constructor(e){this.syncMiddleware=new Ks,this.disk=e}async init(){await this.syncMiddleware.init(this.backend)}fmtPath(e){return this.disk.fmtPath(e)}get _link(){return this.disk._link}get _watch(){return this.disk._watch}get backend(){return this.disk.backend}size(e="/"){return this.syncMiddleware.stat(this.fmtPath(e)).size}cd(e){return e=this.fmtPath(e),this.isDir(e)?(this.disk.current=e,!0):!1}isDir(e){return e=this.fmtPath(e),e==="/"||this.getType(e)==="dir"}getType(e){return this.syncMiddleware.getType(this.fmtPath(e))}pwd(){return this.disk.current}copy(e){return this.disk.copy(e),!0}move(e,t){if(!this.cut([e]))return"cut file fail";const n=this.fmtPath(t),a=this.fmtPath(e),{parent:o}=Gt(n),s={[a]:n};return this.paste(o,s)}cut(e){return this.disk.cut(e),!0}paste(e,t={}){const r=this.disk.clipboard;if(!r.active)return"No Copy Files";const a=this.ls(e)||[],{isCut:o,paths:s}=r;console.log("pasteMap 1",s,e,a,t);const f=Oe(s,this.fmtPath(e),a,t);console.log("pasteMap",f);const m=[];for(const p in f){const h=p,y=f[h];this.copySingle(h,y)?o&&this.remove(h):m.push(h)}return m.length>0?"Copy Failed: ".concat(m.join(", ")):""}ls(e=""){return e=this.fmtPath(e),this.isDir(e)?this.syncMiddleware.ls(e):null}remove(e){return e=this.fmtPath(e),this.backend.remove(e),this.syncMiddleware.remove(e,t=>{this._watch.fireRename(t,!0)})}clear(){const e=this.ls("/");!e||e.length===0||(e.forEach(t=>{this.remove(Fe.join("/",t))}),this.cd("/"))}copySingle(e,t){const r=this.read(e);let n="empty";if(r?n=Ht(r):n=this.isDir(e)?"dir":"empty",n==="empty")return!1;if(n==="file"||n==="link")return this.createFile(t,r,{ensure:!0});const a=[];let o=!0;const s=(f,m,p)=>{const h={ensure:!0};let y=()=>Promise.resolve(!0);const d=this._create(f,p||void 0,h,m==="dir",x=>{y=x});if(this.createFile(f,p||void 0,h),!d)throw o=!1,new Error("create fail: ".concat(f));return a.push(y),d};return s(t,"dir"),this.syncMiddleware.traverseContent((f,m)=>{const p=f.replace(e,t);s(p,m?"file":"dir",m)},e),ln(a),o}read(e){return this.syncMiddleware.read(e)}readText(e){const t=this.syncMiddleware.read(e);return t?gr(t):""}write(e,t){e=this.fmtPath(e);const r=this.syncMiddleware.pureRead(e);if(ve(t,r))return!0;if(!this.exist(e))return this.createFile(e,t);const n=this._watch.fireChangeSync(e);return this.syncMiddleware.write(e,t)?(this.backend.write(e,t),n==null||n(),!0):!1}append(e,t){if(e=this.fmtPath(e),!this.exist(e))return this.createFile(e,t);const r=this._watch.fireChangeSync(e);return this.syncMiddleware.append(e,t)?(this.backend.append(e,t),r==null||r(),!0):!1}exist(e){return e=this.fmtPath(e),e==="/"?!0:this.syncMiddleware.exist(e)}stat(e,t=!0){return this.disk._transStat(this.syncMiddleware.stat(this.fmtPath(e),t))}createFile(e,t,r={}){return this._create(e,t,r)}createDir(e,t={}){return this._create(e,void 0,t,!0)}createLink(e,t,r={}){return this.createFile(e,ge("link",t),r)}_create(e,t,{overwrite:r,ensure:n}={},a=!1,o){e=this.fmtPath(e);const s=ze(e);if(!n&&!this.exist(s))return!1;const f=n?this.ensureParentPath(e):null;if(!(a?this.syncMiddleware.createDir(e,r):this.syncMiddleware.createFile(e,t,r)))return!1;this._watch.fireRename(e);const p=async()=>(n&&await f,a?this.backend.createDir(e,r):this.backend.createFile(e,t,r));return o?o(p):p(),!0}ensureParentPath(e){return this._ensureParentPath(e),this.disk._ensureParentPath(e)}_ensureParentPath(e){e=ze(e),!this.exist(e)&&(this._ensureParentPath(e),this._create(e,void 0,{},!0,()=>{}))}}Ee([jt],ue.prototype,"ls");Ee([jt],ue.prototype,"read");Ee([jt],ue.prototype,"readText");Ee([jt],ue.prototype,"write");Ee([jt],ue.prototype,"append");const jr=500,Ie=(()=>{const i="webos_fs_update_info",e=Kt.createInstance({name:"sync-manager",driver:Kt.INDEXEDDB}),t=Math.random().toString(16).substring(2),r=n=>e.setItem(i,n);return{id:t,async writeData(n){await r(n)},async writeChanges(n){const a=await this.read(),o={time:Date.now(),id:t,changes:n};if(a.length===0)a.push(o);else{const s=a.findIndex(f=>f.time>o.time);s===-1?a.push(o):a.splice(s,0,o)}await r(a)},async read(){const n=await e.getItem(i);return Array.isArray(n)?n:[]}}})();class Xs{constructor(e){this.tempChange={},this.lastOprateId="",this.disk=e}init(){this.timer=setInterval(async()=>{await this.checkUpdate(),await this.checkWriteChange()},jr);const e=({path:t,type:r})=>{this.tempChange[t]=r};this.disk._watch.events.on("watch",e),this.offWatch=()=>{this.disk._watch.events.off("watch",e)}}get sync(){var e;return(e=this.disk._sync)==null?void 0:e.syncMiddleware}async checkUpdate(){const e=await Ie.read();if(e.length===0)return;const t=[],r=Date.now(),n=o=>r-o>jr*2,a={};for(let o=0;o<e.length;o++){const s=e[o];if(n(s.time)){t.push(o);continue}s.id!==Ie.id&&Object.assign(a,s.changes)}if(t.length){for(let o=t.length-1;o>=0;o--)e.splice(t[o],1);await Ie.writeData(e)}this.useChanges(a)}async writeFile(e){if(!this.disk.enableSync)return!0;const t=await this.disk.read(e);if(t){const r=this.sync.pureRead(e);return ve(t,r)?!1:(this.sync.write(e,t),!0)}return!1}async useChanges(e){var r;if(Object.keys(e).length===0)return;const t=Object.keys(e).sort((n,a)=>n.length-a.length);for(const n of t)switch(e[n]){case ee.Change:await this.disk.exist(n)&&await this.writeFile(n)&&this.disk._watch.fireChangeSync(n,!1);break;case ee.Remove:await this.disk.exist(n)&&((r=this.sync)==null||r.remove(n),this.disk._watch.fireRename(n,!0,!1));break;case ee.Create:await this.disk.exist(n)||(await this.writeFile(n),this.disk._watch.fireRename(n,!1,!1));break}}async checkWriteChange(){Object.keys(this.tempChange).length!==0&&(console.log("sync-manager write",JSON.stringify(this.tempChange,null,2)),await Ie.writeChanges(this.tempChange),this.tempChange={})}clear(){clearInterval(this.timer),this.offWatch()}}var qs=Object.defineProperty,Js=Object.getOwnPropertyDescriptor,re=(i,e,t,r)=>{for(var n=Js(e,t),a=i.length-1,o;a>=0;a--)(o=i[a])&&(n=o(e,t,n)||n);return n&&qs(e,t,n),n};const qt=class Jt{constructor({enableSync:e=!1}={}){var t;if(this.current="/",this.clipboard={paths:[],isCut:!1,active:!1},Jt.instance)return Jt.instance._initSyncAlone(e),Jt.instance;Jt.instance=this,this.enableSync=e,Lr.Supported()?this.backend=new Lr:this.backend=new As,this.enableSync&&(this._sync=new ue(this)),this._link=new Is(this.backend,(t=this._sync)==null?void 0:t.syncMiddleware),this._zip=new Ps(this),this._watch=new Ys(this),this._update=new Xs(this),this._update.init(),this.ready=this.init()}get sync(){return this._sync}initSync(){return this._initSyncAlone(!0)}static initSync(){return Jt.instance?Jt.instance.initSync():new Jt({enableSync:!0}).ready}async _initSyncAlone(e){e&&!this.enableSync&&(this.enableSync=e,this._sync=new ue(this),this.ready=this._sync.init(),await this.ready)}async init(){var e;await this.backend.init(),await((e=this._sync)==null?void 0:e.init())}fmtPath(e){return e=e.trim(),e[0]==="/"?Ut(e):Fe.join(this.current,Ut(e))}async size(e="/"){return(await this.backend.stat(this.fmtPath(e))).size}async cd(e){return e=this.fmtPath(e),await this.isDir(e)?(this.current=e,!0):!1}async isDir(e){return e=this.fmtPath(e),e==="/"||await this.getType(e)==="dir"}async getType(e){return e=this.fmtPath(e),this.backend.getType(e)}pwd(){return this.current}async copy(e){return this._addToClipboard(e)}async move(e,t){if(!await this.cut([e]))return!1;const n=this.fmtPath(t),a=this.fmtPath(e),{parent:o}=Gt(n),s={[a]:n};return this.paste(o,s)}async cut(e){return this._addToClipboard(e,!0)}_addToClipboard(e,t=!1){return typeof e=="string"&&(e=[e]),this.clipboard={paths:e.map(r=>this.fmtPath(r)),active:!0,isCut:t},!0}async paste(e,t={}){if(!this.clipboard.active)return"No Copy Files";const n=await this.ls(e)||[],{isCut:a,paths:o}=this.clipboard;console.log("pasteMap 1",o,e,n,t);const s=Oe(o,this.fmtPath(e),n,t);console.log("pasteMap",s);const f=[],m=[];for(const p in s)m.push((async()=>{const h=p,y=s[h];await this.copySingle(h,y)?a&&await this.remove(h):f.push(h)})());return await Promise.all(m),f.length>0?"Copy Failed: ".concat(f.join(", ")):""}async copySingle(e,t){const r=await this.read(e);let n="empty";if(r?n=Ht(r):n=await this.isDir(e)?"dir":"empty",n==="empty")return!1;if(n==="file"||n==="link")return await this.createFile(t,r,{ensure:!0});let a=!0;const o=[()=>this.createDir(t)];return await this.backend.traverseContent((s,f)=>{o.push(async()=>{const m=await f,p=s.replace(e,t);m?await this.createFile(p,m)||(a=!1):await this.createDir(p)||(a=!1)})},e),await ln(o),a}async readText(e){const t=await this.backend.read(e);return t?gr(t):""}async read(e){return this.backend.read(e)}async write(e,t){var o;e=this.fmtPath(e);const r=this.enableSync?this._sync.syncMiddleware.pureRead(e):await this.backend.read(e);if(ve(t,r))return!0;if(!await this.exist(e))return this.createFile(e,t);const n=await this._watch.fireChange(e);return await this.backend.write(e,t)?((o=this._sync)==null||o.syncMiddleware.write(e,t),n==null||n(),!0):!1}async append(e,t){var a;if(e=this.fmtPath(e),!await this.exist(e))return this.createFile(e,t);const r=await this._watch.fireChange(e);return await this.backend.append(e,t)?((a=this._sync)==null||a.syncMiddleware.append(e,t),r==null||r(),!0):!1}async remove(e){e=this.fmtPath(e);const t=await this.backend.remove(e);return t&&(this.enableSync?this._sync.syncMiddleware.remove(e,r=>{this._watch.fireRename(r,!0)}):this._watch.fireRename(e,!0),!0)}async stat(e,t=!0){return this._transStat(await this.backend.stat(this.fmtPath(e),t))}_transStat({size:e,type:t}){return{size:e,type:t,isDirectory:()=>t==="dir",isFile:()=>t==="file"}}exist(e){return e=this.fmtPath(e),e==="/"?Promise.resolve(!0):this.backend.exist(e)}async ls(e=""){return e=this.fmtPath(e),this.isDir(e)?await this.backend.ls(e):null}async createFile(e,t,r={}){return this._create(e,t,r,!1)}async createDir(e,t={}){return this._create(e,void 0,t,!0)}async _create(e,t,{overwrite:r,ensure:n}={},a=!1){e=this.fmtPath(e);const o=ze(e);if(!n&&!await this.exist(o))return!1;n&&await this.ensureParentPath(e);const s=await(a?this.backend.createDir(e,r):this.backend.createFile(e,t,r));return s?(this._watch.fireRename(e),a?this._sync.syncMiddleware.createDir(e,r):this._sync.syncMiddleware.createFile(e,t,r),s):!1}createLink(e,t,r={}){return this.createFile(e,ge("link",t),r)}zip(...e){return this._zip.zip(...e)}unzip(...e){return this._zip.unzip(...e)}isZip(...e){return this._zip.isZip(...e)}watch(...e){return this._watch.watch(...e)}watchFile(...e){return this._watch.watchFile(...e)}unwatchFile(...e){return this._watch.unwatchFile(...e)}async clear(){const e=await this.ls("/");!e||e.length===0||(await Promise.all(e.map(t=>this.remove(Fe.join("/",t)))),await this.cd("/"))}async ensureParentPath(e){var t;return(t=this._sync)==null||t._ensureParentPath(e),this._ensureParentPath(e)}async _ensureParentPath(e){e=ze(e),!await this.exist(e)&&(await this.ensureParentPath(e),await this._create(e,void 0,{},!0))}createFileContent(e,t="file"){return ge(t,e)}};re([jt],qt.prototype,"readText");re([jt],qt.prototype,"read");re([jt],qt.prototype,"write");re([jt],qt.prototype,"append");re([jt],qt.prototype,"ls");re([jt],qt.prototype,"watch");re([jt],qt.prototype,"watchFile");re([jt],qt.prototype,"unwatchFile");let In=qt;class de{constructor(e=!1){if(de.instance)return de.instance.disk._initSyncAlone(e),de.instance;de.instance=this,this.disk=new In({enableSync:e}),this.ready=this.disk.ready}ls(e){return this.disk.ls(e)}cd(e){return this.disk.cd(e)}pwd(){return this.disk.pwd()}touch(e){return this.disk.createFile(e)}mkdir(e){return this.disk.createDir(e)}rmdir(e){return this.disk.remove(e)}cp(e,t){return this.disk.copySingle(e,t)}mv(e,t){return this.disk.move(e,t)}rm(e){return this.disk.remove(e)}cat(e){return this.disk.readText(e)}more(e){return this.disk.readText(e)}less(e){return this.disk.readText(e)}async head(e,t){const r=await this.disk.readText(e);return r?r.split("\n").slice(0,t).join("\n"):""}async tail(e,t){const r=await this.disk.readText(e);return r?r.split("\n").slice(-t).join("\n"):""}async grep(e,t){const r=await this.disk.readText(e);if(!r)return[""];typeof t=="string"&&(t=new RegExp(t,"g"));const n=r.match(t),a=[];if(!n)return a;for(const o of a)a.push(o[0]);return a}async find(e,{name:t,type:r}={}){const n=typeof t=="string"?new RegExp(t):t,a=[];return this.disk._sync?this.disk._sync.syncMiddleware.traverse(e,({path:o,name:s})=>{let f=!0;n&&!n.test(s)&&(f=!1),f&&r&&this.disk._sync.syncMiddleware.getType(o)!==r&&(f=!1),f&&a.push(o)}):await this.disk.backend.traverseContent(async(o,s,f)=>{let m=!0;n&&!n.test(f)&&(m=!1),m&&r&&Ht(await s)!==r&&(m=!1),m&&a.push(o)},e),a}zip(e,t){return this.disk.zip(e,t)}unzip(e,t){return this.disk.unzip(e,t)}tar(e,t){return this.disk.zip(e,t)}async du(e){return(await this.disk.stat(e)).size}}const Bn={name:"open-url",helpInfo:"Open Url in Browser",run(i){const e=i.args[0];let t="fail.";return globalThis!=null&&globalThis.open&&(globalThis.open(e),t="success!"),'Open "'.concat(e||"",'" ').concat(t)}},Qs=[Bn];function Wr(i){return Qs.find(e=>e.name===i)||null}const fr="/WebOS/System/Commands";function lr(i){return"".concat(fr,"/").concat(i)}const hr=100;class ta extends vs{constructor(){super(...arguments),this.name="install",this.helpDetails=this._viewDetails}async run(e){const t=e.options.rm;if(t)return this.removeCommand(t);if(!this.provider.registerCommand)return"CommandProvider not support Install";let r,n="";const{name:a,local:o,url:s}=this.parseUrl(e);if(s){const f=await this._installFromUrl(s);if(!f.command)return"Install fail ".concat(s,": ").concat(f.info);r=f.command,n=f.text}else if(a){const f=Wr(a);if(!f)return"Not a Built-in Command: ".concat(a);r=f,n=a;const{success:m,info:p}=this.provider.registerCommand(r);if(!m)return"Install fail: ".concat(p)}else if(o){const f=await this.disk.readText(o);if(!f)return"Install from local fail: ".concat(o);const m=await this._installFromText(f);if(!m.command)return"Install from local fail: ".concat(m.info);r=m.command}else return"Install fail: parse command fail";if(!o){const[,f]=await ae(this.saveCommand(r,n));if(f)return f}return"Install ".concat(r.name," success!")}async saveCommand(e,t){const r=lr(e.name);if(!await this.disk.createFile(r,this.disk.createFileContent(t),{ensure:!0,overwrite:!0}))throw"Save command fail: ".concat(r)}parseUrl(e){const{args:t,options:r}=e,n=t[0];let a="",o="",s="";return r.ol?a=r.ol:r.gh?a=ws(r.gh):r.npm?a=Rr(r.npm):r.of?a=Rr("webos-commands/dist/".concat(r.of,".js")):r.l?o=r.l:s=n,{url:a,local:o,name:s}}async removeCommand(e){if(typeof e!="string"||e==="")return"Remove fail: name is not valid (".concat(e,")");if(!this.provider.removeCommand)return"CommandProvider not support Install -rm";const{success:t,info:r}=this.provider.removeCommand(e);return t?(await this.disk.remove(lr(e)),"Remove command ".concat(e," success!")):r}async _installFromUrl(e){const t=await ys(e),{success:r,info:n,command:a}=await this._installFromText(t);return{success:r,info:n,text:t,command:a||null}}_installFromText(e){if(!this.provider.registerCommand)return Promise.resolve({success:!1,info:"RegisterCommand not Exists"});if(e.length<=hr){const n=Wr(e);if(n){const a=this.provider.registerCommand(n);return a.success&&Object.assign(a,{command:n}),Promise.resolve(a)}}const{ready:t,resolve:r}=fn();return gs(e,{registerCommand:n=>{const a=this.provider.registerCommand(n);a.success&&Object.assign(a,{command:n}),r(a)}}),setTimeout(()=>{r({success:!1,info:"Install timeout"})},2e3),t}_viewDetails(){return["install command_name : Install Built-in command","install -ol url : Install from url","install -gh user/repo[/filepath] : Install from github","install -npm pkg_name[/filepath] : Install from npm","install -l filepath : Install from local file","install -rm command_name: Remove command"].join("\r\n")}}const Qt={clear:"Clear the terminal.",ls:"View all the files under the folder.",mkdir:"Create a new directory.",cd:"Change the current working directory and switch the displayed PWD in the terminal.",pwd:"Display the current working directory.",rm:"Remove a file.",rmdir:"Remove a directory.",cat:"Display the content of a file.",touch:"Create a new empty file or update the access and modification times of an existing file.",echo:"Output the joined content of the provided arguments.",vi:"Edit file",mv:"Move or rename a file or directory from one location to another.",cp:"Copy a file or directory from one location to another.",more:"Display the content of a file in a paginated way (with limited functionality compared to less).",less:"Display the content of a file in a paginated way with more functionality like scrolling back and forth.",head:"Display the first few lines of a file (the number of lines is specified by an argument).",tail:"Display the last few lines of a file (the number of lines is specified by an argument).",grep:"Search for a specific pattern in files and return the matching lines.",find:"Search for files or directories based on certain conditions and return the results.",zip:"Compress files and directories into a zip file.",unzip:"Extract the contents of a zip file.",tar:"Compress files and directories into a zip file.",du:"Display the disk usage of a file or directory.",help:"Show commands information."};function ea(){const i=[],e=Object.keys(Qt);let t=0;for(const r of e)r.length>t&&(t=r.length);for(const r in Qt)i.push("".concat(r.padEnd(t," ")," : ").concat(Qt[r]));return i.join("\r\n")}const $r="Target is not a directory.",Hr="Target is already exists.";class ra{constructor(e,t){this.methods=t,this.thirdCommands={},this.cmd=new de(e),this.installCommand=new ta,this.registerCommand(this.installCommand),this._loadCommands()}getPwd(){return this.cmd.pwd()}get disk(){return this.cmd.disk}async onCommand(e){const t=typeof e=="string"?sr(e):e;if(t.length===0)return this.methods.getHeader();let r="";for(const n of t){const a=await this.runSingleCommand(n,r,t);if(a===!1)return!1;r=typeof a=="boolean"?"":a}return r}async runSingleCommand(e,t,r){var x;const{clearTerminal:n,setPwd:a,openEditor:o}=this.methods,{name:s,args:f,options:m}=e;let p="";const[h,y]=f,{cmd:d}=this;switch(s){case"vi":if(!h)return"Target is empty";if(!await this.disk.exist(h))return"Target file not exists: ".concat(h);if(await this.disk.isDir(h))return"Target is Not File: ".concat(h);const w=await d.cat(h);return w===null?"Open file fail: ".concat(h):(o({path:this.disk.fmtPath(h),content:w,save:C=>{this.disk.write(h,Pe(C))}}),!1);case"clear":return n(),!1;case"ls":const k=(x=await d.ls(h))==null?void 0:x.join(" ");p=typeof k!="string"?$r:k||" ";break;case"mkdir":await d.mkdir(h);break;case"cd":await d.cd(h)?a(d.pwd()):p=$r;break;case"pwd":p=d.pwd();break;case"rm":await d.rm(h);break;case"rmdir":await d.rmdir(h)||(p=Hr);break;case"cat":p=await d.cat(h)||"";break;case"touch":await d.touch(h)||(p=Hr);break;case"echo":p=this.handleEchoCmd(f);break;case"mv":await d.mv(h,y);break;case"cp":await d.cp(h,y);break;case"more":p=await d.more(h)||"";break;case"less":p=await d.less(h)||"";break;case"head":p=await d.head(h,parseInt(y))||"";break;case"tail":p=await d.tail(h,parseInt(y))||"";break;case"grep":p=(await d.grep(h,y)).join("\r\n");break;case"find":p=(await d.find(h,m)).join("\r\n");break;case"zip":await d.zip(f.slice(1),h);break;case"unzip":await d.unzip(h,y);break;case"tar":await d.zip(f.slice(1),h);break;case"du":p="size = ".concat(await d.du(h));break;case"help":p=ea();break;default:const _=this.thirdCommands[s];_?_.helpDetails&&e.options.d?p=Je(_.helpDetails):_.version&&(e.options.v||e.options.version)?p=Je(_.version):p=await ps(_.run(e,{commands:r,disk:this.disk,data:t,term:_.term,run:C=>this.onCommand(C)})):p="".concat(s,": Command not found");break}return p}handleEchoCmd(e){let t=e.indexOf(">"),r=!1;if(t===-1&&(t=e.indexOf(">>"),t!==-1&&(r=!0)),t===-1)return e.join(" ");const n=e[t+1];return n?(this.disk[r?"appendSync":"writeSync"](n,Pe(e.slice(0,t).join(" "))),""):e.join(" ")}async onTab(e,t){const r=!t.includes(" ");let n="",a="",o=[];if(r)n=e,o=Object.keys(Qt);else{const p=Gt(e);n=p.name,a=p.parent,o=await this.cmd.ls(a)||[]}const s=o.filter(p=>p.startsWith(n));let f=cs(s,n.length),m="";if(n===f&&s.length>1)m=s.join(" ");else if(r)s.length===1&&(f+=" ");else{const p="".concat(a).concat(a?"/":"").concat(f);f&&await this.cmd.disk.isDir(p)&&(f+="/")}return{line:m,result:f.replace(n,"")}}registerCommand(e){var t;if(e.name.length>hr)return{success:!1,info:"Command name should less then ".concat(hr,": ").concat(e.name)};if(!Qt[e.name]){this.thirdCommands[e.name]=e;let r=Je(e.helpInfo);return r||(r=e.helpDetails?"Run '".concat(e.name," -d' to view details"):"".concat(e.name," <args>.")),Qt[e.name]=r,(t=e.activate)==null||t.call(e,this.disk,this),{success:!0,info:"Register success"}}return{success:!1,info:"Command already exists ".concat(name)}}removeCommand(e){var t;if(e in this.thirdCommands){const r=this.thirdCommands[e];return delete this.thirdCommands[e],delete Qt[e],(t=r.dispose)==null||t.call(r),{success:!0,info:"Remove success"}}else if(e in Qt)return{success:!1,info:"Cannot remove built-in command: ".concat(e)};return{success:!1,info:"Command ".concat(e," not exists")}}async _loadCommands(){if(await this.disk.ready,!await this.disk.exist(fr))return;const e=await this.disk.ls(fr);if(!e)return;const t=ds();for(const r of e){const n=lr(r);if(await this.disk.isDir(n))continue;const a=await this.disk.readText(n);a&&t.add(this.installCommand._installFromText(a))}await t.run()}}class pe{constructor({container:e,title:t='Welcome to WebOS! Try running "help".\n',padding:r=10,enableSync:n=!1}={}){if(this.pwd="/",pe.instance)return pe.instance.disk._initSyncAlone(n),pe.instance;pe.instance=this;const a=new ra(n,{setPwd:o=>{this.pwd=o,this.term.setHeader(this.header)},clearTerminal:()=>{this.term.clearTerminal()},getHeader:()=>this.header,openEditor:({path:o,content:s,save:f})=>{this.term.edit(s,{title:"Edit ".concat(o,' ("').concat(ms()?"cmd":"ctrl",'+s" to save, "esc" to exit)')}).on("edit-done",p=>{f(p),this.term.newLine()})}});this.term=new us({style:{padding:r},title:t,container:e,header:this.header}),this.commandProvider=a,this.term.on("enter",async o=>{if(!o){this.term.write(o);return}const s=await a.onCommand(o);typeof s=="string"&&(s?this.term.write(s):this.term.newLine())}),this.term.on("tab",async o=>{const s=o.substring(o.lastIndexOf(" ")+1),f=await this.commandProvider.onTab(s,o),{line:m,result:p}=f;m&&this.term.write(m,{clear:!1}),this.term.insertText(p)})}get disk(){return this.commandProvider.disk}get header(){return"".concat(this.pwd," admin$ ")}registerCommand(e){return e.term=this.term,this.commandProvider.registerCommand(e)}get removeCommand(){return this.commandProvider.removeCommand.bind(this.commandProvider)||(()=>{})}}function na(){const i=new pe({});i.registerCommand(Bn),window.os=i,i.disk.watch("/aa",{recursive:!0},(e,t)=>{console.trace("watch",e,t)})}na();window.initDisk=()=>{window.dd=new In({enableSync:!0})};export{sa as __vite_legacy_guard};
