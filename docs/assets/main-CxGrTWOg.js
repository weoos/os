function da(){import.meta.url,import("_").catch(()=>1);async function*i(){}}function pi(i,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in i)){const a=Object.getOwnPropertyDescriptor(r,n);a&&Object.defineProperty(i,n,a.get?a:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pr(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var nr={exports:{}};(function(i,e){(function(t,r){r(e)})(Gt,function(t){function r(f){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(f)}function n(f,y){for(var p=0;p<y.length;p++){var d=y[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}function a(f){return function(y){if(Array.isArray(y))return o(y)}(f)||function(y){if(typeof Symbol<"u"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}(f)||function(y,p){if(y){if(typeof y=="string")return o(y,p);var d=Object.prototype.toString.call(y).slice(8,-1);return(d=d==="Object"&&y.constructor?y.constructor.name:d)==="Map"||d==="Set"?Array.from(y):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?o(y,p):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(f,y){(y==null||y>f.length)&&(y=f.length);for(var p=0,d=new Array(y);p<y;p++)d[p]=f[p];return d}var s=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.usePrevEmit=!0,this._map={},this._prevData={}}var y,p,d;return y=f,d=[{key:"_",get:function(){return this.__||(this.__=new f),this.__}},{key:"usePrevEmit",get:function(){return this._.usePrevEmit},set:function(m){this._.usePrevEmit=m}},{key:"emit",value:function(m){for(var h,x=arguments.length,w=new Array(1<x?x-1:0),k=1;k<x;k++)w[k-1]=arguments[k];(h=this._).emit.apply(h,[m].concat(w))}},{key:"off",value:function(m,h){this._.off(m,h)}},{key:"clear",value:function(m){this._.clear(m)}},{key:"on",value:function(m,h){this._.on(m,h)}},{key:"once",value:function(m,h){this._.once(m,h)}},{key:"onWait",value:function(m){this._.onWait(m)}},{key:"head",value:function(m,h){this._.head(m,h)}},{key:"headOnce",value:function(m,h){this._.headOnce(m,h)}}],(p=[{key:"hasEvent",value:function(m){return!!this._map[m]}},{key:"on",value:function(m,h){var x=this;if(r(m)==="object"){var w,k=[];for(w in m)k.push(this.on(w,m[w]));return function(){k.forEach(function(E){return E()})}}if(!h)throw new Error("fn is required");var b=this._formatTarget(h);return this._checkPrev(m,b)&&b.once?function(){}:(this._getList(m).push(b),function(){x.off(m,b)})}},{key:"_formatTarget",value:function(m,h){return typeof m=="function"?{listener:m,once:h!=null&&h,prev:this.usePrevEmit}:(typeof h=="boolean"&&(m.once=h),m)}},{key:"emit",value:function(m){for(var h=arguments.length,x=new Array(1<h?h-1:0),w=1;w<h;w++)x[w-1]=arguments[w];this._prevData[m]=x;var k=this._map[m];if(!k)return!1;for(var b=0;b<k.length;b++){var E=k[b];E.listener.apply(E,x),E.once&&(k.splice(b,1),b--)}return!0}},{key:"off",value:function(m,h){if(m=this._map[m],!m)return!1;var x=m.findIndex(function(w){return w===h||w.listener===h});return x!==-1&&(m.splice(x,1),!0)}},{key:"clear",value:function(m){return!!this._map[m]&&(delete this._map[m],delete this._prevData[m],!0)}},{key:"onWait",value:function(m,h){var x=this;return new Promise(function(w){var k=function(){for(var b=arguments.length,E=new Array(b),T=0;T<b;T++)E[T]=arguments[T];return w(E)};h&&(k=Object.assign({listener:k},h)),x.once(m,k)})}},{key:"destroy",value:function(){this._map={},this._prevData={}}},{key:"_checkPrev",value:function(m,h){return h.prev?(m=this._prevData[m],m!==void 0&&(h.listener.apply(h,a(m)),!0)):!1}},{key:"once",value:function(m,h){return this.on(m,this._formatTarget(h,!0))}},{key:"head",value:function(m,h){var x=this,w=this._formatTarget(h);return this._checkPrev(m,w)&&w.once?function(){}:(this._getList(m).unshift(w),function(){x.off(m,h)})}},{key:"headOnce",value:function(m,h){return this.head(m,this._formatTarget(h,!0))}},{key:"_getList",value:function(m){var h=this._map[m];return h||(this._map[m]=h=[]),h}}])&&n(y.prototype,p),d&&n(y,d),Object.defineProperty(y,"prototype",{writable:!1}),f}();s.version="0.0.3",t.Eveit=s,t.default=s,Object.defineProperty(t,"__esModule",{value:!0})})})(nr,nr.exports);var Gr=nr.exports;function ir(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function mi(i){if(Array.isArray(i))return ir(i)}function yi(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function gi(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,ki(r.key),r)}}function vi(i,e,t){return gi(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function wi(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function _i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ar(i){return mi(i)||wi(i)||xi(i)||_i()}function bi(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function ki(i){var e=bi(i,"string");return typeof e=="symbol"?e:e+""}function xi(i,e){if(i){if(typeof i=="string")return ir(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ir(i,e):void 0}}var Te=Symbol("E"),mr=function(i){return i[i.Fork=0]="Fork",i[i.Append=1]="Append",i}(mr||{}),Xr=function(){function i(){var e=this,t,r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.max,o=a===void 0?0:a,s=n.useStorage,f=s===void 0?!1:s,y=n.storageKey,p=y===void 0?"_def_history_stack":y,d=n.mode,m=d===void 0?0:d,h=n.storageProvider,x=n.onStepChange,w=n.onHistorySizeChange,k=n.onHistoryOut;if(yi(this,i),this.step=0,this.size=0,this.max=40,this.list=[],this.index=0,this.End=Te,this.isActive=!1,this.max=o,this.mode=m,f!==!1&&(h||p)&&(f=!0),f&&(this.storageProvider=h||{read:function(){var E=localStorage.getItem(p);return E?JSON.parse(E):[]},write:function(E){localStorage.setItem(p,JSON.stringify(E))}}),x&&(this.osc=function(){return x(e.step)}),w&&(this.ohsc=function(){return w(e.size)}),this.oho=k,(t=this.osc)===null||t===void 0||t.call(this),(r=this.ohsc)===null||r===void 0||r.call(this),f){var b=this.storageProvider.read();b instanceof Promise?b.then(function(E){e.useCache(E)}):this.useCache(b)}}return vi(i,[{key:"useCache",value:function(e){e.length!==0&&this.push.apply(this,Ar(e))}},{key:"setMax",value:function(e){this.max=e}},{key:"setStep",value:function(e){var t;this.step=e,(t=this.osc)===null||t===void 0||t.call(this)}},{key:"setHistoryIndex",value:function(e){var t;this.isActive||(this.isActive=!0),this.index=e,this.size=e,(t=this.ohsc)===null||t===void 0||t.call(this)}},{key:"back",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canBack(t))return t>1&&(this.setStep(this.step-this.index),this.setHistoryIndex(0)),this.End;this.setStep(this.step-t),this.setHistoryIndex(this.index-t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"canBack",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index-e>=0}},{key:"first",value:function(){return this.list.length===0?Te:(this.setStep(this.step-this.index),this.setHistoryIndex(0),this.list[0])}},{key:"last",value:function(){return this.list.length===0?Te:(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1),this.list[this.list.length-1])}},{key:"forward",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canForward(t))return t>1&&(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1)),this.End;this.setStep(this.step+t),this.setHistoryIndex(this.index+t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"isEnd",value:function(e){return e===Te}},{key:"canForward",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index+e<this.list.length}},{key:"pop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=this.list.length;if(t<=e){var r=Ar(this.list);return this.clear(),r}var n=t-e,a=this.list.splice(n),o=this.list.length;return o<this.index&&(this.setHistoryIndex(o),this.setStep(this.step-(this.index-o))),a}},{key:"push",value:function(){var e,t=this.list.length;this.index<t&&(this.step++,this.index++,this.mode===0&&this.list.splice(this.index));var r=arguments.length,n=0,a=r;this.max>0&&t+r>this.max&&(n=t+r-this.max,a=r-n),(e=this.list).push.apply(e,arguments),n&&this.list.splice(0,n),this._onListChange(),a&&(this.mode===1?this.setHistoryIndex(this.list.length):this.setHistoryIndex(this.index+a)),this.mode===1?this.setStep(this.list.length):this.setStep(this.step+a),this.isActive&&(this.isActive=!1)}},{key:"clear",value:function(){this.list=[],this._onListChange(),this.setHistoryIndex(0),this.setStep(0),this.isActive=!1}},{key:"replace",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.index;typeof this.list[t]>"u"||(this.list[t]=e,this._onListChange())}},{key:"isLatest",get:function(){return this.index===this.list.length-1}},{key:"_onListChange",value:function(){var e;(e=this.storageProvider)===null||e===void 0||e.write(this.list)}},{key:"current",value:function(){return this.list[this.index]}}])}();Xr.Mode=mr;function sr(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function Ei(i){if(Array.isArray(i))return sr(i)}function Le(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Si(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Ti(r.key),r)}}function Ue(i,e,t){return e&&Si(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Ci(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Ai(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ii(i){return Ei(i)||Ci(i)||Pi(i)||Ai()}function Bi(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function Ti(i){var e=Bi(i,"string");return typeof e=="symbol"?e:e+""}function Ee(i){"@babel/helpers - typeof";return Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(i)}function Pi(i,e){if(i){if(typeof i=="string")return sr(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?sr(i,e):void 0}}function yr(i){return!!(i!=null&&i.__isRef)}var ar=null;function zi(i){return ar=i,function(){ar=null}}function qr(){return ar}var Oi=function(){function i(e,t){var r=this;Le(this,i),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=e,this._set=t;var n=zi(function(a,o){var s=function(){if(r._dirty=!0,r._listeners.length>0){var y=r._value,p=r.value;r._listeners.forEach(function(d){d(p,y)})}},f=typeof o=="string"?a.$sub(o,s):a.sub(s);r._clearSub.push(f)});this._refreshValue(),n()}return Ue(i,[{key:"value",get:function(){var e;return this._dirty&&this._refreshValue(),tn(this),(e=qr())===null||e===void 0||e(this),this._value},set:function(e){if(!this._set){console.warn("Computed not have set property");return}this._set(e)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(e){var t=this;return this._listeners.push(e),function(){return t.unsub(e)}}},{key:"unsub",value:function(e){var t=this._listeners.indexOf(e);return t!==-1?(this._listeners.splice(t,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(e){return e()}),this._clearSub=[]}}])}();function Fi(i,e){return Ne(i)?i:new Oi(i,e)}function Ne(i){return!!(i!=null&&i.__isComputed)}function Jr(i){return typeof i=="function"||Ne(i)}function Qr(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={},r={},n={$sub:function(p,d){return t[p]||(t[p]=[]),t[p].push(d),function(){n.$unsub(p,d)}},$unsub:function(p,d){if(t[p]){if(typeof d>"u")return delete t[p],!0;var m=t[p].indexOf(d);return m===-1?!1:(t[p].splice(m,1),!0)}},$get:function(p){return r[p]}},a={},o=function(p){var d=i[p];r[p]=d,a[p]={get:function(){var m;tn(n,p),(m=qr())===null||m===void 0||m(n,p);var h=r[p];return h},set:function(m){var h,x=r[p];r[p]=m,(h=t[p])===null||h===void 0||h.forEach(function(w){w(m,x)})}},n[p]=d};for(var s in i)o(s);Object.defineProperties(n,a);var f=function(p){n[p]=function(){for(var d=arguments.length,m=new Array(d),h=0;h<d;h++)m[h]=arguments[h];return e[p].apply(n,m)}};for(var y in e)f(y);return n}var xe={};function tn(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t;Ne(i)||yr(i)?(e="value",t=function(r){return i.sub(r)}):t=function(r){return i.$sub(e,r)},Object.assign(xe,{set:function(r){i[e]=r},get:function(){return i[e]},sub:t})}function Di(i,e){if(!xe)throw new Error("Bind 传入参数错误");(Ne(e)||yr(e))&&(e=e.value);var t=xe.get,r=xe.set,n=xe.sub;if(t()!==e)throw new Error("Bind 传入参数错误");var a=i.el,o="string";if(a.tagName==="INPUT"){var s=i.attr("type");s==="number"||s==="range"?o="number":(s==="radio"||s==="checkbox")&&(o="boolean")}var f=function(){if(o==="boolean")return a.checked;var m=i.value();return o==="number"?parseFloat(m):m},y=function(m){if(o==="boolean"){a.checked=m;return}i.value(m)},p=!1,d=function(){p=!0,r(f()),p=!1};y(t()),i.on("input",function(){d()}),i.on("change",function(){d()}),n(function(m){p||y(m)})}function ae(i,e){if(yr(i))i.sub(function(){e(i.value,!1)}),e(i.value,!0);else if(Jr(i)){var t=Fi(i);t.sub(function(){e(t.value,!1)}),e(t.value,!0)}else return e(i,!0),!1;return!0}var en=function(){function i(e){Le(this,i),this.__ld_type=Me.Text,this.el=document.createTextNode(""),typeof e<"u"&&this.text(e)}return Ue(i,[{key:"text",value:function(e){var t=this;return ae(e,function(r){return t.el.textContent=r}),this}},{key:"mounted",value:function(e){return this.__mounted=e,this}}])}(),Ri=function(){function i(){Le(this,i),this.__ld_type=Me.Frag,this.children=[],this.el=document.createDocumentFragment()}return Ue(i,[{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return gr(r,function(a,o){e.children.push(o),e.el.appendChild(a)}),this}},{key:"mounted",value:function(e){return this.__mounted=function(t){t.children.forEach(function(r){var n;(n=r.__mounted)===null||n===void 0||n.call(r,r)}),e(t)},this}}])}(),Me=function(i){return i[i.Dom=0]="Dom",i[i.Text=1]="Text",i[i.Frag=2]="Frag",i}(Me||{});function gr(i,e){i.forEach(function(t){var r;if(Array.isArray(t)){gr(t,e);return}var n=t;Jr(n)?(n=new en(n),n=n.el):typeof n.__ld_type=="number"?n=n.el:t instanceof HTMLElement||(n=document.createTextNode("".concat(t))),e(n,t),(r=t.__mounted)===null||r===void 0||r.call(t,t)})}var Li=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,Ir=/!important$/,Ui=/^[0-9]+$/;function Ni(i,e){i=Mi(i);var t="";return Ir.test(e)&&(t="important",e=e.replace(Ir,"")),Ui.test(e)&&Li.test(i)&&(e="".concat(e,"px")),{cssKey:i,cssValue:e,important:t}}function Mi(i){for(var e=i.length,t="",r=0;r<e;r++){var n=i[r],a=n.charCodeAt(0);a>=65&&a<=90?t+="-".concat(n.toLowerCase()):t+=n}return t}var ji=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function rn(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(e){var r=t.querySelector(i);if(r)return new ce(r);throw new Error("Element is not exist"+i)}for(var n=t.querySelectorAll(i),a=[],o=0;o<n.length;o++)a.push(new ce(n[o]));return a}var Mt=function(){var i=function(t){return new ce(t)},e={frag:{get:function(){return new Ri}},text:{get:function(){var t=function(r){return new en(r)};return t.text=t,t}}};return ji.forEach(function(t){e[t]={get:function(){return i(t)}}}),Object.defineProperties(i,e),i}();function Wi(i,e){var t,r=e;r=rn(e,!0),Array.isArray(i)?(t=r).append.apply(t,Ii(i)):r.append(i)}var ce=function(){function i(e){Le(this,i),this.__ld_type=Me.Dom,this.__xr_funcs={},this.el=typeof e=="string"?document.createElement(e):e}return Ue(i,[{key:"_ur",value:function(e,t){var r=this;return typeof t>"u"?this.el[e]:(ae(t,function(n){return r.el[e]=n}),this)}},{key:"class",value:function(e){return this._ur("className",e)}},{key:"id",value:function(e){return this._ur("id",e)}},{key:"addClass",value:function(e){return this.el.classList.add(e),this}},{key:"removeClass",value:function(e){return this.el.classList.remove(e),this}},{key:"hasClass",value:function(e){var t;return(t=this.el)===null||t===void 0?void 0:t.classList.contains(e)}},{key:"toggleClass",value:function(e,t){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(e,t))}},{key:"remove",value:function(){var e;return(e=this.el)===null||e===void 0||e.remove(),this}},{key:"text",value:function(e){return typeof e>"u"?this.el.innerText:this._ur("innerText",e)}},{key:"mounted",value:function(e){return this.__mounted=e,this}},{key:"attr",value:function(e,t){var r=this;if(Ee(e)==="object"){for(var n in e)this.attr(n,e[n]);return this}return typeof t>"u"?this.el.getAttribute(e)||"":(ae(t,function(a){return r.el.setAttribute(e,a)}),this)}},{key:"removeAttr",value:function(e){return this.el.removeAttribute(e),this}},{key:"func",value:function(e,t){return typeof t>"u"?this.__xr_funcs[e]:(this.__xr_funcs[e]=t,this)}},{key:"data",value:function(e,t){var r=this;if(Ee(e)==="object"){for(var n in e)this.data(n,e[n]);return this}if(typeof t>"u"){var a;return((a=this.el.__xr_data)===null||a===void 0?void 0:a[e])||null}return this.el.__xr_data||(this.el.__xr_data={}),ae(t,function(o){return r.el.__xr_data[e]=o}),this}},{key:"style",value:function(e,t){var r=this.el.style;if(typeof t<"u")return ae(t,function(a){var o=Ni(e,a),s=o.important,f=o.cssValue,y=o.cssKey;r.setProperty(y,f,s)}),this;if(typeof e=="string")return r[e];for(var n in e)this.style(n,e[n]);return this}},{key:"value",value:function(e){return this._ur("value",e)}},{key:"html",value:function(e){return this._ur("innerHTML",e)}},{key:"outerHtml",value:function(e){var t=this;return typeof e>"u"?this.el.outerHTML:(ae(e,function(r){t.html(r),t.el=t.el.children[0]}),this)}},{key:"child",value:function(e){var t=this.el.children[e];return t?new i(t):null}},{key:"children",value:function(){for(var e=this.el.children.length,t=[],r=0;r<e;r++)t.push(this.child(r));return t}},{key:"click",value:function(e){return this.on("click",e)}},{key:"on",value:function(e,t){if(Ee(e)==="object"){for(var r in e)this.on(r,e[r]);return this}var n=this.el;if(typeof t=="function")this.el.addEventListener(e,t);else{var a,o=function(s){var f;t.self&&s.target!==n||(t.stop&&s.stopPropagation(),t.prevent&&s.preventDefault(),t.once&&n.removeEventListener(e,o,t.capture),(f=t.listener)===null||f===void 0||f.call(t,s))};n.addEventListener(e,o,(a=t.capture)!==null&&a!==void 0?a:!1)}return this}},{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return gr(r,function(a){e.el.appendChild(a)}),this}},{key:"ref",value:function(e){return e(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",e)}},{key:"show",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return ae(e,function(n){t.display(n?r:"none")}),this}},{key:"query",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return rn(e,t,this.el)}},{key:"src",value:function(e){return this._ur("src",e)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(e){return this.attr("__xr_name",e)}},{key:"find",value:function(e){return this.query('[__xr_name="'.concat(e,'"]'),!0)}},{key:"type",value:function(e){return this.attr("type",e)}},{key:"bind",value:function(e){return Di(this,e),this}}])}();function Br(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function Tr(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=$i(i))||e){t&&(i=t);var r=0,n=function(){};return{s:n,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(f){throw f},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){t=t.call(i)},n:function(){var f=t.next();return o=f.done,f},e:function(f){s=!0,a=f},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function $i(i,e){if(i){if(typeof i=="string")return Br(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Br(i,e):void 0}}var nn="  ";function Hi(i){nn=i}function Zi(i){Yi(this,i,nn)}function Yi(i,e,t){var r=t.length;if(e.code==="Tab"){e.preventDefault();var n=Pr(i),a=n.startLineIndex,o=n.start,s=n.end,f=n.lineText.split("\n");if(e.shiftKey){var y=!0,p=Tr(f),d;try{for(p.s();!(d=p.n()).done;){var m=d.value;m.startsWith(t)?(i.selectionStart=a,i.selectionEnd=a+r,document.execCommand("delete",!1),y&&m.startsWith(t+t)&&(o-=r),s-=r,a+=m.length-r+1):a+=m.length+1,y=!1}}catch(L){p.e(L)}finally{p.f()}console.log(o,s),i.selectionStart=o,i.selectionEnd=s;return}if(f.length===1){Ge(t);return}o+=r;var h=Tr(f),x;try{for(h.s();!(x=h.n()).done;){var w=x.value;i.selectionStart=i.selectionEnd=a,Ge(t),a+=r+w.length+1,s+=r}}catch(L){h.e(L)}finally{h.f()}i.selectionStart=o,i.selectionEnd=s}else if(e.code==="Enter"&&!e.ctrlKey){for(var k=Pr(i),b=k.lineText.split("\n")[0],E="\n",T=0;b.substring(T,T+r)===t;)E+=t,T+=r;T>0&&(Ge(E),e.preventDefault())}}function Ge(i){i&&document.execCommand("insertText",!1,i)}function Pr(i){var e=i.selectionStart,t=i.selectionEnd,r="",n=i.value;r=n.substring(e,t);var a=n.substring(0,e),o=a.lastIndexOf("\n"),s=o+1;return{start:e,end:t,text:r,lineText:n.substring(s,t),line:r.split("\n").length,startLineIndex:s}}function zr(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function Xe(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=Ki(i))||e){t&&(i=t);var r=0,n=function(){};return{s:n,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(f){throw f},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){t=t.call(i)},n:function(){var f=t.next();return o=f.done,f},e:function(f){s=!0,a=f},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function Ki(i,e){if(i){if(typeof i=="string")return zr(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?zr(i,e):void 0}}function Or(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(i=i.trim(),!i)return[];var t=i.split("|").map(function(s){return s.trim()}),r=[],n=Xe(t),a;try{var o=function(){var s=a.value,f={name:"",args:[],options:{},line:s},y=s.split(" ");f.name=y.shift()||"";var p="",d=!1,m=function(T){if(e&&typeof T=="string"&&T[0]===":"&&(f.args.push(T.substring(1)),T=!0),d)f.options[p]=T;else{var L=Xe(p),B;try{for(L.s();!(B=L.n()).done;){var Z=B.value;f.options[Z]=T}}catch(W){L.e(W)}finally{L.f()}}},h=function(T){p=T.substring(d?2:1)},x=function(T){d=T[1]==="-"},w=!1,k=Xe(y),b;try{for(k.s();!(b=k.n()).done;){var E=b.value;if(E=E.trim(),!!E){if(w){f.args.push(E);continue}if(E==="--"){w=!0;continue}E[0]==="-"?(x(E),p&&m(!0),h(E)):p?E[0]==="-"?(x(E),m(!0),h(E)):(m(E),p=""):f.args.push(E)}}}catch(T){k.e(T)}finally{k.f()}p&&m(!0),r.push(f)};for(n.s();!(a=n.n()).done;)o()}catch(s){n.e(s)}finally{n.f()}return r}(function(){try{if(typeof document<"u"){var i=document.createElement("style");i.appendChild(document.createTextNode(".style-text{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.full-parent{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea::-webkit-scrollbar,.web-term-container::-webkit-scrollbar{width:5px;cursor:pointer;height:5px}.editor-textarea::-webkit-scrollbar-button,.web-term-container::-webkit-scrollbar-button{display:none}.editor-textarea::-webkit-scrollbar-track,.web-term-container::-webkit-scrollbar-track{display:none}.editor-textarea::-webkit-scrollbar-thumb,.web-term-container::-webkit-scrollbar-thumb{background-color:#777;cursor:pointer}.editor-textarea ::selection,.web-term-container ::selection{background-color:var(--selection-bg);color:var(--selection)}.web-term-container{position:relative;font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box;background-color:var(--background);color:var(--color);cursor:text}.web-term-container *{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.editor-cursor{position:absolute;z-index:2;height:var(--line-height);background-color:var(--background);color:var(--color)}.editor-cursor.cursor-focus{background-color:var(--selection-bg);color:var(--selection)}.editor-cursor .editor-cursor-border{position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid var(--selection-bg)}.editor-cursor .editor-cursor-text{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea{color:var(--color)}.term-editor-title{color:var(--color);opacity:.7}.term-display-box>div,.term-below-box>div{padding:2px 0;word-break:break-all;white-space:pre-wrap;color:var(--color)}.term-display-box>div a,.term-below-box>div a{opacity:.7}.term-below-box>div{opacity:.7}")),document.head.appendChild(i)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();function or(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function Vi(i){if(Array.isArray(i))return or(i)}function Gi(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function sn(i,e,t){return e=Oe(e),ts(i,on()?Reflect.construct(e,[],Oe(i).constructor):e.apply(i,t))}function le(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Xi(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,un(r.key),r)}}function he(i,e,t){return e&&Xi(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function qi(i,e,t){return(e=un(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Oe(i){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(i)}function an(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&ur(i,e)}function on(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(on=function(){return!!i})()}function Ji(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Qi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fr(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function Se(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fr(Object(t),!0).forEach(function(r){qi(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Fr(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function ts(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gi(i)}function ur(i,e){return ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},ur(i,e)}function es(i){return Vi(i)||Ji(i)||ns(i)||Qi()}function rs(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function un(i){var e=rs(i,"string");return typeof e=="symbol"?e:e+""}function ns(i,e){if(i){if(typeof i=="string")return or(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?or(i,e):void 0}}var is=function(){function i(e,t){var r=this;le(this,i),this.pushedCurrent=!1,this.provider=t,this.history=new Xr({max:e,mode:mr.Append});var n=t.read();n instanceof Promise?n.then(function(a){r._initHistory(a)}):this._initHistory(n)}return he(i,[{key:"_initHistory",value:function(e){var t,r=JSON.parse(e);(t=this.history).push.apply(t,es(r))}},{key:"up",value:function(e){if(this.history.isActive||(this.push(e),this.history.back(),this.pushedCurrent=!0),this.history.canBack()){var t=this.history.back();return t}else return null}},{key:"down",value:function(){return this.history.canForward()?this.history.forward():null}},{key:"checkLatest",value:function(e){this.history.isLatest&&(this.history.replace(e),this.save())}},{key:"push",value:function(e){this.pushedCurrent&&(this.history.pop(),this.pushedCurrent=!1),this.history.push(e),this.save()}},{key:"save",value:function(){this.provider.write(JSON.stringify(this.history.list))}},{key:"clear",value:function(){this.pushedCurrent=!1,this.history.clear(),this.save()}}])}();function Dr(){var i=navigator.userAgent;return/macintosh|mac os x/i.test(i)}function cr(i){return Dr()&&i.metaKey||!Dr()&&i.ctrlKey}function ss(i){var e=!1;return i.on("compositionstart",function(){e=!0}),i.on("compositionend",function(){e=!1}),function(){return e}}function cn(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return i instanceof HTMLElement?new ce(i):i instanceof ce?i:typeof i=="string"?Mt.div[e?"html":"text"](i+t):Mt.div[e?"html":"text"](i.toString()+t)}var as=function(){function i(){le(this,i),this.container=Mt.div.class("term-display-box").on("click",function(e){e.stopPropagation()})}return he(i,[{key:"pushContent",value:function(e,t){this.container.append(cn(e,t,"\n"))}}])}(),Rr="web-term-container",os=2,fn={FullParent:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},ln={padding:5,fontSize:14,color:"#fff",background:"#000",selectionBackground:"#fff",selectionColor:"#000"};function us(i){if(!i)return!1;var e=i.charCodeAt(0);return e>=128}var hn=function(i){function e(t){var r,n=t.header,a=n===void 0?"":n,o=t.paddingTop,s=o===void 0?5:o,f=t.paddingLeft,y=f===void 0?5:f,p=t.size,d=p===void 0?"full":p,m=t.mode,h=m===void 0?"inline":m,x=t.tab,w=x===void 0?"  ":x,k=t.fontSize,b=k===void 0?ln.fontSize:k;le(this,e),r=sn(this,e),r.SingleCharWidth=9,r.MultiCharWidth=15,r.fontSize=0,r.lineHeight=0,r.wrapLine=!0,r.store=Qr({cx:0,cy:0}),r.header="",r._prevHeader="",r._prevHeaderWidth=0,r._pasteTimer=null,r._prevPos={x:-1,y:-1},r._isShowCursor=!1,r.setFontSize(b),r.size=d,r.mode=h,Hi(w),r.paddingTop=s,r.paddingLeft=y;var E=Mt.canvas;return r.ctx=E.el.getContext("2d"),r.resize(!0),r.header=a,r.render(),r._monitorStart(),r}return an(e,i),he(e,[{key:"setFontSize",value:function(t){this.fontSize=t,this.lineHeight=t+2}},{key:"value",get:function(){var t=this.fullValue,r=this.header.length;return r?t.substring(r):t}},{key:"fullValue",get:function(){return this.textarea.value()}},{key:"beforeValue",get:function(){var t=this.fullValue,r=this.header.length,n=this.textarea.el.selectionStart;return typeof n=="number"&&n>0?t.substring(r,n):t.substring(r)}},{key:"headerWidth",get:function(){var t=this.header;return(t!==this._prevHeader||this._prevHeaderWidth<0)&&(this._prevHeader=t,this._prevHeaderWidth=this.measureTextWidth(t)),this._prevHeaderWidth}},{key:"_monitorStart",value:function(){var t=this;setTimeout(function(){t.textarea.el.clientWidth?t.relocateCursorPosition():t._monitorStart()},100)}},{key:"render",value:function(){var t=this.size==="full";this.container=Mt.div.style({position:"relative",height:t?"100%":"".concat(this.lineHeight+2*this.paddingTop,"px")}).append(this.cursor=Mt.div.class("editor-cursor").append(Mt.div.class("editor-cursor-border"),this.cursorText=Mt.div.class("editor-cursor-text")),this.textarea=Mt.textarea.class("editor-textarea").value(this.header).style(Se(Se({},fn.FullParent),{},{padding:"".concat(this.paddingTop,"px ").concat(this.paddingLeft,"px"),backgroundColor:"transparent",border:"none",outline:"none",resize:"none",zIndex:"1",caretColor:"transparent"}))),this.wrapLine&&this.textarea.style({wordBreak:"break-all",whiteSpace:"pre-wrap"}),this.initEvents()}},{key:"initEvents",value:function(){var t=this,r=!1,n=this.textarea.el,a=function(p){return p.code==="Backspace"||p.code==="Enter"},o=ss(this.textarea),s=null,f=this.compatSelChange();this.textarea.on("keydown",function(p){if(!o()){if(t.mode==="inline"){if(p.code==="Enter")if(cr(p))t.pushText("\n");else{p.preventDefault(),t.emit("key","Enter");return}else if(p.code==="ArrowUp"||p.code==="ArrowDown"||p.code==="Tab"){p.preventDefault(),t.emit("key",p.code);return}}if(p.code==="Tab"&&n.selectionStart!==n.selectionEnd&&t.showCursor(!1),Zi.call(n,p),a(p)&&(r=!0),p.code==="Backspace"){var d=t.getCursorPosition(),m=d.x,h=d.y,x=d.isRange;h===0&&m<=t.headerWidth&&!x&&p.preventDefault()}cr(p)&&p.code==="KeyZ"&&(clearTimeout(s),s=setTimeout(function(){t.relocateCursorPosition()},50))}}).on("keyup",function(p){o()||a(p)&&(r=!1)}).on("paste",function(){t._pasteTimer=setTimeout(function(){t.relocateCursorPosition()},50)}).on("input",function(p){if(p.preventDefault(),r&&t.relocateCursorPosition(),t.size==="auto"){var d=t._countContentHeight(t.fullValue,!0);d!=n.clientHeight&&t.textarea.style("height","".concat(d,"px"))}t.emit("input")}).on("selectionchange",function(){f&&(f(),f=null),t._onSelectionChange()}).on("scroll",function(){t.relocateCursorPosition()}).on("focus",function(){t.cursor.addClass("cursor-focus")}).on("blur",function(){t.cursor.removeClass("cursor-focus")}).on("cut",function(){var p=t.textarea.el;p.selectionStart!==p.selectionEnd&&t.relocateCursorPosition()});var y=n.clientWidth;globalThis.addEventListener("resize",function(){n.clientWidth!==y&&(y=n.clientWidth,t.relocateCursorPosition())})}},{key:"_countContentHeight",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._countContentSize(t,r).height}},{key:"_countContentSize",value:function(t){var r=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=t.split("\n"),o=0,s=a.map(function(f){var y=r.countSingleLineInfo(f);return o+=y.length*r.lineHeight,y});return{lines:s,height:o+(n?2*this.paddingTop:0)}}},{key:"countSingleLineInfo",value:function(t){var r=this,n=this._getLineBoxWidth();if(n<=0)return[{content:t,width:this.measureTextWidth(t)}];var a=Math.floor(n/this.MultiCharWidth);if(t.length<=a)return[{content:t,width:this.measureTextWidth(t)}];for(var o=[],s=t.length,f=0,y=f+a,p=function(){var k=t.substring(f,y);return{content:k,width:r.measureTextWidth(k)}};s>a;){var d=p(),m=d.content,h=d.width,x=void 0,w=void 0;do{if(x=m,w=h,y>=t.length){y++;break}m+=t[y],h=this.measureTextWidth(m),y++}while(h<=n);o.push({content:x,width:w}),f=y-1,y=f+a,s-=x.length}return f<t.length&&o.push(p()),o}},{key:"_onSelectionChange",value:function(){var t=this.textarea.el;if(t.selectionStart===t.selectionEnd)this.relocateCursorPosition();else{if(t.clientWidth===0)return;var r=this.header.length;t.selectionStart<r&&(t.selectionStart=r);var n=t.value.length;t.selectionEnd>n&&(t.selectionEnd=n)}}},{key:"compatSelChange",value:function(){var t=this,r=function(){var n=t.textarea.el;document.activeElement===n&&t._onSelectionChange()};return document.addEventListener("selectionchange",r),function(){return document.removeEventListener("selectionchange",r)}}},{key:"measureTextWidth",value:function(t){return t?this.ctx.measureText(t).width:0}},{key:"_getLineBoxWidth",value:function(){return this.textarea.el.clientWidth-2*this.paddingLeft}},{key:"getCursorPosition",value:function(){var t=this.textarea.el,r=t.selectionStart,n=t.selectionEnd,a=t.value.substring(0,r),o=this._getLineBoxWidth(),s=t.value[r]||"",f=0,y=0;if(this.wrapLine){var p,d=this._countContentSize(a);y=d.height-this.lineHeight,f=((p=d.lines.pop())===null||p===void 0||(p=p.pop())===null||p===void 0?void 0:p.width)||0}else f=this.measureTextWidth(a),y=(a.split("\n").length-1)*this.lineHeight;var m=us(s)?this.MultiCharWidth:this.SingleCharWidth;return f+m>o&&(f=0,y+=this.lineHeight),(this._prevPos.x!==f||this._prevPos.y!==y)&&(Object.assign(this._prevPos,{x:f,y}),this.emit("cursor-change",{x:f,y,word:s,wordWidth:m,beforeValue:this.beforeValue,value:this.value})),{x:f,y,isRange:r!=n,word:s,wordWidth:m}}},{key:"showCursor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._isShowCursor!==t&&(this.cursor.style("visibility",t?"visible":"hidden"),this._isShowCursor=t)}},{key:"relocateCursorPosition",value:function(){clearTimeout(this._pasteTimer);var t=this.textarea.el;this.showCursor();var r=this.getCursorPosition(),n=r.x,a=r.y,o=r.word,s=r.wordWidth,f=n;if(a===0&&n<this.headerWidth){var y=this.header.length;t.setSelectionRange(y,y),f=this.headerWidth}this.cursor.style({left:"".concat(f+this.paddingLeft,"px"),top:"".concat(a+this.paddingTop-t.scrollTop,"px"),width:"".concat(s,"px")}),this.cursorText.text(o)}},{key:"focus",value:function(){this.textarea.el.focus()}},{key:"pushText",value:function(t){var r=this.textarea.el;r.selectionStart=r.selectionEnd=r.value.length,this.insertText(t)}},{key:"insertText",value:function(t){t&&document.execCommand("insertText",!1,t)}},{key:"replaceText",value:function(t){this.clearContent(!1),this.pushText(t),this.relocateCursorPosition()}},{key:"clearContent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=this.textarea.el,n=r.value,a=!n.startsWith(this.header),o=this.header.length;r.selectionStart=a?0:o,r.selectionEnd=n.length+1,o!==n.length&&(document.execCommand("delete",!1),a&&this.insertText(this.header),t&&this.relocateCursorPosition())}},{key:"setCursorToHead",value:function(){this.setCursorPos(0)}},{key:"setCursorPos",value:function(t){var r=this.textarea.el;r.selectionStart=r.selectionEnd=this.header.length+t}},{key:"resize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.ctx.font="".concat(this.fontSize,'px Menlo, Monaco, "Courier New", monospace'),this.SingleCharWidth=this.measureTextWidth("a"),this.MultiCharWidth=this.measureTextWidth("一"),!t){this._prevHeaderWidth=-1;var r=this.size==="full";r||this.container.style("height","".concat(this.lineHeight+2*this.paddingTop,"px")),this.relocateCursorPosition()}}}])}(Gr.Eveit),cs=function(){function i(){le(this,i),this.container=Mt.div.class("term-below-box").on("click",function(e){e.stopPropagation()})}return he(i,[{key:"write",value:function(e,t){var r=this.container.children();r.length>0&&r[r.length-1].remove(),this.push(e,t)}},{key:"push",value:function(e,t){this.container.append(cn(e,t,"\n"))}},{key:"clear",value:function(){this.container.empty()}}])}(),fs=function(){function i(e){var t=this;le(this,i),this.editor=new hn({mode:"full",paddingLeft:0,paddingTop:0,fontSize:e.fontSize}),this.container=Mt.div.style(Se(Se({},fn.FullParent),{},{padding:e.padding,zIndex:100,flexDirection:"column",display:"flex"})).append(this.title=Mt.div.class("term-editor-title").text(""),this.editor.container.style({flex:"1",height:"auto"})),this.container.on("click",function(r){r.stopPropagation()}),this.container.on("keydown",function(r){if(r.code==="KeyS"&&cr(r)){var n=t.editor.value;t.editor.clearContent(),t.editor.emit("edit-done",n),r.preventDefault()}r.code==="Escape"&&(t.editor.clearContent(),t.editor.emit("edit-cancel"))})}return he(i,[{key:"_init",value:function(e,t){var r=t.title,n=r===void 0?"":r,a=t.html,o=a===void 0?!1:a;this.editor.textarea.el.focus(),this.editor.replaceText(e),this.title.style({paddingBottom:n?"5px":0})[o?"html":"text"](n)}}])}(),ls=function(){function i(e,t){le(this,i),this.parent=e,this.style=t,this.list=[]}return he(i,[{key:"create",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new fs(this.style);this.parent.container.append(n.container),this.parent.store.showEditor=!0;var a=n.editor,o=function(){t.removeEditor(n)};if(a.once("edit-done",o),a.once("edit-cancel",o),this.list.length>0){var s=this.list[this.list.length-1];s.container.display("none")}return this.list.push(n),n._init(e,r),a}},{key:"removeEditor",value:function(e){var t=this.list.indexOf(e);if(t>=0){if(this.list.splice(t,1),this.list.length===0)this.parent.store.showEditor=!1;else{var r=this.list[this.list.length-1];r.container.display("flex"),r.editor.focus()}e.container.remove(),this.parent.input.focus()}}},{key:"setFontSize",value:function(e){this.list.forEach(function(t){t.editor.setFontSize(e)})}},{key:"resize",value:function(){this.list.forEach(function(e){e.editor.resize()})}}])}();function hs(){var i="_web_term_ui_history;";return{read:function(){return localStorage.getItem(i)||"[]"},write:function(e){return localStorage.setItem(i,e),!0}}}var ds=function(i){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.title,a=n===void 0?"":n,o=r.titleHtml,s=o===void 0?!0:o,f=r.historyMax,y=f===void 0?100:f,p=r.storageProvider,d=p===void 0?hs():p,m=r.container,h=r.header,x=r.theme,w=r.style,k=w===void 0?{padding:5}:w,b=r.parseCommand,E=b===void 0?!0:b;if(le(this,e),t=sn(this,e),t.style=Se({},ln),t.store=Qr({showEditor:!1}),t.theme="dark",t._parseCommand=E,t.title=a,t.history=new is(y,d),Object.assign(t.style,k),t.editManager=new ls(t,k),t.input=new hn({paddingTop:os,paddingLeft:0,header:h,size:"auto",mode:"inline",fontSize:t.style.fontSize}),t.display=new as,t.below=new cs,a&&t.display.pushContent(a,s),!m)t.container=Mt.div.class(Rr).style({position:"fixed",top:0,left:0,width:"100%",height:"100%"}),Wi(t.container,"body");else{if(typeof m=="string"){var T=document.querySelector(m);if(!T)throw new Error("Container not exists");t.container=new ce(T)}else t.container=new ce(m);t.container.addClass(Rr)}return t.initEvents(),x?t.setTheme(x):t.setColor(k),t._setFontSize(t.style.fontSize),t.render(),t}return an(e,i),he(e,[{key:"value",get:function(){return this.input.value}},{key:"beforeValue",get:function(){return this.input.beforeValue}},{key:"header",get:function(){return this.input.header}},{key:"initEvents",value:function(){var t=this;this.input.on("key",function(r){switch(r){case"Enter":{var n=t.input.value;if(n&&t.history.push(n),t.emit("enter",n),t._parseCommand){var a=Or(n);t.emit("command",a[0],a)}}break;case"ArrowDown":{var o=t.history.down();typeof o=="string"&&t.input.replaceText(o)}break;case"ArrowUp":{var s=t.history.up(t.input.value);typeof s=="string"?t.input.replaceText(s):t.input.setCursorToHead()}break;case"Tab":t.emit("tab",t.input.beforeValue);break}}),this.input.on("input",function(){t.history.checkLatest(t.input.value),t.emit("input",t.value,t.input.beforeValue)}),this.container.on("click",function(){t.input.focus()}),this.input.on("cursor-change",function(r){t.emit("cursor-change",r)})}},{key:"render",value:function(){var t=this;this.container.style({overflow:function(){return t.store.showEditor?"hidden":"auto"}}).append(this.mainContainer=Mt.div.style("padding",this.style.padding).append(this.display.container,this.input.container,this.below.container).show(function(){return!t.store.showEditor}))}},{key:"setTheme",value:function(t){var r="#fff",n="#000",a=t==="light";this.theme=t,this.setColor({background:a?r:n,color:a?n:r,selectionBackground:a?n:r,selectionColor:a?r:n})}},{key:"setColor",value:function(t){Object.assign(this.style,t),this.container.style({"--background":this.style.background,"--color":this.style.color,"--selection":this.style.selectionColor,"--selection-bg":this.style.selectionBackground})}},{key:"_setFontSize",value:function(t){this.style.fontSize=t;var r=t+2;this.container.style({"--font-size":t,"--line-height":r})}},{key:"fontSize",get:function(){return this.style.fontSize}},{key:"setFontSize",value:function(t){this._setFontSize(t),this.editManager.setFontSize(t),this.input.setFontSize(t),this.resize()}},{key:"clearInputHistory",value:function(){this.history.clear()}},{key:"write",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.html,a=n===void 0?!0:n,o=r.clear,s=o===void 0?!0:o;this.display.pushContent(this.input.fullValue,a),t&&this.display.pushContent(t,a),s&&this.input.clearContent(),this.scrollToBottom()}},{key:"insertText",value:function(t){this.input.insertText(t)}},{key:"clearContent",value:function(){this.input.clearContent()}},{key:"setCursorPos",value:function(t){this.input.setCursorPos(t)}},{key:"edit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.editManager.create(t,r)}},{key:"clearTerminal",value:function(){this.display.container.empty(),this.input.clearContent()}},{key:"newLine",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.write("",{html:t})}},{key:"setHeader",value:function(t){this.input.header=t}},{key:"scrollToBottom",value:function(){this.container.el.scrollTop=this.container.el.scrollHeight}},{key:"focus",value:function(){this.input.focus()}},{key:"writeBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.write(t,r),this.scrollToBottom()}},{key:"pushBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.push(t,r),this.scrollToBottom()}},{key:"clearBelow",value:function(){this.below.clear()}},{key:"resize",value:function(){this.editManager.resize(),this.input.resize()}},{key:"parseCommand",value:function(t){return Or(t)}}])}(Gr.Eveit);function ps(i,e=0){if(i.length===0)return"";if(i.length===1)return i[0];let t=i[0].substring(0,e),r=e;for(;;){const n=i[0][r];if(!n)return t;for(let a=1;a<i.length;a++)if(i[a][r]!==n)return t;t+=n,r++}}function Qt(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dn={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(r,n,a){function o(y,p){if(!n[y]){if(!r[y]){var d=typeof Qt=="function"&&Qt;if(!p&&d)return d(y,!0);if(s)return s(y,!0);var m=new Error("Cannot find module '"+y+"'");throw m.code="MODULE_NOT_FOUND",m}var h=n[y]={exports:{}};r[y][0].call(h.exports,function(x){var w=r[y][1][x];return o(w||x)},h,h.exports,t,r,n,a)}return n[y].exports}for(var s=typeof Qt=="function"&&Qt,f=0;f<a.length;f++)o(a[f]);return o}({1:[function(t,r,n){(function(a){var o=a.MutationObserver||a.WebKitMutationObserver,s;if(o){var f=0,y=new o(x),p=a.document.createTextNode("");y.observe(p,{characterData:!0}),s=function(){p.data=f=++f%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var d=new a.MessageChannel;d.port1.onmessage=x,s=function(){d.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?s=function(){var k=a.document.createElement("script");k.onreadystatechange=function(){x(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},a.document.documentElement.appendChild(k)}:s=function(){setTimeout(x,0)};var m,h=[];function x(){m=!0;for(var k,b,E=h.length;E;){for(b=h,h=[],k=-1;++k<E;)b[k]();E=h.length}m=!1}r.exports=w;function w(k){h.push(k)===1&&!m&&s()}}).call(this,typeof Gt<"u"?Gt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,n){var a=t(1);function o(){}var s={},f=["REJECTED"],y=["FULFILLED"],p=["PENDING"];r.exports=d;function d(B){if(typeof B!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,B!==o&&w(this,B)}d.prototype.catch=function(B){return this.then(null,B)},d.prototype.then=function(B,Z){if(typeof B!="function"&&this.state===y||typeof Z!="function"&&this.state===f)return this;var W=new this.constructor(o);if(this.state!==p){var X=this.state===y?B:Z;h(W,X,this.outcome)}else this.queue.push(new m(W,B,Z));return W};function m(B,Z,W){this.promise=B,typeof Z=="function"&&(this.onFulfilled=Z,this.callFulfilled=this.otherCallFulfilled),typeof W=="function"&&(this.onRejected=W,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(B){s.resolve(this.promise,B)},m.prototype.otherCallFulfilled=function(B){h(this.promise,this.onFulfilled,B)},m.prototype.callRejected=function(B){s.reject(this.promise,B)},m.prototype.otherCallRejected=function(B){h(this.promise,this.onRejected,B)};function h(B,Z,W){a(function(){var X;try{X=Z(W)}catch(H){return s.reject(B,H)}X===B?s.reject(B,new TypeError("Cannot resolve promise with itself")):s.resolve(B,X)})}s.resolve=function(B,Z){var W=k(x,Z);if(W.status==="error")return s.reject(B,W.value);var X=W.value;if(X)w(B,X);else{B.state=y,B.outcome=Z;for(var H=-1,rt=B.queue.length;++H<rt;)B.queue[H].callFulfilled(Z)}return B},s.reject=function(B,Z){B.state=f,B.outcome=Z;for(var W=-1,X=B.queue.length;++W<X;)B.queue[W].callRejected(Z);return B};function x(B){var Z=B&&B.then;if(B&&(typeof B=="object"||typeof B=="function")&&typeof Z=="function")return function(){Z.apply(B,arguments)}}function w(B,Z){var W=!1;function X(P){W||(W=!0,s.reject(B,P))}function H(P){W||(W=!0,s.resolve(B,P))}function rt(){Z(H,X)}var dt=k(rt);dt.status==="error"&&X(dt.value)}function k(B,Z){var W={};try{W.value=B(Z),W.status="success"}catch(X){W.status="error",W.value=X}return W}d.resolve=b;function b(B){return B instanceof this?B:s.resolve(new this(o),B)}d.reject=E;function E(B){var Z=new this(o);return s.reject(Z,B)}d.all=T;function T(B){var Z=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var W=B.length,X=!1;if(!W)return this.resolve([]);for(var H=new Array(W),rt=0,dt=-1,P=new this(o);++dt<W;)V(B[dt],dt);return P;function V(g,q){Z.resolve(g).then(vt,function(et){X||(X=!0,s.reject(P,et))});function vt(et){H[q]=et,++rt===W&&!X&&(X=!0,s.resolve(P,H))}}}d.race=L;function L(B){var Z=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var W=B.length,X=!1;if(!W)return this.resolve([]);for(var H=-1,rt=new this(o);++H<W;)dt(B[H]);return rt;function dt(P){Z.resolve(P).then(function(V){X||(X=!0,s.resolve(rt,V))},function(V){X||(X=!0,s.reject(rt,V))})}}},{1:1}],3:[function(t,r,n){(function(a){typeof a.Promise!="function"&&(a.Promise=t(2))}).call(this,typeof Gt<"u"?Gt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,n){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};function o(_,z){if(!(_ instanceof z))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(_){return}}var f=s();function y(){try{if(!f||!f.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),z=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!_||z)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(C){return!1}}function p(_,z){_=_||[],z=z||{};try{return new Blob(_,z)}catch(F){if(F.name!=="TypeError")throw F;for(var C=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,D=new C,U=0;U<_.length;U+=1)D.append(_[U]);return D.getBlob(z.type)}}typeof Promise>"u"&&t(3);var d=Promise;function m(_,z){z&&_.then(function(C){z(null,C)},function(C){z(C)})}function h(_,z,C){typeof z=="function"&&_.then(z),typeof C=="function"&&_.catch(C)}function x(_){return typeof _!="string"&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function w(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",b=void 0,E={},T=Object.prototype.toString,L="readonly",B="readwrite";function Z(_){for(var z=_.length,C=new ArrayBuffer(z),D=new Uint8Array(C),U=0;U<z;U++)D[U]=_.charCodeAt(U);return C}function W(_){return new d(function(z){var C=_.transaction(k,B),D=p([""]);C.objectStore(k).put(D,"key"),C.onabort=function(U){U.preventDefault(),U.stopPropagation(),z(!1)},C.oncomplete=function(){var U=navigator.userAgent.match(/Chrome\/(\d+)/),F=navigator.userAgent.match(/Edge\//);z(F||!U||parseInt(U[1],10)>=43)}}).catch(function(){return!1})}function X(_){return typeof b=="boolean"?d.resolve(b):W(_).then(function(z){return b=z,b})}function H(_){var z=E[_.name],C={};C.promise=new d(function(D,U){C.resolve=D,C.reject=U}),z.deferredOperations.push(C),z.dbReady?z.dbReady=z.dbReady.then(function(){return C.promise}):z.dbReady=C.promise}function rt(_){var z=E[_.name],C=z.deferredOperations.pop();if(C)return C.resolve(),C.promise}function dt(_,z){var C=E[_.name],D=C.deferredOperations.pop();if(D)return D.reject(z),D.promise}function P(_,z){return new d(function(C,D){if(E[_.name]=E[_.name]||j(),_.db)if(z)H(_),_.db.close();else return C(_.db);var U=[_.name];z&&U.push(_.version);var F=f.open.apply(f,U);z&&(F.onupgradeneeded=function(J){var nt=F.result;try{nt.createObjectStore(_.storeName),J.oldVersion<=1&&nt.createObjectStore(k)}catch(ot){if(ot.name==="ConstraintError")console.warn('The database "'+_.name+'" has been upgraded from version '+J.oldVersion+" to version "+J.newVersion+', but the storage "'+_.storeName+'" already exists.');else throw ot}}),F.onerror=function(J){J.preventDefault(),D(F.error)},F.onsuccess=function(){var J=F.result;J.onversionchange=function(nt){nt.target.close()},C(J),rt(_)}})}function V(_){return P(_,!1)}function g(_){return P(_,!0)}function q(_,z){if(!_.db)return!0;var C=!_.db.objectStoreNames.contains(_.storeName),D=_.version<_.db.version,U=_.version>_.db.version;if(D&&(_.version!==z&&console.warn('The database "'+_.name+"\" can't be downgraded from version "+_.db.version+" to version "+_.version+"."),_.version=_.db.version),U||C){if(C){var F=_.db.version+1;F>_.version&&(_.version=F)}return!0}return!1}function vt(_){return new d(function(z,C){var D=new FileReader;D.onerror=C,D.onloadend=function(U){var F=btoa(U.target.result||"");z({__local_forage_encoded_blob:!0,data:F,type:_.type})},D.readAsBinaryString(_)})}function et(_){var z=Z(atob(_.data));return p([z],{type:_.type})}function _t(_){return _&&_.__local_forage_encoded_blob}function at(_){var z=this,C=z._initReady().then(function(){var D=E[z._dbInfo.name];if(D&&D.dbReady)return D.dbReady});return h(C,_,_),C}function gt(_){H(_);for(var z=E[_.name],C=z.forages,D=0;D<C.length;D++){var U=C[D];U._dbInfo.db&&(U._dbInfo.db.close(),U._dbInfo.db=null)}return _.db=null,V(_).then(function(F){return _.db=F,q(_)?g(_):F}).then(function(F){_.db=z.db=F;for(var J=0;J<C.length;J++)C[J]._dbInfo.db=F}).catch(function(F){throw dt(_,F),F})}function M(_,z,C,D){D===void 0&&(D=1);try{var U=_.db.transaction(_.storeName,z);C(null,U)}catch(F){if(D>0&&(!_.db||F.name==="InvalidStateError"||F.name==="NotFoundError"))return d.resolve().then(function(){if(!_.db||F.name==="NotFoundError"&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),g(_)}).then(function(){return gt(_).then(function(){M(_,z,C,D-1)})}).catch(C);C(F)}}function j(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function yt(_){var z=this,C={db:null};if(_)for(var D in _)C[D]=_[D];var U=E[C.name];U||(U=j(),E[C.name]=U),U.forages.push(z),z._initReady||(z._initReady=z.ready,z.ready=at);var F=[];function J(){return d.resolve()}for(var nt=0;nt<U.forages.length;nt++){var ot=U.forages[nt];ot!==z&&F.push(ot._initReady().catch(J))}var ut=U.forages.slice(0);return d.all(F).then(function(){return C.db=U.db,V(C)}).then(function(ct){return C.db=ct,q(C,z._defaultConfig.version)?g(C):ct}).then(function(ct){C.db=U.db=ct,z._dbInfo=C;for(var pt=0;pt<ut.length;pt++){var kt=ut[pt];kt!==z&&(kt._dbInfo.db=C.db,kt._dbInfo.version=C.version)}})}function lt(_,z){var C=this;_=x(_);var D=new d(function(U,F){C.ready().then(function(){M(C._dbInfo,L,function(J,nt){if(J)return F(J);try{var ot=nt.objectStore(C._dbInfo.storeName),ut=ot.get(_);ut.onsuccess=function(){var ct=ut.result;ct===void 0&&(ct=null),_t(ct)&&(ct=et(ct)),U(ct)},ut.onerror=function(){F(ut.error)}}catch(ct){F(ct)}})}).catch(F)});return m(D,z),D}function ft(_,z){var C=this,D=new d(function(U,F){C.ready().then(function(){M(C._dbInfo,L,function(J,nt){if(J)return F(J);try{var ot=nt.objectStore(C._dbInfo.storeName),ut=ot.openCursor(),ct=1;ut.onsuccess=function(){var pt=ut.result;if(pt){var kt=pt.value;_t(kt)&&(kt=et(kt));var Ct=_(kt,pt.key,ct++);Ct!==void 0?U(Ct):pt.continue()}else U()},ut.onerror=function(){F(ut.error)}}catch(pt){F(pt)}})}).catch(F)});return m(D,z),D}function Pt(_,z,C){var D=this;_=x(_);var U=new d(function(F,J){var nt;D.ready().then(function(){return nt=D._dbInfo,T.call(z)==="[object Blob]"?X(nt.db).then(function(ot){return ot?z:vt(z)}):z}).then(function(ot){M(D._dbInfo,B,function(ut,ct){if(ut)return J(ut);try{var pt=ct.objectStore(D._dbInfo.storeName);ot===null&&(ot=void 0);var kt=pt.put(ot,_);ct.oncomplete=function(){ot===void 0&&(ot=null),F(ot)},ct.onabort=ct.onerror=function(){var Ct=kt.error?kt.error:kt.transaction.error;J(Ct)}}catch(Ct){J(Ct)}})}).catch(J)});return m(U,C),U}function Ft(_,z){var C=this;_=x(_);var D=new d(function(U,F){C.ready().then(function(){M(C._dbInfo,B,function(J,nt){if(J)return F(J);try{var ot=nt.objectStore(C._dbInfo.storeName),ut=ot.delete(_);nt.oncomplete=function(){U()},nt.onerror=function(){F(ut.error)},nt.onabort=function(){var ct=ut.error?ut.error:ut.transaction.error;F(ct)}}catch(ct){F(ct)}})}).catch(F)});return m(D,z),D}function bt(_){var z=this,C=new d(function(D,U){z.ready().then(function(){M(z._dbInfo,B,function(F,J){if(F)return U(F);try{var nt=J.objectStore(z._dbInfo.storeName),ot=nt.clear();J.oncomplete=function(){D()},J.onabort=J.onerror=function(){var ut=ot.error?ot.error:ot.transaction.error;U(ut)}}catch(ut){U(ut)}})}).catch(U)});return m(C,_),C}function xt(_){var z=this,C=new d(function(D,U){z.ready().then(function(){M(z._dbInfo,L,function(F,J){if(F)return U(F);try{var nt=J.objectStore(z._dbInfo.storeName),ot=nt.count();ot.onsuccess=function(){D(ot.result)},ot.onerror=function(){U(ot.error)}}catch(ut){U(ut)}})}).catch(U)});return m(C,_),C}function Ot(_,z){var C=this,D=new d(function(U,F){if(_<0){U(null);return}C.ready().then(function(){M(C._dbInfo,L,function(J,nt){if(J)return F(J);try{var ot=nt.objectStore(C._dbInfo.storeName),ut=!1,ct=ot.openKeyCursor();ct.onsuccess=function(){var pt=ct.result;if(!pt){U(null);return}_===0||ut?U(pt.key):(ut=!0,pt.advance(_))},ct.onerror=function(){F(ct.error)}}catch(pt){F(pt)}})}).catch(F)});return m(D,z),D}function zt(_){var z=this,C=new d(function(D,U){z.ready().then(function(){M(z._dbInfo,L,function(F,J){if(F)return U(F);try{var nt=J.objectStore(z._dbInfo.storeName),ot=nt.openKeyCursor(),ut=[];ot.onsuccess=function(){var ct=ot.result;if(!ct){D(ut);return}ut.push(ct.key),ct.continue()},ot.onerror=function(){U(ot.error)}}catch(ct){U(ct)}})}).catch(U)});return m(C,_),C}function Ut(_,z){z=w.apply(this,arguments);var C=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||C.name,_.storeName=_.storeName||C.storeName);var D=this,U;if(!_.name)U=d.reject("Invalid arguments");else{var F=_.name===C.name&&D._dbInfo.db,J=F?d.resolve(D._dbInfo.db):V(_).then(function(nt){var ot=E[_.name],ut=ot.forages;ot.db=nt;for(var ct=0;ct<ut.length;ct++)ut[ct]._dbInfo.db=nt;return nt});_.storeName?U=J.then(function(nt){if(nt.objectStoreNames.contains(_.storeName)){var ot=nt.version+1;H(_);var ut=E[_.name],ct=ut.forages;nt.close();for(var pt=0;pt<ct.length;pt++){var kt=ct[pt];kt._dbInfo.db=null,kt._dbInfo.version=ot}var Ct=new d(function(It,Lt){var Dt=f.open(_.name,ot);Dt.onerror=function(jt){var ke=Dt.result;ke.close(),Lt(jt)},Dt.onupgradeneeded=function(){var jt=Dt.result;jt.deleteObjectStore(_.storeName)},Dt.onsuccess=function(){var jt=Dt.result;jt.close(),It(jt)}});return Ct.then(function(It){ut.db=It;for(var Lt=0;Lt<ct.length;Lt++){var Dt=ct[Lt];Dt._dbInfo.db=It,rt(Dt._dbInfo)}}).catch(function(It){throw(dt(_,It)||d.resolve()).catch(function(){}),It})}}):U=J.then(function(nt){H(_);var ot=E[_.name],ut=ot.forages;nt.close();for(var ct=0;ct<ut.length;ct++){var pt=ut[ct];pt._dbInfo.db=null}var kt=new d(function(Ct,It){var Lt=f.deleteDatabase(_.name);Lt.onerror=function(){var Dt=Lt.result;Dt&&Dt.close(),It(Lt.error)},Lt.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},Lt.onsuccess=function(){var Dt=Lt.result;Dt&&Dt.close(),Ct(Dt)}});return kt.then(function(Ct){ot.db=Ct;for(var It=0;It<ut.length;It++){var Lt=ut[It];rt(Lt._dbInfo)}}).catch(function(Ct){throw(dt(_,Ct)||d.resolve()).catch(function(){}),Ct})})}return m(U,z),U}var Rt={_driver:"asyncStorage",_initStorage:yt,_support:y(),iterate:ft,getItem:lt,setItem:Pt,removeItem:Ft,clear:bt,length:xt,key:Ot,keys:zt,dropInstance:Ut};function l(){return typeof openDatabase=="function"}var G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",I=/^~~local_forage_type~([^~]+)~/,A="__lfsc__:",R=A.length,Q="arbf",tt="blob",N="si08",st="ui08",ht="uic8",it="si16",mt="si32",v="ur16",u="ui32",c="fl32",S="fl64",O=R+Q.length,$=Object.prototype.toString;function Y(_){var z=_.length*.75,C=_.length,D,U=0,F,J,nt,ot;_[_.length-1]==="="&&(z--,_[_.length-2]==="="&&z--);var ut=new ArrayBuffer(z),ct=new Uint8Array(ut);for(D=0;D<C;D+=4)F=G.indexOf(_[D]),J=G.indexOf(_[D+1]),nt=G.indexOf(_[D+2]),ot=G.indexOf(_[D+3]),ct[U++]=F<<2|J>>4,ct[U++]=(J&15)<<4|nt>>2,ct[U++]=(nt&3)<<6|ot&63;return ut}function wt(_){var z=new Uint8Array(_),C="",D;for(D=0;D<z.length;D+=3)C+=G[z[D]>>2],C+=G[(z[D]&3)<<4|z[D+1]>>4],C+=G[(z[D+1]&15)<<2|z[D+2]>>6],C+=G[z[D+2]&63];return z.length%3===2?C=C.substring(0,C.length-1)+"=":z.length%3===1&&(C=C.substring(0,C.length-2)+"=="),C}function Bt(_,z){var C="";if(_&&(C=$.call(_)),_&&(C==="[object ArrayBuffer]"||_.buffer&&$.call(_.buffer)==="[object ArrayBuffer]")){var D,U=A;_ instanceof ArrayBuffer?(D=_,U+=Q):(D=_.buffer,C==="[object Int8Array]"?U+=N:C==="[object Uint8Array]"?U+=st:C==="[object Uint8ClampedArray]"?U+=ht:C==="[object Int16Array]"?U+=it:C==="[object Uint16Array]"?U+=v:C==="[object Int32Array]"?U+=mt:C==="[object Uint32Array]"?U+=u:C==="[object Float32Array]"?U+=c:C==="[object Float64Array]"?U+=S:z(new Error("Failed to get type for BinaryArray"))),z(U+wt(D))}else if(C==="[object Blob]"){var F=new FileReader;F.onload=function(){var J=K+_.type+"~"+wt(this.result);z(A+tt+J)},F.readAsArrayBuffer(_)}else try{z(JSON.stringify(_))}catch(J){console.error("Couldn't convert value into a JSON string: ",_),z(null,J)}}function Et(_){if(_.substring(0,R)!==A)return JSON.parse(_);var z=_.substring(O),C=_.substring(R,O),D;if(C===tt&&I.test(z)){var U=z.match(I);D=U[1],z=z.substring(U[0].length)}var F=Y(z);switch(C){case Q:return F;case tt:return p([F],{type:D});case N:return new Int8Array(F);case st:return new Uint8Array(F);case ht:return new Uint8ClampedArray(F);case it:return new Int16Array(F);case v:return new Uint16Array(F);case mt:return new Int32Array(F);case u:return new Uint32Array(F);case c:return new Float32Array(F);case S:return new Float64Array(F);default:throw new Error("Unkown type: "+C)}}var At={serialize:Bt,deserialize:Et,stringToBuffer:Y,bufferToString:wt};function St(_,z,C,D){_.executeSql("CREATE TABLE IF NOT EXISTS "+z.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],C,D)}function He(_){var z=this,C={db:null};if(_)for(var D in _)C[D]=typeof _[D]!="string"?_[D].toString():_[D];var U=new d(function(F,J){try{C.db=openDatabase(C.name,String(C.version),C.description,C.size)}catch(nt){return J(nt)}C.db.transaction(function(nt){St(nt,C,function(){z._dbInfo=C,F()},function(ot,ut){J(ut)})},J)});return C.serializer=At,U}function Ht(_,z,C,D,U,F){_.executeSql(C,D,U,function(J,nt){nt.code===nt.SYNTAX_ERR?J.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[z.storeName],function(ot,ut){ut.rows.length?F(ot,nt):St(ot,z,function(){ot.executeSql(C,D,U,F)},F)},F):F(J,nt)},F)}function Ie(_,z){var C=this;_=x(_);var D=new d(function(U,F){C.ready().then(function(){var J=C._dbInfo;J.db.transaction(function(nt){Ht(nt,J,"SELECT * FROM "+J.storeName+" WHERE key = ? LIMIT 1",[_],function(ot,ut){var ct=ut.rows.length?ut.rows.item(0).value:null;ct&&(ct=J.serializer.deserialize(ct)),U(ct)},function(ot,ut){F(ut)})})}).catch(F)});return m(D,z),D}function ie(_,z){var C=this,D=new d(function(U,F){C.ready().then(function(){var J=C._dbInfo;J.db.transaction(function(nt){Ht(nt,J,"SELECT * FROM "+J.storeName,[],function(ot,ut){for(var ct=ut.rows,pt=ct.length,kt=0;kt<pt;kt++){var Ct=ct.item(kt),It=Ct.value;if(It&&(It=J.serializer.deserialize(It)),It=_(It,Ct.key,kt+1),It!==void 0){U(It);return}}U()},function(ot,ut){F(ut)})})}).catch(F)});return m(D,z),D}function se(_,z,C,D){var U=this;_=x(_);var F=new d(function(J,nt){U.ready().then(function(){z===void 0&&(z=null);var ot=z,ut=U._dbInfo;ut.serializer.serialize(z,function(ct,pt){pt?nt(pt):ut.db.transaction(function(kt){Ht(kt,ut,"INSERT OR REPLACE INTO "+ut.storeName+" (key, value) VALUES (?, ?)",[_,ct],function(){J(ot)},function(Ct,It){nt(It)})},function(kt){if(kt.code===kt.QUOTA_ERR){if(D>0){J(se.apply(U,[_,ot,C,D-1]));return}nt(kt)}})})}).catch(nt)});return m(F,C),F}function Dn(_,z,C){return se.apply(this,[_,z,C,1])}function Rn(_,z){var C=this;_=x(_);var D=new d(function(U,F){C.ready().then(function(){var J=C._dbInfo;J.db.transaction(function(nt){Ht(nt,J,"DELETE FROM "+J.storeName+" WHERE key = ?",[_],function(){U()},function(ot,ut){F(ut)})})}).catch(F)});return m(D,z),D}function Ln(_){var z=this,C=new d(function(D,U){z.ready().then(function(){var F=z._dbInfo;F.db.transaction(function(J){Ht(J,F,"DELETE FROM "+F.storeName,[],function(){D()},function(nt,ot){U(ot)})})}).catch(U)});return m(C,_),C}function Un(_){var z=this,C=new d(function(D,U){z.ready().then(function(){var F=z._dbInfo;F.db.transaction(function(J){Ht(J,F,"SELECT COUNT(key) as c FROM "+F.storeName,[],function(nt,ot){var ut=ot.rows.item(0).c;D(ut)},function(nt,ot){U(ot)})})}).catch(U)});return m(C,_),C}function Nn(_,z){var C=this,D=new d(function(U,F){C.ready().then(function(){var J=C._dbInfo;J.db.transaction(function(nt){Ht(nt,J,"SELECT key FROM "+J.storeName+" WHERE id = ? LIMIT 1",[_+1],function(ot,ut){var ct=ut.rows.length?ut.rows.item(0).key:null;U(ct)},function(ot,ut){F(ut)})})}).catch(F)});return m(D,z),D}function Mn(_){var z=this,C=new d(function(D,U){z.ready().then(function(){var F=z._dbInfo;F.db.transaction(function(J){Ht(J,F,"SELECT key FROM "+F.storeName,[],function(nt,ot){for(var ut=[],ct=0;ct<ot.rows.length;ct++)ut.push(ot.rows.item(ct).key);D(ut)},function(nt,ot){U(ot)})})}).catch(U)});return m(C,_),C}function jn(_){return new d(function(z,C){_.transaction(function(D){D.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(U,F){for(var J=[],nt=0;nt<F.rows.length;nt++)J.push(F.rows.item(nt).name);z({db:_,storeNames:J})},function(U,F){C(F)})},function(D){C(D)})})}function Wn(_,z){z=w.apply(this,arguments);var C=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||C.name,_.storeName=_.storeName||C.storeName);var D=this,U;return _.name?U=new d(function(F){var J;_.name===C.name?J=D._dbInfo.db:J=openDatabase(_.name,"","",0),_.storeName?F({db:J,storeNames:[_.storeName]}):F(jn(J))}).then(function(F){return new d(function(J,nt){F.db.transaction(function(ot){function ut(Ct){return new d(function(It,Lt){ot.executeSql("DROP TABLE IF EXISTS "+Ct,[],function(){It()},function(Dt,jt){Lt(jt)})})}for(var ct=[],pt=0,kt=F.storeNames.length;pt<kt;pt++)ct.push(ut(F.storeNames[pt]));d.all(ct).then(function(){J()}).catch(function(Ct){nt(Ct)})},function(ot){nt(ot)})})}):U=d.reject("Invalid arguments"),m(U,z),U}var $n={_driver:"webSQLStorage",_initStorage:He,_support:l(),iterate:ie,getItem:Ie,setItem:Dn,removeItem:Rn,clear:Ln,length:Un,key:Nn,keys:Mn,dropInstance:Wn};function Hn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(_){return!1}}function xr(_,z){var C=_.name+"/";return _.storeName!==z.storeName&&(C+=_.storeName+"/"),C}function Zn(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch(z){return!0}}function Yn(){return!Zn()||localStorage.length>0}function Kn(_){var z=this,C={};if(_)for(var D in _)C[D]=_[D];return C.keyPrefix=xr(_,z._defaultConfig),Yn()?(z._dbInfo=C,C.serializer=At,d.resolve()):d.reject()}function Vn(_){var z=this,C=z.ready().then(function(){for(var D=z._dbInfo.keyPrefix,U=localStorage.length-1;U>=0;U--){var F=localStorage.key(U);F.indexOf(D)===0&&localStorage.removeItem(F)}});return m(C,_),C}function Gn(_,z){var C=this;_=x(_);var D=C.ready().then(function(){var U=C._dbInfo,F=localStorage.getItem(U.keyPrefix+_);return F&&(F=U.serializer.deserialize(F)),F});return m(D,z),D}function Xn(_,z){var C=this,D=C.ready().then(function(){for(var U=C._dbInfo,F=U.keyPrefix,J=F.length,nt=localStorage.length,ot=1,ut=0;ut<nt;ut++){var ct=localStorage.key(ut);if(ct.indexOf(F)===0){var pt=localStorage.getItem(ct);if(pt&&(pt=U.serializer.deserialize(pt)),pt=_(pt,ct.substring(J),ot++),pt!==void 0)return pt}}});return m(D,z),D}function qn(_,z){var C=this,D=C.ready().then(function(){var U=C._dbInfo,F;try{F=localStorage.key(_)}catch(J){F=null}return F&&(F=F.substring(U.keyPrefix.length)),F});return m(D,z),D}function Jn(_){var z=this,C=z.ready().then(function(){for(var D=z._dbInfo,U=localStorage.length,F=[],J=0;J<U;J++){var nt=localStorage.key(J);nt.indexOf(D.keyPrefix)===0&&F.push(nt.substring(D.keyPrefix.length))}return F});return m(C,_),C}function Qn(_){var z=this,C=z.keys().then(function(D){return D.length});return m(C,_),C}function ti(_,z){var C=this;_=x(_);var D=C.ready().then(function(){var U=C._dbInfo;localStorage.removeItem(U.keyPrefix+_)});return m(D,z),D}function ei(_,z,C){var D=this;_=x(_);var U=D.ready().then(function(){z===void 0&&(z=null);var F=z;return new d(function(J,nt){var ot=D._dbInfo;ot.serializer.serialize(z,function(ut,ct){if(ct)nt(ct);else try{localStorage.setItem(ot.keyPrefix+_,ut),J(F)}catch(pt){(pt.name==="QuotaExceededError"||pt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&nt(pt),nt(pt)}})})});return m(U,C),U}function ri(_,z){if(z=w.apply(this,arguments),_=typeof _!="function"&&_||{},!_.name){var C=this.config();_.name=_.name||C.name,_.storeName=_.storeName||C.storeName}var D=this,U;return _.name?U=new d(function(F){_.storeName?F(xr(_,D._defaultConfig)):F(_.name+"/")}).then(function(F){for(var J=localStorage.length-1;J>=0;J--){var nt=localStorage.key(J);nt.indexOf(F)===0&&localStorage.removeItem(nt)}}):U=d.reject("Invalid arguments"),m(U,z),U}var ni={_driver:"localStorageWrapper",_initStorage:Kn,_support:Hn(),iterate:Xn,getItem:Gn,setItem:ei,removeItem:ti,clear:Vn,length:Qn,key:qn,keys:Jn,dropInstance:ri},ii=function(z,C){return z===C||typeof z=="number"&&typeof C=="number"&&isNaN(z)&&isNaN(C)},si=function(z,C){for(var D=z.length,U=0;U<D;){if(ii(z[U],C))return!0;U++}return!1},Er=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"},be={},Sr={},de={INDEXEDDB:Rt,WEBSQL:$n,LOCALSTORAGE:ni},ai=[de.INDEXEDDB._driver,de.WEBSQL._driver,de.LOCALSTORAGE._driver],Be=["dropInstance"],Ze=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Be),oi={description:"",driver:ai.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ui(_,z){_[z]=function(){var C=arguments;return _.ready().then(function(){return _[z].apply(_,C)})}}function Ye(){for(var _=1;_<arguments.length;_++){var z=arguments[_];if(z)for(var C in z)z.hasOwnProperty(C)&&(Er(z[C])?arguments[0][C]=z[C].slice():arguments[0][C]=z[C])}return arguments[0]}var ci=function(){function _(z){o(this,_);for(var C in de)if(de.hasOwnProperty(C)){var D=de[C],U=D._driver;this[C]=U,be[U]||this.defineDriver(D)}this._defaultConfig=Ye({},oi),this._config=Ye({},this._defaultConfig,z),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(C){if((typeof C>"u"?"undefined":a(C))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var D in C){if(D==="storeName"&&(C[D]=C[D].replace(/\W/g,"_")),D==="version"&&typeof C[D]!="number")return new Error("Database version must be a number.");this._config[D]=C[D]}return"driver"in C&&C.driver?this.setDriver(this._config.driver):!0}else return typeof C=="string"?this._config[C]:this._config},_.prototype.defineDriver=function(C,D,U){var F=new d(function(J,nt){try{var ot=C._driver,ut=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!C._driver){nt(ut);return}for(var ct=Ze.concat("_initStorage"),pt=0,kt=ct.length;pt<kt;pt++){var Ct=ct[pt],It=!si(Be,Ct);if((It||C[Ct])&&typeof C[Ct]!="function"){nt(ut);return}}var Lt=function(){for(var ke=function(hi){return function(){var di=new Error("Method "+hi+" is not implemented by the current driver"),Cr=d.reject(di);return m(Cr,arguments[arguments.length-1]),Cr}},Ke=0,li=Be.length;Ke<li;Ke++){var Ve=Be[Ke];C[Ve]||(C[Ve]=ke(Ve))}};Lt();var Dt=function(ke){be[ot]&&console.info("Redefining LocalForage driver: "+ot),be[ot]=C,Sr[ot]=ke,J()};"_support"in C?C._support&&typeof C._support=="function"?C._support().then(Dt,nt):Dt(!!C._support):Dt(!0)}catch(jt){nt(jt)}});return h(F,D,U),F},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(C,D,U){var F=be[C]?d.resolve(be[C]):d.reject(new Error("Driver not found."));return h(F,D,U),F},_.prototype.getSerializer=function(C){var D=d.resolve(At);return h(D,C),D},_.prototype.ready=function(C){var D=this,U=D._driverSet.then(function(){return D._ready===null&&(D._ready=D._initDriver()),D._ready});return h(U,C,C),U},_.prototype.setDriver=function(C,D,U){var F=this;Er(C)||(C=[C]);var J=this._getSupportedDrivers(C);function nt(){F._config.driver=F.driver()}function ot(pt){return F._extend(pt),nt(),F._ready=F._initStorage(F._config),F._ready}function ut(pt){return function(){var kt=0;function Ct(){for(;kt<pt.length;){var It=pt[kt];return kt++,F._dbInfo=null,F._ready=null,F.getDriver(It).then(ot).catch(Ct)}nt();var Lt=new Error("No available storage method found.");return F._driverSet=d.reject(Lt),F._driverSet}return Ct()}}var ct=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=ct.then(function(){var pt=J[0];return F._dbInfo=null,F._ready=null,F.getDriver(pt).then(function(kt){F._driver=kt._driver,nt(),F._wrapLibraryMethodsWithReady(),F._initDriver=ut(J)})}).catch(function(){nt();var pt=new Error("No available storage method found.");return F._driverSet=d.reject(pt),F._driverSet}),h(this._driverSet,D,U),this._driverSet},_.prototype.supports=function(C){return!!Sr[C]},_.prototype._extend=function(C){Ye(this,C)},_.prototype._getSupportedDrivers=function(C){for(var D=[],U=0,F=C.length;U<F;U++){var J=C[U];this.supports(J)&&D.push(J)}return D},_.prototype._wrapLibraryMethodsWithReady=function(){for(var C=0,D=Ze.length;C<D;C++)ui(this,Ze[C])},_.prototype.createInstance=function(C){return new _(C)},_}(),fi=new ci;r.exports=fi},{3:3}]},{},[4])(4)})})(dn);var ms=dn.exports;const Yt=pr(ms);function Lr(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function qe(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=ys(i))||e){t&&(i=t);var r=0,n=function(){};return{s:n,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(f){throw f},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){t=t.call(i)},n:function(){var f=t.next();return o=f.done,f},e:function(f){s=!0,a=f},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function ys(i,e){if(i){if(typeof i=="string")return Lr(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Lr(i,e):void 0}}function gs(i){if(i=i.trim(),!i)return[];var e=i.split("|").map(function(o){return o.trim()}),t=[],r=qe(e),n;try{var a=function(){var o=n.value,s={name:"",args:[],options:{}},f=o.split(" ");s.name=f.shift()||"";var y="",p=!1,d=function(b){if(p)s.options[y]=b;else{var E=qe(y),T;try{for(E.s();!(T=E.n()).done;){var L=T.value;s.options[L]=b}}catch(B){E.e(B)}finally{E.f()}}},m=function(b){y=b.substring(p?2:1)},h=function(b){p=b[1]==="-"},x=qe(f),w;try{for(x.s();!(w=x.n()).done;){var k=w.value;k=k.trim(),k&&(k[0]==="-"?(h(k),y&&d(!0),m(k)):y?k[0]==="-"?(h(k),d(!0),m(k)):(d(k),y=""):s.args.push(k))}}catch(b){x.e(b)}finally{x.f()}y&&d(!0),t.push(s)};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return t}(function(){try{if(typeof document<"u"){var i=document.createElement("style");i.appendChild(document.createTextNode(".style-text{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.full-parent{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea::-webkit-scrollbar,.web-term-container::-webkit-scrollbar{width:5px;cursor:pointer;height:5px}.editor-textarea::-webkit-scrollbar-button,.web-term-container::-webkit-scrollbar-button{display:none}.editor-textarea::-webkit-scrollbar-track,.web-term-container::-webkit-scrollbar-track{display:none}.editor-textarea::-webkit-scrollbar-thumb,.web-term-container::-webkit-scrollbar-thumb{background-color:#777;cursor:pointer}.editor-textarea ::selection,.web-term-container ::selection{background-color:var(--selection-bg);color:var(--selection)}.web-term-container{position:relative;font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box;background-color:var(--background);color:var(--color);cursor:text}.web-term-container *{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.editor-cursor{position:absolute;z-index:2;height:var(--line-height);background-color:var(--background);color:var(--color)}.editor-cursor.cursor-focus{background-color:var(--selection-bg);color:var(--selection)}.editor-cursor .editor-cursor-border{position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid var(--selection-bg)}.editor-cursor .editor-cursor-text{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea{color:var(--color)}.term-editor-title{color:var(--color);opacity:.7}.term-display-box>div,.term-below-box>div{padding:2px 0;word-break:break-all;white-space:pre-wrap;color:var(--color)}.term-display-box>div a,.term-below-box>div a{opacity:.7}.term-below-box>div{opacity:.7}")),document.head.appendChild(i)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();function pn(){let i,e;return{ready:new Promise((r,n)=>{i=r,e=n}),resolve:i,reject:e}}function je(...i){let e=0;for(const n of i)e+=n.length;const t=new Uint8Array(e);let r=0;for(const n of i)t.set(n,r),r+=n.length;return t}function _e(i,e){if(!i||!e)return!1;const t=i.byteLength;if(t!==e.byteLength)return!1;for(let r=0;r<t;r++)if(i[r]!==e[r])return!1;return!0}function vs(i){return new Uint8Array(i)}async function oe(i){try{return[await i,null]}catch(e){return[{},e]}}let Je;function Fe(i){return Je||(Je=new TextEncoder),Je.encode(i)}let Qe;function vr(i){return Qe||(Qe=new TextDecoder),Qe.decode(i)}async function mn(i){for(let e=0;e<i.length;e++)await i[e]()}function Ur(){const i=[];return{add:e=>{i.push(e)},run:()=>Promise.all(i)}}function ee(i){if(i==="/")return{path:i,parent:i,name:""};if(i.endsWith("/"))return ee(i.substring(0,i.length-1));const e=i.lastIndexOf("/");return e===-1?{path:i,parent:"",name:i}:{path:i,parent:i.substring(0,e)||"/",name:i.substring(e+1)}}function ws(){const i=[];return{add(e){i.push(e)},run(){return Promise.all(i)}}}async function _s(i){return i instanceof Promise?await i:i}function tr(i){return typeof i=="function"?i():i}function bs(){return navigator.userAgent.includes("Macintosh")}async function ks(i){try{const e=await fetch(i);return e.ok?await e.text():""}catch(e){return""}}function xs(i,e={}){const t=Object.keys(e),r=Object.values(e);return new Function(...t,i)(...r)}class Es{constructor(){this.name="",this.helpInfo="",this.helpDetails=""}activate(e,t){this.disk=e,this.provider=t}run(e,t){return""}}function Ss(i,e=""){return i.split("/").length===2&&(i+="/".concat(e)),"https://cdn.jsdelivr.net/gh/".concat(i)}function Nr(i,e=!1){const t=e?"unpkg.com":"cdn.jsdelivr.net/npm";return"https://".concat(t,"/").concat(i)}function Zt(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function Mr(i,e){for(var t="",r=0,n=-1,a=0,o,s=0;s<=i.length;++s){if(s<i.length)o=i.charCodeAt(s);else{if(o===47)break;o=47}if(o===47){if(!(n===s-1||a===1))if(n!==s-1&&a===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",r=0):(t=t.slice(0,f),r=t.length-1-t.lastIndexOf("/")),n=s,a=0;continue}}else if(t.length===2||t.length===1){t="",r=0,n=s,a=0;continue}}e&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+="/"+i.slice(n+1,s):t=i.slice(n+1,s),r=s-n-1;n=s,a=0}else o===46&&a!==-1?++a:a=-1}return t}function Cs(i,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+i+r:r}var ge={resolve:function(){for(var e="",t=!1,r,n=arguments.length-1;n>=-1&&!t;n--){var a;n>=0?a=arguments[n]:(r===void 0&&(r=process.cwd()),a=r),Zt(a),a.length!==0&&(e=a+"/"+e,t=a.charCodeAt(0)===47)}return e=Mr(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Zt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Mr(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Zt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];Zt(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":ge.normalize(e)},relative:function(e,t){if(Zt(e),Zt(t),e===t||(e=ge.resolve(e),t=ge.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var n=e.length,a=n-r,o=1;o<t.length&&t.charCodeAt(o)===47;++o);for(var s=t.length,f=s-o,y=a<f?a:f,p=-1,d=0;d<=y;++d){if(d===y){if(f>y){if(t.charCodeAt(o+d)===47)return t.slice(o+d+1);if(d===0)return t.slice(o+d)}else a>y&&(e.charCodeAt(r+d)===47?p=d:d===0&&(p=0));break}var m=e.charCodeAt(r+d),h=t.charCodeAt(o+d);if(m!==h)break;m===47&&(p=d)}var x="";for(d=r+p+1;d<=n;++d)(d===n||e.charCodeAt(d)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+t.slice(o+p):(o+=p,t.charCodeAt(o)===47&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Zt(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,n=-1,a=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),t===47){if(!a){n=o;break}}else a=!1;return n===-1?r?"/":".":r&&n===1?"//":e.slice(0,n)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Zt(e);var r=0,n=-1,a=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,f=-1;for(o=e.length-1;o>=0;--o){var y=e.charCodeAt(o);if(y===47){if(!a){r=o+1;break}}else f===-1&&(a=!1,f=o+1),s>=0&&(y===t.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=f))}return r===n?n=f:n===-1&&(n=e.length),e.slice(r,n)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!a){r=o+1;break}}else n===-1&&(a=!1,n=o+1);return n===-1?"":e.slice(r,n)}},extname:function(e){Zt(e);for(var t=-1,r=0,n=-1,a=!0,o=0,s=e.length-1;s>=0;--s){var f=e.charCodeAt(s);if(f===47){if(!a){r=s+1;break}continue}n===-1&&(a=!1,n=s+1),f===46?t===-1?t=s:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||n===-1||o===0||o===1&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Cs("/",e)},parse:function(e){Zt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),n=r===47,a;n?(t.root="/",a=1):a=0;for(var o=-1,s=0,f=-1,y=!0,p=e.length-1,d=0;p>=a;--p){if(r=e.charCodeAt(p),r===47){if(!y){s=p+1;break}continue}f===-1&&(y=!1,f=p+1),r===46?o===-1?o=p:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||f===-1||d===0||d===1&&o===f-1&&o===s+1?f!==-1&&(s===0&&n?t.base=t.name=e.slice(1,f):t.base=t.name=e.slice(s,f)):(s===0&&n?(t.name=e.slice(1,o),t.base=e.slice(1,f)):(t.name=e.slice(s,o),t.base=e.slice(s,f)),t.ext=e.slice(o,f)),s>0?t.dir=e.slice(0,s-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};ge.posix=ge;var yn=ge;const As=pr(yn),Is=pi({__proto__:null,default:As},[yn]),ue=Is;function Bs(i){if(i=Nt(i),!i)return[[],""];const e=i.split("/");e[0]===""&&e.shift();const t=e.pop();return[e,t]}function Nt(i,e=!1){return i=i.trim(),i=i.replace(/(^\/*)|(\/*$)/g,""),i=i.replace(/\/+/g,"/"),i?(i="/".concat(i),e?"".concat(i,"/"):i):"/"}function Vt(i){return ee(i).parent}function Ts(i){return Ps(i,"/")}function Ps(i,e){i=Nt(i);const t=i.lastIndexOf(e);return t===-1?i:i.substring(t+1)}function De(i,e,t,r){const n=new Set(t),a={};for(const o of i){const s=(r==null?void 0:r[o])||o,{name:f}=ee(s),y=n.has(f)?zs(f,n):f;n.add(y),a[o]=ue.join(e,y)}return a}function zs(i,e){for(;e.has(i);){const t=i.match(/(\((\d+)\))?(\..*)?$/);if(!t){i="".concat(i,"(1)");break}const[r,n,a]=t;if(!r)i="".concat(i,"(1)");else{let o="";a?o=r.replace(n,"(".concat(parseInt(a)+1,")")):o="(1)".concat(r),i=i.replace(r,o)}}return i}function Os(i,e){i.endsWith("/")&&(i=i.substring(0,i.length-1));const t=new RegExp("^".concat(i,"/([^/]+)")),r=e.match(t);return r?"".concat(i,"/").concat(r[1]):""}const Fs="_$*%#@♧⊙";function wr(i){const e="".concat(i,"-").concat(Fs),t=Fe(e);return{data:t,length:t.byteLength}}const gn=()=>wr("dir"),{data:vn,length:pa}=gn(),{data:_r,length:wn}=wr("link");function $t(i){return i?_e(i,vn)?"dir":_n(i,_r)?"link":"file":"empty"}function _n(i,e){const t=e.byteLength;return!!(i.byteLength>=t&&_e(i.slice(0,t),e))}function we(i,e){if(i==="empty")return new Uint8Array([]);if(i==="dir")return vs(vn);const t=typeof e=="string"?Fe(i==="link"?Nt(e):e):e;return i==="link"?je(_r,t):t}function Ds(i){return vr(i.slice(wn))}class jr{static Supported(){return typeof navigator.storage<"u"&&typeof FileSystemWritableFileStream<"u"}async init(){await navigator.permissions.query({name:"persistent-storage"});const{usage:e=0,quota:t=0}=await navigator.storage.estimate();if(e>=t)throw new Error("存储空间不足");this.root=await navigator.storage.getDirectory()}async read(e){const{file:t}=await this.getHandleByPath(e);return t?this._readFile(t):null}async write(e,t){const{file:r}=await this.getHandleByPath(e);return r?(await this._writeFile(r,t),!0):!1}async _writeFile(e,t){const r=await e.createWritable();await r.write(t),await r.close()}async append(e,t){const{file:r}=await this.getHandleByPath(e);if(!r)return!1;const n=await r.createWritable(),a=await this._readFile(r);return await n.write(a),await n.write({type:"write",position:a.byteLength,data:t}),await n.close(),!0}async remove(e){const{name:t,dir:r}=await this.getParentByPath(e);if(!r)return!1;const[,n]=await oe(r.removeEntry(t,{recursive:!0}));return!n}async stat(e,t=!0){const{type:r,file:n,dir:a}=await this.getHandleByPath(e);if(r==="empty")return{size:0,type:r};let o=0;if(r==="file"){const s=await n.getFile();if(o=s.size,await this._isLinkFile(s))return{type:"link",size:o}}else if(t){const s=[];await this.traverse(a,f=>{s.push((async()=>{o+=(await f.getFile()).size})())}),await Promise.all(s)}return{type:r,size:o}}async _isLinkFile(e){if(e.size===wn){const r=new Uint8Array(await e.arrayBuffer());if(_e(r,_r))return!0}return!1}async traverse(e,t){for await(const r of e.entries())r[1].kind==="directory"?await this.traverse(r[1],t):t(r[1],r[0])}async traverseContent(e,t="",r=!0){let n;if(!t)n=this.root;else{const{dir:a}=await this.getHandleByPath(t);if(!a)throw new Error("dir not found: ".concat(t));n=a}await this._traverseContent(t,n,e,r)}async _traverseContent(e,t,r,n){for await(const a of t.entries()){const[o,s]=a,f="".concat(e,"/").concat(o);s.kind==="directory"?(await r(f,Promise.resolve(null),o),await this._traverseContent(f,s,r,n)):await r(f,n?this._readFile(s):Promise.resolve(null),o)}}async exist(e){const{type:t}=await this.getHandleByPath(e);return t!=="empty"}async ls(e){const{type:t,dir:r}=await this.getHandleByPath(e);if(t!=="dir")return null;const n=[];for await(const a of r.keys())n.push(a);return n}async existInDir(e,t){for await(const r of t.keys())if(e===r)return!0;return!1}async createLink(e,t,r=!1){return this.createFile(e,we("link",t),r)}async createFile(e,t,r=!1){const{dir:n,name:a}=await this.clearTarget(e,r);if(!n)return!1;const o=await n.getFileHandle(a,{create:!0});return t&&await this._writeFile(o,t),!0}async createDir(e,t=!1){const{dir:r,name:n}=await this.clearTarget(e,t);return r?(await r.getDirectoryHandle(n,{create:!0}),!0):!1}async clearTarget(e,t){const{name:r,dir:n}=await this.getParentByPath(e);if(!n)return{dir:null,name:r};if(await this.existInDir(r,n))if(t)await n.removeEntry(r,{recursive:!0});else return{dir:null,name:r};return{dir:n,name:r}}async _readFile(e){const t=await e.getFile();return new Uint8Array(await t.arrayBuffer())}async getHandleByPath(e){if(e==="/")return{type:"dir",dir:this.root};const{name:t,dir:r}=await this.getParentByPath(e);if(!r)return{type:"empty"};const[n,a]=await oe(r.getFileHandle(t));if(a){const[o,s]=await oe(r.getDirectoryHandle(t));return s?{type:"empty"}:{type:"dir",dir:o}}else return{type:"file",file:n}}async getParentByPath(e){const[t,r]=Bs(e);if(!r)return{name:r};let n=this.root;for(const a of t){const[o,s]=await oe(n.getDirectoryHandle(a));if(s)return{name:a};n=o}return{name:r,dir:n}}async getType(e){const{type:t}=await this.getHandleByPath(e);return t}}class Rs{async traverseContent(e,t="",r=!0){const n=await Yt.keys();for(const a of n)a.startsWith(t)&&e(a,r?Yt.getItem(a):Promise.resolve(null),ee(a).name)}static Supported(){return!0}async init(){await Yt.ready()}async read(e){const t=await Yt.getItem(Nt(e)),r=$t(t);return r==="empty"||r==="dir"?null:t}async write(e,t){const[,r]=await oe(Yt.setItem(Nt(e),t));return!r}async append(e,t){e=Nt(e);const r=await this.read(e);return r?this.write(e,je(r,t)):!1}async remove(e){e=Nt(e);const t=await this.read(Nt(e)),r=$t(t);if(r==="empty")return!1;const[,n]=await oe(Yt.removeItem(e));if(!n)return!n;if(r==="file")return!0;const a=[];return await this.traverse(e,({path:o})=>{a.push(Yt.removeItem(o))}),await Promise.all(a),!0}async stat(e,t){e=Nt(e);const r=await this.read(e),n=$t(r);if(n==="empty")return{size:0,type:n};if(n==="file"||n==="link")return{size:r.byteLength,type:n};if(!t)return{size:0,type:n};let a=0;const o=[];return await this.traverse(e,({path:s})=>{o.push((async()=>{a+=(await this.stat(s,t)).size})())}),await Promise.all(o),{size:a,type:n}}async exist(e){return!!await this.read(Nt(e))}async ls(e){const t=[];return await this.traverse(e,({parent:r,name:n})=>{r===e&&t.push(n)}),t}async createFile(e,t=new Uint8Array([]),r=!1){return!r&&await this.exist(e)?!1:(await this.write(e,t),!0)}async createDir(e,t){if(e=Nt(e),await this.exist(e)){if(!t)return!1;const r=[];await this.traverse(e,({path:n})=>{r.push(this.remove(n))}),await Promise.all(r)}return await this.write(e,we("dir")),!0}async traverse(e,t){const r=await Yt.keys(),n=Nt(e,!0);for(const a of r)a.startsWith(n)&&t(ee(a))}async getType(e){const t=await this.read(e);return $t(t)}}const re=bn(),Ce=bn(!0);function bn(i=!1){return function(e,t,r){const n=r.value;r.value=function(...a){const o=this.fmtPath(a[0]||""),s=f=>(a[0]=f||o,n.apply(this,a));if(i){const f=this._link.getSync(o);return s(f)}else{const{ready:f,resolve:y}=pn();return this._link.get(o).then(p=>s(p)).then(p=>{y(p)}),f}}}}class Ls{constructor(e,t){this.backend=e,this.syncMiddleware=t}async get(e,t){const r=t||await this.backend.read(e);return this._get(r)}getSync(e,t){var n;const r=t||((n=this.syncMiddleware)==null?void 0:n.read(e));return this._get(r)}_get(e){return $t(e)==="link"?Ds(e):""}}var kn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(r,n,a){function o(y,p){if(!n[y]){if(!r[y]){var d=typeof Qt=="function"&&Qt;if(!p&&d)return d(y,!0);if(s)return s(y,!0);var m=new Error("Cannot find module '"+y+"'");throw m.code="MODULE_NOT_FOUND",m}var h=n[y]={exports:{}};r[y][0].call(h.exports,function(x){var w=r[y][1][x];return o(w||x)},h,h.exports,t,r,n,a)}return n[y].exports}for(var s=typeof Qt=="function"&&Qt,f=0;f<a.length;f++)o(a[f]);return o}({1:[function(t,r,n){var a=t("./utils"),o=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(f){for(var y,p,d,m,h,x,w,k=[],b=0,E=f.length,T=E,L=a.getTypeOf(f)!=="string";b<f.length;)T=E-b,d=L?(y=f[b++],p=b<E?f[b++]:0,b<E?f[b++]:0):(y=f.charCodeAt(b++),p=b<E?f.charCodeAt(b++):0,b<E?f.charCodeAt(b++):0),m=y>>2,h=(3&y)<<4|p>>4,x=1<T?(15&p)<<2|d>>6:64,w=2<T?63&d:64,k.push(s.charAt(m)+s.charAt(h)+s.charAt(x)+s.charAt(w));return k.join("")},n.decode=function(f){var y,p,d,m,h,x,w=0,k=0,b="data:";if(f.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var E,T=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===s.charAt(64)&&T--,f.charAt(f.length-2)===s.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|T):new Array(0|T);w<f.length;)y=s.indexOf(f.charAt(w++))<<2|(m=s.indexOf(f.charAt(w++)))>>4,p=(15&m)<<4|(h=s.indexOf(f.charAt(w++)))>>2,d=(3&h)<<6|(x=s.indexOf(f.charAt(w++))),E[k++]=y,h!==64&&(E[k++]=p),x!==64&&(E[k++]=d);return E}},{"./support":30,"./utils":32}],2:[function(t,r,n){var a=t("./external"),o=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),f=t("./stream/DataLengthProbe");function y(p,d,m,h,x){this.compressedSize=p,this.uncompressedSize=d,this.crc32=m,this.compression=h,this.compressedContent=x}y.prototype={getContentWorker:function(){var p=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),d=this;return p.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(p,d,m){return p.pipe(new s).pipe(new f("uncompressedSize")).pipe(d.compressWorker(m)).pipe(new f("compressedSize")).withStreamInfo("compression",d)},r.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,n){var a=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,n){var a=t("./utils"),o=function(){for(var s,f=[],y=0;y<256;y++){s=y;for(var p=0;p<8;p++)s=1&s?3988292384^s>>>1:s>>>1;f[y]=s}return f}();r.exports=function(s,f){return s!==void 0&&s.length?a.getTypeOf(s)!=="string"?function(y,p,d,m){var h=o,x=m+d;y^=-1;for(var w=m;w<x;w++)y=y>>>8^h[255&(y^p[w])];return-1^y}(0|f,s,s.length,0):function(y,p,d,m){var h=o,x=m+d;y^=-1;for(var w=m;w<x;w++)y=y>>>8^h[255&(y^p.charCodeAt(w))];return-1^y}(0|f,s,s.length,0):0}},{"./utils":32}],5:[function(t,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,r,n){var a=null;a=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:a}},{lie:37}],7:[function(t,r,n){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),s=t("./utils"),f=t("./stream/GenericWorker"),y=a?"uint8array":"array";function p(d,m){f.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=m,this.meta={}}n.magic="\b\0",s.inherits(p,f),p.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(y,d.data),!1)},p.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(m){d.push({data:m,meta:d.meta})}},n.compressWorker=function(d){return new p("Deflate",d)},n.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,n){function a(h,x){var w,k="";for(w=0;w<x;w++)k+=String.fromCharCode(255&h),h>>>=8;return k}function o(h,x,w,k,b,E){var T,L,B=h.file,Z=h.compression,W=E!==y.utf8encode,X=s.transformTo("string",E(B.name)),H=s.transformTo("string",y.utf8encode(B.name)),rt=B.comment,dt=s.transformTo("string",E(rt)),P=s.transformTo("string",y.utf8encode(rt)),V=H.length!==B.name.length,g=P.length!==rt.length,q="",vt="",et="",_t=B.dir,at=B.date,gt={crc32:0,compressedSize:0,uncompressedSize:0};x&&!w||(gt.crc32=h.crc32,gt.compressedSize=h.compressedSize,gt.uncompressedSize=h.uncompressedSize);var M=0;x&&(M|=8),W||!V&&!g||(M|=2048);var j=0,yt=0;_t&&(j|=16),b==="UNIX"?(yt=798,j|=function(ft,Pt){var Ft=ft;return ft||(Ft=Pt?16893:33204),(65535&Ft)<<16}(B.unixPermissions,_t)):(yt=20,j|=function(ft){return 63&(ft||0)}(B.dosPermissions)),T=at.getUTCHours(),T<<=6,T|=at.getUTCMinutes(),T<<=5,T|=at.getUTCSeconds()/2,L=at.getUTCFullYear()-1980,L<<=4,L|=at.getUTCMonth()+1,L<<=5,L|=at.getUTCDate(),V&&(vt=a(1,1)+a(p(X),4)+H,q+="up"+a(vt.length,2)+vt),g&&(et=a(1,1)+a(p(dt),4)+P,q+="uc"+a(et.length,2)+et);var lt="";return lt+="\n\0",lt+=a(M,2),lt+=Z.magic,lt+=a(T,2),lt+=a(L,2),lt+=a(gt.crc32,4),lt+=a(gt.compressedSize,4),lt+=a(gt.uncompressedSize,4),lt+=a(X.length,2),lt+=a(q.length,2),{fileRecord:d.LOCAL_FILE_HEADER+lt+X+q,dirRecord:d.CENTRAL_FILE_HEADER+a(yt,2)+lt+a(dt.length,2)+"\0\0\0\0"+a(j,4)+a(k,4)+X+q+dt}}var s=t("../utils"),f=t("../stream/GenericWorker"),y=t("../utf8"),p=t("../crc32"),d=t("../signature");function m(h,x,w,k){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=w,this.encodeFileName=k,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(m,f),m.prototype.push=function(h){var x=h.meta.percent||0,w=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,f.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:w?(x+100*(w-k-1))/w:100}}))},m.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var x=this.streamFiles&&!h.file.dir;if(x){var w=o(h,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(h){this.accumulate=!1;var x=this.streamFiles&&!h.file.dir,w=o(h,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),x)this.push({data:function(k){return d.DATA_DESCRIPTOR+a(k.crc32,4)+a(k.compressedSize,4)+a(k.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var h=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var w=this.bytesWritten-h,k=function(b,E,T,L,B){var Z=s.transformTo("string",B(L));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(b,2)+a(b,2)+a(E,4)+a(T,4)+a(Z.length,2)+Z}(this.dirRecords.length,w,h,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(h){this._sources.push(h);var x=this;return h.on("data",function(w){x.processChunk(w)}),h.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),h.on("error",function(w){x.error(w)}),this},m.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(h){var x=this._sources;if(!f.prototype.error.call(this,h))return!1;for(var w=0;w<x.length;w++)try{x[w].error(h)}catch(k){}return!0},m.prototype.lock=function(){f.prototype.lock.call(this);for(var h=this._sources,x=0;x<h.length;x++)h[x].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,n){var a=t("../compressions"),o=t("./ZipFileWorker");n.generateWorker=function(s,f,y){var p=new o(f.streamFiles,y,f.platform,f.encodeFileName),d=0;try{s.forEach(function(m,h){d++;var x=function(E,T){var L=E||T,B=a[L];if(!B)throw new Error(L+" is not a valid compression method !");return B}(h.options.compression,f.compression),w=h.options.compressionOptions||f.compressionOptions||{},k=h.dir,b=h.date;h._compressWorker(x,w).withStreamInfo("file",{name:m,dir:k,date:b,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(p)}),p.entriesCount=d}catch(m){p.error(m)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,n){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(o,s){return new a().loadAsync(o,s)},a.external=t("./external"),r.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,n){var a=t("./utils"),o=t("./external"),s=t("./utf8"),f=t("./zipEntries"),y=t("./stream/Crc32Probe"),p=t("./nodejsUtils");function d(m){return new o.Promise(function(h,x){var w=m.decompressed.getContentWorker().pipe(new y);w.on("error",function(k){x(k)}).on("end",function(){w.streamInfo.crc32!==m.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}r.exports=function(m,h){var x=this;return h=a.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),p.isNode&&p.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",m,!0,h.optimizedBinaryString,h.base64).then(function(w){var k=new f(h);return k.load(w),k}).then(function(w){var k=[o.Promise.resolve(w)],b=w.files;if(h.checkCRC32)for(var E=0;E<b.length;E++)k.push(d(b[E]));return o.Promise.all(k)}).then(function(w){for(var k=w.shift(),b=k.files,E=0;E<b.length;E++){var T=b[E],L=T.fileNameStr,B=a.resolve(T.fileNameStr);x.file(B,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:h.createFolders}),T.dir||(x.file(B).unsafeOriginalName=L)}return k.zipComment.length&&(x.comment=k.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,n){var a=t("../utils"),o=t("../stream/GenericWorker");function s(f,y){o.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(y)}a.inherits(s,o),s.prototype._bindStream=function(f){var y=this;(this._stream=f).pause(),f.on("data",function(p){y.push({data:p,meta:{percent:0}})}).on("error",function(p){y.isPaused?this.generatedError=p:y.error(p)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,n){var a=t("readable-stream").Readable;function o(s,f,y){a.call(this,f),this._helper=s;var p=this;s.on("data",function(d,m){p.push(d)||p._helper.pause(),y&&y(m)}).on("error",function(d){p.emit("error",d)}).on("end",function(){p.push(null)})}t("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,n){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,r,n){function a(B,Z,W){var X,H=s.getTypeOf(Z),rt=s.extend(W||{},p);rt.date=rt.date||new Date,rt.compression!==null&&(rt.compression=rt.compression.toUpperCase()),typeof rt.unixPermissions=="string"&&(rt.unixPermissions=parseInt(rt.unixPermissions,8)),rt.unixPermissions&&16384&rt.unixPermissions&&(rt.dir=!0),rt.dosPermissions&&16&rt.dosPermissions&&(rt.dir=!0),rt.dir&&(B=b(B)),rt.createFolders&&(X=k(B))&&E.call(this,X,!0);var dt=H==="string"&&rt.binary===!1&&rt.base64===!1;W&&W.binary!==void 0||(rt.binary=!dt),(Z instanceof d&&Z.uncompressedSize===0||rt.dir||!Z||Z.length===0)&&(rt.base64=!1,rt.binary=!0,Z="",rt.compression="STORE",H="string");var P=null;P=Z instanceof d||Z instanceof f?Z:x.isNode&&x.isStream(Z)?new w(B,Z):s.prepareContent(B,Z,rt.binary,rt.optimizedBinaryString,rt.base64);var V=new m(B,P,rt);this.files[B]=V}var o=t("./utf8"),s=t("./utils"),f=t("./stream/GenericWorker"),y=t("./stream/StreamHelper"),p=t("./defaults"),d=t("./compressedObject"),m=t("./zipObject"),h=t("./generate"),x=t("./nodejsUtils"),w=t("./nodejs/NodejsStreamInputAdapter"),k=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var Z=B.lastIndexOf("/");return 0<Z?B.substring(0,Z):""},b=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},E=function(B,Z){return Z=Z!==void 0?Z:p.createFolders,B=b(B),this.files[B]||a.call(this,B,null,{dir:!0,createFolders:Z}),this.files[B]};function T(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var L={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var Z,W,X;for(Z in this.files)X=this.files[Z],(W=Z.slice(this.root.length,Z.length))&&Z.slice(0,this.root.length)===this.root&&B(W,X)},filter:function(B){var Z=[];return this.forEach(function(W,X){B(W,X)&&Z.push(X)}),Z},file:function(B,Z,W){if(arguments.length!==1)return B=this.root+B,a.call(this,B,Z,W),this;if(T(B)){var X=B;return this.filter(function(rt,dt){return!dt.dir&&X.test(rt)})}var H=this.files[this.root+B];return H&&!H.dir?H:null},folder:function(B){if(!B)return this;if(T(B))return this.filter(function(H,rt){return rt.dir&&B.test(H)});var Z=this.root+B,W=E.call(this,Z),X=this.clone();return X.root=W.name,X},remove:function(B){B=this.root+B;var Z=this.files[B];if(Z||(B.slice(-1)!=="/"&&(B+="/"),Z=this.files[B]),Z&&!Z.dir)delete this.files[B];else for(var W=this.filter(function(H,rt){return rt.name.slice(0,B.length)===B}),X=0;X<W.length;X++)delete this.files[W[X].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var Z,W={};try{if((W=s.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=W.type.toLowerCase(),W.compression=W.compression.toUpperCase(),W.type==="binarystring"&&(W.type="string"),!W.type)throw new Error("No output type specified.");s.checkSupport(W.type),W.platform!=="darwin"&&W.platform!=="freebsd"&&W.platform!=="linux"&&W.platform!=="sunos"||(W.platform="UNIX"),W.platform==="win32"&&(W.platform="DOS");var X=W.comment||this.comment||"";Z=h.generateWorker(this,W,X)}catch(H){(Z=new f("error")).error(H)}return new y(Z,W.type||"string",W.mimeType)},generateAsync:function(B,Z){return this.generateInternalStream(B).accumulate(Z)},generateNodeStream:function(B,Z){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(Z)}};r.exports=L},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,n){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,n){var a=t("./DataReader");function o(s){a.call(this,s);for(var f=0;f<this.data.length;f++)s[f]=255&s[f]}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var f=s.charCodeAt(0),y=s.charCodeAt(1),p=s.charCodeAt(2),d=s.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===f&&this.data[m+1]===y&&this.data[m+2]===p&&this.data[m+3]===d)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var f=s.charCodeAt(0),y=s.charCodeAt(1),p=s.charCodeAt(2),d=s.charCodeAt(3),m=this.readData(4);return f===m[0]&&y===m[1]&&p===m[2]&&d===m[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,n){var a=t("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var f,y=0;for(this.checkOffset(s),f=this.index+s-1;f>=this.index;f--)y=(y<<8)+this.byteAt(f);return this.index+=s,y},readString:function(s){return a.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,n){var a=t("./Uint8ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){this.checkOffset(s);var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,n){var a=t("./DataReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,n){var a=t("./ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,n){var a=t("../utils"),o=t("../support"),s=t("./ArrayReader"),f=t("./StringReader"),y=t("./NodeBufferReader"),p=t("./Uint8ArrayReader");r.exports=function(d){var m=a.getTypeOf(d);return a.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new y(d):o.uint8array?new p(a.transformTo("uint8array",d)):new s(a.transformTo("array",d)):new f(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,n){var a=t("./GenericWorker"),o=t("../utils");function s(f){a.call(this,"ConvertWorker to "+f),this.destType=f}o.inherits(s,a),s.prototype.processChunk=function(f){this.push({data:o.transformTo(this.destType,f.data),meta:f.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,n){var a=t("./GenericWorker"),o=t("../crc32");function s(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,a),s.prototype.processChunk=function(f){this.streamInfo.crc32=o(f.data,this.streamInfo.crc32||0),this.push(f)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,n){var a=t("../utils"),o=t("./GenericWorker");function s(f){o.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}a.inherits(s,o),s.prototype.processChunk=function(f){if(f){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+f.data.length}o.prototype.processChunk.call(this,f)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,n){var a=t("../utils"),o=t("./GenericWorker");function s(f){o.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(p){y.dataIsReady=!0,y.data=p,y.max=p&&p.length||0,y.type=a.getTypeOf(p),y.isPaused||y._tickAndRepeat()},function(p){y.error(p)})}a.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,y);break;case"uint8array":f=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":f=this.data.slice(this.index,y)}return this.index=y,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,n){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var f=0;f<this._listeners[o].length;f++)this._listeners[o][f].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(f){s.processChunk(f)}),o.on("end",function(){s.end()}),o.on("error",function(f){s.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=a},{}],29:[function(t,r,n){var a=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),f=t("../base64"),y=t("../support"),p=t("../external"),d=null;if(y.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch(x){}function m(x,w){return new p.Promise(function(k,b){var E=[],T=x._internalType,L=x._outputType,B=x._mimeType;x.on("data",function(Z,W){E.push(Z),w&&w(W)}).on("error",function(Z){E=[],b(Z)}).on("end",function(){try{var Z=function(W,X,H){switch(W){case"blob":return a.newBlob(a.transformTo("arraybuffer",X),H);case"base64":return f.encode(X);default:return a.transformTo(W,X)}}(L,function(W,X){var H,rt=0,dt=null,P=0;for(H=0;H<X.length;H++)P+=X[H].length;switch(W){case"string":return X.join("");case"array":return Array.prototype.concat.apply([],X);case"uint8array":for(dt=new Uint8Array(P),H=0;H<X.length;H++)dt.set(X[H],rt),rt+=X[H].length;return dt;case"nodebuffer":return Buffer.concat(X);default:throw new Error("concat : unsupported type '"+W+"'")}}(T,E),B);k(Z)}catch(W){b(W)}E=[]}).resume()})}function h(x,w,k){var b=w;switch(w){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=w,this._mimeType=k,a.checkSupport(b),this._worker=x.pipe(new o(b)),x.lock()}catch(E){this._worker=new s("error"),this._worker.error(E)}}h.prototype={accumulate:function(x){return m(this,x)},on:function(x,w){var k=this;return x==="data"?this._worker.on(x,function(b){w.call(k,b.data,b.meta)}):this._worker.on(x,function(){a.delay(w,arguments,k)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},x)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var a=new ArrayBuffer(0);try{n.blob=new Blob([a],{type:"application/zip"}).size===0}catch(s){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),n.blob=o.getBlob("application/zip").size===0}catch(f){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(s){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,n){for(var a=t("./utils"),o=t("./support"),s=t("./nodejsUtils"),f=t("./stream/GenericWorker"),y=new Array(256),p=0;p<256;p++)y[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;y[254]=y[254]=1;function d(){f.call(this,"utf-8 decode"),this.leftOver=null}function m(){f.call(this,"utf-8 encode")}n.utf8encode=function(h){return o.nodebuffer?s.newBufferFrom(h,"utf-8"):function(x){var w,k,b,E,T,L=x.length,B=0;for(E=0;E<L;E++)(64512&(k=x.charCodeAt(E)))==55296&&E+1<L&&(64512&(b=x.charCodeAt(E+1)))==56320&&(k=65536+(k-55296<<10)+(b-56320),E++),B+=k<128?1:k<2048?2:k<65536?3:4;for(w=o.uint8array?new Uint8Array(B):new Array(B),E=T=0;T<B;E++)(64512&(k=x.charCodeAt(E)))==55296&&E+1<L&&(64512&(b=x.charCodeAt(E+1)))==56320&&(k=65536+(k-55296<<10)+(b-56320),E++),k<128?w[T++]=k:(k<2048?w[T++]=192|k>>>6:(k<65536?w[T++]=224|k>>>12:(w[T++]=240|k>>>18,w[T++]=128|k>>>12&63),w[T++]=128|k>>>6&63),w[T++]=128|63&k);return w}(h)},n.utf8decode=function(h){return o.nodebuffer?a.transformTo("nodebuffer",h).toString("utf-8"):function(x){var w,k,b,E,T=x.length,L=new Array(2*T);for(w=k=0;w<T;)if((b=x[w++])<128)L[k++]=b;else if(4<(E=y[b]))L[k++]=65533,w+=E-1;else{for(b&=E===2?31:E===3?15:7;1<E&&w<T;)b=b<<6|63&x[w++],E--;1<E?L[k++]=65533:b<65536?L[k++]=b:(b-=65536,L[k++]=55296|b>>10&1023,L[k++]=56320|1023&b)}return L.length!==k&&(L.subarray?L=L.subarray(0,k):L.length=k),a.applyFromCharCode(L)}(h=a.transformTo(o.uint8array?"uint8array":"array",h))},a.inherits(d,f),d.prototype.processChunk=function(h){var x=a.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var w=x;(x=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),x.set(w,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var k=function(E,T){var L;for((T=T||E.length)>E.length&&(T=E.length),L=T-1;0<=L&&(192&E[L])==128;)L--;return L<0||L===0?T:L+y[E[L]]>T?L:T}(x),b=x;k!==x.length&&(o.uint8array?(b=x.subarray(0,k),this.leftOver=x.subarray(k,x.length)):(b=x.slice(0,k),this.leftOver=x.slice(k,x.length))),this.push({data:n.utf8decode(b),meta:h.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=d,a.inherits(m,f),m.prototype.processChunk=function(h){this.push({data:n.utf8encode(h.data),meta:h.meta})},n.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,n){var a=t("./support"),o=t("./base64"),s=t("./nodejsUtils"),f=t("./external");function y(w){return w}function p(w,k){for(var b=0;b<w.length;++b)k[b]=255&w.charCodeAt(b);return k}t("setimmediate"),n.newBlob=function(w,k){n.checkSupport("blob");try{return new Blob([w],{type:k})}catch(E){try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(w),b.getBlob(k)}catch(T){throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(w,k,b){var E=[],T=0,L=w.length;if(L<=b)return String.fromCharCode.apply(null,w);for(;T<L;)k==="array"||k==="nodebuffer"?E.push(String.fromCharCode.apply(null,w.slice(T,Math.min(T+b,L)))):E.push(String.fromCharCode.apply(null,w.subarray(T,Math.min(T+b,L)))),T+=b;return E.join("")},stringifyByChar:function(w){for(var k="",b=0;b<w.length;b++)k+=String.fromCharCode(w[b]);return k},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(w){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch(w){return!1}}()}};function m(w){var k=65536,b=n.getTypeOf(w),E=!0;if(b==="uint8array"?E=d.applyCanBeUsed.uint8array:b==="nodebuffer"&&(E=d.applyCanBeUsed.nodebuffer),E)for(;1<k;)try{return d.stringifyByChunk(w,b,k)}catch(T){k=Math.floor(k/2)}return d.stringifyByChar(w)}function h(w,k){for(var b=0;b<w.length;b++)k[b]=w[b];return k}n.applyFromCharCode=m;var x={};x.string={string:y,array:function(w){return p(w,new Array(w.length))},arraybuffer:function(w){return x.string.uint8array(w).buffer},uint8array:function(w){return p(w,new Uint8Array(w.length))},nodebuffer:function(w){return p(w,s.allocBuffer(w.length))}},x.array={string:m,array:y,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return s.newBufferFrom(w)}},x.arraybuffer={string:function(w){return m(new Uint8Array(w))},array:function(w){return h(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:y,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return s.newBufferFrom(new Uint8Array(w))}},x.uint8array={string:m,array:function(w){return h(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:y,nodebuffer:function(w){return s.newBufferFrom(w)}},x.nodebuffer={string:m,array:function(w){return h(w,new Array(w.length))},arraybuffer:function(w){return x.nodebuffer.uint8array(w).buffer},uint8array:function(w){return h(w,new Uint8Array(w.length))},nodebuffer:y},n.transformTo=function(w,k){if(k=k||"",!w)return k;n.checkSupport(w);var b=n.getTypeOf(k);return x[b][w](k)},n.resolve=function(w){for(var k=w.split("/"),b=[],E=0;E<k.length;E++){var T=k[E];T==="."||T===""&&E!==0&&E!==k.length-1||(T===".."?b.pop():b.push(T))}return b.join("/")},n.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":a.nodebuffer&&s.isBuffer(w)?"nodebuffer":a.uint8array&&w instanceof Uint8Array?"uint8array":a.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(w){if(!a[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(w){var k,b,E="";for(b=0;b<(w||"").length;b++)E+="\\x"+((k=w.charCodeAt(b))<16?"0":"")+k.toString(16).toUpperCase();return E},n.delay=function(w,k,b){setImmediate(function(){w.apply(b||null,k||[])})},n.inherits=function(w,k){function b(){}b.prototype=k.prototype,w.prototype=new b},n.extend=function(){var w,k,b={};for(w=0;w<arguments.length;w++)for(k in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],k)&&b[k]===void 0&&(b[k]=arguments[w][k]);return b},n.prepareContent=function(w,k,b,E,T){return f.Promise.resolve(k).then(function(L){return a.blob&&(L instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(L))!==-1)&&typeof FileReader<"u"?new f.Promise(function(B,Z){var W=new FileReader;W.onload=function(X){B(X.target.result)},W.onerror=function(X){Z(X.target.error)},W.readAsArrayBuffer(L)}):L}).then(function(L){var B=n.getTypeOf(L);return B?(B==="arraybuffer"?L=n.transformTo("uint8array",L):B==="string"&&(T?L=o.decode(L):b&&E!==!0&&(L=function(Z){return p(Z,a.uint8array?new Uint8Array(Z.length):new Array(Z.length))}(L))),L):f.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,n){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./signature"),f=t("./zipEntry"),y=t("./support");function p(d){this.files=[],this.loadOptions=d}p.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(d)+")")}},isSignature:function(d,m){var h=this.reader.index;this.reader.setIndex(d);var x=this.reader.readString(4)===m;return this.reader.setIndex(h),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),m=y.uint8array?"uint8array":"array",h=o.transformTo(m,d);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,m,h,x=this.zip64EndOfCentralSize-44;0<x;)d=this.reader.readInt(2),m=this.reader.readInt(4),h=this.reader.readData(m),this.zip64ExtensibleData[d]={id:d,length:m,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,m;for(d=0;d<this.files.length;d++)m=this.files[d],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(d=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var m=d;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var x=m-h;if(0<x)this.isSignature(m,s.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(d){this.reader=a(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,n){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./compressedObject"),f=t("./crc32"),y=t("./utf8"),p=t("./compressions"),d=t("./support");function m(h,x){this.options=h,this.loadOptions=x}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var x,w;if(h.skip(22),this.fileNameLength=h.readInt(2),w=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((x=function(k){for(var b in p)if(Object.prototype.hasOwnProperty.call(p,b)&&p[b].magic===k)return p[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,x,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var x=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(x),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var x,w,k,b=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<b;)x=h.readInt(2),w=h.readInt(2),k=h.readData(w),this.extraFields[x]={id:x,length:w,value:k};h.setIndex(b)},handleUTF8:function(){var h=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(x!==null)this.fileNameStr=x;else{var w=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var b=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var x=a(h.value);return x.readInt(1)!==1||f(this.fileName)!==x.readInt(4)?null:y.utf8decode(x.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var x=a(h.value);return x.readInt(1)!==1||f(this.fileComment)!==x.readInt(4)?null:y.utf8decode(x.readData(h.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,n){function a(x,w,k){this.name=x,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=w,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var o=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),f=t("./utf8"),y=t("./compressedObject"),p=t("./stream/GenericWorker");a.prototype={internalStream:function(x){var w=null,k="string";try{if(!x)throw new Error("No output type specified.");var b=(k=x.toLowerCase())==="string"||k==="text";k!=="binarystring"&&k!=="text"||(k="string"),w=this._decompressWorker();var E=!this._dataBinary;E&&!b&&(w=w.pipe(new f.Utf8EncodeWorker)),!E&&b&&(w=w.pipe(new f.Utf8DecodeWorker))}catch(T){(w=new p("error")).error(T)}return new o(w,k,"")},async:function(x,w){return this.internalStream(x).accumulate(w)},nodeStream:function(x,w){return this.internalStream(x||"nodebuffer").toNodejsStream(w)},_compressWorker:function(x,w){if(this._data instanceof y&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new f.Utf8EncodeWorker)),y.createWorkerFrom(k,x,w)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof p?this._data:new s(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<d.length;h++)a.prototype[d[h]]=m;r.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,n){(function(a){var o,s,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var y=0,p=new f(x),d=a.document.createTextNode("");p.observe(d,{characterData:!0}),o=function(){d.data=y=++y%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var w=a.document.createElement("script");w.onreadystatechange=function(){x(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},a.document.documentElement.appendChild(w)}:function(){setTimeout(x,0)};else{var m=new a.MessageChannel;m.port1.onmessage=x,o=function(){m.port2.postMessage(0)}}var h=[];function x(){var w,k;s=!0;for(var b=h.length;b;){for(k=h,h=[],w=-1;++w<b;)k[w]();b=h.length}s=!1}r.exports=function(w){h.push(w)!==1||s||o()}}).call(this,typeof Gt<"u"?Gt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,n){var a=t("immediate");function o(){}var s={},f=["REJECTED"],y=["FULFILLED"],p=["PENDING"];function d(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,b!==o&&w(this,b)}function m(b,E,T){this.promise=b,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function h(b,E,T){a(function(){var L;try{L=E(T)}catch(B){return s.reject(b,B)}L===b?s.reject(b,new TypeError("Cannot resolve promise with itself")):s.resolve(b,L)})}function x(b){var E=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof E=="function")return function(){E.apply(b,arguments)}}function w(b,E){var T=!1;function L(W){T||(T=!0,s.reject(b,W))}function B(W){T||(T=!0,s.resolve(b,W))}var Z=k(function(){E(B,L)});Z.status==="error"&&L(Z.value)}function k(b,E){var T={};try{T.value=b(E),T.status="success"}catch(L){T.status="error",T.value=L}return T}(r.exports=d).prototype.finally=function(b){if(typeof b!="function")return this;var E=this.constructor;return this.then(function(T){return E.resolve(b()).then(function(){return T})},function(T){return E.resolve(b()).then(function(){throw T})})},d.prototype.catch=function(b){return this.then(null,b)},d.prototype.then=function(b,E){if(typeof b!="function"&&this.state===y||typeof E!="function"&&this.state===f)return this;var T=new this.constructor(o);return this.state!==p?h(T,this.state===y?b:E,this.outcome):this.queue.push(new m(T,b,E)),T},m.prototype.callFulfilled=function(b){s.resolve(this.promise,b)},m.prototype.otherCallFulfilled=function(b){h(this.promise,this.onFulfilled,b)},m.prototype.callRejected=function(b){s.reject(this.promise,b)},m.prototype.otherCallRejected=function(b){h(this.promise,this.onRejected,b)},s.resolve=function(b,E){var T=k(x,E);if(T.status==="error")return s.reject(b,T.value);var L=T.value;if(L)w(b,L);else{b.state=y,b.outcome=E;for(var B=-1,Z=b.queue.length;++B<Z;)b.queue[B].callFulfilled(E)}return b},s.reject=function(b,E){b.state=f,b.outcome=E;for(var T=-1,L=b.queue.length;++T<L;)b.queue[T].callRejected(E);return b},d.resolve=function(b){return b instanceof this?b:s.resolve(new this(o),b)},d.reject=function(b){var E=new this(o);return s.reject(E,b)},d.all=function(b){var E=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=b.length,L=!1;if(!T)return this.resolve([]);for(var B=new Array(T),Z=0,W=-1,X=new this(o);++W<T;)H(b[W],W);return X;function H(rt,dt){E.resolve(rt).then(function(P){B[dt]=P,++Z!==T||L||(L=!0,s.resolve(X,B))},function(P){L||(L=!0,s.reject(X,P))})}},d.race=function(b){var E=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=b.length,L=!1;if(!T)return this.resolve([]);for(var B=-1,Z=new this(o);++B<T;)W=b[B],E.resolve(W).then(function(X){L||(L=!0,s.resolve(Z,X))},function(X){L||(L=!0,s.reject(Z,X))});var W;return Z}},{immediate:36}],38:[function(t,r,n){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,n){var a=t("./zlib/deflate"),o=t("./utils/common"),s=t("./utils/strings"),f=t("./zlib/messages"),y=t("./zlib/zstream"),p=Object.prototype.toString,d=0,m=-1,h=0,x=8;function w(b){if(!(this instanceof w))return new w(b);this.options=o.assign({level:m,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},b||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var T=a.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(T!==d)throw new Error(f[T]);if(E.header&&a.deflateSetHeader(this.strm,E.header),E.dictionary){var L;if(L=typeof E.dictionary=="string"?s.string2buf(E.dictionary):p.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(T=a.deflateSetDictionary(this.strm,L))!==d)throw new Error(f[T]);this._dict_set=!0}}function k(b,E){var T=new w(E);if(T.push(b,!0),T.err)throw T.msg||f[T.err];return T.result}w.prototype.push=function(b,E){var T,L,B=this.strm,Z=this.options.chunkSize;if(this.ended)return!1;L=E===~~E?E:E===!0?4:0,typeof b=="string"?B.input=s.string2buf(b):p.call(b)==="[object ArrayBuffer]"?B.input=new Uint8Array(b):B.input=b,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(Z),B.next_out=0,B.avail_out=Z),(T=a.deflate(B,L))!==1&&T!==d)return this.onEnd(T),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||L!==4&&L!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(B.output,B.next_out))):this.onData(o.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&T!==1);return L===4?(T=a.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===d):L!==2||(this.onEnd(d),!(B.avail_out=0))},w.prototype.onData=function(b){this.chunks.push(b)},w.prototype.onEnd=function(b){b===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Deflate=w,n.deflate=k,n.deflateRaw=function(b,E){return(E=E||{}).raw=!0,k(b,E)},n.gzip=function(b,E){return(E=E||{}).gzip=!0,k(b,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,n){var a=t("./zlib/inflate"),o=t("./utils/common"),s=t("./utils/strings"),f=t("./zlib/constants"),y=t("./zlib/messages"),p=t("./zlib/zstream"),d=t("./zlib/gzheader"),m=Object.prototype.toString;function h(w){if(!(this instanceof h))return new h(w);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},w||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||w&&w.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&!(15&k.windowBits)&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var b=a.inflateInit2(this.strm,k.windowBits);if(b!==f.Z_OK)throw new Error(y[b]);this.header=new d,a.inflateGetHeader(this.strm,this.header)}function x(w,k){var b=new h(k);if(b.push(w,!0),b.err)throw b.msg||y[b.err];return b.result}h.prototype.push=function(w,k){var b,E,T,L,B,Z,W=this.strm,X=this.options.chunkSize,H=this.options.dictionary,rt=!1;if(this.ended)return!1;E=k===~~k?k:k===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof w=="string"?W.input=s.binstring2buf(w):m.call(w)==="[object ArrayBuffer]"?W.input=new Uint8Array(w):W.input=w,W.next_in=0,W.avail_in=W.input.length;do{if(W.avail_out===0&&(W.output=new o.Buf8(X),W.next_out=0,W.avail_out=X),(b=a.inflate(W,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&H&&(Z=typeof H=="string"?s.string2buf(H):m.call(H)==="[object ArrayBuffer]"?new Uint8Array(H):H,b=a.inflateSetDictionary(this.strm,Z)),b===f.Z_BUF_ERROR&&rt===!0&&(b=f.Z_OK,rt=!1),b!==f.Z_STREAM_END&&b!==f.Z_OK)return this.onEnd(b),!(this.ended=!0);W.next_out&&(W.avail_out!==0&&b!==f.Z_STREAM_END&&(W.avail_in!==0||E!==f.Z_FINISH&&E!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=s.utf8border(W.output,W.next_out),L=W.next_out-T,B=s.buf2string(W.output,T),W.next_out=L,W.avail_out=X-L,L&&o.arraySet(W.output,W.output,T,L,0),this.onData(B)):this.onData(o.shrinkBuf(W.output,W.next_out)))),W.avail_in===0&&W.avail_out===0&&(rt=!0)}while((0<W.avail_in||W.avail_out===0)&&b!==f.Z_STREAM_END);return b===f.Z_STREAM_END&&(E=f.Z_FINISH),E===f.Z_FINISH?(b=a.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===f.Z_OK):E!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(W.avail_out=0))},h.prototype.onData=function(w){this.chunks.push(w)},h.prototype.onEnd=function(w){w===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},n.Inflate=h,n.inflate=x,n.inflateRaw=function(w,k){return(k=k||{}).raw=!0,x(w,k)},n.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,n){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(f){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var p=y.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var d in p)p.hasOwnProperty(d)&&(f[d]=p[d])}}return f},n.shrinkBuf=function(f,y){return f.length===y?f:f.subarray?f.subarray(0,y):(f.length=y,f)};var o={arraySet:function(f,y,p,d,m){if(y.subarray&&f.subarray)f.set(y.subarray(p,p+d),m);else for(var h=0;h<d;h++)f[m+h]=y[p+h]},flattenChunks:function(f){var y,p,d,m,h,x;for(y=d=0,p=f.length;y<p;y++)d+=f[y].length;for(x=new Uint8Array(d),y=m=0,p=f.length;y<p;y++)h=f[y],x.set(h,m),m+=h.length;return x}},s={arraySet:function(f,y,p,d,m){for(var h=0;h<d;h++)f[m+h]=y[p+h]},flattenChunks:function(f){return[].concat.apply([],f)}};n.setTyped=function(f){f?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(a)},{}],42:[function(t,r,n){var a=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(d){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(d){s=!1}for(var f=new a.Buf8(256),y=0;y<256;y++)f[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function p(d,m){if(m<65537&&(d.subarray&&s||!d.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(d,m));for(var h="",x=0;x<m;x++)h+=String.fromCharCode(d[x]);return h}f[254]=f[254]=1,n.string2buf=function(d){var m,h,x,w,k,b=d.length,E=0;for(w=0;w<b;w++)(64512&(h=d.charCodeAt(w)))==55296&&w+1<b&&(64512&(x=d.charCodeAt(w+1)))==56320&&(h=65536+(h-55296<<10)+(x-56320),w++),E+=h<128?1:h<2048?2:h<65536?3:4;for(m=new a.Buf8(E),w=k=0;k<E;w++)(64512&(h=d.charCodeAt(w)))==55296&&w+1<b&&(64512&(x=d.charCodeAt(w+1)))==56320&&(h=65536+(h-55296<<10)+(x-56320),w++),h<128?m[k++]=h:(h<2048?m[k++]=192|h>>>6:(h<65536?m[k++]=224|h>>>12:(m[k++]=240|h>>>18,m[k++]=128|h>>>12&63),m[k++]=128|h>>>6&63),m[k++]=128|63&h);return m},n.buf2binstring=function(d){return p(d,d.length)},n.binstring2buf=function(d){for(var m=new a.Buf8(d.length),h=0,x=m.length;h<x;h++)m[h]=d.charCodeAt(h);return m},n.buf2string=function(d,m){var h,x,w,k,b=m||d.length,E=new Array(2*b);for(h=x=0;h<b;)if((w=d[h++])<128)E[x++]=w;else if(4<(k=f[w]))E[x++]=65533,h+=k-1;else{for(w&=k===2?31:k===3?15:7;1<k&&h<b;)w=w<<6|63&d[h++],k--;1<k?E[x++]=65533:w<65536?E[x++]=w:(w-=65536,E[x++]=55296|w>>10&1023,E[x++]=56320|1023&w)}return p(E,x)},n.utf8border=function(d,m){var h;for((m=m||d.length)>d.length&&(m=d.length),h=m-1;0<=h&&(192&d[h])==128;)h--;return h<0||h===0?m:h+f[d[h]]>m?h:m}},{"./common":41}],43:[function(t,r,n){r.exports=function(a,o,s,f){for(var y=65535&a|0,p=a>>>16&65535|0,d=0;s!==0;){for(s-=d=2e3<s?2e3:s;p=p+(y=y+o[f++]|0)|0,--d;);y%=65521,p%=65521}return y|p<<16|0}},{}],44:[function(t,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,n){var a=function(){for(var o,s=[],f=0;f<256;f++){o=f;for(var y=0;y<8;y++)o=1&o?3988292384^o>>>1:o>>>1;s[f]=o}return s}();r.exports=function(o,s,f,y){var p=a,d=y+f;o^=-1;for(var m=y;m<d;m++)o=o>>>8^p[255&(o^s[m])];return-1^o}},{}],46:[function(t,r,n){var a,o=t("../utils/common"),s=t("./trees"),f=t("./adler32"),y=t("./crc32"),p=t("./messages"),d=0,m=4,h=0,x=-2,w=-1,k=4,b=2,E=8,T=9,L=286,B=30,Z=19,W=2*L+1,X=15,H=3,rt=258,dt=rt+H+1,P=42,V=113,g=1,q=2,vt=3,et=4;function _t(l,G){return l.msg=p[G],G}function at(l){return(l<<1)-(4<l?9:0)}function gt(l){for(var G=l.length;0<=--G;)l[G]=0}function M(l){var G=l.state,K=G.pending;K>l.avail_out&&(K=l.avail_out),K!==0&&(o.arraySet(l.output,G.pending_buf,G.pending_out,K,l.next_out),l.next_out+=K,G.pending_out+=K,l.total_out+=K,l.avail_out-=K,G.pending-=K,G.pending===0&&(G.pending_out=0))}function j(l,G){s._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,G),l.block_start=l.strstart,M(l.strm)}function yt(l,G){l.pending_buf[l.pending++]=G}function lt(l,G){l.pending_buf[l.pending++]=G>>>8&255,l.pending_buf[l.pending++]=255&G}function ft(l,G){var K,I,A=l.max_chain_length,R=l.strstart,Q=l.prev_length,tt=l.nice_match,N=l.strstart>l.w_size-dt?l.strstart-(l.w_size-dt):0,st=l.window,ht=l.w_mask,it=l.prev,mt=l.strstart+rt,v=st[R+Q-1],u=st[R+Q];l.prev_length>=l.good_match&&(A>>=2),tt>l.lookahead&&(tt=l.lookahead);do if(st[(K=G)+Q]===u&&st[K+Q-1]===v&&st[K]===st[R]&&st[++K]===st[R+1]){R+=2,K++;do;while(st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&st[++R]===st[++K]&&R<mt);if(I=rt-(mt-R),R=mt-rt,Q<I){if(l.match_start=G,tt<=(Q=I))break;v=st[R+Q-1],u=st[R+Q]}}while((G=it[G&ht])>N&&--A!=0);return Q<=l.lookahead?Q:l.lookahead}function Pt(l){var G,K,I,A,R,Q,tt,N,st,ht,it=l.w_size;do{if(A=l.window_size-l.lookahead-l.strstart,l.strstart>=it+(it-dt)){for(o.arraySet(l.window,l.window,it,it,0),l.match_start-=it,l.strstart-=it,l.block_start-=it,G=K=l.hash_size;I=l.head[--G],l.head[G]=it<=I?I-it:0,--K;);for(G=K=it;I=l.prev[--G],l.prev[G]=it<=I?I-it:0,--K;);A+=it}if(l.strm.avail_in===0)break;if(Q=l.strm,tt=l.window,N=l.strstart+l.lookahead,st=A,ht=void 0,ht=Q.avail_in,st<ht&&(ht=st),K=ht===0?0:(Q.avail_in-=ht,o.arraySet(tt,Q.input,Q.next_in,ht,N),Q.state.wrap===1?Q.adler=f(Q.adler,tt,ht,N):Q.state.wrap===2&&(Q.adler=y(Q.adler,tt,ht,N)),Q.next_in+=ht,Q.total_in+=ht,ht),l.lookahead+=K,l.lookahead+l.insert>=H)for(R=l.strstart-l.insert,l.ins_h=l.window[R],l.ins_h=(l.ins_h<<l.hash_shift^l.window[R+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[R+H-1])&l.hash_mask,l.prev[R&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=R,R++,l.insert--,!(l.lookahead+l.insert<H)););}while(l.lookahead<dt&&l.strm.avail_in!==0)}function Ft(l,G){for(var K,I;;){if(l.lookahead<dt){if(Pt(l),l.lookahead<dt&&G===d)return g;if(l.lookahead===0)break}if(K=0,l.lookahead>=H&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),K!==0&&l.strstart-K<=l.w_size-dt&&(l.match_length=ft(l,K)),l.match_length>=H)if(I=s._tr_tally(l,l.strstart-l.match_start,l.match_length-H),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=H){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else I=s._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(I&&(j(l,!1),l.strm.avail_out===0))return g}return l.insert=l.strstart<H-1?l.strstart:H-1,G===m?(j(l,!0),l.strm.avail_out===0?vt:et):l.last_lit&&(j(l,!1),l.strm.avail_out===0)?g:q}function bt(l,G){for(var K,I,A;;){if(l.lookahead<dt){if(Pt(l),l.lookahead<dt&&G===d)return g;if(l.lookahead===0)break}if(K=0,l.lookahead>=H&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=H-1,K!==0&&l.prev_length<l.max_lazy_match&&l.strstart-K<=l.w_size-dt&&(l.match_length=ft(l,K),l.match_length<=5&&(l.strategy===1||l.match_length===H&&4096<l.strstart-l.match_start)&&(l.match_length=H-1)),l.prev_length>=H&&l.match_length<=l.prev_length){for(A=l.strstart+l.lookahead-H,I=s._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-H),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=A&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+H-1])&l.hash_mask,K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=H-1,l.strstart++,I&&(j(l,!1),l.strm.avail_out===0))return g}else if(l.match_available){if((I=s._tr_tally(l,0,l.window[l.strstart-1]))&&j(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return g}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(I=s._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<H-1?l.strstart:H-1,G===m?(j(l,!0),l.strm.avail_out===0?vt:et):l.last_lit&&(j(l,!1),l.strm.avail_out===0)?g:q}function xt(l,G,K,I,A){this.good_length=l,this.max_lazy=G,this.nice_length=K,this.max_chain=I,this.func=A}function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*W),this.dyn_dtree=new o.Buf16(2*(2*B+1)),this.bl_tree=new o.Buf16(2*(2*Z+1)),gt(this.dyn_ltree),gt(this.dyn_dtree),gt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(X+1),this.heap=new o.Buf16(2*L+1),gt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*L+1),gt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function zt(l){var G;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=b,(G=l.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?P:V,l.adler=G.wrap===2?0:1,G.last_flush=d,s._tr_init(G),h):_t(l,x)}function Ut(l){var G=zt(l);return G===h&&function(K){K.window_size=2*K.w_size,gt(K.head),K.max_lazy_match=a[K.level].max_lazy,K.good_match=a[K.level].good_length,K.nice_match=a[K.level].nice_length,K.max_chain_length=a[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=H-1,K.match_available=0,K.ins_h=0}(l.state),G}function Rt(l,G,K,I,A,R){if(!l)return x;var Q=1;if(G===w&&(G=6),I<0?(Q=0,I=-I):15<I&&(Q=2,I-=16),A<1||T<A||K!==E||I<8||15<I||G<0||9<G||R<0||k<R)return _t(l,x);I===8&&(I=9);var tt=new Ot;return(l.state=tt).strm=l,tt.wrap=Q,tt.gzhead=null,tt.w_bits=I,tt.w_size=1<<tt.w_bits,tt.w_mask=tt.w_size-1,tt.hash_bits=A+7,tt.hash_size=1<<tt.hash_bits,tt.hash_mask=tt.hash_size-1,tt.hash_shift=~~((tt.hash_bits+H-1)/H),tt.window=new o.Buf8(2*tt.w_size),tt.head=new o.Buf16(tt.hash_size),tt.prev=new o.Buf16(tt.w_size),tt.lit_bufsize=1<<A+6,tt.pending_buf_size=4*tt.lit_bufsize,tt.pending_buf=new o.Buf8(tt.pending_buf_size),tt.d_buf=1*tt.lit_bufsize,tt.l_buf=3*tt.lit_bufsize,tt.level=G,tt.strategy=R,tt.method=K,Ut(l)}a=[new xt(0,0,0,0,function(l,G){var K=65535;for(K>l.pending_buf_size-5&&(K=l.pending_buf_size-5);;){if(l.lookahead<=1){if(Pt(l),l.lookahead===0&&G===d)return g;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var I=l.block_start+K;if((l.strstart===0||l.strstart>=I)&&(l.lookahead=l.strstart-I,l.strstart=I,j(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-dt&&(j(l,!1),l.strm.avail_out===0))return g}return l.insert=0,G===m?(j(l,!0),l.strm.avail_out===0?vt:et):(l.strstart>l.block_start&&(j(l,!1),l.strm.avail_out),g)}),new xt(4,4,8,4,Ft),new xt(4,5,16,8,Ft),new xt(4,6,32,32,Ft),new xt(4,4,16,16,bt),new xt(8,16,32,32,bt),new xt(8,16,128,128,bt),new xt(8,32,128,256,bt),new xt(32,128,258,1024,bt),new xt(32,258,258,4096,bt)],n.deflateInit=function(l,G){return Rt(l,G,E,15,8,0)},n.deflateInit2=Rt,n.deflateReset=Ut,n.deflateResetKeep=zt,n.deflateSetHeader=function(l,G){return l&&l.state?l.state.wrap!==2?x:(l.state.gzhead=G,h):x},n.deflate=function(l,G){var K,I,A,R;if(!l||!l.state||5<G||G<0)return l?_t(l,x):x;if(I=l.state,!l.output||!l.input&&l.avail_in!==0||I.status===666&&G!==m)return _t(l,l.avail_out===0?-5:x);if(I.strm=l,K=I.last_flush,I.last_flush=G,I.status===P)if(I.wrap===2)l.adler=0,yt(I,31),yt(I,139),yt(I,8),I.gzhead?(yt(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),yt(I,255&I.gzhead.time),yt(I,I.gzhead.time>>8&255),yt(I,I.gzhead.time>>16&255),yt(I,I.gzhead.time>>24&255),yt(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),yt(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(yt(I,255&I.gzhead.extra.length),yt(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(l.adler=y(l.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(yt(I,0),yt(I,0),yt(I,0),yt(I,0),yt(I,0),yt(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),yt(I,3),I.status=V);else{var Q=E+(I.w_bits-8<<4)<<8;Q|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(Q|=32),Q+=31-Q%31,I.status=V,lt(I,Q),I.strstart!==0&&(lt(I,l.adler>>>16),lt(I,65535&l.adler)),l.adler=1}if(I.status===69)if(I.gzhead.extra){for(A=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>A&&(l.adler=y(l.adler,I.pending_buf,I.pending-A,A)),M(l),A=I.pending,I.pending!==I.pending_buf_size));)yt(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>A&&(l.adler=y(l.adler,I.pending_buf,I.pending-A,A)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){A=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>A&&(l.adler=y(l.adler,I.pending_buf,I.pending-A,A)),M(l),A=I.pending,I.pending===I.pending_buf_size)){R=1;break}R=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,yt(I,R)}while(R!==0);I.gzhead.hcrc&&I.pending>A&&(l.adler=y(l.adler,I.pending_buf,I.pending-A,A)),R===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){A=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>A&&(l.adler=y(l.adler,I.pending_buf,I.pending-A,A)),M(l),A=I.pending,I.pending===I.pending_buf_size)){R=1;break}R=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,yt(I,R)}while(R!==0);I.gzhead.hcrc&&I.pending>A&&(l.adler=y(l.adler,I.pending_buf,I.pending-A,A)),R===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&M(l),I.pending+2<=I.pending_buf_size&&(yt(I,255&l.adler),yt(I,l.adler>>8&255),l.adler=0,I.status=V)):I.status=V),I.pending!==0){if(M(l),l.avail_out===0)return I.last_flush=-1,h}else if(l.avail_in===0&&at(G)<=at(K)&&G!==m)return _t(l,-5);if(I.status===666&&l.avail_in!==0)return _t(l,-5);if(l.avail_in!==0||I.lookahead!==0||G!==d&&I.status!==666){var tt=I.strategy===2?function(N,st){for(var ht;;){if(N.lookahead===0&&(Pt(N),N.lookahead===0)){if(st===d)return g;break}if(N.match_length=0,ht=s._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,ht&&(j(N,!1),N.strm.avail_out===0))return g}return N.insert=0,st===m?(j(N,!0),N.strm.avail_out===0?vt:et):N.last_lit&&(j(N,!1),N.strm.avail_out===0)?g:q}(I,G):I.strategy===3?function(N,st){for(var ht,it,mt,v,u=N.window;;){if(N.lookahead<=rt){if(Pt(N),N.lookahead<=rt&&st===d)return g;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=H&&0<N.strstart&&(it=u[mt=N.strstart-1])===u[++mt]&&it===u[++mt]&&it===u[++mt]){v=N.strstart+rt;do;while(it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&it===u[++mt]&&mt<v);N.match_length=rt-(v-mt),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=H?(ht=s._tr_tally(N,1,N.match_length-H),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(ht=s._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),ht&&(j(N,!1),N.strm.avail_out===0))return g}return N.insert=0,st===m?(j(N,!0),N.strm.avail_out===0?vt:et):N.last_lit&&(j(N,!1),N.strm.avail_out===0)?g:q}(I,G):a[I.level].func(I,G);if(tt!==vt&&tt!==et||(I.status=666),tt===g||tt===vt)return l.avail_out===0&&(I.last_flush=-1),h;if(tt===q&&(G===1?s._tr_align(I):G!==5&&(s._tr_stored_block(I,0,0,!1),G===3&&(gt(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),M(l),l.avail_out===0))return I.last_flush=-1,h}return G!==m?h:I.wrap<=0?1:(I.wrap===2?(yt(I,255&l.adler),yt(I,l.adler>>8&255),yt(I,l.adler>>16&255),yt(I,l.adler>>24&255),yt(I,255&l.total_in),yt(I,l.total_in>>8&255),yt(I,l.total_in>>16&255),yt(I,l.total_in>>24&255)):(lt(I,l.adler>>>16),lt(I,65535&l.adler)),M(l),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?h:1)},n.deflateEnd=function(l){var G;return l&&l.state?(G=l.state.status)!==P&&G!==69&&G!==73&&G!==91&&G!==103&&G!==V&&G!==666?_t(l,x):(l.state=null,G===V?_t(l,-3):h):x},n.deflateSetDictionary=function(l,G){var K,I,A,R,Q,tt,N,st,ht=G.length;if(!l||!l.state||(R=(K=l.state).wrap)===2||R===1&&K.status!==P||K.lookahead)return x;for(R===1&&(l.adler=f(l.adler,G,ht,0)),K.wrap=0,ht>=K.w_size&&(R===0&&(gt(K.head),K.strstart=0,K.block_start=0,K.insert=0),st=new o.Buf8(K.w_size),o.arraySet(st,G,ht-K.w_size,K.w_size,0),G=st,ht=K.w_size),Q=l.avail_in,tt=l.next_in,N=l.input,l.avail_in=ht,l.next_in=0,l.input=G,Pt(K);K.lookahead>=H;){for(I=K.strstart,A=K.lookahead-(H-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[I+H-1])&K.hash_mask,K.prev[I&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=I,I++,--A;);K.strstart=I,K.lookahead=H-1,Pt(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=H-1,K.match_available=0,l.next_in=tt,l.input=N,l.avail_in=Q,K.wrap=R,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,n){r.exports=function(a,o){var s,f,y,p,d,m,h,x,w,k,b,E,T,L,B,Z,W,X,H,rt,dt,P,V,g,q;s=a.state,f=a.next_in,g=a.input,y=f+(a.avail_in-5),p=a.next_out,q=a.output,d=p-(o-a.avail_out),m=p+(a.avail_out-257),h=s.dmax,x=s.wsize,w=s.whave,k=s.wnext,b=s.window,E=s.hold,T=s.bits,L=s.lencode,B=s.distcode,Z=(1<<s.lenbits)-1,W=(1<<s.distbits)-1;t:do{T<15&&(E+=g[f++]<<T,T+=8,E+=g[f++]<<T,T+=8),X=L[E&Z];e:for(;;){if(E>>>=H=X>>>24,T-=H,(H=X>>>16&255)===0)q[p++]=65535&X;else{if(!(16&H)){if(!(64&H)){X=L[(65535&X)+(E&(1<<H)-1)];continue e}if(32&H){s.mode=12;break t}a.msg="invalid literal/length code",s.mode=30;break t}rt=65535&X,(H&=15)&&(T<H&&(E+=g[f++]<<T,T+=8),rt+=E&(1<<H)-1,E>>>=H,T-=H),T<15&&(E+=g[f++]<<T,T+=8,E+=g[f++]<<T,T+=8),X=B[E&W];r:for(;;){if(E>>>=H=X>>>24,T-=H,!(16&(H=X>>>16&255))){if(!(64&H)){X=B[(65535&X)+(E&(1<<H)-1)];continue r}a.msg="invalid distance code",s.mode=30;break t}if(dt=65535&X,T<(H&=15)&&(E+=g[f++]<<T,(T+=8)<H&&(E+=g[f++]<<T,T+=8)),h<(dt+=E&(1<<H)-1)){a.msg="invalid distance too far back",s.mode=30;break t}if(E>>>=H,T-=H,(H=p-d)<dt){if(w<(H=dt-H)&&s.sane){a.msg="invalid distance too far back",s.mode=30;break t}if(V=b,(P=0)===k){if(P+=x-H,H<rt){for(rt-=H;q[p++]=b[P++],--H;);P=p-dt,V=q}}else if(k<H){if(P+=x+k-H,(H-=k)<rt){for(rt-=H;q[p++]=b[P++],--H;);if(P=0,k<rt){for(rt-=H=k;q[p++]=b[P++],--H;);P=p-dt,V=q}}}else if(P+=k-H,H<rt){for(rt-=H;q[p++]=b[P++],--H;);P=p-dt,V=q}for(;2<rt;)q[p++]=V[P++],q[p++]=V[P++],q[p++]=V[P++],rt-=3;rt&&(q[p++]=V[P++],1<rt&&(q[p++]=V[P++]))}else{for(P=p-dt;q[p++]=q[P++],q[p++]=q[P++],q[p++]=q[P++],2<(rt-=3););rt&&(q[p++]=q[P++],1<rt&&(q[p++]=q[P++]))}break}}break}}while(f<y&&p<m);f-=rt=T>>3,E&=(1<<(T-=rt<<3))-1,a.next_in=f,a.next_out=p,a.avail_in=f<y?y-f+5:5-(f-y),a.avail_out=p<m?m-p+257:257-(p-m),s.hold=E,s.bits=T}},{}],49:[function(t,r,n){var a=t("../utils/common"),o=t("./adler32"),s=t("./crc32"),f=t("./inffast"),y=t("./inftrees"),p=1,d=2,m=0,h=-2,x=1,w=852,k=592;function b(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(P){var V;return P&&P.state?(V=P.state,P.total_in=P.total_out=V.total=0,P.msg="",V.wrap&&(P.adler=1&V.wrap),V.mode=x,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new a.Buf32(w),V.distcode=V.distdyn=new a.Buf32(k),V.sane=1,V.back=-1,m):h}function L(P){var V;return P&&P.state?((V=P.state).wsize=0,V.whave=0,V.wnext=0,T(P)):h}function B(P,V){var g,q;return P&&P.state?(q=P.state,V<0?(g=0,V=-V):(g=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?h:(q.window!==null&&q.wbits!==V&&(q.window=null),q.wrap=g,q.wbits=V,L(P))):h}function Z(P,V){var g,q;return P?(q=new E,(P.state=q).window=null,(g=B(P,V))!==m&&(P.state=null),g):h}var W,X,H=!0;function rt(P){if(H){var V;for(W=new a.Buf32(512),X=new a.Buf32(32),V=0;V<144;)P.lens[V++]=8;for(;V<256;)P.lens[V++]=9;for(;V<280;)P.lens[V++]=7;for(;V<288;)P.lens[V++]=8;for(y(p,P.lens,0,288,W,0,P.work,{bits:9}),V=0;V<32;)P.lens[V++]=5;y(d,P.lens,0,32,X,0,P.work,{bits:5}),H=!1}P.lencode=W,P.lenbits=9,P.distcode=X,P.distbits=5}function dt(P,V,g,q){var vt,et=P.state;return et.window===null&&(et.wsize=1<<et.wbits,et.wnext=0,et.whave=0,et.window=new a.Buf8(et.wsize)),q>=et.wsize?(a.arraySet(et.window,V,g-et.wsize,et.wsize,0),et.wnext=0,et.whave=et.wsize):(q<(vt=et.wsize-et.wnext)&&(vt=q),a.arraySet(et.window,V,g-q,vt,et.wnext),(q-=vt)?(a.arraySet(et.window,V,g-q,q,0),et.wnext=q,et.whave=et.wsize):(et.wnext+=vt,et.wnext===et.wsize&&(et.wnext=0),et.whave<et.wsize&&(et.whave+=vt))),0}n.inflateReset=L,n.inflateReset2=B,n.inflateResetKeep=T,n.inflateInit=function(P){return Z(P,15)},n.inflateInit2=Z,n.inflate=function(P,V){var g,q,vt,et,_t,at,gt,M,j,yt,lt,ft,Pt,Ft,bt,xt,Ot,zt,Ut,Rt,l,G,K,I,A=0,R=new a.Buf8(4),Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return h;(g=P.state).mode===12&&(g.mode=13),_t=P.next_out,vt=P.output,gt=P.avail_out,et=P.next_in,q=P.input,at=P.avail_in,M=g.hold,j=g.bits,yt=at,lt=gt,G=m;t:for(;;)switch(g.mode){case x:if(g.wrap===0){g.mode=13;break}for(;j<16;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(2&g.wrap&&M===35615){R[g.check=0]=255&M,R[1]=M>>>8&255,g.check=s(g.check,R,2,0),j=M=0,g.mode=2;break}if(g.flags=0,g.head&&(g.head.done=!1),!(1&g.wrap)||(((255&M)<<8)+(M>>8))%31){P.msg="incorrect header check",g.mode=30;break}if((15&M)!=8){P.msg="unknown compression method",g.mode=30;break}if(j-=4,l=8+(15&(M>>>=4)),g.wbits===0)g.wbits=l;else if(l>g.wbits){P.msg="invalid window size",g.mode=30;break}g.dmax=1<<l,P.adler=g.check=1,g.mode=512&M?10:12,j=M=0;break;case 2:for(;j<16;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(g.flags=M,(255&g.flags)!=8){P.msg="unknown compression method",g.mode=30;break}if(57344&g.flags){P.msg="unknown header flags set",g.mode=30;break}g.head&&(g.head.text=M>>8&1),512&g.flags&&(R[0]=255&M,R[1]=M>>>8&255,g.check=s(g.check,R,2,0)),j=M=0,g.mode=3;case 3:for(;j<32;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.head&&(g.head.time=M),512&g.flags&&(R[0]=255&M,R[1]=M>>>8&255,R[2]=M>>>16&255,R[3]=M>>>24&255,g.check=s(g.check,R,4,0)),j=M=0,g.mode=4;case 4:for(;j<16;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.head&&(g.head.xflags=255&M,g.head.os=M>>8),512&g.flags&&(R[0]=255&M,R[1]=M>>>8&255,g.check=s(g.check,R,2,0)),j=M=0,g.mode=5;case 5:if(1024&g.flags){for(;j<16;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.length=M,g.head&&(g.head.extra_len=M),512&g.flags&&(R[0]=255&M,R[1]=M>>>8&255,g.check=s(g.check,R,2,0)),j=M=0}else g.head&&(g.head.extra=null);g.mode=6;case 6:if(1024&g.flags&&(at<(ft=g.length)&&(ft=at),ft&&(g.head&&(l=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),a.arraySet(g.head.extra,q,et,ft,l)),512&g.flags&&(g.check=s(g.check,q,ft,et)),at-=ft,et+=ft,g.length-=ft),g.length))break t;g.length=0,g.mode=7;case 7:if(2048&g.flags){if(at===0)break t;for(ft=0;l=q[et+ft++],g.head&&l&&g.length<65536&&(g.head.name+=String.fromCharCode(l)),l&&ft<at;);if(512&g.flags&&(g.check=s(g.check,q,ft,et)),at-=ft,et+=ft,l)break t}else g.head&&(g.head.name=null);g.length=0,g.mode=8;case 8:if(4096&g.flags){if(at===0)break t;for(ft=0;l=q[et+ft++],g.head&&l&&g.length<65536&&(g.head.comment+=String.fromCharCode(l)),l&&ft<at;);if(512&g.flags&&(g.check=s(g.check,q,ft,et)),at-=ft,et+=ft,l)break t}else g.head&&(g.head.comment=null);g.mode=9;case 9:if(512&g.flags){for(;j<16;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(M!==(65535&g.check)){P.msg="header crc mismatch",g.mode=30;break}j=M=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),P.adler=g.check=0,g.mode=12;break;case 10:for(;j<32;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}P.adler=g.check=b(M),j=M=0,g.mode=11;case 11:if(g.havedict===0)return P.next_out=_t,P.avail_out=gt,P.next_in=et,P.avail_in=at,g.hold=M,g.bits=j,2;P.adler=g.check=1,g.mode=12;case 12:if(V===5||V===6)break t;case 13:if(g.last){M>>>=7&j,j-=7&j,g.mode=27;break}for(;j<3;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}switch(g.last=1&M,j-=1,3&(M>>>=1)){case 0:g.mode=14;break;case 1:if(rt(g),g.mode=20,V!==6)break;M>>>=2,j-=2;break t;case 2:g.mode=17;break;case 3:P.msg="invalid block type",g.mode=30}M>>>=2,j-=2;break;case 14:for(M>>>=7&j,j-=7&j;j<32;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if((65535&M)!=(M>>>16^65535)){P.msg="invalid stored block lengths",g.mode=30;break}if(g.length=65535&M,j=M=0,g.mode=15,V===6)break t;case 15:g.mode=16;case 16:if(ft=g.length){if(at<ft&&(ft=at),gt<ft&&(ft=gt),ft===0)break t;a.arraySet(vt,q,et,ft,_t),at-=ft,et+=ft,gt-=ft,_t+=ft,g.length-=ft;break}g.mode=12;break;case 17:for(;j<14;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(g.nlen=257+(31&M),M>>>=5,j-=5,g.ndist=1+(31&M),M>>>=5,j-=5,g.ncode=4+(15&M),M>>>=4,j-=4,286<g.nlen||30<g.ndist){P.msg="too many length or distance symbols",g.mode=30;break}g.have=0,g.mode=18;case 18:for(;g.have<g.ncode;){for(;j<3;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.lens[Q[g.have++]]=7&M,M>>>=3,j-=3}for(;g.have<19;)g.lens[Q[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,K={bits:g.lenbits},G=y(0,g.lens,0,19,g.lencode,0,g.work,K),g.lenbits=K.bits,G){P.msg="invalid code lengths set",g.mode=30;break}g.have=0,g.mode=19;case 19:for(;g.have<g.nlen+g.ndist;){for(;xt=(A=g.lencode[M&(1<<g.lenbits)-1])>>>16&255,Ot=65535&A,!((bt=A>>>24)<=j);){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(Ot<16)M>>>=bt,j-=bt,g.lens[g.have++]=Ot;else{if(Ot===16){for(I=bt+2;j<I;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(M>>>=bt,j-=bt,g.have===0){P.msg="invalid bit length repeat",g.mode=30;break}l=g.lens[g.have-1],ft=3+(3&M),M>>>=2,j-=2}else if(Ot===17){for(I=bt+3;j<I;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}j-=bt,l=0,ft=3+(7&(M>>>=bt)),M>>>=3,j-=3}else{for(I=bt+7;j<I;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}j-=bt,l=0,ft=11+(127&(M>>>=bt)),M>>>=7,j-=7}if(g.have+ft>g.nlen+g.ndist){P.msg="invalid bit length repeat",g.mode=30;break}for(;ft--;)g.lens[g.have++]=l}}if(g.mode===30)break;if(g.lens[256]===0){P.msg="invalid code -- missing end-of-block",g.mode=30;break}if(g.lenbits=9,K={bits:g.lenbits},G=y(p,g.lens,0,g.nlen,g.lencode,0,g.work,K),g.lenbits=K.bits,G){P.msg="invalid literal/lengths set",g.mode=30;break}if(g.distbits=6,g.distcode=g.distdyn,K={bits:g.distbits},G=y(d,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,K),g.distbits=K.bits,G){P.msg="invalid distances set",g.mode=30;break}if(g.mode=20,V===6)break t;case 20:g.mode=21;case 21:if(6<=at&&258<=gt){P.next_out=_t,P.avail_out=gt,P.next_in=et,P.avail_in=at,g.hold=M,g.bits=j,f(P,lt),_t=P.next_out,vt=P.output,gt=P.avail_out,et=P.next_in,q=P.input,at=P.avail_in,M=g.hold,j=g.bits,g.mode===12&&(g.back=-1);break}for(g.back=0;xt=(A=g.lencode[M&(1<<g.lenbits)-1])>>>16&255,Ot=65535&A,!((bt=A>>>24)<=j);){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(xt&&!(240&xt)){for(zt=bt,Ut=xt,Rt=Ot;xt=(A=g.lencode[Rt+((M&(1<<zt+Ut)-1)>>zt)])>>>16&255,Ot=65535&A,!(zt+(bt=A>>>24)<=j);){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}M>>>=zt,j-=zt,g.back+=zt}if(M>>>=bt,j-=bt,g.back+=bt,g.length=Ot,xt===0){g.mode=26;break}if(32&xt){g.back=-1,g.mode=12;break}if(64&xt){P.msg="invalid literal/length code",g.mode=30;break}g.extra=15&xt,g.mode=22;case 22:if(g.extra){for(I=g.extra;j<I;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.length+=M&(1<<g.extra)-1,M>>>=g.extra,j-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=23;case 23:for(;xt=(A=g.distcode[M&(1<<g.distbits)-1])>>>16&255,Ot=65535&A,!((bt=A>>>24)<=j);){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(!(240&xt)){for(zt=bt,Ut=xt,Rt=Ot;xt=(A=g.distcode[Rt+((M&(1<<zt+Ut)-1)>>zt)])>>>16&255,Ot=65535&A,!(zt+(bt=A>>>24)<=j);){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}M>>>=zt,j-=zt,g.back+=zt}if(M>>>=bt,j-=bt,g.back+=bt,64&xt){P.msg="invalid distance code",g.mode=30;break}g.offset=Ot,g.extra=15&xt,g.mode=24;case 24:if(g.extra){for(I=g.extra;j<I;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}g.offset+=M&(1<<g.extra)-1,M>>>=g.extra,j-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){P.msg="invalid distance too far back",g.mode=30;break}g.mode=25;case 25:if(gt===0)break t;if(ft=lt-gt,g.offset>ft){if((ft=g.offset-ft)>g.whave&&g.sane){P.msg="invalid distance too far back",g.mode=30;break}Pt=ft>g.wnext?(ft-=g.wnext,g.wsize-ft):g.wnext-ft,ft>g.length&&(ft=g.length),Ft=g.window}else Ft=vt,Pt=_t-g.offset,ft=g.length;for(gt<ft&&(ft=gt),gt-=ft,g.length-=ft;vt[_t++]=Ft[Pt++],--ft;);g.length===0&&(g.mode=21);break;case 26:if(gt===0)break t;vt[_t++]=g.length,gt--,g.mode=21;break;case 27:if(g.wrap){for(;j<32;){if(at===0)break t;at--,M|=q[et++]<<j,j+=8}if(lt-=gt,P.total_out+=lt,g.total+=lt,lt&&(P.adler=g.check=g.flags?s(g.check,vt,lt,_t-lt):o(g.check,vt,lt,_t-lt)),lt=gt,(g.flags?M:b(M))!==g.check){P.msg="incorrect data check",g.mode=30;break}j=M=0}g.mode=28;case 28:if(g.wrap&&g.flags){for(;j<32;){if(at===0)break t;at--,M+=q[et++]<<j,j+=8}if(M!==(4294967295&g.total)){P.msg="incorrect length check",g.mode=30;break}j=M=0}g.mode=29;case 29:G=1;break t;case 30:G=-3;break t;case 31:return-4;case 32:default:return h}return P.next_out=_t,P.avail_out=gt,P.next_in=et,P.avail_in=at,g.hold=M,g.bits=j,(g.wsize||lt!==P.avail_out&&g.mode<30&&(g.mode<27||V!==4))&&dt(P,P.output,P.next_out,lt-P.avail_out)?(g.mode=31,-4):(yt-=P.avail_in,lt-=P.avail_out,P.total_in+=yt,P.total_out+=lt,g.total+=lt,g.wrap&&lt&&(P.adler=g.check=g.flags?s(g.check,vt,lt,P.next_out-lt):o(g.check,vt,lt,P.next_out-lt)),P.data_type=g.bits+(g.last?64:0)+(g.mode===12?128:0)+(g.mode===20||g.mode===15?256:0),(yt==0&&lt===0||V===4)&&G===m&&(G=-5),G)},n.inflateEnd=function(P){if(!P||!P.state)return h;var V=P.state;return V.window&&(V.window=null),P.state=null,m},n.inflateGetHeader=function(P,V){var g;return P&&P.state&&2&(g=P.state).wrap?((g.head=V).done=!1,m):h},n.inflateSetDictionary=function(P,V){var g,q=V.length;return P&&P.state?(g=P.state).wrap!==0&&g.mode!==11?h:g.mode===11&&o(1,V,q,0)!==g.check?-3:dt(P,V,q,q)?(g.mode=31,-4):(g.havedict=1,m):h},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,n){var a=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(p,d,m,h,x,w,k,b){var E,T,L,B,Z,W,X,H,rt,dt=b.bits,P=0,V=0,g=0,q=0,vt=0,et=0,_t=0,at=0,gt=0,M=0,j=null,yt=0,lt=new a.Buf16(16),ft=new a.Buf16(16),Pt=null,Ft=0;for(P=0;P<=15;P++)lt[P]=0;for(V=0;V<h;V++)lt[d[m+V]]++;for(vt=dt,q=15;1<=q&&lt[q]===0;q--);if(q<vt&&(vt=q),q===0)return x[w++]=20971520,x[w++]=20971520,b.bits=1,0;for(g=1;g<q&&lt[g]===0;g++);for(vt<g&&(vt=g),P=at=1;P<=15;P++)if(at<<=1,(at-=lt[P])<0)return-1;if(0<at&&(p===0||q!==1))return-1;for(ft[1]=0,P=1;P<15;P++)ft[P+1]=ft[P]+lt[P];for(V=0;V<h;V++)d[m+V]!==0&&(k[ft[d[m+V]]++]=V);if(W=p===0?(j=Pt=k,19):p===1?(j=o,yt-=257,Pt=s,Ft-=257,256):(j=f,Pt=y,-1),P=g,Z=w,_t=V=M=0,L=-1,B=(gt=1<<(et=vt))-1,p===1&&852<gt||p===2&&592<gt)return 1;for(;;){for(X=P-_t,rt=k[V]<W?(H=0,k[V]):k[V]>W?(H=Pt[Ft+k[V]],j[yt+k[V]]):(H=96,0),E=1<<P-_t,g=T=1<<et;x[Z+(M>>_t)+(T-=E)]=X<<24|H<<16|rt|0,T!==0;);for(E=1<<P-1;M&E;)E>>=1;if(E!==0?(M&=E-1,M+=E):M=0,V++,--lt[P]==0){if(P===q)break;P=d[m+k[V]]}if(vt<P&&(M&B)!==L){for(_t===0&&(_t=vt),Z+=g,at=1<<(et=P-_t);et+_t<q&&!((at-=lt[et+_t])<=0);)et++,at<<=1;if(gt+=1<<et,p===1&&852<gt||p===2&&592<gt)return 1;x[L=M&B]=vt<<24|et<<16|Z-w|0}}return M!==0&&(x[Z+M]=P-_t<<24|64<<16|0),b.bits=vt,0}},{"../utils/common":41}],51:[function(t,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,n){var a=t("../utils/common"),o=0,s=1;function f(A){for(var R=A.length;0<=--R;)A[R]=0}var y=0,p=29,d=256,m=d+1+p,h=30,x=19,w=2*m+1,k=15,b=16,E=7,T=256,L=16,B=17,Z=18,W=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],X=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],dt=new Array(2*(m+2));f(dt);var P=new Array(2*h);f(P);var V=new Array(512);f(V);var g=new Array(256);f(g);var q=new Array(p);f(q);var vt,et,_t,at=new Array(h);function gt(A,R,Q,tt,N){this.static_tree=A,this.extra_bits=R,this.extra_base=Q,this.elems=tt,this.max_length=N,this.has_stree=A&&A.length}function M(A,R){this.dyn_tree=A,this.max_code=0,this.stat_desc=R}function j(A){return A<256?V[A]:V[256+(A>>>7)]}function yt(A,R){A.pending_buf[A.pending++]=255&R,A.pending_buf[A.pending++]=R>>>8&255}function lt(A,R,Q){A.bi_valid>b-Q?(A.bi_buf|=R<<A.bi_valid&65535,yt(A,A.bi_buf),A.bi_buf=R>>b-A.bi_valid,A.bi_valid+=Q-b):(A.bi_buf|=R<<A.bi_valid&65535,A.bi_valid+=Q)}function ft(A,R,Q){lt(A,Q[2*R],Q[2*R+1])}function Pt(A,R){for(var Q=0;Q|=1&A,A>>>=1,Q<<=1,0<--R;);return Q>>>1}function Ft(A,R,Q){var tt,N,st=new Array(k+1),ht=0;for(tt=1;tt<=k;tt++)st[tt]=ht=ht+Q[tt-1]<<1;for(N=0;N<=R;N++){var it=A[2*N+1];it!==0&&(A[2*N]=Pt(st[it]++,it))}}function bt(A){var R;for(R=0;R<m;R++)A.dyn_ltree[2*R]=0;for(R=0;R<h;R++)A.dyn_dtree[2*R]=0;for(R=0;R<x;R++)A.bl_tree[2*R]=0;A.dyn_ltree[2*T]=1,A.opt_len=A.static_len=0,A.last_lit=A.matches=0}function xt(A){8<A.bi_valid?yt(A,A.bi_buf):0<A.bi_valid&&(A.pending_buf[A.pending++]=A.bi_buf),A.bi_buf=0,A.bi_valid=0}function Ot(A,R,Q,tt){var N=2*R,st=2*Q;return A[N]<A[st]||A[N]===A[st]&&tt[R]<=tt[Q]}function zt(A,R,Q){for(var tt=A.heap[Q],N=Q<<1;N<=A.heap_len&&(N<A.heap_len&&Ot(R,A.heap[N+1],A.heap[N],A.depth)&&N++,!Ot(R,tt,A.heap[N],A.depth));)A.heap[Q]=A.heap[N],Q=N,N<<=1;A.heap[Q]=tt}function Ut(A,R,Q){var tt,N,st,ht,it=0;if(A.last_lit!==0)for(;tt=A.pending_buf[A.d_buf+2*it]<<8|A.pending_buf[A.d_buf+2*it+1],N=A.pending_buf[A.l_buf+it],it++,tt===0?ft(A,N,R):(ft(A,(st=g[N])+d+1,R),(ht=W[st])!==0&&lt(A,N-=q[st],ht),ft(A,st=j(--tt),Q),(ht=X[st])!==0&&lt(A,tt-=at[st],ht)),it<A.last_lit;);ft(A,T,R)}function Rt(A,R){var Q,tt,N,st=R.dyn_tree,ht=R.stat_desc.static_tree,it=R.stat_desc.has_stree,mt=R.stat_desc.elems,v=-1;for(A.heap_len=0,A.heap_max=w,Q=0;Q<mt;Q++)st[2*Q]!==0?(A.heap[++A.heap_len]=v=Q,A.depth[Q]=0):st[2*Q+1]=0;for(;A.heap_len<2;)st[2*(N=A.heap[++A.heap_len]=v<2?++v:0)]=1,A.depth[N]=0,A.opt_len--,it&&(A.static_len-=ht[2*N+1]);for(R.max_code=v,Q=A.heap_len>>1;1<=Q;Q--)zt(A,st,Q);for(N=mt;Q=A.heap[1],A.heap[1]=A.heap[A.heap_len--],zt(A,st,1),tt=A.heap[1],A.heap[--A.heap_max]=Q,A.heap[--A.heap_max]=tt,st[2*N]=st[2*Q]+st[2*tt],A.depth[N]=(A.depth[Q]>=A.depth[tt]?A.depth[Q]:A.depth[tt])+1,st[2*Q+1]=st[2*tt+1]=N,A.heap[1]=N++,zt(A,st,1),2<=A.heap_len;);A.heap[--A.heap_max]=A.heap[1],function(u,c){var S,O,$,Y,wt,Bt,Et=c.dyn_tree,At=c.max_code,St=c.stat_desc.static_tree,He=c.stat_desc.has_stree,Ht=c.stat_desc.extra_bits,Ie=c.stat_desc.extra_base,ie=c.stat_desc.max_length,se=0;for(Y=0;Y<=k;Y++)u.bl_count[Y]=0;for(Et[2*u.heap[u.heap_max]+1]=0,S=u.heap_max+1;S<w;S++)ie<(Y=Et[2*Et[2*(O=u.heap[S])+1]+1]+1)&&(Y=ie,se++),Et[2*O+1]=Y,At<O||(u.bl_count[Y]++,wt=0,Ie<=O&&(wt=Ht[O-Ie]),Bt=Et[2*O],u.opt_len+=Bt*(Y+wt),He&&(u.static_len+=Bt*(St[2*O+1]+wt)));if(se!==0){do{for(Y=ie-1;u.bl_count[Y]===0;)Y--;u.bl_count[Y]--,u.bl_count[Y+1]+=2,u.bl_count[ie]--,se-=2}while(0<se);for(Y=ie;Y!==0;Y--)for(O=u.bl_count[Y];O!==0;)At<($=u.heap[--S])||(Et[2*$+1]!==Y&&(u.opt_len+=(Y-Et[2*$+1])*Et[2*$],Et[2*$+1]=Y),O--)}}(A,R),Ft(st,v,A.bl_count)}function l(A,R,Q){var tt,N,st=-1,ht=R[1],it=0,mt=7,v=4;for(ht===0&&(mt=138,v=3),R[2*(Q+1)+1]=65535,tt=0;tt<=Q;tt++)N=ht,ht=R[2*(tt+1)+1],++it<mt&&N===ht||(it<v?A.bl_tree[2*N]+=it:N!==0?(N!==st&&A.bl_tree[2*N]++,A.bl_tree[2*L]++):it<=10?A.bl_tree[2*B]++:A.bl_tree[2*Z]++,st=N,v=(it=0)===ht?(mt=138,3):N===ht?(mt=6,3):(mt=7,4))}function G(A,R,Q){var tt,N,st=-1,ht=R[1],it=0,mt=7,v=4;for(ht===0&&(mt=138,v=3),tt=0;tt<=Q;tt++)if(N=ht,ht=R[2*(tt+1)+1],!(++it<mt&&N===ht)){if(it<v)for(;ft(A,N,A.bl_tree),--it!=0;);else N!==0?(N!==st&&(ft(A,N,A.bl_tree),it--),ft(A,L,A.bl_tree),lt(A,it-3,2)):it<=10?(ft(A,B,A.bl_tree),lt(A,it-3,3)):(ft(A,Z,A.bl_tree),lt(A,it-11,7));st=N,v=(it=0)===ht?(mt=138,3):N===ht?(mt=6,3):(mt=7,4)}}f(at);var K=!1;function I(A,R,Q,tt){lt(A,(y<<1)+(tt?1:0),3),function(N,st,ht,it){xt(N),yt(N,ht),yt(N,~ht),a.arraySet(N.pending_buf,N.window,st,ht,N.pending),N.pending+=ht}(A,R,Q)}n._tr_init=function(A){K||(function(){var R,Q,tt,N,st,ht=new Array(k+1);for(N=tt=0;N<p-1;N++)for(q[N]=tt,R=0;R<1<<W[N];R++)g[tt++]=N;for(g[tt-1]=N,N=st=0;N<16;N++)for(at[N]=st,R=0;R<1<<X[N];R++)V[st++]=N;for(st>>=7;N<h;N++)for(at[N]=st<<7,R=0;R<1<<X[N]-7;R++)V[256+st++]=N;for(Q=0;Q<=k;Q++)ht[Q]=0;for(R=0;R<=143;)dt[2*R+1]=8,R++,ht[8]++;for(;R<=255;)dt[2*R+1]=9,R++,ht[9]++;for(;R<=279;)dt[2*R+1]=7,R++,ht[7]++;for(;R<=287;)dt[2*R+1]=8,R++,ht[8]++;for(Ft(dt,m+1,ht),R=0;R<h;R++)P[2*R+1]=5,P[2*R]=Pt(R,5);vt=new gt(dt,W,d+1,m,k),et=new gt(P,X,0,h,k),_t=new gt(new Array(0),H,0,x,E)}(),K=!0),A.l_desc=new M(A.dyn_ltree,vt),A.d_desc=new M(A.dyn_dtree,et),A.bl_desc=new M(A.bl_tree,_t),A.bi_buf=0,A.bi_valid=0,bt(A)},n._tr_stored_block=I,n._tr_flush_block=function(A,R,Q,tt){var N,st,ht=0;0<A.level?(A.strm.data_type===2&&(A.strm.data_type=function(it){var mt,v=4093624447;for(mt=0;mt<=31;mt++,v>>>=1)if(1&v&&it.dyn_ltree[2*mt]!==0)return o;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return s;for(mt=32;mt<d;mt++)if(it.dyn_ltree[2*mt]!==0)return s;return o}(A)),Rt(A,A.l_desc),Rt(A,A.d_desc),ht=function(it){var mt;for(l(it,it.dyn_ltree,it.l_desc.max_code),l(it,it.dyn_dtree,it.d_desc.max_code),Rt(it,it.bl_desc),mt=x-1;3<=mt&&it.bl_tree[2*rt[mt]+1]===0;mt--);return it.opt_len+=3*(mt+1)+5+5+4,mt}(A),N=A.opt_len+3+7>>>3,(st=A.static_len+3+7>>>3)<=N&&(N=st)):N=st=Q+5,Q+4<=N&&R!==-1?I(A,R,Q,tt):A.strategy===4||st===N?(lt(A,2+(tt?1:0),3),Ut(A,dt,P)):(lt(A,4+(tt?1:0),3),function(it,mt,v,u){var c;for(lt(it,mt-257,5),lt(it,v-1,5),lt(it,u-4,4),c=0;c<u;c++)lt(it,it.bl_tree[2*rt[c]+1],3);G(it,it.dyn_ltree,mt-1),G(it,it.dyn_dtree,v-1)}(A,A.l_desc.max_code+1,A.d_desc.max_code+1,ht+1),Ut(A,A.dyn_ltree,A.dyn_dtree)),bt(A),tt&&xt(A)},n._tr_tally=function(A,R,Q){return A.pending_buf[A.d_buf+2*A.last_lit]=R>>>8&255,A.pending_buf[A.d_buf+2*A.last_lit+1]=255&R,A.pending_buf[A.l_buf+A.last_lit]=255&Q,A.last_lit++,R===0?A.dyn_ltree[2*Q]++:(A.matches++,R--,A.dyn_ltree[2*(g[Q]+d+1)]++,A.dyn_dtree[2*j(R)]++),A.last_lit===A.lit_bufsize-1},n._tr_align=function(A){lt(A,2,3),ft(A,T,dt),function(R){R.bi_valid===16?(yt(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):8<=R.bi_valid&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)}(A)}},{"../utils/common":41}],53:[function(t,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,n){(function(a){(function(o,s){if(!o.setImmediate){var f,y,p,d,m=1,h={},x=!1,w=o.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(o);k=k&&k.setTimeout?k:o,f={}.toString.call(o.process)==="[object process]"?function(L){process.nextTick(function(){E(L)})}:function(){if(o.postMessage&&!o.importScripts){var L=!0,B=o.onmessage;return o.onmessage=function(){L=!1},o.postMessage("","*"),o.onmessage=B,L}}()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(L){o.postMessage(d+L,"*")}):o.MessageChannel?((p=new MessageChannel).port1.onmessage=function(L){E(L.data)},function(L){p.port2.postMessage(L)}):w&&"onreadystatechange"in w.createElement("script")?(y=w.documentElement,function(L){var B=w.createElement("script");B.onreadystatechange=function(){E(L),B.onreadystatechange=null,y.removeChild(B),B=null},y.appendChild(B)}):function(L){setTimeout(E,0,L)},k.setImmediate=function(L){typeof L!="function"&&(L=new Function(""+L));for(var B=new Array(arguments.length-1),Z=0;Z<B.length;Z++)B[Z]=arguments[Z+1];var W={callback:L,args:B};return h[m]=W,f(m),m++},k.clearImmediate=b}function b(L){delete h[L]}function E(L){if(x)setTimeout(E,0,L);else{var B=h[L];if(B){x=!0;try{(function(Z){var W=Z.callback,X=Z.args;switch(X.length){case 0:W();break;case 1:W(X[0]);break;case 2:W(X[0],X[1]);break;case 3:W(X[0],X[1],X[2]);break;default:W.apply(s,X)}})(B)}finally{b(L),x=!1}}}}function T(L){L.source===o&&typeof L.data=="string"&&L.data.indexOf(d)===0&&E(+L.data.slice(d.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Gt<"u"?Gt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(kn);var Us=kn.exports;const Wr=pr(Us),{data:er}=wr("zip");class Ns{constructor(e){this.disk=e}async zip(e,t="compress.zip"){t=this.disk.fmtPath(t);const r=new Wr,{add:n,run:a}=Ur();for(let p of e)p=this.disk.fmtPath(p),n(this.zipSingleFile(r,p));if(!(await a()).find(p=>p))return{success:!1,info:"zip fail: no files"};const s=await r.generateAsync({type:"uint8array"}),{parent:f}=ee(t),y=De([t],f,await this.disk.ls(f)||[]);return await this.disk.createFile(y[t],je(er,s)),{success:!0,info:y[t]}}async zipSingleFile(e,t){const r=await this.disk.getType(t);if(r==="empty")return!1;if(r==="dir"){const n=e.folder(t);if(!n)return!1;let a=await this.disk.ls(t)||[];a=a.map(f=>ue.join(t,f));const{add:o,run:s}=Ur();for(const f of a)o(this.zipSingleFile(n,f));await s()}else{const n=await this.disk.read(t);if(!n)return!1;const a=t.replace(e.root,"");e.file(a,n,{binary:!0})}return!0}async unzip(e,t){const r=await this.disk.read(e),n=this.getZipData(r);if(!n)return[];e=this.disk.fmtPath(e);const a=await this.unzipU8Arr(n);t=t?this.disk.fmtPath(t):this.disk.current;const o=new Set,s={};for(const p of a){const d=Os(t,p.path);d&&(s[p.path]=d,o.add(d))}const f=De(Array.from(o),t,await this.disk.ls(t)||[]),y=[];for(const p of a){let d=p.path;const m=s[p.path];if(m){const h=f[m];h&&(d=d.replace(m,h))}p.isDir?(y.push({path:d,isDir:!0}),await this.disk.createDir(d)):(y.push({path:d,isDir:!1}),this.disk.createFile(d,p.data))}return y}async unzipU8Arr(e,t){const r=await Wr.loadAsync(e);let n=0;const a=r.files,o=Object.keys(a).length,s=[];for(const f in r.files){const y=r.files[f],p=await y.async("uint8array");n++;const d={curName:y.name,count:n,curIndex:n,curSize:o,data:p,path:f,isDir:y.dir};t==null||t(d),s.push(d)}return s}async isZip(e){const t=await this.disk.read(e);return t?this.isZipData(t):!1}isZipData(e){return _n(e,er)}getZipData(e){return e&&this.isZipData(e)?e.slice(er.byteLength):null}}var br={exports:{}},ve=typeof Reflect=="object"?Reflect:null,$r=ve&&typeof ve.apply=="function"?ve.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},ze;ve&&typeof ve.ownKeys=="function"?ze=ve.ownKeys:Object.getOwnPropertySymbols?ze=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ze=function(e){return Object.getOwnPropertyNames(e)};function Ms(i){console&&console.warn&&console.warn(i)}var xn=Number.isNaN||function(e){return e!==e};function Tt(){Tt.init.call(this)}br.exports=Tt;br.exports.once=Hs;Tt.EventEmitter=Tt;Tt.prototype._events=void 0;Tt.prototype._eventsCount=0;Tt.prototype._maxListeners=void 0;var Hr=10;function We(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(Tt,"defaultMaxListeners",{enumerable:!0,get:function(){return Hr},set:function(i){if(typeof i!="number"||i<0||xn(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Hr=i}});Tt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Tt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||xn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function En(i){return i._maxListeners===void 0?Tt.defaultMaxListeners:i._maxListeners}Tt.prototype.getMaxListeners=function(){return En(this)};Tt.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n=e==="error",a=this._events;if(a!==void 0)n=n&&a.error===void 0;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var f=a[e];if(f===void 0)return!1;if(typeof f=="function")$r(f,this,t);else for(var y=f.length,p=Bn(f,y),r=0;r<y;++r)$r(p[r],this,t);return!0};function Sn(i,e,t,r){var n,a,o;if(We(t),a=i._events,a===void 0?(a=i._events=Object.create(null),i._eventsCount=0):(a.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),a=i._events),o=a[e]),o===void 0)o=a[e]=t,++i._eventsCount;else if(typeof o=="function"?o=a[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),n=En(i),n>0&&o.length>n&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=i,s.type=e,s.count=o.length,Ms(s)}return i}Tt.prototype.addListener=function(e,t){return Sn(this,e,t,!1)};Tt.prototype.on=Tt.prototype.addListener;Tt.prototype.prependListener=function(e,t){return Sn(this,e,t,!0)};function js(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Cn(i,e,t){var r={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},n=js.bind(r);return n.listener=t,r.wrapFn=n,n}Tt.prototype.once=function(e,t){return We(t),this.on(e,Cn(this,e,t)),this};Tt.prototype.prependOnceListener=function(e,t){return We(t),this.prependListener(e,Cn(this,e,t)),this};Tt.prototype.removeListener=function(e,t){var r,n,a,o,s;if(We(t),n=this._events,n===void 0)return this;if(r=n[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(a=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,a=o;break}if(a<0)return this;a===0?r.shift():Ws(r,a),r.length===1&&(n[e]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",e,s||t)}return this};Tt.prototype.off=Tt.prototype.removeListener;Tt.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var a=Object.keys(r),o;for(n=0;n<a.length;++n)o=a[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this};function An(i,e,t){var r=i._events;if(r===void 0)return[];var n=r[e];return n===void 0?[]:typeof n=="function"?t?[n.listener||n]:[n]:t?$s(n):Bn(n,n.length)}Tt.prototype.listeners=function(e){return An(this,e,!0)};Tt.prototype.rawListeners=function(e){return An(this,e,!1)};Tt.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):In.call(i,e)};Tt.prototype.listenerCount=In;function In(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Tt.prototype.eventNames=function(){return this._eventsCount>0?ze(this._events):[]};function Bn(i,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=i[r];return t}function Ws(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function $s(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function Hs(i,e){return new Promise(function(t,r){function n(o){i.removeListener(e,a),r(o)}function a(){typeof i.removeListener=="function"&&i.removeListener("error",n),t([].slice.call(arguments))}Tn(i,e,a,{once:!0}),e!=="error"&&Zs(i,n,{once:!0})})}function Zs(i,e,t){typeof i.on=="function"&&Tn(i,"error",e,t)}function Tn(i,e,t,r){if(typeof i.on=="function")r.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function n(a){r.once&&i.removeEventListener(e,n),t(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var Pn=br.exports,te=(i=>(i[i.Create=0]="Create",i[i.Remove=1]="Remove",i[i.Change=2]="Change",i))(te||{}),fr={},$e={};$e.byteLength=Vs;$e.toByteArray=Xs;$e.fromByteArray=Qs;var Kt=[],Wt=[],Ys=typeof Uint8Array<"u"?Uint8Array:Array,rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pe=0,Ks=rr.length;pe<Ks;++pe)Kt[pe]=rr[pe],Wt[rr.charCodeAt(pe)]=pe;Wt[45]=62;Wt[95]=63;function zn(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Vs(i){var e=zn(i),t=e[0],r=e[1];return(t+r)*3/4-r}function Gs(i,e,t){return(e+t)*3/4-t}function Xs(i){var e,t=zn(i),r=t[0],n=t[1],a=new Ys(Gs(i,r,n)),o=0,s=n>0?r-4:r,f;for(f=0;f<s;f+=4)e=Wt[i.charCodeAt(f)]<<18|Wt[i.charCodeAt(f+1)]<<12|Wt[i.charCodeAt(f+2)]<<6|Wt[i.charCodeAt(f+3)],a[o++]=e>>16&255,a[o++]=e>>8&255,a[o++]=e&255;return n===2&&(e=Wt[i.charCodeAt(f)]<<2|Wt[i.charCodeAt(f+1)]>>4,a[o++]=e&255),n===1&&(e=Wt[i.charCodeAt(f)]<<10|Wt[i.charCodeAt(f+1)]<<4|Wt[i.charCodeAt(f+2)]>>2,a[o++]=e>>8&255,a[o++]=e&255),a}function qs(i){return Kt[i>>18&63]+Kt[i>>12&63]+Kt[i>>6&63]+Kt[i&63]}function Js(i,e,t){for(var r,n=[],a=e;a<t;a+=3)r=(i[a]<<16&16711680)+(i[a+1]<<8&65280)+(i[a+2]&255),n.push(qs(r));return n.join("")}function Qs(i){for(var e,t=i.length,r=t%3,n=[],a=16383,o=0,s=t-r;o<s;o+=a)n.push(Js(i,o,o+a>s?s:o+a));return r===1?(e=i[t-1],n.push(Kt[e>>2]+Kt[e<<4&63]+"==")):r===2&&(e=(i[t-2]<<8)+i[t-1],n.push(Kt[e>>10]+Kt[e>>4&63]+Kt[e<<2&63]+"=")),n.join("")}var kr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */kr.read=function(i,e,t,r,n){var a,o,s=n*8-r-1,f=(1<<s)-1,y=f>>1,p=-7,d=t?n-1:0,m=t?-1:1,h=i[e+d];for(d+=m,a=h&(1<<-p)-1,h>>=-p,p+=s;p>0;a=a*256+i[e+d],d+=m,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=r;p>0;o=o*256+i[e+d],d+=m,p-=8);if(a===0)a=1-y;else{if(a===f)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),a=a-y}return(h?-1:1)*o*Math.pow(2,a-r)};kr.write=function(i,e,t,r,n,a){var o,s,f,y=a*8-n-1,p=(1<<y)-1,d=p>>1,m=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,x=r?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+d>=1?e+=m/f:e+=m*Math.pow(2,1-d),e*f>=2&&(o++,f/=2),o+d>=p?(s=0,o=p):o+d>=1?(s=(e*f-1)*Math.pow(2,n),o=o+d):(s=e*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;i[t+h]=s&255,h+=x,s/=256,n-=8);for(o=o<<n|s,y+=n;y>0;i[t+h]=o&255,h+=x,o/=256,y-=8);i[t+h-x]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=$e,t=kr,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=s,i.SlowBuffer=E,i.INSPECT_MAX_BYTES=50;const n=2147483647;i.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const v=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(v,u),v.foo()===42}catch(v){return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(v){if(v>n)throw new RangeError('The value "'+v+'" is invalid for option "size"');const u=new Uint8Array(v);return Object.setPrototypeOf(u,s.prototype),u}function s(v,u,c){if(typeof v=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(v)}return f(v,u,c)}s.poolSize=8192;function f(v,u,c){if(typeof v=="string")return m(v,u);if(ArrayBuffer.isView(v))return x(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(N(v,ArrayBuffer)||v&&N(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(N(v,SharedArrayBuffer)||v&&N(v.buffer,SharedArrayBuffer)))return w(v,u,c);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const S=v.valueOf&&v.valueOf();if(S!=null&&S!==v)return s.from(S,u,c);const O=k(v);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return s.from(v[Symbol.toPrimitive]("string"),u,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}s.from=function(v,u,c){return f(v,u,c)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function y(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function p(v,u,c){return y(v),v<=0?o(v):u!==void 0?typeof c=="string"?o(v).fill(u,c):o(v).fill(u):o(v)}s.alloc=function(v,u,c){return p(v,u,c)};function d(v){return y(v),o(v<0?0:b(v)|0)}s.allocUnsafe=function(v){return d(v)},s.allocUnsafeSlow=function(v){return d(v)};function m(v,u){if((typeof u!="string"||u==="")&&(u="utf8"),!s.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const c=T(v,u)|0;let S=o(c);const O=S.write(v,u);return O!==c&&(S=S.slice(0,O)),S}function h(v){const u=v.length<0?0:b(v.length)|0,c=o(u);for(let S=0;S<u;S+=1)c[S]=v[S]&255;return c}function x(v){if(N(v,Uint8Array)){const u=new Uint8Array(v);return w(u.buffer,u.byteOffset,u.byteLength)}return h(v)}function w(v,u,c){if(u<0||v.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<u+(c||0))throw new RangeError('"length" is outside of buffer bounds');let S;return u===void 0&&c===void 0?S=new Uint8Array(v):c===void 0?S=new Uint8Array(v,u):S=new Uint8Array(v,u,c),Object.setPrototypeOf(S,s.prototype),S}function k(v){if(s.isBuffer(v)){const u=b(v.length)|0,c=o(u);return c.length===0||v.copy(c,0,0,u),c}if(v.length!==void 0)return typeof v.length!="number"||st(v.length)?o(0):h(v);if(v.type==="Buffer"&&Array.isArray(v.data))return h(v.data)}function b(v){if(v>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return v|0}function E(v){return+v!=v&&(v=0),s.alloc(+v)}s.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==s.prototype},s.compare=function(u,c){if(N(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),N(c,Uint8Array)&&(c=s.from(c,c.offset,c.byteLength)),!s.isBuffer(u)||!s.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===c)return 0;let S=u.length,O=c.length;for(let $=0,Y=Math.min(S,O);$<Y;++$)if(u[$]!==c[$]){S=u[$],O=c[$];break}return S<O?-1:O<S?1:0},s.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(u,c){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return s.alloc(0);let S;if(c===void 0)for(c=0,S=0;S<u.length;++S)c+=u[S].length;const O=s.allocUnsafe(c);let $=0;for(S=0;S<u.length;++S){let Y=u[S];if(N(Y,Uint8Array))$+Y.length>O.length?(s.isBuffer(Y)||(Y=s.from(Y)),Y.copy(O,$)):Uint8Array.prototype.set.call(O,Y,$);else if(s.isBuffer(Y))Y.copy(O,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=Y.length}return O};function T(v,u){if(s.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||N(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const c=v.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&c===0)return 0;let O=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return I(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Q(v).length;default:if(O)return S?-1:I(v).length;u=(""+u).toLowerCase(),O=!0}}s.byteLength=T;function L(v,u,c){let S=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,u>>>=0,c<=u))return"";for(v||(v="utf8");;)switch(v){case"hex":return at(this,u,c);case"utf8":case"utf-8":return g(this,u,c);case"ascii":return et(this,u,c);case"latin1":case"binary":return _t(this,u,c);case"base64":return V(this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,u,c);default:if(S)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),S=!0}}s.prototype._isBuffer=!0;function B(v,u,c){const S=v[u];v[u]=v[c],v[c]=S}s.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<u;c+=2)B(this,c,c+1);return this},s.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<u;c+=4)B(this,c,c+3),B(this,c+1,c+2);return this},s.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<u;c+=8)B(this,c,c+7),B(this,c+1,c+6),B(this,c+2,c+5),B(this,c+3,c+4);return this},s.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?g(this,0,u):L.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(u){if(!s.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:s.compare(this,u)===0},s.prototype.inspect=function(){let u="";const c=i.INSPECT_MAX_BYTES;return u=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(u+=" ... "),"<Buffer "+u+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(u,c,S,O,$){if(N(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),!s.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(c===void 0&&(c=0),S===void 0&&(S=u?u.length:0),O===void 0&&(O=0),$===void 0&&($=this.length),c<0||S>u.length||O<0||$>this.length)throw new RangeError("out of range index");if(O>=$&&c>=S)return 0;if(O>=$)return-1;if(c>=S)return 1;if(c>>>=0,S>>>=0,O>>>=0,$>>>=0,this===u)return 0;let Y=$-O,wt=S-c;const Bt=Math.min(Y,wt),Et=this.slice(O,$),At=u.slice(c,S);for(let St=0;St<Bt;++St)if(Et[St]!==At[St]){Y=Et[St],wt=At[St];break}return Y<wt?-1:wt<Y?1:0};function Z(v,u,c,S,O){if(v.length===0)return-1;if(typeof c=="string"?(S=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,st(c)&&(c=O?0:v.length-1),c<0&&(c=v.length+c),c>=v.length){if(O)return-1;c=v.length-1}else if(c<0)if(O)c=0;else return-1;if(typeof u=="string"&&(u=s.from(u,S)),s.isBuffer(u))return u.length===0?-1:W(v,u,c,S,O);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(v,u,c):Uint8Array.prototype.lastIndexOf.call(v,u,c):W(v,[u],c,S,O);throw new TypeError("val must be string, number or Buffer")}function W(v,u,c,S,O){let $=1,Y=v.length,wt=u.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(v.length<2||u.length<2)return-1;$=2,Y/=2,wt/=2,c/=2}function Bt(At,St){return $===1?At[St]:At.readUInt16BE(St*$)}let Et;if(O){let At=-1;for(Et=c;Et<Y;Et++)if(Bt(v,Et)===Bt(u,At===-1?0:Et-At)){if(At===-1&&(At=Et),Et-At+1===wt)return At*$}else At!==-1&&(Et-=Et-At),At=-1}else for(c+wt>Y&&(c=Y-wt),Et=c;Et>=0;Et--){let At=!0;for(let St=0;St<wt;St++)if(Bt(v,Et+St)!==Bt(u,St)){At=!1;break}if(At)return Et}return-1}s.prototype.includes=function(u,c,S){return this.indexOf(u,c,S)!==-1},s.prototype.indexOf=function(u,c,S){return Z(this,u,c,S,!0)},s.prototype.lastIndexOf=function(u,c,S){return Z(this,u,c,S,!1)};function X(v,u,c,S){c=Number(c)||0;const O=v.length-c;S?(S=Number(S),S>O&&(S=O)):S=O;const $=u.length;S>$/2&&(S=$/2);let Y;for(Y=0;Y<S;++Y){const wt=parseInt(u.substr(Y*2,2),16);if(st(wt))return Y;v[c+Y]=wt}return Y}function H(v,u,c,S){return tt(I(u,v.length-c),v,c,S)}function rt(v,u,c,S){return tt(A(u),v,c,S)}function dt(v,u,c,S){return tt(Q(u),v,c,S)}function P(v,u,c,S){return tt(R(u,v.length-c),v,c,S)}s.prototype.write=function(u,c,S,O){if(c===void 0)O="utf8",S=this.length,c=0;else if(S===void 0&&typeof c=="string")O=c,S=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(S)?(S=S>>>0,O===void 0&&(O="utf8")):(O=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-c;if((S===void 0||S>$)&&(S=$),u.length>0&&(S<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let Y=!1;for(;;)switch(O){case"hex":return X(this,u,c,S);case"utf8":case"utf-8":return H(this,u,c,S);case"ascii":case"latin1":case"binary":return rt(this,u,c,S);case"base64":return dt(this,u,c,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,u,c,S);default:if(Y)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),Y=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(v,u,c){return u===0&&c===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(u,c))}function g(v,u,c){c=Math.min(v.length,c);const S=[];let O=u;for(;O<c;){const $=v[O];let Y=null,wt=$>239?4:$>223?3:$>191?2:1;if(O+wt<=c){let Bt,Et,At,St;switch(wt){case 1:$<128&&(Y=$);break;case 2:Bt=v[O+1],(Bt&192)===128&&(St=($&31)<<6|Bt&63,St>127&&(Y=St));break;case 3:Bt=v[O+1],Et=v[O+2],(Bt&192)===128&&(Et&192)===128&&(St=($&15)<<12|(Bt&63)<<6|Et&63,St>2047&&(St<55296||St>57343)&&(Y=St));break;case 4:Bt=v[O+1],Et=v[O+2],At=v[O+3],(Bt&192)===128&&(Et&192)===128&&(At&192)===128&&(St=($&15)<<18|(Bt&63)<<12|(Et&63)<<6|At&63,St>65535&&St<1114112&&(Y=St))}}Y===null?(Y=65533,wt=1):Y>65535&&(Y-=65536,S.push(Y>>>10&1023|55296),Y=56320|Y&1023),S.push(Y),O+=wt}return vt(S)}const q=4096;function vt(v){const u=v.length;if(u<=q)return String.fromCharCode.apply(String,v);let c="",S=0;for(;S<u;)c+=String.fromCharCode.apply(String,v.slice(S,S+=q));return c}function et(v,u,c){let S="";c=Math.min(v.length,c);for(let O=u;O<c;++O)S+=String.fromCharCode(v[O]&127);return S}function _t(v,u,c){let S="";c=Math.min(v.length,c);for(let O=u;O<c;++O)S+=String.fromCharCode(v[O]);return S}function at(v,u,c){const S=v.length;(!u||u<0)&&(u=0),(!c||c<0||c>S)&&(c=S);let O="";for(let $=u;$<c;++$)O+=ht[v[$]];return O}function gt(v,u,c){const S=v.slice(u,c);let O="";for(let $=0;$<S.length-1;$+=2)O+=String.fromCharCode(S[$]+S[$+1]*256);return O}s.prototype.slice=function(u,c){const S=this.length;u=~~u,c=c===void 0?S:~~c,u<0?(u+=S,u<0&&(u=0)):u>S&&(u=S),c<0?(c+=S,c<0&&(c=0)):c>S&&(c=S),c<u&&(c=u);const O=this.subarray(u,c);return Object.setPrototypeOf(O,s.prototype),O};function M(v,u,c){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+u>c)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(u,c,S){u=u>>>0,c=c>>>0,S||M(u,c,this.length);let O=this[u],$=1,Y=0;for(;++Y<c&&($*=256);)O+=this[u+Y]*$;return O},s.prototype.readUintBE=s.prototype.readUIntBE=function(u,c,S){u=u>>>0,c=c>>>0,S||M(u,c,this.length);let O=this[u+--c],$=1;for(;c>0&&($*=256);)O+=this[u+--c]*$;return O},s.prototype.readUint8=s.prototype.readUInt8=function(u,c){return u=u>>>0,c||M(u,1,this.length),this[u]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(u,c){return u=u>>>0,c||M(u,2,this.length),this[u]|this[u+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(u,c){return u=u>>>0,c||M(u,2,this.length),this[u]<<8|this[u+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(u,c){return u=u>>>0,c||M(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(u,c){return u=u>>>0,c||M(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},s.prototype.readBigUInt64LE=it(function(u){u=u>>>0,Rt(u,"offset");const c=this[u],S=this[u+7];(c===void 0||S===void 0)&&l(u,this.length-8);const O=c+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,$=this[++u]+this[++u]*2**8+this[++u]*2**16+S*2**24;return BigInt(O)+(BigInt($)<<BigInt(32))}),s.prototype.readBigUInt64BE=it(function(u){u=u>>>0,Rt(u,"offset");const c=this[u],S=this[u+7];(c===void 0||S===void 0)&&l(u,this.length-8);const O=c*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],$=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+S;return(BigInt(O)<<BigInt(32))+BigInt($)}),s.prototype.readIntLE=function(u,c,S){u=u>>>0,c=c>>>0,S||M(u,c,this.length);let O=this[u],$=1,Y=0;for(;++Y<c&&($*=256);)O+=this[u+Y]*$;return $*=128,O>=$&&(O-=Math.pow(2,8*c)),O},s.prototype.readIntBE=function(u,c,S){u=u>>>0,c=c>>>0,S||M(u,c,this.length);let O=c,$=1,Y=this[u+--O];for(;O>0&&($*=256);)Y+=this[u+--O]*$;return $*=128,Y>=$&&(Y-=Math.pow(2,8*c)),Y},s.prototype.readInt8=function(u,c){return u=u>>>0,c||M(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},s.prototype.readInt16LE=function(u,c){u=u>>>0,c||M(u,2,this.length);const S=this[u]|this[u+1]<<8;return S&32768?S|4294901760:S},s.prototype.readInt16BE=function(u,c){u=u>>>0,c||M(u,2,this.length);const S=this[u+1]|this[u]<<8;return S&32768?S|4294901760:S},s.prototype.readInt32LE=function(u,c){return u=u>>>0,c||M(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},s.prototype.readInt32BE=function(u,c){return u=u>>>0,c||M(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},s.prototype.readBigInt64LE=it(function(u){u=u>>>0,Rt(u,"offset");const c=this[u],S=this[u+7];(c===void 0||S===void 0)&&l(u,this.length-8);const O=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(S<<24);return(BigInt(O)<<BigInt(32))+BigInt(c+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),s.prototype.readBigInt64BE=it(function(u){u=u>>>0,Rt(u,"offset");const c=this[u],S=this[u+7];(c===void 0||S===void 0)&&l(u,this.length-8);const O=(c<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(O)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+S)}),s.prototype.readFloatLE=function(u,c){return u=u>>>0,c||M(u,4,this.length),t.read(this,u,!0,23,4)},s.prototype.readFloatBE=function(u,c){return u=u>>>0,c||M(u,4,this.length),t.read(this,u,!1,23,4)},s.prototype.readDoubleLE=function(u,c){return u=u>>>0,c||M(u,8,this.length),t.read(this,u,!0,52,8)},s.prototype.readDoubleBE=function(u,c){return u=u>>>0,c||M(u,8,this.length),t.read(this,u,!1,52,8)};function j(v,u,c,S,O,$){if(!s.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>O||u<$)throw new RangeError('"value" argument is out of bounds');if(c+S>v.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(u,c,S,O){if(u=+u,c=c>>>0,S=S>>>0,!O){const wt=Math.pow(2,8*S)-1;j(this,u,c,S,wt,0)}let $=1,Y=0;for(this[c]=u&255;++Y<S&&($*=256);)this[c+Y]=u/$&255;return c+S},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(u,c,S,O){if(u=+u,c=c>>>0,S=S>>>0,!O){const wt=Math.pow(2,8*S)-1;j(this,u,c,S,wt,0)}let $=S-1,Y=1;for(this[c+$]=u&255;--$>=0&&(Y*=256);)this[c+$]=u/Y&255;return c+S},s.prototype.writeUint8=s.prototype.writeUInt8=function(u,c,S){return u=+u,c=c>>>0,S||j(this,u,c,1,255,0),this[c]=u&255,c+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(u,c,S){return u=+u,c=c>>>0,S||j(this,u,c,2,65535,0),this[c]=u&255,this[c+1]=u>>>8,c+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(u,c,S){return u=+u,c=c>>>0,S||j(this,u,c,2,65535,0),this[c]=u>>>8,this[c+1]=u&255,c+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(u,c,S){return u=+u,c=c>>>0,S||j(this,u,c,4,4294967295,0),this[c+3]=u>>>24,this[c+2]=u>>>16,this[c+1]=u>>>8,this[c]=u&255,c+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(u,c,S){return u=+u,c=c>>>0,S||j(this,u,c,4,4294967295,0),this[c]=u>>>24,this[c+1]=u>>>16,this[c+2]=u>>>8,this[c+3]=u&255,c+4};function yt(v,u,c,S,O){Ut(u,S,O,v,c,7);let $=Number(u&BigInt(4294967295));v[c++]=$,$=$>>8,v[c++]=$,$=$>>8,v[c++]=$,$=$>>8,v[c++]=$;let Y=Number(u>>BigInt(32)&BigInt(4294967295));return v[c++]=Y,Y=Y>>8,v[c++]=Y,Y=Y>>8,v[c++]=Y,Y=Y>>8,v[c++]=Y,c}function lt(v,u,c,S,O){Ut(u,S,O,v,c,7);let $=Number(u&BigInt(4294967295));v[c+7]=$,$=$>>8,v[c+6]=$,$=$>>8,v[c+5]=$,$=$>>8,v[c+4]=$;let Y=Number(u>>BigInt(32)&BigInt(4294967295));return v[c+3]=Y,Y=Y>>8,v[c+2]=Y,Y=Y>>8,v[c+1]=Y,Y=Y>>8,v[c]=Y,c+8}s.prototype.writeBigUInt64LE=it(function(u,c=0){return yt(this,u,c,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=it(function(u,c=0){return lt(this,u,c,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(u,c,S,O){if(u=+u,c=c>>>0,!O){const Bt=Math.pow(2,8*S-1);j(this,u,c,S,Bt-1,-Bt)}let $=0,Y=1,wt=0;for(this[c]=u&255;++$<S&&(Y*=256);)u<0&&wt===0&&this[c+$-1]!==0&&(wt=1),this[c+$]=(u/Y>>0)-wt&255;return c+S},s.prototype.writeIntBE=function(u,c,S,O){if(u=+u,c=c>>>0,!O){const Bt=Math.pow(2,8*S-1);j(this,u,c,S,Bt-1,-Bt)}let $=S-1,Y=1,wt=0;for(this[c+$]=u&255;--$>=0&&(Y*=256);)u<0&&wt===0&&this[c+$+1]!==0&&(wt=1),this[c+$]=(u/Y>>0)-wt&255;return c+S},s.prototype.writeInt8=function(u,c,S){return u=+u,c=c>>>0,S||j(this,u,c,1,127,-128),u<0&&(u=255+u+1),this[c]=u&255,c+1},s.prototype.writeInt16LE=function(u,c,S){return u=+u,c=c>>>0,S||j(this,u,c,2,32767,-32768),this[c]=u&255,this[c+1]=u>>>8,c+2},s.prototype.writeInt16BE=function(u,c,S){return u=+u,c=c>>>0,S||j(this,u,c,2,32767,-32768),this[c]=u>>>8,this[c+1]=u&255,c+2},s.prototype.writeInt32LE=function(u,c,S){return u=+u,c=c>>>0,S||j(this,u,c,4,2147483647,-2147483648),this[c]=u&255,this[c+1]=u>>>8,this[c+2]=u>>>16,this[c+3]=u>>>24,c+4},s.prototype.writeInt32BE=function(u,c,S){return u=+u,c=c>>>0,S||j(this,u,c,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[c]=u>>>24,this[c+1]=u>>>16,this[c+2]=u>>>8,this[c+3]=u&255,c+4},s.prototype.writeBigInt64LE=it(function(u,c=0){return yt(this,u,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=it(function(u,c=0){return lt(this,u,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ft(v,u,c,S,O,$){if(c+S>v.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function Pt(v,u,c,S,O){return u=+u,c=c>>>0,O||ft(v,u,c,4),t.write(v,u,c,S,23,4),c+4}s.prototype.writeFloatLE=function(u,c,S){return Pt(this,u,c,!0,S)},s.prototype.writeFloatBE=function(u,c,S){return Pt(this,u,c,!1,S)};function Ft(v,u,c,S,O){return u=+u,c=c>>>0,O||ft(v,u,c,8),t.write(v,u,c,S,52,8),c+8}s.prototype.writeDoubleLE=function(u,c,S){return Ft(this,u,c,!0,S)},s.prototype.writeDoubleBE=function(u,c,S){return Ft(this,u,c,!1,S)},s.prototype.copy=function(u,c,S,O){if(!s.isBuffer(u))throw new TypeError("argument should be a Buffer");if(S||(S=0),!O&&O!==0&&(O=this.length),c>=u.length&&(c=u.length),c||(c=0),O>0&&O<S&&(O=S),O===S||u.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),u.length-c<O-S&&(O=u.length-c+S);const $=O-S;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,S,O):Uint8Array.prototype.set.call(u,this.subarray(S,O),c),$},s.prototype.fill=function(u,c,S,O){if(typeof u=="string"){if(typeof c=="string"?(O=c,c=0,S=this.length):typeof S=="string"&&(O=S,S=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!s.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(u.length===1){const Y=u.charCodeAt(0);(O==="utf8"&&Y<128||O==="latin1")&&(u=Y)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(c<0||this.length<c||this.length<S)throw new RangeError("Out of range index");if(S<=c)return this;c=c>>>0,S=S===void 0?this.length:S>>>0,u||(u=0);let $;if(typeof u=="number")for($=c;$<S;++$)this[$]=u;else{const Y=s.isBuffer(u)?u:s.from(u,O),wt=Y.length;if(wt===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for($=0;$<S-c;++$)this[$+c]=Y[$%wt]}return this};const bt={};function xt(v,u,c){bt[v]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(v,"]"),this.stack,delete this.name}get code(){return v}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return"".concat(this.name," [").concat(v,"]: ").concat(this.message)}}}xt("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?"".concat(v," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),xt("ERR_INVALID_ARG_TYPE",function(v,u){return'The "'.concat(v,'" argument must be of type number. Received type ').concat(typeof u)},TypeError),xt("ERR_OUT_OF_RANGE",function(v,u,c){let S='The value of "'.concat(v,'" is out of range.'),O=c;return Number.isInteger(c)&&Math.abs(c)>2**32?O=Ot(String(c)):typeof c=="bigint"&&(O=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(O=Ot(O)),O+="n"),S+=" It must be ".concat(u,". Received ").concat(O),S},RangeError);function Ot(v){let u="",c=v.length;const S=v[0]==="-"?1:0;for(;c>=S+4;c-=3)u="_".concat(v.slice(c-3,c)).concat(u);return"".concat(v.slice(0,c)).concat(u)}function zt(v,u,c){Rt(u,"offset"),(v[u]===void 0||v[u+c]===void 0)&&l(u,v.length-(c+1))}function Ut(v,u,c,S,O,$){if(v>c||v<u){const Y=typeof u=="bigint"?"n":"";let wt;throw u===0||u===BigInt(0)?wt=">= 0".concat(Y," and < 2").concat(Y," ** ").concat(($+1)*8).concat(Y):wt=">= -(2".concat(Y," ** ").concat(($+1)*8-1).concat(Y,") and < 2 ** ")+"".concat(($+1)*8-1).concat(Y),new bt.ERR_OUT_OF_RANGE("value",wt,v)}zt(S,O,$)}function Rt(v,u){if(typeof v!="number")throw new bt.ERR_INVALID_ARG_TYPE(u,"number",v)}function l(v,u,c){throw Math.floor(v)!==v?(Rt(v,c),new bt.ERR_OUT_OF_RANGE("offset","an integer",v)):u<0?new bt.ERR_BUFFER_OUT_OF_BOUNDS:new bt.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(u),v)}const G=/[^+/0-9A-Za-z-_]/g;function K(v){if(v=v.split("=")[0],v=v.trim().replace(G,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function I(v,u){u=u||1/0;let c;const S=v.length;let O=null;const $=[];for(let Y=0;Y<S;++Y){if(c=v.charCodeAt(Y),c>55295&&c<57344){if(!O){if(c>56319){(u-=3)>-1&&$.push(239,191,189);continue}else if(Y+1===S){(u-=3)>-1&&$.push(239,191,189);continue}O=c;continue}if(c<56320){(u-=3)>-1&&$.push(239,191,189),O=c;continue}c=(O-55296<<10|c-56320)+65536}else O&&(u-=3)>-1&&$.push(239,191,189);if(O=null,c<128){if((u-=1)<0)break;$.push(c)}else if(c<2048){if((u-=2)<0)break;$.push(c>>6|192,c&63|128)}else if(c<65536){if((u-=3)<0)break;$.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((u-=4)<0)break;$.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return $}function A(v){const u=[];for(let c=0;c<v.length;++c)u.push(v.charCodeAt(c)&255);return u}function R(v,u){let c,S,O;const $=[];for(let Y=0;Y<v.length&&!((u-=2)<0);++Y)c=v.charCodeAt(Y),S=c>>8,O=c%256,$.push(O),$.push(S);return $}function Q(v){return e.toByteArray(K(v))}function tt(v,u,c,S){let O;for(O=0;O<S&&!(O+c>=u.length||O>=v.length);++O)u[O+c]=v[O];return O}function N(v,u){return v instanceof u||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===u.name}function st(v){return v!==v}const ht=function(){const v="0123456789abcdef",u=new Array(256);for(let c=0;c<16;++c){const S=c*16;for(let O=0;O<16;++O)u[S+O]=v[c]+v[O]}return u}();function it(v){return typeof BigInt>"u"?mt:v}function mt(){throw new Error("BigInt not supported")}})(fr);class Re extends Pn.EventEmitter{constructor({watch:e,options:t,callback:r,path:n}){super(),e&&(this.options=Object.assign({persistent:!0,recursive:!1,encoding:"utf8"},t),this.watch=e,this.callback=r,this.path=n)}static empty(){return new Re({})}close(){const e=this.watch.watchers.indexOf(this);e>-1&&this.watch.watchers.splice(e,1),this.removeAllListeners()}checkChange(e,t){const{recursive:r,encoding:n}=this.options;if(!(r?e.startsWith(this.path):e===this.path))return;const o=e.replace(this.path,""),s=n==="buffer"?fr.Buffer.from(o):fr.Buffer.from(o,n).toString();this.emit("change",t,s),this.callback(t,s)}}class ta{constructor(e){this.disk=e,this.events=new Pn.EventEmitter,this.watchers=[],this.fileWatchers={}}fireRename(e,t=!1,r=!0){r&&this.events.emit("watch",{type:t?te.Remove:te.Create,path:e}),this.watchers.forEach(n=>{n.checkChange(e,"rename")})}async fireChange(e,t=!0){t&&this.events.emit("watch",{type:te.Change,path:e});const r=this.fileWatchers[e];let n=null;if(r&&r.length>0){const a=await this.disk.stat(e);n=()=>{r.forEach(async o=>o(await this.disk.stat(e),a))}}return this.watchers.forEach(a=>{a.checkChange(e,"change")}),n}fireChangeSync(e,t=!0){t&&this.events.emit("watch",{type:te.Change,path:e});const r=this.fileWatchers[e];let n=null;if(r&&r.length>0){const a=this.disk._sync.stat(e);n=()=>{r.forEach(o=>o(this.disk._sync.stat(e),a))}}return this.watchers.forEach(a=>{a.checkChange(e,"change")}),n}watch(e,t,r){if(e=this.disk.fmtPath(e),typeof t=="function"?(r=t,t={}):typeof t=="string"&&(t={encoding:t}),t.persistent===!1&&this.watchers.find(a=>a.path===e))return Re.empty();const n=new Re({watch:this,options:t,callback:r,path:e});return this.watchers.push(n),n}watchFile(e,t,r){e=this.disk.fmtPath(e),typeof t=="function"&&(r=t,t={});const{persistent:n=!0}=t;n&&this.fileWatchers[e]||(this.fileWatchers[e]||(this.fileWatchers[e]=[]),this.fileWatchers[e].push(r))}unwatchFile(e,t){e=this.disk.fmtPath(e);const r=this.fileWatchers[e];if(r)if(!t)delete this.fileWatchers[e];else{const n=r.indexOf(t);n>-1&&r.splice(n,1),r.length===0&&delete this.fileWatchers[e]}}}class ea{constructor(){this.fileMap={}}async init(e){const t=[];await e.traverseContent((r,n)=>{t.push((async()=>{const a=await n;this.fileMap[r]=a||gn().data})())}),await Promise.all(t)}read(e){const t=this.fileMap[e],r=$t(t);return r==="empty"||r==="dir"?null:t}pureRead(e){return this.fileMap[e]}write(e,t){return this.fileMap[e]=t,!0}append(e,t){if(e in this.fileMap)return!1;const r=this.read(e);if(!r)throw new Error("file not found");return this.write(e,je(r,t))}remove(e,t){const r=this.getType(e);return r==="empty"||!(e in this.fileMap)?!1:(this._removeSingle(e,t),r==="file"||this.traverse(e,({path:n})=>{this._removeSingle(n,t)}),!0)}_removeSingle(e,t){delete this.fileMap[e],t==null||t(e)}stat(e,t){const r=this.fileMap[e],n=$t(r);if(n==="empty")return{size:0,type:n};if(n==="file"||n==="link")return{size:r.byteLength,type:n};if(!t)return{size:0,type:n};let a=0;return this.traverse(e,({path:o})=>{const s=this.fileMap[o];$t(s)==="file"&&(a+=s.byteLength)}),{size:a,type:n}}exist(e){return e in this.fileMap}ls(e){const t=[];return this.traverse(e,({parent:r,name:n})=>{r===e&&t.push(n)}),t}createFile(e,t=new Uint8Array([]),r=!1){return!r&&this.exist(e)?!1:(this.write(e,t),!0)}createDir(e,t){if(this.exist(e)){if(!t)return!1;this.traverse(e,({path:r})=>{this.remove(r)})}return this.write(e,we("dir")),!0}getType(e){const t=this.fileMap[e];return $t(t)}traverse(e,t,r=!1){const n=Object.keys(this.fileMap),a=Nt(e,!r);for(const o of n)o.startsWith(a)&&t(ee(o))}traverseContent(e,t=""){this.traverse(t,({path:r})=>{e(r,this.read(r))})}}var ra=Object.defineProperty,na=Object.getOwnPropertyDescriptor,Ae=(i,e,t,r)=>{for(var n=na(e,t),a=i.length-1,o;a>=0;a--)(o=i[a])&&(n=o(e,t,n)||n);return n&&ra(e,t,n),n};class fe{constructor(e){this.syncMiddleware=new ea,this.disk=e}async init(){await this.syncMiddleware.init(this.backend)}fmtPath(e){return this.disk.fmtPath(e)}get _link(){return this.disk._link}get _watch(){return this.disk._watch}get backend(){return this.disk.backend}size(e="/"){return this.syncMiddleware.stat(this.fmtPath(e)).size}cd(e){return e=this.fmtPath(e),this.isDir(e)?(this.disk.current=e,!0):!1}isDir(e){return e=this.fmtPath(e),e==="/"||this.getType(e)==="dir"}getType(e){return this.syncMiddleware.getType(this.fmtPath(e))}pwd(){return this.disk.current}copy(e){return this.disk.copy(e),!0}cut(e){return this.disk.cut(e),!0}move(e,t,r){const n=this.fmtPath(t),a=this.fmtPath(e),o=Vt(n);return this.pasteBase(o,{paths:[a],active:!0,isCut:!0},{[a]:n},s=>{r==null||r(s[a])})}rename(e,t,r){e=this.fmtPath(e);const n=Vt(e),a=ue.join(n,t);return this.pasteBase(n,{paths:[e],active:!0,isCut:!0},{[e]:a},o=>{r==null||r(o[e])})}paste(e,t={},r){const n=this.pasteBase(e,this.disk.clipboard,t,r);return!n&&this.disk.clipboard.isCut&&(this.disk.clipboard={paths:[],active:!1,isCut:!1}),n}pasteBase(e,t,r={},n){if(!t.active)return"No Copy Files";const o=this.ls(e)||[],{isCut:s,paths:f}=t,y=De(f,this.fmtPath(e),o,r);n==null||n(y);const p=[];for(const d in y){const m=d,h=y[m];this.copySingle(m,h)?s&&this.remove(m):p.push(m)}return p.length>0?"Copy Failed: ".concat(p.join(", ")):""}ls(e=""){return e=this.fmtPath(e),this.isDir(e)?this.syncMiddleware.ls(e):null}remove(e){return e=this.fmtPath(e),this.backend.remove(e),this.syncMiddleware.remove(e,t=>{this._watch.fireRename(t,!0)})}clear(){const e=this.ls("/");!e||e.length===0||(e.forEach(t=>{this.remove(ue.join("/",t))}),this.cd("/"))}copySingle(e,t){const r=this.read(e);let n="empty";if(r?n=$t(r):n=this.isDir(e)?"dir":"empty",n==="empty")return!1;if(n==="file"||n==="link")return this.createFile(t,r,{ensure:!0});const a=[];let o=!0;const s=(f,y,p)=>{const d={ensure:!0};let m=()=>Promise.resolve(!0);const h=this._create(f,p||void 0,d,y==="dir",x=>{m=x});if(this.createFile(f,p||void 0,d),!h)throw o=!1,new Error("create fail: ".concat(f));return a.push(m),h};return s(t,"dir"),this.syncMiddleware.traverseContent((f,y)=>{const p=f.replace(e,t);s(p,y?"file":"dir",y)},e),mn(a),o}traverseContent(e,t){return this.syncMiddleware.traverseContent((r,n)=>{t(r,n,Ts(r))},e)}traverse(e,t){return this.syncMiddleware.traverse(e,t)}read(e){return this.syncMiddleware.read(e)}readText(e){const t=this.syncMiddleware.read(e);return t?vr(t):""}write(e,t){e=this.fmtPath(e);const r=this.syncMiddleware.pureRead(e);if(_e(t,r))return!0;if(!this.exist(e))return this.createFile(e,t);const n=this._watch.fireChangeSync(e);return this.syncMiddleware.write(e,t)?(this.backend.write(e,t),n==null||n(),!0):!1}append(e,t){if(e=this.fmtPath(e),!this.exist(e))return this.createFile(e,t);const r=this._watch.fireChangeSync(e);return this.syncMiddleware.append(e,t)?(this.backend.append(e,t),r==null||r(),!0):!1}exist(e){return e=this.fmtPath(e),e==="/"?!0:this.syncMiddleware.exist(e)}stat(e,t=!0){return this.disk._transStat(this.syncMiddleware.stat(this.fmtPath(e),t))}createFile(e,t,r={}){return this._create(e,t,r)}createDir(e,t={}){return this._create(e,void 0,t,!0)}createLink(e,t,r={}){return this.createFile(e,we("link",t),r)}_create(e,t,{overwrite:r,ensure:n}={},a=!1,o){e=this.fmtPath(e);const s=Vt(e);if(!n&&!this.exist(s))return!1;const f=n?this.ensureParentPath(e):null;if(!(a?this.syncMiddleware.createDir(e,r):this.syncMiddleware.createFile(e,t,r)))return!1;this._watch.fireRename(e);const p=async()=>(n&&await f,a?this.backend.createDir(e,r):this.backend.createFile(e,t,r));return o?o(p):p(),!0}ensureParentPath(e){return this._ensureParentPath(e),this.disk._ensureParentPath(e)}_ensureParentPath(e){e=Vt(e),!this.exist(e)&&(this._ensureParentPath(e),this._create(e,void 0,{},!0,()=>{}))}}Ae([Ce],fe.prototype,"ls");Ae([Ce],fe.prototype,"read");Ae([Ce],fe.prototype,"readText");Ae([Ce],fe.prototype,"write");Ae([Ce],fe.prototype,"append");const Zr=500,Pe=(()=>{const i="webos_fs_update_info",e=Yt.createInstance({name:"sync-manager",driver:Yt.INDEXEDDB}),t=Math.random().toString(16).substring(2),r=n=>e.setItem(i,n);return{id:t,async writeData(n){await r(n)},async writeChanges(n){const a=await this.read(),o={time:Date.now(),id:t,changes:n};if(a.length===0)a.push(o);else{const s=a.findIndex(f=>f.time>o.time);s===-1?a.push(o):a.splice(s,0,o)}await r(a)},async read(){const n=await e.getItem(i);return Array.isArray(n)?n:[]}}})();class ia{constructor(e){this.tempChange={},this.lastOprateId="",this.disk=e}init(){this.timer=setInterval(async()=>{await this.checkUpdate(),await this.checkWriteChange()},Zr);const e=({path:t,type:r})=>{this.tempChange[t]=r};this.disk._watch.events.on("watch",e),this.offWatch=()=>{this.disk._watch.events.off("watch",e)}}get sync(){var e;return(e=this.disk._sync)==null?void 0:e.syncMiddleware}async checkUpdate(){const e=await Pe.read();if(e.length===0)return;const t=[],r=Date.now(),n=o=>r-o>Zr*2,a={};for(let o=0;o<e.length;o++){const s=e[o];if(n(s.time)){t.push(o);continue}s.id!==Pe.id&&Object.assign(a,s.changes)}if(t.length){for(let o=t.length-1;o>=0;o--)e.splice(t[o],1);await Pe.writeData(e)}this.useChanges(a)}async writeFile(e){if(!this.disk.enableSync)return!0;const t=await this.disk.read(e);if(t){const r=this.sync.pureRead(e);return _e(t,r)?!1:(this.sync.write(e,t),!0)}return!1}async useChanges(e){var r;if(Object.keys(e).length===0)return;const t=Object.keys(e).sort((n,a)=>n.length-a.length);for(const n of t)switch(e[n]){case te.Change:await this.disk.exist(n)&&await this.writeFile(n)&&this.disk._watch.fireChangeSync(n,!1);break;case te.Remove:await this.disk.exist(n)&&((r=this.sync)==null||r.remove(n),this.disk._watch.fireRename(n,!0,!1));break;case te.Create:await this.disk.exist(n)||(await this.writeFile(n),this.disk._watch.fireRename(n,!1,!1));break}}async checkWriteChange(){Object.keys(this.tempChange).length!==0&&(await Pe.writeChanges(this.tempChange),this.tempChange={})}clear(){clearInterval(this.timer),this.offWatch()}}var sa=Object.defineProperty,aa=Object.getOwnPropertyDescriptor,ne=(i,e,t,r)=>{for(var n=aa(e,t),a=i.length-1,o;a>=0;a--)(o=i[a])&&(n=o(e,t,n)||n);return n&&sa(e,t,n),n};const Xt=class qt{constructor({enableSync:e=!1}={}){var t;if(this.current="/",this.clipboard={paths:[],isCut:!1,active:!1},qt.instance)return qt.instance._initSyncAlone(e),qt.instance;qt.instance=this,this.enableSync=e,jr.Supported()?this.backend=new jr:this.backend=new Rs,this.enableSync&&(this._sync=new fe(this)),this._link=new Ls(this.backend,(t=this._sync)==null?void 0:t.syncMiddleware),this._zip=new Ns(this),this._watch=new ta(this),this._update=new ia(this),this._update.init(),this.ready=this.init()}get sync(){return this._sync}initSync(){return this._initSyncAlone(!0)}static initSync(){return qt.instance?qt.instance.initSync():new qt({enableSync:!0}).ready}async _initSyncAlone(e){e&&!this.enableSync&&(this.enableSync=e,this._sync=new fe(this),this.ready=this._sync.init(),await this.ready)}async init(){var e;await this.backend.init(),await((e=this._sync)==null?void 0:e.init())}fmtPath(e){return e=e.trim(),e[0]==="/"?Nt(e):ue.join(this.current,Nt(e))}async size(e="/"){return(await this.backend.stat(this.fmtPath(e))).size}async cd(e){return e=this.fmtPath(e),await this.isDir(e)?(this.current=e,!0):!1}async isDir(e){return e=this.fmtPath(e),e==="/"||await this.getType(e)==="dir"}async getType(e){return e=this.fmtPath(e),this.backend.getType(e)}pwd(){return this.current}async copy(e){return this._addToClipboard(e)}async cut(e){return this._addToClipboard(e,!0)}_addToClipboard(e,t=!1){return typeof e=="string"&&(e=[e]),this.clipboard={paths:e.map(r=>this.fmtPath(r)),active:!0,isCut:t},!0}move(e,t,r){const n=this.fmtPath(t),a=this.fmtPath(e),o=Vt(n);return this.pasteBase(o,{paths:[a],active:!0,isCut:!0},{[a]:n},s=>{r==null||r(s[a])})}rename(e,t,r){e=this.fmtPath(e);const n=Vt(e),a=ue.join(n,t);return this.pasteBase(n,{paths:[e],active:!0,isCut:!0},{[e]:a},o=>{r==null||r(o[e])})}async paste(e,t={},r){const n=await this.pasteBase(e,this.clipboard,t,r);return!n&&this.clipboard.isCut&&(this.clipboard={paths:[],active:!1,isCut:!1}),n}async pasteBase(e,t,r={},n){if(!t.active)return"No Copy Files";const o=await this.ls(e)||[],{isCut:s,paths:f}=t,y=De(f,this.fmtPath(e),o,r);n==null||n(y);const p=[],d=[];for(const m in y)d.push((async()=>{const h=m,x=y[h];await this.copySingle(h,x)?s&&await this.remove(h):p.push(h)})());return await Promise.all(d),p.length>0?"Copy Failed: ".concat(p.join(", ")):""}async copySingle(e,t){const r=await this.read(e);let n="empty";if(r?n=$t(r):n=await this.isDir(e)?"dir":"empty",n==="empty")return!1;if(n==="file"||n==="link")return await this.createFile(t,r,{ensure:!0});let a=!0;const o=[()=>this.createDir(t)];return await this.backend.traverseContent((s,f)=>{o.push(async()=>{const y=await f,p=s.replace(e,t);y?await this.createFile(p,y)||(a=!1):await this.createDir(p)||(a=!1)})},e),await mn(o),a}traverseContent(e,t){return this.backend.traverseContent(t,e)}traverse(e,t){return this.backend.traverseContent((r,n,a)=>{t({path:r,parent:Vt(r),name:a})},e,!1)}async readText(e){const t=await this.backend.read(e);return t?vr(t):""}async read(e){return this.backend.read(e)}async write(e,t){var o;e=this.fmtPath(e);const r=this.enableSync?this._sync.syncMiddleware.pureRead(e):await this.backend.read(e);if(_e(t,r))return!0;if(!await this.exist(e))return this.createFile(e,t);const n=await this._watch.fireChange(e);return await this.backend.write(e,t)?((o=this._sync)==null||o.syncMiddleware.write(e,t),n==null||n(),!0):!1}async append(e,t){var a;if(e=this.fmtPath(e),!await this.exist(e))return this.createFile(e,t);const r=await this._watch.fireChange(e);return await this.backend.append(e,t)?((a=this._sync)==null||a.syncMiddleware.append(e,t),r==null||r(),!0):!1}async remove(e){e=this.fmtPath(e);const t=await this.backend.remove(e);return t&&(this.enableSync?this._sync.syncMiddleware.remove(e,r=>{this._watch.fireRename(r,!0)}):this._watch.fireRename(e,!0),!0)}async stat(e,t=!0){return this._transStat(await this.backend.stat(this.fmtPath(e),t))}_transStat({size:e,type:t}){return{size:e,type:t,isDirectory:()=>t==="dir",isFile:()=>t==="file"}}exist(e){return e=this.fmtPath(e),e==="/"?Promise.resolve(!0):this.backend.exist(e)}async ls(e=""){return e=this.fmtPath(e),this.isDir(e)?await this.backend.ls(e):null}async createFile(e,t,r={}){return this._create(e,t,r,!1)}async createDir(e,t={}){return this._create(e,void 0,t,!0)}async _create(e,t,{overwrite:r,ensure:n}={},a=!1){e=this.fmtPath(e);const o=Vt(e);if(!n&&!await this.exist(o))return!1;n&&await this.ensureParentPath(e);const s=await(a?this.backend.createDir(e,r):this.backend.createFile(e,t,r));return s?(this._watch.fireRename(e),this.enableSync&&(a?this._sync.syncMiddleware.createDir(e,r):this._sync.syncMiddleware.createFile(e,t,r)),s):!1}createLink(e,t,r={}){return this.createFile(e,we("link",t),r)}zip(...e){return this._zip.zip(...e)}unzip(...e){return this._zip.unzip(...e)}isZip(...e){return this._zip.isZip(...e)}watch(...e){return this._watch.watch(...e)}watchFile(...e){return this._watch.watchFile(...e)}unwatchFile(...e){return this._watch.unwatchFile(...e)}async clear(){const e=await this.ls("/");!e||e.length===0||(await Promise.all(e.map(t=>this.remove(ue.join("/",t)))),await this.cd("/"))}async ensureParentPath(e){var t;return(t=this._sync)==null||t._ensureParentPath(e),this._ensureParentPath(e)}async _ensureParentPath(e){e=Vt(e),!await this.exist(e)&&(await this.ensureParentPath(e),await this._create(e,void 0,{},!0))}createFileContent(e,t="file"){return we(t,e)}};ne([re],Xt.prototype,"readText");ne([re],Xt.prototype,"read");ne([re],Xt.prototype,"write");ne([re],Xt.prototype,"append");ne([re],Xt.prototype,"ls");ne([re],Xt.prototype,"watch");ne([re],Xt.prototype,"watchFile");ne([re],Xt.prototype,"unwatchFile");let On=Xt;class me{constructor(e=!1){if(me.instance)return me.instance.disk._initSyncAlone(e),me.instance;me.instance=this,this.disk=new On({enableSync:e}),this.ready=this.disk.ready}ls(e){return this.disk.ls(e)}cd(e){return this.disk.cd(e)}pwd(){return this.disk.pwd()}touch(e){return this.disk.createFile(e)}mkdir(e){return this.disk.createDir(e)}rmdir(e){return this.disk.remove(e)}cp(e,t){return this.disk.copySingle(e,t)}mv(e,t){return this.disk.move(e,t)}rm(e){return this.disk.remove(e)}cat(e){return this.disk.readText(e)}more(e){return this.disk.readText(e)}less(e){return this.disk.readText(e)}async head(e,t){const r=await this.disk.readText(e);return r?r.split("\n").slice(0,t).join("\n"):""}async tail(e,t){const r=await this.disk.readText(e);return r?r.split("\n").slice(-t).join("\n"):""}async grep(e,t){const r=await this.disk.readText(e);if(!r)return[""];typeof t=="string"&&(t=new RegExp(t,"g"));const n=r.match(t),a=[];if(!n)return a;for(const o of a)a.push(o[0]);return a}async find(e,{name:t,type:r}={}){const n=typeof t=="string"?new RegExp(t):t,a=[];return this.disk._sync?this.disk._sync.syncMiddleware.traverse(e,({path:o,name:s})=>{let f=!0;n&&!n.test(s)&&(f=!1),f&&r&&this.disk._sync.syncMiddleware.getType(o)!==r&&(f=!1),f&&a.push(o)}):await this.disk.backend.traverseContent(async(o,s,f)=>{let y=!0;n&&!n.test(f)&&(y=!1),y&&r&&$t(await s)!==r&&(y=!1),y&&a.push(o)},e),a}zip(e,t){return this.disk.zip(e,t)}unzip(e,t){return this.disk.unzip(e,t)}tar(e,t){return this.disk.zip(e,t)}async du(e){return(await this.disk.stat(e)).size}}const Fn={name:"open-url",helpInfo:"Open Url in Browser",run(i){const e=i.args[0];let t="fail.";return globalThis!=null&&globalThis.open&&(globalThis.open(e),t="success!"),'Open "'.concat(e||"",'" ').concat(t)}},oa=[Fn];function Yr(i){return oa.find(e=>e.name===i)||null}const lr="/WebOS/System/Commands";function hr(i){return"".concat(lr,"/").concat(i)}const dr=100;class ua extends Es{constructor(){super(...arguments),this.name="install",this.helpDetails=this._viewDetails}async run(e){const t=e.options.rm;if(t)return this.removeCommand(t);if(!this.provider.registerCommand)return"CommandProvider not support Install";let r,n="";const{name:a,local:o,url:s}=this.parseUrl(e);if(s){const f=await this._installFromUrl(s);if(!f.command)return"Install fail ".concat(s,": ").concat(f.info);r=f.command,n=f.text}else if(a){const f=Yr(a);if(!f)return"Not a Built-in Command: ".concat(a);r=f,n=a;const{success:y,info:p}=this.provider.registerCommand(r);if(!y)return"Install fail: ".concat(p)}else if(o){const f=await this.disk.readText(o);if(!f)return"Install from local fail: ".concat(o);const y=await this._installFromText(f);if(!y.command)return"Install from local fail: ".concat(y.info);r=y.command}else return"Install fail: parse command fail";if(!o){const[,f]=await oe(this.saveCommand(r,n));if(f)return f}return"Install ".concat(r.name," success!")}async saveCommand(e,t){const r=hr(e.name);if(!await this.disk.createFile(r,this.disk.createFileContent(t),{ensure:!0,overwrite:!0}))throw"Save command fail: ".concat(r)}parseUrl(e){const{args:t,options:r}=e,n=t[0];let a="",o="",s="";return r.ol?a=r.ol:r.gh?a=Ss(r.gh):r.npm?a=Nr(r.npm):r.of?a=Nr("webos-commands/dist/".concat(r.of,".js")):r.l?o=r.l:s=n,{url:a,local:o,name:s}}async removeCommand(e){if(typeof e!="string"||e==="")return"Remove fail: name is not valid (".concat(e,")");if(!this.provider.removeCommand)return"CommandProvider not support Install -rm";const{success:t,info:r}=this.provider.removeCommand(e);return t?(await this.disk.remove(hr(e)),"Remove command ".concat(e," success!")):r}async _installFromUrl(e){const t=await ks(e),{success:r,info:n,command:a}=await this._installFromText(t);return{success:r,info:n,text:t,command:a||null}}_installFromText(e){if(!this.provider.registerCommand)return Promise.resolve({success:!1,info:"RegisterCommand not Exists"});if(e.length<=dr){const n=Yr(e);if(n){const a=this.provider.registerCommand(n);return a.success&&Object.assign(a,{command:n}),Promise.resolve(a)}}const{ready:t,resolve:r}=pn();return xs(e,{registerCommand:n=>{const a=this.provider.registerCommand(n);a.success&&Object.assign(a,{command:n}),r(a)}}),setTimeout(()=>{r({success:!1,info:"Install timeout"})},2e3),t}_viewDetails(){return["install command_name : Install Built-in command","install -ol url : Install from url","install -gh user/repo[/filepath] : Install from github","install -npm pkg_name[/filepath] : Install from npm","install -l filepath : Install from local file","install -rm command_name: Remove command"].join("\r\n")}}const Jt={clear:"Clear the terminal.",ls:"View all the files under the folder.",mkdir:"Create a new directory.",cd:"Change the current working directory and switch the displayed PWD in the terminal.",pwd:"Display the current working directory.",rm:"Remove a file.",rmdir:"Remove a directory.",cat:"Display the content of a file.",touch:"Create a new empty file or update the access and modification times of an existing file.",echo:"Output the joined content of the provided arguments.",vi:"Edit file",mv:"Move or rename a file or directory from one location to another.",cp:"Copy a file or directory from one location to another.",more:"Display the content of a file in a paginated way (with limited functionality compared to less).",less:"Display the content of a file in a paginated way with more functionality like scrolling back and forth.",head:"Display the first few lines of a file (the number of lines is specified by an argument).",tail:"Display the last few lines of a file (the number of lines is specified by an argument).",grep:"Search for a specific pattern in files and return the matching lines.",find:"Search for files or directories based on certain conditions and return the results.",zip:"Compress files and directories into a zip file.(-t for compress file name)",unzip:"Extract the contents of a zip file.(unzip zip_file target_dir)",tar:"Compress files and directories into a zip file.",du:"Display the disk usage of a file or directory.",help:"Show commands information."};function ca(){const i=[],e=Object.keys(Jt);let t=0;for(const r of e)r.length>t&&(t=r.length);for(const r in Jt)i.push("".concat(r.padEnd(t," ")," : ").concat(Jt[r]));return i.join("\r\n")}const Kr="Target is not a directory.",Vr="Target is already exists.";class fa{constructor(e,t){this.methods=t,this.thirdCommands={},this.cmd=new me(e),this.installCommand=new ua,this.registerCommand(this.installCommand),this._loadCommands()}getPwd(){return this.cmd.pwd()}get disk(){return this.cmd.disk}async onCommand(e){const t=typeof e=="string"?gs(e):e;if(t.length===0)return this.methods.getHeader();let r="";for(const n of t){let a;try{a=await this.runSingleCommand(n,r,t)}catch(o){console.error(o),a=o.toString()}if(!a&&typeof a!="string")return!1;r=typeof a=="boolean"?"":a}return r}async runSingleCommand(e,t,r){var x;const{clearTerminal:n,setPwd:a,openEditor:o}=this.methods,{name:s,args:f,options:y}=e;let p="";const[d,m]=f,{cmd:h}=this;switch(s){case"vi":if(!d)return"Target is empty";if(!await this.disk.exist(d))return"Target file not exists: ".concat(d);if(await this.disk.isDir(d))return"Target is Not File: ".concat(d);const w=await h.cat(d);return w===null?"Open file fail: ".concat(d):(o({path:this.disk.fmtPath(d),content:w,save:L=>{this.disk.write(d,Fe(L))}}),!1);case"clear":return n(),!1;case"ls":const k=(x=await h.ls(d))==null?void 0:x.join(" ");p=typeof k!="string"?Kr:k||" ";break;case"mkdir":await h.mkdir(d);break;case"cd":await h.cd(d)?a(h.pwd()):p=Kr;break;case"pwd":p=h.pwd();break;case"rm":await h.rm(d);break;case"rmdir":await h.rmdir(d)||(p=Vr);break;case"cat":p=await h.cat(d)||"";break;case"touch":await h.touch(d)||(p=Vr);break;case"echo":p=this.handleEchoCmd(f);break;case"mv":await h.mv(d,m);break;case"cp":await h.cp(d,m);break;case"more":p=await h.more(d)||"";break;case"less":p=await h.less(d)||"";break;case"head":p=await h.head(d,parseInt(m))||"";break;case"tail":p=await h.tail(d,parseInt(m))||"";break;case"grep":p=(await h.grep(d,m)).join("\r\n");break;case"find":p=(await h.find(d,y)).join("\r\n");break;case"zip":case"tar":const{success:b,info:E}=await h.zip(f,y.t);p=b?"Zip to ".concat(E):E;break;case"unzip":await h.unzip(d,m);break;case"du":p="size = ".concat(await h.du(d));break;case"help":p=ca();break;default:const T=this.thirdCommands[s];T?T.helpDetails&&e.options.d?p=tr(T.helpDetails):T.version&&(e.options.v||e.options.version)?p=tr(T.version):p=await _s(T.run(e,{commands:r,disk:this.disk,data:t,term:T.term,run:L=>this.onCommand(L)})):p="".concat(s,": Command not found");break}return p}handleEchoCmd(e){let t=e.indexOf(">"),r=!1;if(t===-1&&(t=e.indexOf(">>"),t!==-1&&(r=!0)),t===-1)return e.join(" ");const n=e[t+1];return n?(this.disk[r?"appendSync":"writeSync"](n,Fe(e.slice(0,t).join(" "))),""):e.join(" ")}async onTab(e,t){const r=!t.includes(" ");let n="",a="",o=[];if(r)n=e,o=Object.keys(Jt);else{const p=ee(e);n=p.name,a=p.parent,o=await this.cmd.ls(a)||[]}const s=o.filter(p=>p.startsWith(n));let f=ps(s,n.length),y="";if(n===f&&s.length>1)y=s.join(" ");else if(r)s.length===1&&(f+=" ");else{const p="".concat(a).concat(a?"/":"").concat(f);f&&await this.cmd.disk.isDir(p)&&(f+="/")}return{line:y,result:f.replace(n,"")}}registerCommand(e){var t;if(e.name.length>dr)return{success:!1,info:"Command name should less then ".concat(dr,": ").concat(e.name)};if(!Jt[e.name]){this.thirdCommands[e.name]=e;let r=tr(e.helpInfo);return r||(r=e.helpDetails?"Run '".concat(e.name," -d' to view details"):"".concat(e.name," <args>.")),Jt[e.name]=r,(t=e.activate)==null||t.call(e,this.disk,this),{success:!0,info:"Register success"}}return{success:!1,info:"Command already exists ".concat(name)}}removeCommand(e){var t;if(e in this.thirdCommands){const r=this.thirdCommands[e];return delete this.thirdCommands[e],delete Jt[e],(t=r.dispose)==null||t.call(r),{success:!0,info:"Remove success"}}else if(e in Jt)return{success:!1,info:"Cannot remove built-in command: ".concat(e)};return{success:!1,info:"Command ".concat(e," not exists")}}async _loadCommands(){if(await this.disk.ready,!await this.disk.exist(lr))return;const e=await this.disk.ls(lr);if(!e)return;const t=ws();for(const r of e){const n=hr(r);if(await this.disk.isDir(n))continue;const a=await this.disk.readText(n);a&&t.add(this.installCommand._installFromText(a))}await t.run()}}class ye{constructor({container:e,title:t='Welcome to WebOS! Try running "help".\n',padding:r=10,enableSync:n=!1}={}){if(this.pwd="/",ye.instance)return ye.instance.disk._initSyncAlone(n),ye.instance;ye.instance=this;const a=new fa(n,{setPwd:o=>{this.pwd=o,this.term.setHeader(this.header)},clearTerminal:()=>{this.term.clearTerminal()},getHeader:()=>this.header,openEditor:({path:o,content:s,save:f})=>{this.term.edit(s,{title:"Edit ".concat(o,' ("').concat(bs()?"cmd":"ctrl",'+s" to save, "esc" to exit)')}).on("edit-done",p=>{f(p),this.term.newLine()})}});this.term=new ds({style:{padding:r},title:t,container:e,header:this.header}),this.commandProvider=a,this.term.on("enter",async o=>{if(!o){this.term.write(o);return}const s=await a.onCommand(o);typeof s=="string"&&(s?this.term.write(s):this.term.newLine())}),this.term.on("tab",async o=>{const s=o.substring(o.lastIndexOf(" ")+1),f=await this.commandProvider.onTab(s,o),{line:y,result:p}=f;y&&this.term.write(y,{clear:!1}),this.term.insertText(p)})}get disk(){return this.commandProvider.disk}get header(){return"".concat(this.pwd," admin$ ")}registerCommand(e){return e.term=this.term,this.commandProvider.registerCommand(e)}get removeCommand(){return this.commandProvider.removeCommand.bind(this.commandProvider)||(()=>{})}}function la(){const i=new ye({});i.registerCommand(Fn),window.os=i,i.disk.watch("/aa",{recursive:!0},(e,t)=>{console.trace("watch",e,t)})}la();window.initDisk=()=>{window.dd=new On({enableSync:!0})};export{da as __vite_legacy_guard};
